<!DOCTYPE html>
<html data-init="no-js">
<head>
<meta charset="UTF-8" />
<title>Dawn of Corruption</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<!--

SugarCube (v2.31.1): A free (gratis and libre) story format.

Copyright © 2013–2020 Thomas Michael Edwards <thomasmedwards@gmail.com>.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.
2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

-->
<script id="script-libraries" type="text/javascript">
if(document.head&&document.addEventListener&&document.querySelector&&Object.create&&Object.freeze&&JSON){document.documentElement.setAttribute("data-init", "loading");
/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
if("document" in self){if(!("classList" in document.createElement("_"))){(function(j){"use strict";if(!("Element" in j)){return}var a="classList",f="prototype",m=j.Element[f],b=Object,k=String[f].trim||function(){return this.replace(/^\s+|\s+$/g,"")},c=Array[f].indexOf||function(q){var p=0,o=this.length;for(;p<o;p++){if(p in this&&this[p]===q){return p}}return -1},n=function(o,p){this.name=o;this.code=DOMException[o];this.message=p},g=function(p,o){if(o===""){throw new n("SYNTAX_ERR","An invalid or illegal string was specified")}if(/\s/.test(o)){throw new n("INVALID_CHARACTER_ERR","String contains an invalid character")}return c.call(p,o)},d=function(s){var r=k.call(s.getAttribute("class")||""),q=r?r.split(/\s+/):[],p=0,o=q.length;for(;p<o;p++){this.push(q[p])}this._updateClassName=function(){s.setAttribute("class",this.toString())}},e=d[f]=[],i=function(){return new d(this)};n[f]=Error[f];e.item=function(o){return this[o]||null};e.contains=function(o){o+="";return g(this,o)!==-1};e.add=function(){var s=arguments,r=0,p=s.length,q,o=false;do{q=s[r]+"";if(g(this,q)===-1){this.push(q);o=true}}while(++r<p);if(o){this._updateClassName()}};e.remove=function(){var t=arguments,s=0,p=t.length,r,o=false,q;do{r=t[s]+"";q=g(this,r);while(q!==-1){this.splice(q,1);o=true;q=g(this,r)}}while(++s<p);if(o){this._updateClassName()}};e.toggle=function(p,q){p+="";var o=this.contains(p),r=o?q!==true&&"remove":q!==false&&"add";if(r){this[r](p)}if(q===true||q===false){return q}else{return !o}};e.toString=function(){return this.join(" ")};if(b.defineProperty){var l={get:i,enumerable:true,configurable:true};try{b.defineProperty(m,a,l)}catch(h){if(h.number===-2146823252){l.enumerable=false;b.defineProperty(m,a,l)}}}else{if(b[f].__defineGetter__){m.__defineGetter__(a,i)}}}(self))}else{(function(){var b=document.createElement("_");b.classList.add("c1","c2");if(!b.classList.contains("c2")){var c=function(e){var d=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(h){var g,f=arguments.length;for(g=0;g<f;g++){h=arguments[g];d.call(this,h)}}};c("add");c("remove")}b.classList.toggle("c3",false);if(b.classList.contains("c3")){var a=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(d,e){if(1 in arguments&&!this.contains(d)===!e){return e}else{return a.call(this,d)}}}b=null}())}};
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2015 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/v4.5.13/LICENSE
 */
(function(t,r){"use strict";if(typeof define==="function"&&define.amd){define(r)}else if(typeof exports==="object"){module.exports=r()}else{t.returnExports=r()}})(this,function(){var t=Array;var r=t.prototype;var e=Object;var n=e.prototype;var i=Function;var a=i.prototype;var o=String;var f=o.prototype;var u=Number;var l=u.prototype;var s=r.slice;var c=r.splice;var v=r.push;var h=r.unshift;var p=r.concat;var y=r.join;var d=a.call;var g=a.apply;var w=Math.max;var b=Math.min;var T=n.toString;var m=typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol";var D;var S=Function.prototype.toString,x=/^\s*class /,O=function isES6ClassFn(t){try{var r=S.call(t);var e=r.replace(/\/\/.*\n/g,"");var n=e.replace(/\/\*[.\s\S]*\*\//g,"");var i=n.replace(/\n/gm," ").replace(/ {2}/g," ");return x.test(i)}catch(a){return false}},E=function tryFunctionObject(t){try{if(O(t)){return false}S.call(t);return true}catch(r){return false}},j="[object Function]",I="[object GeneratorFunction]",D=function isCallable(t){if(!t){return false}if(typeof t!=="function"&&typeof t!=="object"){return false}if(m){return E(t)}if(O(t)){return false}var r=T.call(t);return r===j||r===I};var M;var U=RegExp.prototype.exec,$=function tryRegexExec(t){try{U.call(t);return true}catch(r){return false}},F="[object RegExp]";M=function isRegex(t){if(typeof t!=="object"){return false}return m?$(t):T.call(t)===F};var N;var C=String.prototype.valueOf,k=function tryStringObject(t){try{C.call(t);return true}catch(r){return false}},A="[object String]";N=function isString(t){if(typeof t==="string"){return true}if(typeof t!=="object"){return false}return m?k(t):T.call(t)===A};var R=e.defineProperty&&function(){try{var t={};e.defineProperty(t,"x",{enumerable:false,value:t});for(var r in t){return false}return t.x===t}catch(n){return false}}();var P=function(t){var r;if(R){r=function(t,r,n,i){if(!i&&r in t){return}e.defineProperty(t,r,{configurable:true,enumerable:false,writable:true,value:n})}}else{r=function(t,r,e,n){if(!n&&r in t){return}t[r]=e}}return function defineProperties(e,n,i){for(var a in n){if(t.call(n,a)){r(e,a,n[a],i)}}}}(n.hasOwnProperty);var J=function isPrimitive(t){var r=typeof t;return t===null||r!=="object"&&r!=="function"};var Y=u.isNaN||function isActualNaN(t){return t!==t};var z={ToInteger:function ToInteger(t){var r=+t;if(Y(r)){r=0}else if(r!==0&&r!==1/0&&r!==-(1/0)){r=(r>0||-1)*Math.floor(Math.abs(r))}return r},ToPrimitive:function ToPrimitive(t){var r,e,n;if(J(t)){return t}e=t.valueOf;if(D(e)){r=e.call(t);if(J(r)){return r}}n=t.toString;if(D(n)){r=n.call(t);if(J(r)){return r}}throw new TypeError},ToObject:function(t){if(t==null){throw new TypeError("can't convert "+t+" to object")}return e(t)},ToUint32:function ToUint32(t){return t>>>0}};var Z=function Empty(){};P(a,{bind:function bind(t){var r=this;if(!D(r)){throw new TypeError("Function.prototype.bind called on incompatible "+r)}var n=s.call(arguments,1);var a;var o=function(){if(this instanceof a){var i=g.call(r,this,p.call(n,s.call(arguments)));if(e(i)===i){return i}return this}else{return g.call(r,t,p.call(n,s.call(arguments)))}};var f=w(0,r.length-n.length);var u=[];for(var l=0;l<f;l++){v.call(u,"$"+l)}a=i("binder","return function ("+y.call(u,",")+"){ return binder.apply(this, arguments); }")(o);if(r.prototype){Z.prototype=r.prototype;a.prototype=new Z;Z.prototype=null}return a}});var G=d.bind(n.hasOwnProperty);var H=d.bind(n.toString);var W=d.bind(s);var B=g.bind(s);if(typeof document==="object"&&document&&document.documentElement){try{W(document.documentElement.childNodes)}catch(X){var L=W;var q=B;W=function arraySliceIE(t){var r=[];var e=t.length;while(e-- >0){r[e]=t[e]}return q(r,L(arguments,1))};B=function arraySliceApplyIE(t,r){return q(W(t),r)}}}var K=d.bind(f.slice);var Q=d.bind(f.split);var V=d.bind(f.indexOf);var _=d.bind(v);var tt=d.bind(n.propertyIsEnumerable);var rt=d.bind(r.sort);var et=t.isArray||function isArray(t){return H(t)==="[object Array]"};var nt=[].unshift(0)!==1;P(r,{unshift:function(){h.apply(this,arguments);return this.length}},nt);P(t,{isArray:et});var it=e("a");var at=it[0]!=="a"||!(0 in it);var ot=function properlyBoxed(t){var r=true;var e=true;var n=false;if(t){try{t.call("foo",function(t,e,n){if(typeof n!=="object"){r=false}});t.call([1],function(){"use strict";e=typeof this==="string"},"x")}catch(i){n=true}}return!!t&&!n&&r&&e};P(r,{forEach:function forEach(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=-1;var i=z.ToUint32(e.length);var a;if(arguments.length>1){a=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.forEach callback must be a function")}while(++n<i){if(n in e){if(typeof a==="undefined"){t(e[n],n,r)}else{t.call(a,e[n],n,r)}}}}},!ot(r.forEach));P(r,{map:function map(r){var e=z.ToObject(this);var n=at&&N(this)?Q(this,""):e;var i=z.ToUint32(n.length);var a=t(i);var o;if(arguments.length>1){o=arguments[1]}if(!D(r)){throw new TypeError("Array.prototype.map callback must be a function")}for(var f=0;f<i;f++){if(f in n){if(typeof o==="undefined"){a[f]=r(n[f],f,e)}else{a[f]=r.call(o,n[f],f,e)}}}return a}},!ot(r.map));P(r,{filter:function filter(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i=[];var a;var o;if(arguments.length>1){o=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.filter callback must be a function")}for(var f=0;f<n;f++){if(f in e){a=e[f];if(typeof o==="undefined"?t(a,f,r):t.call(o,a,f,r)){_(i,a)}}}return i}},!ot(r.filter));P(r,{every:function every(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.every callback must be a function")}for(var a=0;a<n;a++){if(a in e&&!(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return false}}return true}},!ot(r.every));P(r,{some:function some(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.some callback must be a function")}for(var a=0;a<n;a++){if(a in e&&(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return true}}return false}},!ot(r.some));var ft=false;if(r.reduce){ft=typeof r.reduce.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduce:function reduce(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduce callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduce of empty array with no initial value")}var i=0;var a;if(arguments.length>=2){a=arguments[1]}else{do{if(i in e){a=e[i++];break}if(++i>=n){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;i<n;i++){if(i in e){a=t(a,e[i],i,r)}}return a}},!ft);var ut=false;if(r.reduceRight){ut=typeof r.reduceRight.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduceRight:function reduceRight(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduceRight callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduceRight of empty array with no initial value")}var i;var a=n-1;if(arguments.length>=2){i=arguments[1]}else{do{if(a in e){i=e[a--];break}if(--a<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}if(a<0){return i}do{if(a in e){i=t(i,e[a],a,r)}}while(a--);return i}},!ut);var lt=r.indexOf&&[0,1].indexOf(1,2)!==-1;P(r,{indexOf:function indexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=0;if(arguments.length>1){n=z.ToInteger(arguments[1])}n=n>=0?n:w(0,e+n);for(;n<e;n++){if(n in r&&r[n]===t){return n}}return-1}},lt);var st=r.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;P(r,{lastIndexOf:function lastIndexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=e-1;if(arguments.length>1){n=b(n,z.ToInteger(arguments[1]))}n=n>=0?n:e-Math.abs(n);for(;n>=0;n--){if(n in r&&t===r[n]){return n}}return-1}},st);var ct=function(){var t=[1,2];var r=t.splice();return t.length===2&&et(r)&&r.length===0}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}else{return c.apply(this,arguments)}}},!ct);var vt=function(){var t={};r.splice.call(t,0,0,1);return t.length===1}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}var e=arguments;this.length=w(z.ToInteger(this.length),0);if(arguments.length>0&&typeof r!=="number"){e=W(arguments);if(e.length<2){_(e,this.length-t)}else{e[1]=z.ToInteger(r)}}return c.apply(this,e)}},!vt);var ht=function(){var r=new t(1e5);r[8]="x";r.splice(1,1);return r.indexOf("x")===7}();var pt=function(){var t=256;var r=[];r[t]="a";r.splice(t+1,0,"b");return r[t]==="a"}();P(r,{splice:function splice(t,r){var e=z.ToObject(this);var n=[];var i=z.ToUint32(e.length);var a=z.ToInteger(t);var f=a<0?w(i+a,0):b(a,i);var u=b(w(z.ToInteger(r),0),i-f);var l=0;var s;while(l<u){s=o(f+l);if(G(e,s)){n[l]=e[s]}l+=1}var c=W(arguments,2);var v=c.length;var h;if(v<u){l=f;var p=i-u;while(l<p){s=o(l+u);h=o(l+v);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l+=1}l=i;var y=i-u+v;while(l>y){delete e[l-1];l-=1}}else if(v>u){l=i-u;while(l>f){s=o(l+u-1);h=o(l+v-1);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l-=1}}l=f;for(var d=0;d<c.length;++d){e[l]=c[d];l+=1}e.length=i-u+v;return n}},!ht||!pt);var yt=r.join;var dt;try{dt=Array.prototype.join.call("123",",")!=="1,2,3"}catch(X){dt=true}if(dt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(N(this)?Q(this,""):this,r)}},dt)}var gt=[1,2].join(undefined)!=="1,2";if(gt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(this,r)}},gt)}var wt=function push(t){var r=z.ToObject(this);var e=z.ToUint32(r.length);var n=0;while(n<arguments.length){r[e+n]=arguments[n];n+=1}r.length=e+n;return e+n};var bt=function(){var t={};var r=Array.prototype.push.call(t,undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:function push(t){if(et(this)){return v.apply(this,arguments)}return wt.apply(this,arguments)}},bt);var Tt=function(){var t=[];var r=t.push(undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:wt},Tt);P(r,{slice:function(t,r){var e=N(this)?Q(this,""):this;return B(e,arguments)}},at);var mt=function(){try{[1,2].sort(null)}catch(t){try{[1,2].sort({})}catch(r){return false}}return true}();var Dt=function(){try{[1,2].sort(/a/);return false}catch(t){}return true}();var St=function(){try{[1,2].sort(undefined);return true}catch(t){}return false}();P(r,{sort:function sort(t){if(typeof t==="undefined"){return rt(this)}if(!D(t)){throw new TypeError("Array.prototype.sort callback must be a function")}return rt(this,t)}},mt||!St||!Dt);var xt=!tt({toString:null},"toString");var Ot=tt(function(){},"prototype");var Et=!G("x","0");var jt=function(t){var r=t.constructor;return r&&r.prototype===t};var It={$applicationCache:true,$console:true,$external:true,$frame:true,$frameElement:true,$frames:true,$innerHeight:true,$innerWidth:true,$onmozfullscreenchange:true,$onmozfullscreenerror:true,$outerHeight:true,$outerWidth:true,$pageXOffset:true,$pageYOffset:true,$parent:true,$scrollLeft:true,$scrollTop:true,$scrollX:true,$scrollY:true,$self:true,$webkitIndexedDB:true,$webkitStorageInfo:true,$window:true,$width:true,$height:true,$top:true,$localStorage:true};var Mt=function(){if(typeof window==="undefined"){return false}for(var t in window){try{if(!It["$"+t]&&G(window,t)&&window[t]!==null&&typeof window[t]==="object"){jt(window[t])}}catch(r){return true}}return false}();var Ut=function(t){if(typeof window==="undefined"||!Mt){return jt(t)}try{return jt(t)}catch(r){return false}};var $t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var Ft=$t.length;var Nt=function isArguments(t){return H(t)==="[object Arguments]"};var Ct=function isArguments(t){return t!==null&&typeof t==="object"&&typeof t.length==="number"&&t.length>=0&&!et(t)&&D(t.callee)};var kt=Nt(arguments)?Nt:Ct;P(e,{keys:function keys(t){var r=D(t);var e=kt(t);var n=t!==null&&typeof t==="object";var i=n&&N(t);if(!n&&!r&&!e){throw new TypeError("Object.keys called on a non-object")}var a=[];var f=Ot&&r;if(i&&Et||e){for(var u=0;u<t.length;++u){_(a,o(u))}}if(!e){for(var l in t){if(!(f&&l==="prototype")&&G(t,l)){_(a,o(l))}}}if(xt){var s=Ut(t);for(var c=0;c<Ft;c++){var v=$t[c];if(!(s&&v==="constructor")&&G(t,v)){_(a,v)}}}return a}});var At=e.keys&&function(){return e.keys(arguments).length===2}(1,2);var Rt=e.keys&&function(){var t=e.keys(arguments);return arguments.length!==1||t.length!==1||t[0]!==1}(1);var Pt=e.keys;P(e,{keys:function keys(t){if(kt(t)){return Pt(W(t))}else{return Pt(t)}}},!At||Rt);var Jt=new Date(-0xc782b5b342b24).getUTCMonth()!==0;var Yt=new Date(-0x55d318d56a724);var zt=new Date(14496624e5);var Zt=Yt.toUTCString()!=="Mon, 01 Jan -45875 11:59:59 GMT";var Gt;var Ht;var Wt=Yt.getTimezoneOffset();if(Wt<-720){Gt=Yt.toDateString()!=="Tue Jan 02 -45875";Ht=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}else{Gt=Yt.toDateString()!=="Mon Jan 01 -45875";Ht=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}var Bt=d.bind(Date.prototype.getFullYear);var Xt=d.bind(Date.prototype.getMonth);var Lt=d.bind(Date.prototype.getDate);var qt=d.bind(Date.prototype.getUTCFullYear);var Kt=d.bind(Date.prototype.getUTCMonth);var Qt=d.bind(Date.prototype.getUTCDate);var Vt=d.bind(Date.prototype.getUTCDay);var _t=d.bind(Date.prototype.getUTCHours);var tr=d.bind(Date.prototype.getUTCMinutes);var rr=d.bind(Date.prototype.getUTCSeconds);var er=d.bind(Date.prototype.getUTCMilliseconds);var nr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var ir=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var ar=function daysInMonth(t,r){return Lt(new Date(r,t,0))};P(Date.prototype,{getFullYear:function getFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);if(t<0&&Xt(this)>11){return t+1}return t},getMonth:function getMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);if(t<0&&r>11){return 0}return r},getDate:function getDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);var e=Lt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e},getUTCFullYear:function getUTCFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);if(t<0&&Kt(this)>11){return t+1}return t},getUTCMonth:function getUTCMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);if(t<0&&r>11){return 0}return r},getUTCDate:function getUTCDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);var e=Qt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e}},Jt);P(Date.prototype,{toUTCString:function toUTCString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Vt(this);var r=Qt(this);var e=Kt(this);var n=qt(this);var i=_t(this);var a=tr(this);var o=rr(this);return nr[t]+", "+(r<10?"0"+r:r)+" "+ir[e]+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"}},Jt||Zt);P(Date.prototype,{toDateString:function toDateString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n}},Jt||Gt);if(Jt||Ht){Date.prototype.toString=function toString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();var i=this.getHours();var a=this.getMinutes();var o=this.getSeconds();var f=this.getTimezoneOffset();var u=Math.floor(Math.abs(f)/60);var l=Math.floor(Math.abs(f)%60);return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"+(f>0?"-":"+")+(u<10?"0"+u:u)+(l<10?"0"+l:l)};if(R){e.defineProperty(Date.prototype,"toString",{configurable:true,enumerable:false,writable:true})}}var or=-621987552e5;var fr="-000001";var ur=Date.prototype.toISOString&&new Date(or).toISOString().indexOf(fr)===-1;var lr=Date.prototype.toISOString&&new Date(-1).toISOString()!=="1969-12-31T23:59:59.999Z";var sr=d.bind(Date.prototype.getTime);P(Date.prototype,{toISOString:function toISOString(){if(!isFinite(this)||!isFinite(sr(this))){throw new RangeError("Date.prototype.toISOString called on non-finite value.")}var t=qt(this);var r=Kt(this);t+=Math.floor(r/12);r=(r%12+12)%12;var e=[r+1,Qt(this),_t(this),tr(this),rr(this)];t=(t<0?"-":t>9999?"+":"")+K("00000"+Math.abs(t),0<=t&&t<=9999?-4:-6);for(var n=0;n<e.length;++n){e[n]=K("00"+e[n],-2)}return t+"-"+W(e,0,2).join("-")+"T"+W(e,2).join(":")+"."+K("000"+er(this),-3)+"Z"}},ur||lr);var cr=function(){try{return Date.prototype.toJSON&&new Date(NaN).toJSON()===null&&new Date(or).toJSON().indexOf(fr)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return true}})}catch(t){return false}}();if(!cr){Date.prototype.toJSON=function toJSON(t){var r=e(this);var n=z.ToPrimitive(r);if(typeof n==="number"&&!isFinite(n)){return null}var i=r.toISOString;if(!D(i)){throw new TypeError("toISOString property is not callable")}return i.call(r)}}var vr=Date.parse("+033658-09-27T01:46:40.000Z")===1e15;var hr=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));var pr=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(pr||hr||!vr){var yr=Math.pow(2,31)-1;var dr=Y(new Date(1970,0,1,0,0,0,yr+1).getTime());Date=function(t){var r=function Date(e,n,i,a,f,u,l){var s=arguments.length;var c;if(this instanceof t){var v=u;var h=l;if(dr&&s>=7&&l>yr){var p=Math.floor(l/yr)*yr;var y=Math.floor(p/1e3);v+=y;h-=y*1e3}c=s===1&&o(e)===e?new t(r.parse(e)):s>=7?new t(e,n,i,a,f,v,h):s>=6?new t(e,n,i,a,f,v):s>=5?new t(e,n,i,a,f):s>=4?new t(e,n,i,a):s>=3?new t(e,n,i):s>=2?new t(e,n):s>=1?new t(e instanceof t?+e:e):new t}else{c=t.apply(this,arguments)}if(!J(c)){P(c,{constructor:r},true)}return c};var e=new RegExp("^"+"(\\d{4}|[+-]\\d{6})"+"(?:-(\\d{2})"+"(?:-(\\d{2})"+"(?:"+"T(\\d{2})"+":(\\d{2})"+"(?:"+":(\\d{2})"+"(?:(\\.\\d{1,}))?"+")?"+"("+"Z|"+"(?:"+"([-+])"+"(\\d{2})"+":(\\d{2})"+")"+")?)?)?)?"+"$");var n=[0,31,59,90,120,151,181,212,243,273,304,334,365];var i=function dayFromMonth(t,r){var e=r>1?1:0;return n[r]+Math.floor((t-1969+e)/4)-Math.floor((t-1901+e)/100)+Math.floor((t-1601+e)/400)+365*(t-1970)};var a=function toUTC(r){var e=0;var n=r;if(dr&&n>yr){var i=Math.floor(n/yr)*yr;var a=Math.floor(i/1e3);e+=a;n-=a*1e3}return u(new t(1970,0,1,0,0,e,n))};for(var f in t){if(G(t,f)){r[f]=t[f]}}P(r,{now:t.now,UTC:t.UTC},true);r.prototype=t.prototype;P(r.prototype,{constructor:r},true);var l=function parse(r){var n=e.exec(r);if(n){var o=u(n[1]),f=u(n[2]||1)-1,l=u(n[3]||1)-1,s=u(n[4]||0),c=u(n[5]||0),v=u(n[6]||0),h=Math.floor(u(n[7]||0)*1e3),p=Boolean(n[4]&&!n[8]),y=n[9]==="-"?1:-1,d=u(n[10]||0),g=u(n[11]||0),w;var b=c>0||v>0||h>0;if(s<(b?24:25)&&c<60&&v<60&&h<1e3&&f>-1&&f<12&&d<24&&g<60&&l>-1&&l<i(o,f+1)-i(o,f)){w=((i(o,f)+l)*24+s+d*y)*60;w=((w+c+g*y)*60+v)*1e3+h;if(p){w=a(w)}if(-864e13<=w&&w<=864e13){return w}}return NaN}return t.parse.apply(this,arguments)};P(r,{parse:l});return r}(Date)}if(!Date.now){Date.now=function now(){return(new Date).getTime()}}var gr=l.toFixed&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||(1000000000000000128).toFixed(0)!=="1000000000000000128");var wr={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function multiply(t,r){var e=-1;var n=r;while(++e<wr.size){n+=t*wr.data[e];wr.data[e]=n%wr.base;n=Math.floor(n/wr.base)}},divide:function divide(t){var r=wr.size;var e=0;while(--r>=0){e+=wr.data[r];wr.data[r]=Math.floor(e/t);e=e%t*wr.base}},numToString:function numToString(){var t=wr.size;var r="";while(--t>=0){if(r!==""||t===0||wr.data[t]!==0){var e=o(wr.data[t]);if(r===""){r=e}else{r+=K("0000000",0,7-e.length)+e}}}return r},pow:function pow(t,r,e){return r===0?e:r%2===1?pow(t,r-1,e*t):pow(t*t,r/2,e)},log:function log(t){var r=0;var e=t;while(e>=4096){r+=12;e/=4096}while(e>=2){r+=1;e/=2}return r}};var br=function toFixed(t){var r,e,n,i,a,f,l,s;r=u(t);r=Y(r)?0:Math.floor(r);if(r<0||r>20){throw new RangeError("Number.toFixed called with invalid number of decimals")}e=u(this);if(Y(e)){return"NaN"}if(e<=-1e21||e>=1e21){return o(e)}n="";if(e<0){n="-";e=-e}i="0";if(e>1e-21){a=wr.log(e*wr.pow(2,69,1))-69;f=a<0?e*wr.pow(2,-a,1):e/wr.pow(2,a,1);f*=4503599627370496;a=52-a;if(a>0){wr.multiply(0,f);l=r;while(l>=7){wr.multiply(1e7,0);l-=7}wr.multiply(wr.pow(10,l,1),0);l=a-1;while(l>=23){wr.divide(1<<23);l-=23}wr.divide(1<<l);wr.multiply(1,1);wr.divide(2);i=wr.numToString()}else{wr.multiply(0,f);wr.multiply(1<<-a,0);i=wr.numToString()+K("0.00000000000000000000",2,2+r)}}if(r>0){s=i.length;if(s<=r){i=n+K("0.0000000000000000000",0,r-s+2)+i}else{i=n+K(i,0,s-r)+"."+K(i,s-r)}}else{i=n+i}return i};P(l,{toFixed:br},gr);var Tr=function(){try{return 1..toPrecision(undefined)==="1"}catch(t){return true}}();var mr=l.toPrecision;P(l,{toPrecision:function toPrecision(t){return typeof t==="undefined"?mr.call(this):mr.call(this,t)}},Tr);if("ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1){(function(){var t=typeof/()??/.exec("")[1]==="undefined";var r=Math.pow(2,32)-1;f.split=function(e,n){var i=String(this);if(typeof e==="undefined"&&n===0){return[]}if(!M(e)){return Q(this,e,n)}var a=[];var o=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,u,l,s,c;var h=new RegExp(e.source,o+"g");if(!t){u=new RegExp("^"+h.source+"$(?!\\s)",o)}var p=typeof n==="undefined"?r:z.ToUint32(n);l=h.exec(i);while(l){s=l.index+l[0].length;if(s>f){_(a,K(i,f,l.index));if(!t&&l.length>1){l[0].replace(u,function(){for(var t=1;t<arguments.length-2;t++){if(typeof arguments[t]==="undefined"){l[t]=void 0}}})}if(l.length>1&&l.index<i.length){v.apply(a,W(l,1))}c=l[0].length;f=s;if(a.length>=p){break}}if(h.lastIndex===l.index){h.lastIndex++}l=h.exec(i)}if(f===i.length){if(c||!h.test("")){_(a,"")}}else{_(a,K(i,f))}return a.length>p?W(a,0,p):a}})()}else if("0".split(void 0,0).length){f.split=function split(t,r){if(typeof t==="undefined"&&r===0){return[]}return Q(this,t,r)}}var Dr=f.replace;var Sr=function(){var t=[];"x".replace(/x(.)?/g,function(r,e){_(t,e)});return t.length===1&&typeof t[0]==="undefined"}();if(!Sr){f.replace=function replace(t,r){var e=D(r);var n=M(t)&&/\)[*?]/.test(t.source);if(!e||!n){return Dr.call(this,t,r)}else{var i=function(e){var n=arguments.length;var i=t.lastIndex;t.lastIndex=0;var a=t.exec(e)||[];t.lastIndex=i;_(a,arguments[n-2],arguments[n-1]);return r.apply(this,a)};return Dr.call(this,t,i)}}}var xr=f.substr;var Or="".substr&&"0b".substr(-1)!=="b";P(f,{substr:function substr(t,r){var e=t;if(t<0){e=w(this.length+t,0)}return xr.call(this,e,r)}},Or);var Er="\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003"+"\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028"+"\u2029\ufeff";var jr="\u200b";var Ir="["+Er+"]";var Mr=new RegExp("^"+Ir+Ir+"*");var Ur=new RegExp(Ir+Ir+"*$");var $r=f.trim&&(Er.trim()||!jr.trim());P(f,{trim:function trim(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}return o(this).replace(Mr,"").replace(Ur,"")}},$r);var Fr=d.bind(String.prototype.trim);var Nr=f.lastIndexOf&&"abc\u3042\u3044".lastIndexOf("\u3042\u3044",2)!==-1;P(f,{lastIndexOf:function lastIndexOf(t){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var r=o(this);var e=o(t);var n=arguments.length>1?u(arguments[1]):NaN;var i=Y(n)?Infinity:z.ToInteger(n);var a=b(w(i,0),r.length);var f=e.length;var l=a+f;while(l>0){l=w(0,l-f);var s=V(K(r,l,a+f),e);if(s!==-1){return l+s}}return-1}},Nr);var Cr=f.lastIndexOf;P(f,{lastIndexOf:function lastIndexOf(t){return Cr.apply(this,arguments)}},f.lastIndexOf.length!==1);if(parseInt(Er+"08")!==8||parseInt(Er+"0x16")!==22){parseInt=function(t){var r=/^[-+]?0[xX]/;return function parseInt(e,n){if(typeof e==="symbol"){""+e}var i=Fr(String(e));var a=u(n)||(r.test(i)?16:10);return t(i,a)}}(parseInt)}if(1/parseFloat("-0")!==-Infinity){parseFloat=function(t){return function parseFloat(r){var e=Fr(String(r));var n=t(e);return n===0&&K(e,0,1)==="-"?-0:n}}(parseFloat)}if(String(new RangeError("test"))!=="RangeError: test"){var kr=function toString(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var t=this.name;if(typeof t==="undefined"){t="Error"}else if(typeof t!=="string"){t=o(t)}var r=this.message;if(typeof r==="undefined"){r=""}else if(typeof r!=="string"){r=o(r)}if(!t){return r}if(!r){return t}return t+": "+r};Error.prototype.toString=kr}if(R){var Ar=function(t,r){if(tt(t,r)){var e=Object.getOwnPropertyDescriptor(t,r);if(e.configurable){e.enumerable=false;Object.defineProperty(t,r,e)}}};Ar(Error.prototype,"message");if(Error.prototype.message!==""){Error.prototype.message=""}Ar(Error.prototype,"name")}if(String(/a/gim)!=="/a/gim"){var Rr=function toString(){var t="/"+this.source+"/";if(this.global){t+="g"}if(this.ignoreCase){t+="i"}if(this.multiline){t+="m"}return t};RegExp.prototype.toString=Rr}});
//# sourceMappingURL=es5-shim.map
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.4/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */
(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.returnExports=t()}})(this,function(){"use strict";var e=Function.call.bind(Function.apply);var t=Function.call.bind(Function.call);var r=Array.isArray;var n=Object.keys;var o=function notThunker(t){return function notThunk(){return!e(t,this,arguments)}};var i=function(e){try{e();return false}catch(t){return true}};var a=function valueOrFalseIfThrows(e){try{return e()}catch(t){return false}};var u=o(i);var f=function(){return!i(function(){return Object.defineProperty({},"x",{get:function(){}})})};var s=!!Object.defineProperty&&f();var c=function foo(){}.name==="foo";var l=Function.call.bind(Array.prototype.forEach);var p=Function.call.bind(Array.prototype.reduce);var v=Function.call.bind(Array.prototype.filter);var y=Function.call.bind(Array.prototype.some);var h=function(e,t,r,n){if(!n&&t in e){return}if(s){Object.defineProperty(e,t,{configurable:true,enumerable:false,writable:true,value:r})}else{e[t]=r}};var b=function(e,t,r){l(n(t),function(n){var o=t[n];h(e,n,o,!!r)})};var g=Function.call.bind(Object.prototype.toString);var d=typeof/abc/==="function"?function IsCallableSlow(e){return typeof e==="function"&&g(e)==="[object Function]"}:function IsCallableFast(e){return typeof e==="function"};var m={getter:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}Object.defineProperty(e,t,{configurable:true,enumerable:false,get:r})},proxy:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,{configurable:n.configurable,enumerable:n.enumerable,get:function getKey(){return e[t]},set:function setKey(r){e[t]=r}})},redefine:function(e,t,r){if(s){var n=Object.getOwnPropertyDescriptor(e,t);n.value=r;Object.defineProperty(e,t,n)}else{e[t]=r}},defineByDescriptor:function(e,t,r){if(s){Object.defineProperty(e,t,r)}else if("value"in r){e[t]=r.value}},preserveToString:function(e,t){if(t&&d(t.toString)){h(e,"toString",t.toString.bind(t),true)}}};var O=Object.create||function(e,t){var r=function Prototype(){};r.prototype=e;var o=new r;if(typeof t!=="undefined"){n(t).forEach(function(e){m.defineByDescriptor(o,e,t[e])})}return o};var w=function(e,t){if(!Object.setPrototypeOf){return false}return a(function(){var r=function Subclass(t){var r=new e(t);Object.setPrototypeOf(r,Subclass.prototype);return r};Object.setPrototypeOf(r,e);r.prototype=O(e.prototype,{constructor:{value:r}});return t(r)})};var j=function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")};var S=j();var T=S.isFinite;var I=Function.call.bind(String.prototype.indexOf);var E=Function.apply.bind(Array.prototype.indexOf);var P=Function.call.bind(Array.prototype.concat);var C=Function.call.bind(String.prototype.slice);var M=Function.call.bind(Array.prototype.push);var x=Function.apply.bind(Array.prototype.push);var N=Function.call.bind(Array.prototype.shift);var A=Math.max;var R=Math.min;var _=Math.floor;var k=Math.abs;var L=Math.exp;var F=Math.log;var D=Math.sqrt;var z=Function.call.bind(Object.prototype.hasOwnProperty);var q;var W=function(){};var G=S.Map;var H=G&&G.prototype["delete"];var V=G&&G.prototype.get;var B=G&&G.prototype.has;var U=G&&G.prototype.set;var $=S.Symbol||{};var J=$.species||"@@species";var X=Number.isNaN||function isNaN(e){return e!==e};var K=Number.isFinite||function isFinite(e){return typeof e==="number"&&T(e)};var Z=d(Math.sign)?Math.sign:function sign(e){var t=Number(e);if(t===0){return t}if(X(t)){return t}return t<0?-1:1};var Y=function log1p(e){var t=Number(e);if(t<-1||X(t)){return NaN}if(t===0||t===Infinity){return t}if(t===-1){return-Infinity}return 1+t-1===0?t:t*(F(1+t)/(1+t-1))};var Q=function isArguments(e){return g(e)==="[object Arguments]"};var ee=function isArguments(e){return e!==null&&typeof e==="object"&&typeof e.length==="number"&&e.length>=0&&g(e)!=="[object Array]"&&g(e.callee)==="[object Function]"};var te=Q(arguments)?Q:ee;var re={primitive:function(e){return e===null||typeof e!=="function"&&typeof e!=="object"},string:function(e){return g(e)==="[object String]"},regex:function(e){return g(e)==="[object RegExp]"},symbol:function(e){return typeof S.Symbol==="function"&&typeof e==="symbol"}};var ne=function overrideNative(e,t,r){var n=e[t];h(e,t,r,true);m.preserveToString(e[t],n)};var oe=typeof $==="function"&&typeof $["for"]==="function"&&re.symbol($());var ie=re.symbol($.iterator)?$.iterator:"_es6-shim iterator_";if(S.Set&&typeof(new S.Set)["@@iterator"]==="function"){ie="@@iterator"}if(!S.Reflect){h(S,"Reflect",{},true)}var ae=S.Reflect;var ue=String;var fe=typeof document==="undefined"||!document?null:document.all;var se=fe==null?function isNullOrUndefined(e){return e==null}:function isNullOrUndefinedAndNotDocumentAll(e){return e==null&&e!==fe};var ce={Call:function Call(t,r){var n=arguments.length>2?arguments[2]:[];if(!ce.IsCallable(t)){throw new TypeError(t+" is not a function")}return e(t,r,n)},RequireObjectCoercible:function(e,t){if(se(e)){throw new TypeError(t||"Cannot call method on "+e)}return e},TypeIsObject:function(e){if(e===void 0||e===null||e===true||e===false){return false}return typeof e==="function"||typeof e==="object"||e===fe},ToObject:function(e,t){return Object(ce.RequireObjectCoercible(e,t))},IsCallable:d,IsConstructor:function(e){return ce.IsCallable(e)},ToInt32:function(e){return ce.ToNumber(e)>>0},ToUint32:function(e){return ce.ToNumber(e)>>>0},ToNumber:function(e){if(g(e)==="[object Symbol]"){throw new TypeError("Cannot convert a Symbol value to a number")}return+e},ToInteger:function(e){var t=ce.ToNumber(e);if(X(t)){return 0}if(t===0||!K(t)){return t}return(t>0?1:-1)*_(k(t))},ToLength:function(e){var t=ce.ToInteger(e);if(t<=0){return 0}if(t>Number.MAX_SAFE_INTEGER){return Number.MAX_SAFE_INTEGER}return t},SameValue:function(e,t){if(e===t){if(e===0){return 1/e===1/t}return true}return X(e)&&X(t)},SameValueZero:function(e,t){return e===t||X(e)&&X(t)},IsIterable:function(e){return ce.TypeIsObject(e)&&(typeof e[ie]!=="undefined"||te(e))},GetIterator:function(e){if(te(e)){return new q(e,"value")}var t=ce.GetMethod(e,ie);if(!ce.IsCallable(t)){throw new TypeError("value is not an iterable")}var r=ce.Call(t,e);if(!ce.TypeIsObject(r)){throw new TypeError("bad iterator")}return r},GetMethod:function(e,t){var r=ce.ToObject(e)[t];if(se(r)){return void 0}if(!ce.IsCallable(r)){throw new TypeError("Method not callable: "+t)}return r},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var r=ce.GetMethod(e,"return");if(r===void 0){return}var n,o;try{n=ce.Call(r,e)}catch(i){o=i}if(t){return}if(o){throw o}if(!ce.TypeIsObject(n)){throw new TypeError("Iterator's return method returned a non-object.")}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!ce.TypeIsObject(t)){throw new TypeError("bad iterator")}return t},IteratorStep:function(e){var t=ce.IteratorNext(e);var r=ce.IteratorComplete(t);return r?false:t},Construct:function(e,t,r,n){var o=typeof r==="undefined"?e:r;if(!n&&ae.construct){return ae.construct(e,t,o)}var i=o.prototype;if(!ce.TypeIsObject(i)){i=Object.prototype}var a=O(i);var u=ce.Call(e,a,t);return ce.TypeIsObject(u)?u:a},SpeciesConstructor:function(e,t){var r=e.constructor;if(r===void 0){return t}if(!ce.TypeIsObject(r)){throw new TypeError("Bad constructor")}var n=r[J];if(se(n)){return t}if(!ce.IsConstructor(n)){throw new TypeError("Bad @@species")}return n},CreateHTML:function(e,t,r,n){var o=ce.ToString(e);var i="<"+t;if(r!==""){var a=ce.ToString(n);var u=a.replace(/"/g,"&quot;");i+=" "+r+'="'+u+'"'}var f=i+">";var s=f+o;return s+"</"+t+">"},IsRegExp:function IsRegExp(e){if(!ce.TypeIsObject(e)){return false}var t=e[$.match];if(typeof t!=="undefined"){return!!t}return re.regex(e)},ToString:function ToString(e){return ue(e)}};if(s&&oe){var le=function defineWellKnownSymbol(e){if(re.symbol($[e])){return $[e]}var t=$["for"]("Symbol."+e);Object.defineProperty($,e,{configurable:false,enumerable:false,writable:false,value:t});return t};if(!re.symbol($.search)){var pe=le("search");var ve=String.prototype.search;h(RegExp.prototype,pe,function search(e){return ce.Call(ve,e,[this])});var ye=function search(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,pe);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(ve,t,[ce.ToString(e)])};ne(String.prototype,"search",ye)}if(!re.symbol($.replace)){var he=le("replace");var be=String.prototype.replace;h(RegExp.prototype,he,function replace(e,t){return ce.Call(be,e,[this,t])});var ge=function replace(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,he);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(be,r,[ce.ToString(e),t])};ne(String.prototype,"replace",ge)}if(!re.symbol($.split)){var de=le("split");var me=String.prototype.split;h(RegExp.prototype,de,function split(e,t){return ce.Call(me,e,[this,t])});var Oe=function split(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,de);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(me,r,[ce.ToString(e),t])};ne(String.prototype,"split",Oe)}var we=re.symbol($.match);var je=we&&function(){var e={};e[$.match]=function(){return 42};return"a".match(e)!==42}();if(!we||je){var Se=le("match");var Te=String.prototype.match;h(RegExp.prototype,Se,function match(e){return ce.Call(Te,e,[this])});var Ie=function match(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,Se);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(Te,t,[ce.ToString(e)])};ne(String.prototype,"match",Ie)}}var Ee=function wrapConstructor(e,t,r){m.preserveToString(t,e);if(Object.setPrototypeOf){Object.setPrototypeOf(e,t)}if(s){l(Object.getOwnPropertyNames(e),function(n){if(n in W||r[n]){return}m.proxy(e,n,t)})}else{l(Object.keys(e),function(n){if(n in W||r[n]){return}t[n]=e[n]})}t.prototype=e.prototype;m.redefine(e.prototype,"constructor",t)};var Pe=function(){return this};var Ce=function(e){if(s&&!z(e,J)){m.getter(e,J,Pe)}};var Me=function(e,t){var r=t||function iterator(){return this};h(e,ie,r);if(!e[ie]&&re.symbol(ie)){e[ie]=r}};var xe=function createDataProperty(e,t,r){if(s){Object.defineProperty(e,t,{configurable:true,enumerable:true,writable:true,value:r})}else{e[t]=r}};var Ne=function createDataPropertyOrThrow(e,t,r){xe(e,t,r);if(!ce.SameValue(e[t],r)){throw new TypeError("property is nonconfigurable")}};var Ae=function(e,t,r,n){if(!ce.TypeIsObject(e)){throw new TypeError("Constructor requires `new`: "+t.name)}var o=t.prototype;if(!ce.TypeIsObject(o)){o=r}var i=O(o);for(var a in n){if(z(n,a)){var u=n[a];h(i,a,u,true)}}return i};if(String.fromCodePoint&&String.fromCodePoint.length!==1){var Re=String.fromCodePoint;ne(String,"fromCodePoint",function fromCodePoint(e){return ce.Call(Re,this,arguments)})}var _e={fromCodePoint:function fromCodePoint(e){var t=[];var r;for(var n=0,o=arguments.length;n<o;n++){r=Number(arguments[n]);if(!ce.SameValue(r,ce.ToInteger(r))||r<0||r>1114111){throw new RangeError("Invalid code point "+r)}if(r<65536){M(t,String.fromCharCode(r))}else{r-=65536;M(t,String.fromCharCode((r>>10)+55296));M(t,String.fromCharCode(r%1024+56320))}}return t.join("")},raw:function raw(e){var t=ce.ToObject(e,"bad callSite");var r=ce.ToObject(t.raw,"bad raw value");var n=r.length;var o=ce.ToLength(n);if(o<=0){return""}var i=[];var a=0;var u,f,s,c;while(a<o){u=ce.ToString(a);s=ce.ToString(r[u]);M(i,s);if(a+1>=o){break}f=a+1<arguments.length?arguments[a+1]:"";c=ce.ToString(f);M(i,c);a+=1}return i.join("")}};if(String.raw&&String.raw({raw:{0:"x",1:"y",length:2}})!=="xy"){ne(String,"raw",_e.raw)}b(String,_e);var ke=function repeat(e,t){if(t<1){return""}if(t%2){return repeat(e,t-1)+e}var r=repeat(e,t/2);return r+r};var Le=Infinity;var Fe={repeat:function repeat(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);if(r<0||r>=Le){throw new RangeError("repeat count must be less than infinity and not overflow maximum string size")}return ke(t,r)},startsWith:function startsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "startsWith" with a regex')}var r=ce.ToString(e);var n;if(arguments.length>1){n=arguments[1]}var o=A(ce.ToInteger(n),0);return C(t,o,o+r.length)===r},endsWith:function endsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "endsWith" with a regex')}var r=ce.ToString(e);var n=t.length;var o;if(arguments.length>1){o=arguments[1]}var i=typeof o==="undefined"?n:ce.ToInteger(o);var a=R(A(i,0),n);return C(t,a-r.length,a)===r},includes:function includes(e){if(ce.IsRegExp(e)){throw new TypeError('"includes" does not accept a RegExp')}var t=ce.ToString(e);var r;if(arguments.length>1){r=arguments[1]}return I(this,t,r)!==-1},codePointAt:function codePointAt(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);var n=t.length;if(r>=0&&r<n){var o=t.charCodeAt(r);var i=r+1===n;if(o<55296||o>56319||i){return o}var a=t.charCodeAt(r+1);if(a<56320||a>57343){return o}return(o-55296)*1024+(a-56320)+65536}}};if(String.prototype.includes&&"a".includes("a",Infinity)!==false){ne(String.prototype,"includes",Fe.includes)}if(String.prototype.startsWith&&String.prototype.endsWith){var De=i(function(){return"/a/".startsWith(/a/)});var ze=a(function(){return"abc".startsWith("a",Infinity)===false});if(!De||!ze){ne(String.prototype,"startsWith",Fe.startsWith);ne(String.prototype,"endsWith",Fe.endsWith)}}if(oe){var qe=a(function(){var e=/a/;e[$.match]=false;return"/a/".startsWith(e)});if(!qe){ne(String.prototype,"startsWith",Fe.startsWith)}var We=a(function(){var e=/a/;e[$.match]=false;return"/a/".endsWith(e)});if(!We){ne(String.prototype,"endsWith",Fe.endsWith)}var Ge=a(function(){var e=/a/;e[$.match]=false;return"/a/".includes(e)});if(!Ge){ne(String.prototype,"includes",Fe.includes)}}b(String.prototype,Fe);var He=["\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join("");var Ve=new RegExp("(^["+He+"]+)|(["+He+"]+$)","g");var Be=function trim(){return ce.ToString(ce.RequireObjectCoercible(this)).replace(Ve,"")};var Ue=["\x85","\u200b","\ufffe"].join("");var $e=new RegExp("["+Ue+"]","g");var Je=/^[-+]0x[0-9a-f]+$/i;var Xe=Ue.trim().length!==Ue.length;h(String.prototype,"trim",Be,Xe);var Ke=function(e){return{value:e,done:arguments.length===0}};var Ze=function(e){ce.RequireObjectCoercible(e);this._s=ce.ToString(e);this._i=0};Ze.prototype.next=function(){var e=this._s;var t=this._i;if(typeof e==="undefined"||t>=e.length){this._s=void 0;return Ke()}var r=e.charCodeAt(t);var n,o;if(r<55296||r>56319||t+1===e.length){o=1}else{n=e.charCodeAt(t+1);o=n<56320||n>57343?1:2}this._i=t+o;return Ke(e.substr(t,o))};Me(Ze.prototype);Me(String.prototype,function(){return new Ze(this)});var Ye={from:function from(e){var r=this;var n;if(arguments.length>1){n=arguments[1]}var o,i;if(typeof n==="undefined"){o=false}else{if(!ce.IsCallable(n)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){i=arguments[2]}o=true}var a=typeof(te(e)||ce.GetMethod(e,ie))!=="undefined";var u,f,s;if(a){f=ce.IsConstructor(r)?Object(new r):[];var c=ce.GetIterator(e);var l,p;s=0;while(true){l=ce.IteratorStep(c);if(l===false){break}p=l.value;try{if(o){p=typeof i==="undefined"?n(p,s):t(n,i,p,s)}f[s]=p}catch(v){ce.IteratorClose(c,true);throw v}s+=1}u=s}else{var y=ce.ToObject(e);u=ce.ToLength(y.length);f=ce.IsConstructor(r)?Object(new r(u)):new Array(u);var h;for(s=0;s<u;++s){h=y[s];if(o){h=typeof i==="undefined"?n(h,s):t(n,i,h,s)}Ne(f,s,h)}}f.length=u;return f},of:function of(){var e=arguments.length;var t=this;var n=r(t)||!ce.IsCallable(t)?new Array(e):ce.Construct(t,[e]);for(var o=0;o<e;++o){Ne(n,o,arguments[o])}n.length=e;return n}};b(Array,Ye);Ce(Array);q=function(e,t){this.i=0;this.array=e;this.kind=t};b(q.prototype,{next:function(){var e=this.i;var t=this.array;if(!(this instanceof q)){throw new TypeError("Not an ArrayIterator")}if(typeof t!=="undefined"){var r=ce.ToLength(t.length);for(;e<r;e++){var n=this.kind;var o;if(n==="key"){o=e}else if(n==="value"){o=t[e]}else if(n==="entry"){o=[e,t[e]]}this.i=e+1;return Ke(o)}}this.array=void 0;return Ke()}});Me(q.prototype);var Qe=Array.of===Ye.of||function(){var e=function Foo(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&t.length===2}();if(!Qe){ne(Array,"of",Ye.of)}var et={copyWithin:function copyWithin(e,t){var r=ce.ToObject(this);var n=ce.ToLength(r.length);var o=ce.ToInteger(e);var i=ce.ToInteger(t);var a=o<0?A(n+o,0):R(o,n);var u=i<0?A(n+i,0):R(i,n);var f;if(arguments.length>2){f=arguments[2]}var s=typeof f==="undefined"?n:ce.ToInteger(f);var c=s<0?A(n+s,0):R(s,n);var l=R(c-u,n-a);var p=1;if(u<a&&a<u+l){p=-1;u+=l-1;a+=l-1}while(l>0){if(u in r){r[a]=r[u]}else{delete r[a]}u+=p;a+=p;l-=1}return r},fill:function fill(e){var t;if(arguments.length>1){t=arguments[1]}var r;if(arguments.length>2){r=arguments[2]}var n=ce.ToObject(this);var o=ce.ToLength(n.length);t=ce.ToInteger(typeof t==="undefined"?0:t);r=ce.ToInteger(typeof r==="undefined"?o:r);var i=t<0?A(o+t,0):R(t,o);var a=r<0?o+r:r;for(var u=i;u<o&&u<a;++u){n[u]=e}return n},find:function find(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#find: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0,a;i<n;i++){a=r[i];if(o){if(t(e,o,a,i,r)){return a}}else if(e(a,i,r)){return a}}},findIndex:function findIndex(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#findIndex: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0;i<n;i++){if(o){if(t(e,o,r[i],i,r)){return i}}else if(e(r[i],i,r)){return i}}return-1},keys:function keys(){return new q(this,"key")},values:function values(){return new q(this,"value")},entries:function entries(){return new q(this,"entry")}};if(Array.prototype.keys&&!ce.IsCallable([1].keys().next)){delete Array.prototype.keys}if(Array.prototype.entries&&!ce.IsCallable([1].entries().next)){delete Array.prototype.entries}if(Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[ie]){b(Array.prototype,{values:Array.prototype[ie]});if(re.symbol($.unscopables)){Array.prototype[$.unscopables].values=true}}if(c&&Array.prototype.values&&Array.prototype.values.name!=="values"){var tt=Array.prototype.values;ne(Array.prototype,"values",function values(){return ce.Call(tt,this,arguments)});h(Array.prototype,ie,Array.prototype.values,true)}b(Array.prototype,et);if(1/[true].indexOf(true,-0)<0){h(Array.prototype,"indexOf",function indexOf(e){var t=E(this,arguments);if(t===0&&1/t<0){return 0}return t},true)}Me(Array.prototype,function(){return this.values()});if(Object.getPrototypeOf){Me(Object.getPrototypeOf([].values()))}var rt=function(){return a(function(){return Array.from({length:-1}).length===0})}();var nt=function(){var e=Array.from([0].entries());return e.length===1&&r(e[0])&&e[0][0]===0&&e[0][1]===0}();if(!rt||!nt){ne(Array,"from",Ye.from)}var ot=function(){return a(function(){return Array.from([0],void 0)})}();if(!ot){var it=Array.from;ne(Array,"from",function from(e){if(arguments.length>1&&typeof arguments[1]!=="undefined"){return ce.Call(it,this,arguments)}else{return t(it,this,e)}})}var at=-(Math.pow(2,32)-1);var ut=function(e,r){var n={length:at};n[r?(n.length>>>0)-1:0]=true;return a(function(){t(e,n,function(){throw new RangeError("should not reach here")},[]);return true})};if(!ut(Array.prototype.forEach)){var ft=Array.prototype.forEach;ne(Array.prototype,"forEach",function forEach(e){return ce.Call(ft,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.map)){var st=Array.prototype.map;ne(Array.prototype,"map",function map(e){return ce.Call(st,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.filter)){var ct=Array.prototype.filter;ne(Array.prototype,"filter",function filter(e){return ce.Call(ct,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.some)){var lt=Array.prototype.some;ne(Array.prototype,"some",function some(e){return ce.Call(lt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.every)){var pt=Array.prototype.every;ne(Array.prototype,"every",function every(e){return ce.Call(pt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduce)){var vt=Array.prototype.reduce;ne(Array.prototype,"reduce",function reduce(e){return ce.Call(vt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduceRight,true)){var yt=Array.prototype.reduceRight;ne(Array.prototype,"reduceRight",function reduceRight(e){return ce.Call(yt,this.length>=0?this:[],arguments)},true)}var ht=Number("0o10")!==8;var bt=Number("0b10")!==2;var gt=y(Ue,function(e){return Number(e+0+e)===0});if(ht||bt||gt){var dt=Number;var mt=/^0b[01]+$/i;var Ot=/^0o[0-7]+$/i;var wt=mt.test.bind(mt);var jt=Ot.test.bind(Ot);var St=function(e){var t;if(typeof e.valueOf==="function"){t=e.valueOf();if(re.primitive(t)){return t}}if(typeof e.toString==="function"){t=e.toString();if(re.primitive(t)){return t}}throw new TypeError("No default value")};var Tt=$e.test.bind($e);var It=Je.test.bind(Je);var Et=function(){var e=function Number(t){var r;if(arguments.length>0){r=re.primitive(t)?t:St(t,"number")}else{r=0}if(typeof r==="string"){r=ce.Call(Be,r);if(wt(r)){r=parseInt(C(r,2),2)}else if(jt(r)){r=parseInt(C(r,2),8)}else if(Tt(r)||It(r)){r=NaN}}var n=this;var o=a(function(){dt.prototype.valueOf.call(n);return true});if(n instanceof e&&!o){return new dt(r)}return dt(r)};return e}();Ee(dt,Et,{});b(Et,{NaN:dt.NaN,MAX_VALUE:dt.MAX_VALUE,MIN_VALUE:dt.MIN_VALUE,NEGATIVE_INFINITY:dt.NEGATIVE_INFINITY,POSITIVE_INFINITY:dt.POSITIVE_INFINITY});Number=Et;m.redefine(S,"Number",Et)}var Pt=Math.pow(2,53)-1;b(Number,{MAX_SAFE_INTEGER:Pt,MIN_SAFE_INTEGER:-Pt,EPSILON:2.220446049250313e-16,parseInt:S.parseInt,parseFloat:S.parseFloat,isFinite:K,isInteger:function isInteger(e){return K(e)&&ce.ToInteger(e)===e},isSafeInteger:function isSafeInteger(e){return Number.isInteger(e)&&k(e)<=Number.MAX_SAFE_INTEGER},isNaN:X});h(Number,"parseInt",S.parseInt,Number.parseInt!==S.parseInt);if([,1].find(function(){return true})===1){ne(Array.prototype,"find",et.find)}if([,1].findIndex(function(){return true})!==0){ne(Array.prototype,"findIndex",et.findIndex)}var Ct=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable);var Mt=function ensureEnumerable(e,t){if(s&&Ct(e,t)){Object.defineProperty(e,t,{enumerable:false})}};var xt=function sliceArgs(){var e=Number(this);var t=arguments.length;var r=t-e;var n=new Array(r<0?0:r);for(var o=e;o<t;++o){n[o-e]=arguments[o]}return n};var Nt=function assignTo(e){return function assignToSource(t,r){t[r]=e[r];return t}};var At=function(e,t){var r=n(Object(t));var o;if(ce.IsCallable(Object.getOwnPropertySymbols)){o=v(Object.getOwnPropertySymbols(Object(t)),Ct(t))}return p(P(r,o||[]),Nt(t),e)};var Rt={assign:function(e,t){var r=ce.ToObject(e,"Cannot convert undefined or null to object");return p(ce.Call(xt,1,arguments),At,r)},is:function is(e,t){return ce.SameValue(e,t)}};var _t=Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}}();if(_t){ne(Object,"assign",Rt.assign)}b(Object,Rt);if(s){var kt={setPrototypeOf:function(e,r){var n;var o=function(e,t){if(!ce.TypeIsObject(e)){throw new TypeError("cannot set prototype on a non-object")}if(!(t===null||ce.TypeIsObject(t))){throw new TypeError("can only set prototype to an object or null"+t)}};var i=function(e,r){o(e,r);t(n,e,r);return e};try{n=e.getOwnPropertyDescriptor(e.prototype,r).set;t(n,{},null)}catch(a){if(e.prototype!=={}[r]){return}n=function(e){this[r]=e};i.polyfill=i(i({},null),e.prototype)instanceof e}return i}(Object,"__proto__")};b(Object,kt)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&Object.getPrototypeOf(Object.setPrototypeOf({},null))!==null&&Object.getPrototypeOf(Object.create(null))===null){(function(){var e=Object.create(null);var t=Object.getPrototypeOf;var r=Object.setPrototypeOf;Object.getPrototypeOf=function(r){var n=t(r);return n===e?null:n};Object.setPrototypeOf=function(t,n){var o=n===null?e:n;return r(t,o)};Object.setPrototypeOf.polyfill=false})()}var Lt=!i(function(){return Object.keys("foo")});if(!Lt){var Ft=Object.keys;ne(Object,"keys",function keys(e){return Ft(ce.ToObject(e))});n=Object.keys}var Dt=i(function(){return Object.keys(/a/g)});if(Dt){var zt=Object.keys;ne(Object,"keys",function keys(e){if(re.regex(e)){var t=[];for(var r in e){if(z(e,r)){M(t,r)}}return t}return zt(e)});n=Object.keys}if(Object.getOwnPropertyNames){var qt=!i(function(){return Object.getOwnPropertyNames("foo")});if(!qt){var Wt=typeof window==="object"?Object.getOwnPropertyNames(window):[];var Gt=Object.getOwnPropertyNames;ne(Object,"getOwnPropertyNames",function getOwnPropertyNames(e){var t=ce.ToObject(e);if(g(t)==="[object Window]"){try{return Gt(t)}catch(r){return P([],Wt)}}return Gt(t)})}}if(Object.getOwnPropertyDescriptor){var Ht=!i(function(){return Object.getOwnPropertyDescriptor("foo","bar")});if(!Ht){var Vt=Object.getOwnPropertyDescriptor;ne(Object,"getOwnPropertyDescriptor",function getOwnPropertyDescriptor(e,t){return Vt(ce.ToObject(e),t)})}}if(Object.seal){var Bt=!i(function(){return Object.seal("foo")});if(!Bt){var Ut=Object.seal;ne(Object,"seal",function seal(e){if(!ce.TypeIsObject(e)){return e}return Ut(e)})}}if(Object.isSealed){var $t=!i(function(){return Object.isSealed("foo")});if(!$t){var Jt=Object.isSealed;ne(Object,"isSealed",function isSealed(e){if(!ce.TypeIsObject(e)){return true}return Jt(e)})}}if(Object.freeze){var Xt=!i(function(){return Object.freeze("foo")});if(!Xt){var Kt=Object.freeze;ne(Object,"freeze",function freeze(e){if(!ce.TypeIsObject(e)){return e}return Kt(e)})}}if(Object.isFrozen){var Zt=!i(function(){return Object.isFrozen("foo")});if(!Zt){var Yt=Object.isFrozen;ne(Object,"isFrozen",function isFrozen(e){if(!ce.TypeIsObject(e)){return true}return Yt(e)})}}if(Object.preventExtensions){var Qt=!i(function(){return Object.preventExtensions("foo")});if(!Qt){var er=Object.preventExtensions;ne(Object,"preventExtensions",function preventExtensions(e){if(!ce.TypeIsObject(e)){return e}return er(e)})}}if(Object.isExtensible){var tr=!i(function(){return Object.isExtensible("foo")});if(!tr){var rr=Object.isExtensible;ne(Object,"isExtensible",function isExtensible(e){if(!ce.TypeIsObject(e)){return false}return rr(e)})}}if(Object.getPrototypeOf){var nr=!i(function(){return Object.getPrototypeOf("foo")});if(!nr){var or=Object.getPrototypeOf;ne(Object,"getPrototypeOf",function getPrototypeOf(e){return or(ce.ToObject(e))})}}var ir=s&&function(){var e=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return e&&ce.IsCallable(e.get)}();if(s&&!ir){var ar=function flags(){if(!ce.TypeIsObject(this)){throw new TypeError("Method called on incompatible type: must be an object.")}var e="";if(this.global){e+="g"}if(this.ignoreCase){e+="i"}if(this.multiline){e+="m"}if(this.unicode){e+="u"}if(this.sticky){e+="y"}return e};m.getter(RegExp.prototype,"flags",ar)}var ur=s&&a(function(){return String(new RegExp(/a/g,"i"))==="/a/i"});var fr=oe&&s&&function(){var e=/./;e[$.match]=false;return RegExp(e)===e}();var sr=a(function(){return RegExp.prototype.toString.call({source:"abc"})==="/abc/"});var cr=sr&&a(function(){return RegExp.prototype.toString.call({source:"a",flags:"b"})==="/a/b"});if(!sr||!cr){var lr=RegExp.prototype.toString;h(RegExp.prototype,"toString",function toString(){var e=ce.RequireObjectCoercible(this);if(re.regex(e)){return t(lr,e)}var r=ue(e.source);var n=ue(e.flags);return"/"+r+"/"+n},true);m.preserveToString(RegExp.prototype.toString,lr)}if(s&&(!ur||fr)){var pr=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get;var vr=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{};var yr=function(){return this.source};var hr=ce.IsCallable(vr.get)?vr.get:yr;var br=RegExp;var gr=function(){return function RegExp(e,t){var r=ce.IsRegExp(e);var n=this instanceof RegExp;if(!n&&r&&typeof t==="undefined"&&e.constructor===RegExp){return e}var o=e;var i=t;if(re.regex(e)){o=ce.Call(hr,e);i=typeof t==="undefined"?ce.Call(pr,e):t;return new RegExp(o,i)}else if(r){o=e.source;i=typeof t==="undefined"?e.flags:t}return new br(e,t)}}();Ee(br,gr,{$input:true});RegExp=gr;m.redefine(S,"RegExp",gr)}if(s){var dr={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(n(dr),function(e){if(e in RegExp&&!(dr[e]in RegExp)){m.getter(RegExp,dr[e],function get(){return RegExp[e]})}})}Ce(RegExp);var mr=1/Number.EPSILON;var Or=function roundTiesToEven(e){return e+mr-mr};var wr=Math.pow(2,-23);var jr=Math.pow(2,127)*(2-wr);var Sr=Math.pow(2,-126);var Tr=Math.E;var Ir=Math.LOG2E;var Er=Math.LOG10E;var Pr=Number.prototype.clz;delete Number.prototype.clz;var Cr={acosh:function acosh(e){var t=Number(e);if(X(t)||e<1){return NaN}if(t===1){return 0}if(t===Infinity){return t}var r=1/(t*t);if(t<2){return Y(t-1+D(1-r)*t)}var n=t/2;return Y(n+D(1-r)*n-1)+1/Ir},asinh:function asinh(e){var t=Number(e);if(t===0||!T(t)){return t}var r=k(t);var n=r*r;var o=Z(t);if(r<1){return o*Y(r+n/(D(n+1)+1))}return o*(Y(r/2+D(1+1/n)*r/2-1)+1/Ir)},atanh:function atanh(e){var t=Number(e);if(t===0){return t}if(t===-1){return-Infinity}if(t===1){return Infinity}if(X(t)||t<-1||t>1){return NaN}var r=k(t);return Z(t)*Y(2*r/(1-r))/2},cbrt:function cbrt(e){var t=Number(e);if(t===0){return t}var r=t<0;var n;if(r){t=-t}if(t===Infinity){n=Infinity}else{n=L(F(t)/3);n=(t/(n*n)+2*n)/3}return r?-n:n},clz32:function clz32(e){var t=Number(e);var r=ce.ToUint32(t);if(r===0){return 32}return Pr?ce.Call(Pr,r):31-_(F(r+.5)*Ir)},cosh:function cosh(e){var t=Number(e);if(t===0){return 1}if(X(t)){return NaN}if(!T(t)){return Infinity}var r=L(k(t)-1);return(r+1/(r*Tr*Tr))*(Tr/2)},expm1:function expm1(e){var t=Number(e);if(t===-Infinity){return-1}if(!T(t)||t===0){return t}if(k(t)>.5){return L(t)-1}var r=t;var n=0;var o=1;while(n+r!==n){n+=r;o+=1;r*=t/o}return n},hypot:function hypot(e,t){var r=0;var n=0;for(var o=0;o<arguments.length;++o){var i=k(Number(arguments[o]));if(n<i){r*=n/i*(n/i);r+=1;n=i}else{r+=i>0?i/n*(i/n):i}}return n===Infinity?Infinity:n*D(r)},log2:function log2(e){return F(e)*Ir},log10:function log10(e){return F(e)*Er},log1p:Y,sign:Z,sinh:function sinh(e){var t=Number(e);if(!T(t)||t===0){return t}var r=k(t);if(r<1){var n=Math.expm1(r);return Z(t)*n*(1+1/(n+1))/2}var o=L(r-1);return Z(t)*(o-1/(o*Tr*Tr))*(Tr/2)},tanh:function tanh(e){var t=Number(e);if(X(t)||t===0){return t}if(t>=20){return 1}if(t<=-20){return-1}return(Math.expm1(t)-Math.expm1(-t))/(L(t)+L(-t))},trunc:function trunc(e){var t=Number(e);return t<0?-_(-t):_(t)},imul:function imul(e,t){var r=ce.ToUint32(e);var n=ce.ToUint32(t);var o=r>>>16&65535;var i=r&65535;var a=n>>>16&65535;var u=n&65535;return i*u+(o*u+i*a<<16>>>0)|0},fround:function fround(e){var t=Number(e);if(t===0||t===Infinity||t===-Infinity||X(t)){return t}var r=Z(t);var n=k(t);if(n<Sr){return r*Or(n/Sr/wr)*Sr*wr}var o=(1+wr/Number.EPSILON)*n;var i=o-(o-n);if(i>jr||X(i)){return r*Infinity}return r*i}};var Mr=function withinULPDistance(e,t,r){return k(1-e/t)/Number.EPSILON<(r||8)};b(Math,Cr);h(Math,"sinh",Cr.sinh,Math.sinh(710)===Infinity);h(Math,"cosh",Cr.cosh,Math.cosh(710)===Infinity);h(Math,"log1p",Cr.log1p,Math.log1p(-1e-17)!==-1e-17);h(Math,"asinh",Cr.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7));h(Math,"asinh",Cr.asinh,Math.asinh(1e300)===Infinity);h(Math,"atanh",Cr.atanh,Math.atanh(1e-300)===0);h(Math,"tanh",Cr.tanh,Math.tanh(-2e-17)!==-2e-17);
h(Math,"acosh",Cr.acosh,Math.acosh(Number.MAX_VALUE)===Infinity);h(Math,"acosh",Cr.acosh,!Mr(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON)));h(Math,"cbrt",Cr.cbrt,!Mr(Math.cbrt(1e-300),1e-100));h(Math,"sinh",Cr.sinh,Math.sinh(-2e-17)!==-2e-17);var xr=Math.expm1(10);h(Math,"expm1",Cr.expm1,xr>22025.465794806718||xr<22025.465794806718);var Nr=Math.round;var Ar=Math.round(.5-Number.EPSILON/4)===0&&Math.round(-.5+Number.EPSILON/3.99)===1;var Rr=mr+1;var _r=2*mr-1;var kr=[Rr,_r].every(function(e){return Math.round(e)===e});h(Math,"round",function round(e){var t=_(e);var r=t===-1?-0:t+1;return e-t<.5?t:r},!Ar||!kr);m.preserveToString(Math.round,Nr);var Lr=Math.imul;if(Math.imul(4294967295,5)!==-5){Math.imul=Cr.imul;m.preserveToString(Math.imul,Lr)}if(Math.imul.length!==2){ne(Math,"imul",function imul(e,t){return ce.Call(Lr,Math,arguments)})}var Fr=function(){var e=S.setTimeout;if(typeof e!=="function"&&typeof e!=="object"){return}ce.IsPromise=function(e){if(!ce.TypeIsObject(e)){return false}if(typeof e._promise==="undefined"){return false}return true};var r=function(e){if(!ce.IsConstructor(e)){throw new TypeError("Bad promise constructor")}var t=this;var r=function(e,r){if(t.resolve!==void 0||t.reject!==void 0){throw new TypeError("Bad Promise implementation!")}t.resolve=e;t.reject=r};t.resolve=void 0;t.reject=void 0;t.promise=new e(r);if(!(ce.IsCallable(t.resolve)&&ce.IsCallable(t.reject))){throw new TypeError("Bad promise constructor")}};var n;if(typeof window!=="undefined"&&ce.IsCallable(window.postMessage)){n=function(){var e=[];var t="zero-timeout-message";var r=function(r){M(e,r);window.postMessage(t,"*")};var n=function(r){if(r.source===window&&r.data===t){r.stopPropagation();if(e.length===0){return}var n=N(e);n()}};window.addEventListener("message",n,true);return r}}var o=function(){var e=S.Promise;var t=e&&e.resolve&&e.resolve();return t&&function(e){return t.then(e)}};var i=ce.IsCallable(S.setImmediate)?S.setImmediate:typeof process==="object"&&process.nextTick?process.nextTick:o()||(ce.IsCallable(n)?n():function(t){e(t,0)});var a=function(e){return e};var u=function(e){throw e};var f=0;var s=1;var c=2;var l=0;var p=1;var v=2;var y={};var h=function(e,t,r){i(function(){g(e,t,r)})};var g=function(e,t,r){var n,o;if(t===y){return e(r)}try{n=e(r);o=t.resolve}catch(i){n=i;o=t.reject}o(n)};var d=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.fulfillReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+l],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=s;r.reactionLength=0};var m=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.rejectReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+p],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=c;r.reactionLength=0};var O=function(e){var t=false;var r=function(r){var n;if(t){return}t=true;if(r===e){return m(e,new TypeError("Self resolution"))}if(!ce.TypeIsObject(r)){return d(e,r)}try{n=r.then}catch(o){return m(e,o)}if(!ce.IsCallable(n)){return d(e,r)}i(function(){j(e,r,n)})};var n=function(r){if(t){return}t=true;return m(e,r)};return{resolve:r,reject:n}};var w=function(e,r,n,o){if(e===I){t(e,r,n,o,y)}else{t(e,r,n,o)}};var j=function(e,t,r){var n=O(e);var o=n.resolve;var i=n.reject;try{w(r,t,o,i)}catch(a){i(a)}};var T,I;var E=function(){var e=function Promise(t){if(!(this instanceof e)){throw new TypeError('Constructor Promise requires "new"')}if(this&&this._promise){throw new TypeError("Bad construction")}if(!ce.IsCallable(t)){throw new TypeError("not a valid resolver")}var r=Ae(this,e,T,{_promise:{result:void 0,state:f,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}});var n=O(r);var o=n.reject;try{t(n.resolve,o)}catch(i){o(i)}return r};return e}();T=E.prototype;var P=function(e,t,r,n){var o=false;return function(i){if(o){return}o=true;t[e]=i;if(--n.count===0){var a=r.resolve;a(t)}}};var C=function(e,t,r){var n=e.iterator;var o=[];var i={count:1};var a,u;var f=0;while(true){try{a=ce.IteratorStep(n);if(a===false){e.done=true;break}u=a.value}catch(s){e.done=true;throw s}o[f]=void 0;var c=t.resolve(u);var l=P(f,o,r,i);i.count+=1;w(c.then,c,l,r.reject);f+=1}if(--i.count===0){var p=r.resolve;p(o)}return r.promise};var x=function(e,t,r){var n=e.iterator;var o,i,a;while(true){try{o=ce.IteratorStep(n);if(o===false){e.done=true;break}i=o.value}catch(u){e.done=true;throw u}a=t.resolve(i);w(a.then,a,r.resolve,r.reject)}return r.promise};b(E,{all:function all(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return C(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},race:function race(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return x(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},reject:function reject(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}var n=new r(t);var o=n.reject;o(e);return n.promise},resolve:function resolve(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}if(ce.IsPromise(e)){var n=e.constructor;if(n===t){return e}}var o=new r(t);var i=o.resolve;i(e);return o.promise}});b(T,{"catch":function(e){return this.then(null,e)},then:function then(e,t){var n=this;if(!ce.IsPromise(n)){throw new TypeError("not a promise")}var o=ce.SpeciesConstructor(n,E);var i;var b=arguments.length>2&&arguments[2]===y;if(b&&o===E){i=y}else{i=new r(o)}var g=ce.IsCallable(e)?e:a;var d=ce.IsCallable(t)?t:u;var m=n._promise;var O;if(m.state===f){if(m.reactionLength===0){m.fulfillReactionHandler0=g;m.rejectReactionHandler0=d;m.reactionCapability0=i}else{var w=3*(m.reactionLength-1);m[w+l]=g;m[w+p]=d;m[w+v]=i}m.reactionLength+=1}else if(m.state===s){O=m.result;h(g,i,O)}else if(m.state===c){O=m.result;h(d,i,O)}else{throw new TypeError("unexpected Promise state")}return i.promise}});y=new r(E);I=T.then;return E}();if(S.Promise){delete S.Promise.accept;delete S.Promise.defer;delete S.Promise.prototype.chain}if(typeof Fr==="function"){b(S,{Promise:Fr});var Dr=w(S.Promise,function(e){return e.resolve(42).then(function(){})instanceof e});var zr=!i(function(){return S.Promise.reject(42).then(null,5).then(null,W)});var qr=i(function(){return S.Promise.call(3,W)});var Wr=function(e){var t=e.resolve(5);t.constructor={};var r=e.resolve(t);try{r.then(null,W).then(null,W)}catch(n){return true}return t===r}(S.Promise);var Gr=s&&function(){var e=0;var t=Object.defineProperty({},"then",{get:function(){e+=1}});Promise.resolve(t);return e===1}();var Hr=function BadResolverPromise(e){var t=new Promise(e);e(3,function(){});this.then=t.then;this.constructor=BadResolverPromise};Hr.prototype=Promise.prototype;Hr.all=Promise.all;var Vr=a(function(){return!!Hr.all([1,2])});if(!Dr||!zr||!qr||Wr||!Gr||Vr){Promise=Fr;ne(S,"Promise",Fr)}if(Promise.all.length!==1){var Br=Promise.all;ne(Promise,"all",function all(e){return ce.Call(Br,this,arguments)})}if(Promise.race.length!==1){var Ur=Promise.race;ne(Promise,"race",function race(e){return ce.Call(Ur,this,arguments)})}if(Promise.resolve.length!==1){var $r=Promise.resolve;ne(Promise,"resolve",function resolve(e){return ce.Call($r,this,arguments)})}if(Promise.reject.length!==1){var Jr=Promise.reject;ne(Promise,"reject",function reject(e){return ce.Call(Jr,this,arguments)})}Mt(Promise,"all");Mt(Promise,"race");Mt(Promise,"resolve");Mt(Promise,"reject");Ce(Promise)}var Xr=function(e){var t=n(p(e,function(e,t){e[t]=true;return e},{}));return e.join(":")===t.join(":")};var Kr=Xr(["z","a","bb"]);var Zr=Xr(["z",1,"a","3",2]);if(s){var Yr=function fastkey(e,t){if(!t&&!Kr){return null}if(se(e)){return"^"+ce.ToString(e)}else if(typeof e==="string"){return"$"+e}else if(typeof e==="number"){if(!Zr){return"n"+e}return e}else if(typeof e==="boolean"){return"b"+e}return null};var Qr=function emptyObject(){return Object.create?Object.create(null):{}};var en=function addIterableToMap(e,n,o){if(r(o)||re.string(o)){l(o,function(e){if(!ce.TypeIsObject(e)){throw new TypeError("Iterator value "+e+" is not an entry object")}n.set(e[0],e[1])})}else if(o instanceof e){t(e.prototype.forEach,o,function(e,t){n.set(t,e)})}else{var i,a;if(!se(o)){a=n.set;if(!ce.IsCallable(a)){throw new TypeError("bad map")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{if(!ce.TypeIsObject(f)){throw new TypeError("Iterator value "+f+" is not an entry object")}t(a,n,f[0],f[1])}catch(s){ce.IteratorClose(i,true);throw s}}}}};var tn=function addIterableToSet(e,n,o){if(r(o)||re.string(o)){l(o,function(e){n.add(e)})}else if(o instanceof e){t(e.prototype.forEach,o,function(e){n.add(e)})}else{var i,a;if(!se(o)){a=n.add;if(!ce.IsCallable(a)){throw new TypeError("bad set")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{t(a,n,f)}catch(s){ce.IteratorClose(i,true);throw s}}}}};var rn={Map:function(){var e={};var r=function MapEntry(e,t){this.key=e;this.value=t;this.next=null;this.prev=null};r.prototype.isRemoved=function isRemoved(){return this.key===e};var n=function isMap(e){return!!e._es6map};var o=function requireMapSlot(e,t){if(!ce.TypeIsObject(e)||!n(e)){throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+ce.ToString(e))}};var i=function MapIterator(e,t){o(e,"[[MapIterator]]");this.head=e._head;this.i=this.head;this.kind=t};i.prototype={isMapIterator:true,next:function next(){if(!this.isMapIterator){throw new TypeError("Not a MapIterator")}var e=this.i;var t=this.kind;var r=this.head;if(typeof this.i==="undefined"){return Ke()}while(e.isRemoved()&&e!==r){e=e.prev}var n;while(e.next!==r){e=e.next;if(!e.isRemoved()){if(t==="key"){n=e.key}else if(t==="value"){n=e.value}else{n=[e.key,e.value]}this.i=e;return Ke(n)}}this.i=void 0;return Ke()}};Me(i.prototype);var a;var u=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}if(this&&this._es6map){throw new TypeError("Bad construction")}var e=Ae(this,Map,a,{_es6map:true,_head:null,_map:G?new G:null,_size:0,_storage:Qr()});var t=new r(null,null);t.next=t.prev=t;e._head=t;if(arguments.length>0){en(Map,e,arguments[0])}return e};a=u.prototype;m.getter(a,"size",function(){if(typeof this._size==="undefined"){throw new TypeError("size method called on incompatible Map")}return this._size});b(a,{get:function get(e){o(this,"get");var t;var r=Yr(e,true);if(r!==null){t=this._storage[r];if(t){return t.value}else{return}}if(this._map){t=V.call(this._map,e);if(t){return t.value}else{return}}var n=this._head;var i=n;while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){return i.value}}},has:function has(e){o(this,"has");var t=Yr(e,true);if(t!==null){return typeof this._storage[t]!=="undefined"}if(this._map){return B.call(this._map,e)}var r=this._head;var n=r;while((n=n.next)!==r){if(ce.SameValueZero(n.key,e)){return true}}return false},set:function set(e,t){o(this,"set");var n=this._head;var i=n;var a;var u=Yr(e,true);if(u!==null){if(typeof this._storage[u]!=="undefined"){this._storage[u].value=t;return this}else{a=this._storage[u]=new r(e,t);i=n.prev}}else if(this._map){if(B.call(this._map,e)){V.call(this._map,e).value=t}else{a=new r(e,t);U.call(this._map,e,a);i=n.prev}}while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){i.value=t;return this}}a=a||new r(e,t);if(ce.SameValue(-0,e)){a.key=+0}a.next=this._head;a.prev=this._head.prev;a.prev.next=a;a.next.prev=a;this._size+=1;return this},"delete":function(t){o(this,"delete");var r=this._head;var n=r;var i=Yr(t,true);if(i!==null){if(typeof this._storage[i]==="undefined"){return false}n=this._storage[i].prev;delete this._storage[i]}else if(this._map){if(!B.call(this._map,t)){return false}n=V.call(this._map,t).prev;H.call(this._map,t)}while((n=n.next)!==r){if(ce.SameValueZero(n.key,t)){n.key=e;n.value=e;n.prev.next=n.next;n.next.prev=n.prev;this._size-=1;return true}}return false},clear:function clear(){o(this,"clear");this._map=G?new G:null;this._size=0;this._storage=Qr();var t=this._head;var r=t;var n=r.next;while((r=n)!==t){r.key=e;r.value=e;n=r.next;r.next=r.prev=t}t.next=t.prev=t},keys:function keys(){o(this,"keys");return new i(this,"key")},values:function values(){o(this,"values");return new i(this,"value")},entries:function entries(){o(this,"entries");return new i(this,"key+value")},forEach:function forEach(e){o(this,"forEach");var r=arguments.length>1?arguments[1]:null;var n=this.entries();for(var i=n.next();!i.done;i=n.next()){if(r){t(e,r,i.value[1],i.value[0],this)}else{e(i.value[1],i.value[0],this)}}}});Me(a,a.entries);return u}(),Set:function(){var e=function isSet(e){return e._es6set&&typeof e._storage!=="undefined"};var r=function requireSetSlot(t,r){if(!ce.TypeIsObject(t)||!e(t)){throw new TypeError("Set.prototype."+r+" called on incompatible receiver "+ce.ToString(t))}};var o;var i=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}if(this&&this._es6set){throw new TypeError("Bad construction")}var e=Ae(this,Set,o,{_es6set:true,"[[SetData]]":null,_storage:Qr()});if(!e._es6set){throw new TypeError("bad set")}if(arguments.length>0){tn(Set,e,arguments[0])}return e};o=i.prototype;var a=function(e){var t=e;if(t==="^null"){return null}else if(t==="^undefined"){return void 0}else{var r=t.charAt(0);if(r==="$"){return C(t,1)}else if(r==="n"){return+C(t,1)}else if(r==="b"){return t==="btrue"}}return+t};var u=function ensureMap(e){if(!e["[[SetData]]"]){var t=new rn.Map;e["[[SetData]]"]=t;l(n(e._storage),function(e){var r=a(e);t.set(r,r)});e["[[SetData]]"]=t}e._storage=null};m.getter(i.prototype,"size",function(){r(this,"size");if(this._storage){return n(this._storage).length}u(this);return this["[[SetData]]"].size});b(i.prototype,{has:function has(e){r(this,"has");var t;if(this._storage&&(t=Yr(e))!==null){return!!this._storage[t]}u(this);return this["[[SetData]]"].has(e)},add:function add(e){r(this,"add");var t;if(this._storage&&(t=Yr(e))!==null){this._storage[t]=true;return this}u(this);this["[[SetData]]"].set(e,e);return this},"delete":function(e){r(this,"delete");var t;if(this._storage&&(t=Yr(e))!==null){var n=z(this._storage,t);return delete this._storage[t]&&n}u(this);return this["[[SetData]]"]["delete"](e)},clear:function clear(){r(this,"clear");if(this._storage){this._storage=Qr()}if(this["[[SetData]]"]){this["[[SetData]]"].clear()}},values:function values(){r(this,"values");u(this);return new f(this["[[SetData]]"].values())},entries:function entries(){r(this,"entries");u(this);return new f(this["[[SetData]]"].entries())},forEach:function forEach(e){r(this,"forEach");var n=arguments.length>1?arguments[1]:null;var o=this;u(o);this["[[SetData]]"].forEach(function(r,i){if(n){t(e,n,i,i,o)}else{e(i,i,o)}})}});h(i.prototype,"keys",i.prototype.values,true);Me(i.prototype,i.prototype.values);var f=function SetIterator(e){this.it=e};f.prototype={isSetIterator:true,next:function next(){if(!this.isSetIterator){throw new TypeError("Not a SetIterator")}return this.it.next()}};Me(f.prototype);return i}()};var nn=S.Set&&!Set.prototype["delete"]&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys);if(nn){S.Set=rn.Set}if(S.Map||S.Set){var on=a(function(){return new Map([[1,2]]).get(1)===2});if(!on){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,S.Map.prototype);return e};S.Map.prototype=O(G.prototype);h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var an=new Map;var un=function(){var e=new Map([[1,0],[2,0],[3,0],[4,0]]);e.set(-0,e);return e.get(0)===e&&e.get(-0)===e&&e.has(0)&&e.has(-0)}();var fn=an.set(1,2)===an;if(!un||!fn){ne(Map.prototype,"set",function set(e,r){t(U,this,e===0?0:e,r);return this})}if(!un){b(Map.prototype,{get:function get(e){return t(V,this,e===0?0:e)},has:function has(e){return t(B,this,e===0?0:e)}},true);m.preserveToString(Map.prototype.get,V);m.preserveToString(Map.prototype.has,B)}var sn=new Set;var cn=Set.prototype["delete"]&&Set.prototype.add&&Set.prototype.has&&function(e){e["delete"](0);e.add(-0);return!e.has(0)}(sn);var ln=sn.add(1)===sn;if(!cn||!ln){var pn=Set.prototype.add;Set.prototype.add=function add(e){t(pn,this,e===0?0:e);return this};m.preserveToString(Set.prototype.add,pn)}if(!cn){var vn=Set.prototype.has;Set.prototype.has=function has(e){return t(vn,this,e===0?0:e)};m.preserveToString(Set.prototype.has,vn);var yn=Set.prototype["delete"];Set.prototype["delete"]=function SetDelete(e){return t(yn,this,e===0?0:e)};m.preserveToString(Set.prototype["delete"],yn)}var hn=w(S.Map,function(e){var t=new e([]);t.set(42,42);return t instanceof e});var bn=Object.setPrototypeOf&&!hn;var gn=function(){try{return!(S.Map()instanceof S.Map)}catch(e){return e instanceof TypeError}}();if(S.Map.length!==0||bn||!gn){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Map.prototype);return e};S.Map.prototype=G.prototype;h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var dn=w(S.Set,function(e){var t=new e([]);t.add(42,42);return t instanceof e});var mn=Object.setPrototypeOf&&!dn;var On=function(){try{return!(S.Set()instanceof S.Set)}catch(e){return e instanceof TypeError}}();if(S.Set.length!==0||mn||!On){var wn=S.Set;S.Set=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}var e=new wn;if(arguments.length>0){tn(Set,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Set.prototype);return e};S.Set.prototype=wn.prototype;h(S.Set.prototype,"constructor",S.Set,true);m.preserveToString(S.Set,wn)}var jn=new S.Map;var Sn=!a(function(){return jn.keys().next().done});if(typeof S.Map.prototype.clear!=="function"||(new S.Set).size!==0||jn.size!==0||typeof S.Map.prototype.keys!=="function"||typeof S.Set.prototype.keys!=="function"||typeof S.Map.prototype.forEach!=="function"||typeof S.Set.prototype.forEach!=="function"||u(S.Map)||u(S.Set)||typeof jn.keys().next!=="function"||Sn||!hn){b(S,{Map:rn.Map,Set:rn.Set},true)}if(S.Set.prototype.keys!==S.Set.prototype.values){h(S.Set.prototype,"keys",S.Set.prototype.values,true)}Me(Object.getPrototypeOf((new S.Map).keys()));Me(Object.getPrototypeOf((new S.Set).keys()));if(c&&S.Set.prototype.has.name!=="has"){var Tn=S.Set.prototype.has;ne(S.Set.prototype,"has",function has(e){return t(Tn,this,e)})}}b(S,rn);Ce(S.Map);Ce(S.Set)}var In=function throwUnlessTargetIsObject(e){if(!ce.TypeIsObject(e)){throw new TypeError("target must be an object")}};var En={apply:function apply(){return ce.Call(ce.Call,null,arguments)},construct:function construct(e,t){if(!ce.IsConstructor(e)){throw new TypeError("First argument must be a constructor.")}var r=arguments.length>2?arguments[2]:e;if(!ce.IsConstructor(r)){throw new TypeError("new.target must be a constructor.")}return ce.Construct(e,t,r,"internal")},deleteProperty:function deleteProperty(e,t){In(e);if(s){var r=Object.getOwnPropertyDescriptor(e,t);if(r&&!r.configurable){return false}}return delete e[t]},has:function has(e,t){In(e);return t in e}};if(Object.getOwnPropertyNames){Object.assign(En,{ownKeys:function ownKeys(e){In(e);var t=Object.getOwnPropertyNames(e);if(ce.IsCallable(Object.getOwnPropertySymbols)){x(t,Object.getOwnPropertySymbols(e))}return t}})}var Pn=function ConvertExceptionToBoolean(e){return!i(e)};if(Object.preventExtensions){Object.assign(En,{isExtensible:function isExtensible(e){In(e);return Object.isExtensible(e)},preventExtensions:function preventExtensions(e){In(e);return Pn(function(){return Object.preventExtensions(e)})}})}if(s){var Cn=function get(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n){var o=Object.getPrototypeOf(e);if(o===null){return void 0}return Cn(o,t,r)}if("value"in n){return n.value}if(n.get){return ce.Call(n.get,r)}return void 0};var Mn=function set(e,r,n,o){var i=Object.getOwnPropertyDescriptor(e,r);if(!i){var a=Object.getPrototypeOf(e);if(a!==null){return Mn(a,r,n,o)}i={value:void 0,writable:true,enumerable:true,configurable:true}}if("value"in i){if(!i.writable){return false}if(!ce.TypeIsObject(o)){return false}var u=Object.getOwnPropertyDescriptor(o,r);if(u){return ae.defineProperty(o,r,{value:n})}else{return ae.defineProperty(o,r,{value:n,writable:true,enumerable:true,configurable:true})}}if(i.set){t(i.set,o,n);return true}return false};Object.assign(En,{defineProperty:function defineProperty(e,t,r){In(e);return Pn(function(){return Object.defineProperty(e,t,r)})},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(e,t){In(e);return Object.getOwnPropertyDescriptor(e,t)},get:function get(e,t){In(e);var r=arguments.length>2?arguments[2]:e;return Cn(e,t,r)},set:function set(e,t,r){In(e);var n=arguments.length>3?arguments[3]:e;return Mn(e,t,r,n)}})}if(Object.getPrototypeOf){var xn=Object.getPrototypeOf;En.getPrototypeOf=function getPrototypeOf(e){In(e);return xn(e)}}if(Object.setPrototypeOf&&En.getPrototypeOf){var Nn=function(e,t){var r=t;while(r){if(e===r){return true}r=En.getPrototypeOf(r)}return false};Object.assign(En,{setPrototypeOf:function setPrototypeOf(e,t){In(e);if(t!==null&&!ce.TypeIsObject(t)){throw new TypeError("proto must be an object or null")}if(t===ae.getPrototypeOf(e)){return true}if(ae.isExtensible&&!ae.isExtensible(e)){return false}if(Nn(e,t)){return false}Object.setPrototypeOf(e,t);return true}})}var An=function(e,t){if(!ce.IsCallable(S.Reflect[e])){h(S.Reflect,e,t)}else{var r=a(function(){S.Reflect[e](1);S.Reflect[e](NaN);S.Reflect[e](true);return true});if(r){ne(S.Reflect,e,t)}}};Object.keys(En).forEach(function(e){An(e,En[e])});var Rn=S.Reflect.getPrototypeOf;if(c&&Rn&&Rn.name!=="getPrototypeOf"){ne(S.Reflect,"getPrototypeOf",function getPrototypeOf(e){return t(Rn,S.Reflect,e)})}if(S.Reflect.setPrototypeOf){if(a(function(){S.Reflect.setPrototypeOf(1,{});return true})){ne(S.Reflect,"setPrototypeOf",En.setPrototypeOf)}}if(S.Reflect.defineProperty){if(!a(function(){var e=!S.Reflect.defineProperty(1,"test",{value:1});var t=typeof Object.preventExtensions!=="function"||!S.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})){ne(S.Reflect,"defineProperty",En.defineProperty)}}if(S.Reflect.construct){if(!a(function(){var e=function F(){};return S.Reflect.construct(function(){},[],e)instanceof e})){ne(S.Reflect,"construct",En.construct)}}if(String(new Date(NaN))!=="Invalid Date"){var _n=Date.prototype.toString;var kn=function toString(){var e=+this;if(e!==e){return"Invalid Date"}return ce.Call(_n,this)};ne(Date.prototype,"toString",kn)}var Ln={anchor:function anchor(e){return ce.CreateHTML(this,"a","name",e)},big:function big(){return ce.CreateHTML(this,"big","","")},blink:function blink(){return ce.CreateHTML(this,"blink","","")},bold:function bold(){return ce.CreateHTML(this,"b","","")},fixed:function fixed(){return ce.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(e){return ce.CreateHTML(this,"font","color",e)},fontsize:function fontsize(e){return ce.CreateHTML(this,"font","size",e)},italics:function italics(){return ce.CreateHTML(this,"i","","")},link:function link(e){return ce.CreateHTML(this,"a","href",e)},small:function small(){return ce.CreateHTML(this,"small","","")},strike:function strike(){return ce.CreateHTML(this,"strike","","")},sub:function sub(){return ce.CreateHTML(this,"sub","","")},sup:function sub(){return ce.CreateHTML(this,"sup","","")}};l(Object.keys(Ln),function(e){var r=String.prototype[e];var n=false;if(ce.IsCallable(r)){var o=t(r,"",' " ');var i=P([],o.match(/"/g)).length;n=o!==o.toLowerCase()||i>2}else{n=true}if(n){ne(String.prototype,e,Ln[e])}});var Fn=function(){if(!oe){return false}var e=typeof JSON==="object"&&typeof JSON.stringify==="function"?JSON.stringify:null;if(!e){return false}if(typeof e($())!=="undefined"){return true}if(e([$()])!=="[null]"){return true}var t={a:$()};t[$()]=true;if(e(t)!=="{}"){return true}return false}();var Dn=a(function(){if(!oe){return true}return JSON.stringify(Object($()))==="{}"&&JSON.stringify([Object($())])==="[{}]"});if(Fn||!Dn){var zn=JSON.stringify;ne(JSON,"stringify",function stringify(e){if(typeof e==="symbol"){return}var n;if(arguments.length>1){n=arguments[1]}var o=[e];if(!r(n)){var i=ce.IsCallable(n)?n:null;var a=function(e,r){var n=i?t(i,this,e,r):r;if(typeof n!=="symbol"){if(re.symbol(n)){return Nt({})(n)}else{return n}}};o.push(a)}else{o.push(n)}if(arguments.length>2){o.push(arguments[2])}return zn.apply(this,o)})}return S});
//# sourceMappingURL=es6-shim.map
/*! jQuery v3.4.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],E=C.document,r=Object.getPrototypeOf,s=t.slice,g=t.concat,u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},x=function(e){return null!=e&&e===e.window},c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.4.1",k=function(e,t){return new k.fn.init(e,t)},p=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function d(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}k.fn=k.prototype={jquery:f,constructor:k,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=k.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return k.each(this,e)},map:function(n){return this.pushStack(k.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},k.extend=k.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(k.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||k.isPlainObject(n)?n:{},i=!1,a[t]=k.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},k.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t){b(e,{nonce:t&&t.nonce})},each:function(e,t){var n,r=0;if(d(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(p,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(d(Object(e))?k.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(d(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g.apply([],a)},guid:1,support:y}),"function"==typeof Symbol&&(k.fn[Symbol.iterator]=t[Symbol.iterator]),k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var h=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,k="sizzle"+1*new Date,m=n.document,S=0,r=0,p=ue(),x=ue(),N=ue(),A=ue(),D=function(e,t){return e===t&&(l=!0),0},j={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",$=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",F=new RegExp(M+"+","g"),B=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp($),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ne=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(m.childNodes),m.childNodes),t[m.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&((e?e.ownerDocument||e:m)!==C&&T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!A[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&U.test(t)){(s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=k),o=(l=h(t)).length;while(o--)l[o]="#"+s+" "+xe(l[o]);c=l.join(","),f=ee.test(t)&&ye(e.parentNode)||e}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){A(t,!0)}finally{s===k&&e.removeAttribute("id")}}}return g(t.replace(B,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[k]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:m;return r!==C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),m!==C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=k,!C.getElementsByName||!C.getElementsByName(k).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){a.appendChild(e).innerHTML="<a id='"+k+"'></a><select id='"+k+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+k+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+k+"+*").length||v.push(".#.+[+~]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",$)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e===C||e.ownerDocument===m&&y(m,e)?-1:t===C||t.ownerDocument===m&&y(m,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===C?-1:t===C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]===m?-1:s[r]===m?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==C&&T(e),d.matchesSelector&&E&&!A[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){A(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!==C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&j.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(D),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=p[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&p(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(F," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===S&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[S,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===S&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[S,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[k]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace(B,"$1"));return s[k]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[S,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[k]||(e[k]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===S&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[k]&&(v=Ce(v)),y&&!y[k]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[k]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(B,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(B," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=N[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[k]?i.push(a):o.push(a);(a=N(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=S+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t===C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument===C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(S=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(S=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=k.split("").sort(D).join("")===k,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);k.find=h,k.expr=h.selectors,k.expr[":"]=k.expr.pseudos,k.uniqueSort=k.unique=h.uniqueSort,k.text=h.getText,k.isXMLDoc=h.isXML,k.contains=h.contains,k.escapeSelector=h.escape;var T=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&k(e).is(n))break;r.push(e)}return r},S=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},N=k.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,n,r){return m(n)?k.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?k.grep(e,function(e){return e===n!==r}):"string"!=typeof n?k.grep(e,function(e){return-1<i.call(n,e)!==r}):k.filter(n,e,r)}k.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?k.find.matchesSelector(r,e)?[r]:[]:k.find.matches(e,k.grep(t,function(e){return 1===e.nodeType}))},k.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(k(e).filter(function(){for(t=0;t<r;t++)if(k.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)k.find(e,i[t],n);return 1<r?k.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&N.test(e)?k(e):e||[],!1).length}});var q,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(k.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||q,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:L.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof k?t[0]:t,k.merge(this,k.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),D.test(r[1])&&k.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(k):k.makeArray(e,this)}).prototype=k.fn,q=k(E);var H=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function P(e,t){while((e=e[t])&&1!==e.nodeType);return e}k.fn.extend({has:function(e){var t=k(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(k.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&k(e);if(!N.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&k.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?k.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(k(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),k.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return T(e,"parentNode")},parentsUntil:function(e,t,n){return T(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return T(e,"nextSibling")},prevAll:function(e){return T(e,"previousSibling")},nextUntil:function(e,t,n){return T(e,"nextSibling",n)},prevUntil:function(e,t,n){return T(e,"previousSibling",n)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return"undefined"!=typeof e.contentDocument?e.contentDocument:(A(e,"template")&&(e=e.content||e),k.merge([],e.childNodes))}},function(r,i){k.fn[r]=function(e,t){var n=k.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=k.filter(t,n)),1<this.length&&(O[r]||k.uniqueSort(n),H.test(r)&&n.reverse()),this.pushStack(n)}});var R=/[^\x20\t\r\n\f]+/g;function M(e){return e}function I(e){throw e}function W(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}k.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},k.each(e.match(R)||[],function(e,t){n[t]=!0}),n):k.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){k.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return k.each(arguments,function(e,t){var n;while(-1<(n=k.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<k.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},k.extend({Deferred:function(e){var o=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return k.Deferred(function(r){k.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,M,s),l(u,o,I,s)):(u++,t.call(e,l(u,o,M,s),l(u,o,I,s),l(u,o,M,o.notifyWith))):(a!==M&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==I&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(k.Deferred.getStackHook&&(t.stackTrace=k.Deferred.getStackHook()),C.setTimeout(t))}}return k.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:M,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:M)),o[2][3].add(l(0,e,m(n)?n:I))}).promise()},promise:function(e){return null!=e?k.extend(e,a):a}},s={};return k.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=k.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(W(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)W(i[t],a(t),o.reject);return o.promise()}});var $=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&$.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},k.readyException=function(e){C.setTimeout(function(){throw e})};var F=k.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),k.ready()}k.fn.ready=function(e){return F.then(e)["catch"](function(e){k.readyException(e)}),this},k.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--k.readyWait:k.isReady)||(k.isReady=!0)!==e&&0<--k.readyWait||F.resolveWith(E,[k])}}),k.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(k.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var _=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)_(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(k(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},z=/^-ms-/,U=/-([a-z])/g;function X(e,t){return t.toUpperCase()}function V(e){return e.replace(z,"ms-").replace(U,X)}var G=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Y(){this.expando=k.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(e){var t=e[this.expando];return t||(t={},G(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[V(t)]=n;else for(r in t)i[V(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][V(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(V):(t=V(t))in r?[t]:t.match(R)||[]).length;while(n--)delete r[t[n]]}(void 0===t||k.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!k.isEmptyObject(t)}};var Q=new Y,J=new Y,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function ee(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Z,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:K.test(i)?JSON.parse(i):i)}catch(e){}J.set(e,t,n)}else n=void 0;return n}k.extend({hasData:function(e){return J.hasData(e)||Q.hasData(e)},data:function(e,t,n){return J.access(e,t,n)},removeData:function(e,t){J.remove(e,t)},_data:function(e,t,n){return Q.access(e,t,n)},_removeData:function(e,t){Q.remove(e,t)}}),k.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=J.get(o),1===o.nodeType&&!Q.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=V(r.slice(5)),ee(o,r,i[r]));Q.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){J.set(this,n)}):_(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=J.get(o,n))?t:void 0!==(t=ee(o,n))?t:void 0;this.each(function(){J.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){J.remove(this,e)})}}),k.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Q.get(e,t),n&&(!r||Array.isArray(n)?r=Q.access(e,t,k.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=k.queue(e,t),r=n.length,i=n.shift(),o=k._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){k.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:k.Callbacks("once memory").add(function(){Q.remove(e,[t+"queue",n])})})}}),k.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?k.queue(this[0],t):void 0===n?this:this.each(function(){var e=k.queue(this,t,n);k._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&k.dequeue(this,t)})},dequeue:function(e){return this.each(function(){k.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=k.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Q.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ne=new RegExp("^(?:([+-])=|)("+te+")([a-z%]*)$","i"),re=["Top","Right","Bottom","Left"],ie=E.documentElement,oe=function(e){return k.contains(e.ownerDocument,e)},ae={composed:!0};ie.getRootNode&&(oe=function(e){return k.contains(e.ownerDocument,e)||e.getRootNode(ae)===e.ownerDocument});var se=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&oe(e)&&"none"===k.css(e,"display")},ue=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i};function le(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return k.css(e,t,"")},u=s(),l=n&&n[3]||(k.cssNumber[t]?"":"px"),c=e.nodeType&&(k.cssNumber[t]||"px"!==l&&+u)&&ne.exec(k.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)k.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,k.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ce={};function fe(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Q.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&se(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ce[s])||(o=a.body.appendChild(a.createElement(s)),u=k.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ce[s]=u)))):"none"!==n&&(l[c]="none",Q.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}k.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){se(this)?k(this).show():k(this).hide()})}});var pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i,ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?k.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Q.set(e[n],"globalEval",!t||Q.get(t[n],"globalEval"))}ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;var me,xe,be=/<|&#?\w+;/;function we(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))k.merge(p,o.nodeType?[o]:o);else if(be.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+k.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;k.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<k.inArray(o,r))i&&i.push(o);else if(l=oe(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}me=E.createDocumentFragment().appendChild(E.createElement("div")),(xe=E.createElement("input")).setAttribute("type","radio"),xe.setAttribute("checked","checked"),xe.setAttribute("name","t"),me.appendChild(xe),y.checkClone=me.cloneNode(!0).cloneNode(!0).lastChild.checked,me.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!me.cloneNode(!0).lastChild.defaultValue;var Te=/^key/,Ce=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ee=/^([^.]*)(?:\.(.+)|)/;function ke(){return!0}function Se(){return!1}function Ne(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function Ae(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ae(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Se;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return k().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=k.guid++)),e.each(function(){k.event.add(this,t,i,r,n)})}function De(e,i,o){o?(Q.set(e,i,!1),k.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Q.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(k.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Q.set(this,i,r),t=o(this,i),this[i](),r!==(n=Q.get(this,i))||t?Q.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else r.length&&(Q.set(this,i,{value:k.event.trigger(k.extend(r[0],k.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,i)&&k.event.add(e,i,ke)}k.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Q.get(t);if(v){n.handler&&(n=(o=n).handler,i=o.selector),i&&k.find.matchesSelector(ie,i),n.guid||(n.guid=k.guid++),(u=v.events)||(u=v.events={}),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof k&&k.event.triggered!==e.type?k.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(R)||[""]).length;while(l--)d=g=(s=Ee.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=k.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=k.event.special[d]||{},c=k.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&k.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),k.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Q.hasData(e)&&Q.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(R)||[""]).length;while(l--)if(d=g=(s=Ee.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=k.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||k.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)k.event.remove(e,d+t[l],n,r,!0);k.isEmptyObject(u)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=k.event.fix(e),u=new Array(arguments.length),l=(Q.get(this,"events")||{})[s.type]||[],c=k.event.special[s.type]||{};for(u[0]=s,t=1;t<arguments.length;t++)u[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){a=k.event.handlers.call(this,s,l),t=0;while((i=a[t++])&&!s.isPropagationStopped()){s.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!s.isImmediatePropagationStopped())s.rnamespace&&!1!==o.namespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((k.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<k(i,this).index(l):k.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(k.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[k.expando]?e:new k.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&De(t,"click",ke),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&De(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Q.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},k.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},k.Event=function(e,t){if(!(this instanceof k.Event))return new k.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ke:Se,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&k.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[k.expando]=!0},k.Event.prototype={constructor:k.Event,isDefaultPrevented:Se,isPropagationStopped:Se,isImmediatePropagationStopped:Se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ke,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ke,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ke,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Te.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ce.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},k.event.addProp),k.each({focus:"focusin",blur:"focusout"},function(e,t){k.event.special[e]={setup:function(){return De(this,e,Ne),!1},trigger:function(){return De(this,e),!0},delegateType:t}}),k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){k.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||k.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),k.fn.extend({on:function(e,t,n,r){return Ae(this,e,t,n,r)},one:function(e,t,n,r){return Ae(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,k(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Se),this.each(function(){k.event.remove(this,e,n,t)})}});var je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,qe=/<script|<style|<link/i,Le=/checked\s*(?:[^=]|=\s*.checked.)/i,He=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Oe(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&k(e).children("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Re(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Me(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(Q.hasData(e)&&(o=Q.access(e),a=Q.set(t,o),l=o.events))for(i in delete a.handle,a.events={},l)for(n=0,r=l[i].length;n<r;n++)k.event.add(t,i,l[i][n]);J.hasData(e)&&(s=J.access(e),u=k.extend({},s),J.set(t,u))}}function Ie(n,r,i,o){r=g.apply([],r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&Le.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),Ie(t,r,i,o)});if(f&&(t=(e=we(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=k.map(ve(e,"script"),Pe)).length;c<f;c++)u=e,c!==p&&(u=k.clone(u,!0,!0),s&&k.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,k.map(a,Re),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Q.access(u,"globalEval")&&k.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?k._evalUrl&&!u.noModule&&k._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")}):b(u.textContent.replace(He,""),u,l))}return n}function We(e,t,n){for(var r,i=t?k.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||k.cleanData(ve(r)),r.parentNode&&(n&&oe(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}k.extend({htmlPrefilter:function(e){return e.replace(je,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=oe(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||k.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Me(o[r],a[r]);else Me(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=k.event.special,o=0;void 0!==(n=e[o]);o++)if(G(n)){if(t=n[Q.expando]){if(t.events)for(r in t.events)i[r]?k.event.remove(n,r):k.removeEvent(n,r,t.handle);n[Q.expando]=void 0}n[J.expando]&&(n[J.expando]=void 0)}}}),k.fn.extend({detach:function(e){return We(this,e,!0)},remove:function(e){return We(this,e)},text:function(e){return _(this,function(e){return void 0===e?k.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ie(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Oe(this,e).appendChild(e)})},prepend:function(){return Ie(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Oe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(k.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return k.clone(this,e,t)})},html:function(e){return _(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!qe.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=k.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(k.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Ie(this,arguments,function(e){var t=this.parentNode;k.inArray(this,n)<0&&(k.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){k.fn[e]=function(e){for(var t,n=[],r=k(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),k(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var $e=new RegExp("^("+te+")(?!px)[a-z%]+$","i"),Fe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Be=new RegExp(re.join("|"),"i");function _e(e,t,n){var r,i,o,a,s=e.style;return(n=n||Fe(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||oe(e)||(a=k.style(e,t)),!y.pixelBoxStyles()&&$e.test(a)&&Be.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){s.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ie.appendChild(s).appendChild(u);var e=C.getComputedStyle(u);n="1%"!==e.top,a=12===t(e.marginLeft),u.style.right="60%",o=36===t(e.right),r=36===t(e.width),u.style.position="absolute",i=12===t(u.offsetWidth/3),ie.removeChild(s),u=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s=E.createElement("div"),u=E.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===u.style.backgroundClip,k.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),a},scrollboxSize:function(){return e(),i}}))}();var Ue=["Webkit","Moz","ms"],Xe=E.createElement("div").style,Ve={};function Ge(e){var t=k.cssProps[e]||Ve[e];return t||(e in Xe?e:Ve[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Ue.length;while(n--)if((e=Ue[n]+t)in Xe)return e}(e)||e)}var Ye=/^(none|table(?!-c[ea]).+)/,Qe=/^--/,Je={position:"absolute",visibility:"hidden",display:"block"},Ke={letterSpacing:"0",fontWeight:"400"};function Ze(e,t,n){var r=ne.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function et(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=k.css(e,n+re[a],!0,i)),r?("content"===n&&(u-=k.css(e,"padding"+re[a],!0,i)),"margin"!==n&&(u-=k.css(e,"border"+re[a]+"Width",!0,i))):(u+=k.css(e,"padding"+re[a],!0,i),"padding"!==n?u+=k.css(e,"border"+re[a]+"Width",!0,i):s+=k.css(e,"border"+re[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function tt(e,t,n){var r=Fe(e),i=(!y.boxSizingReliable()||n)&&"border-box"===k.css(e,"boxSizing",!1,r),o=i,a=_e(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if($e.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||"auto"===a||!parseFloat(a)&&"inline"===k.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===k.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+et(e,t,n||(i?"border":"content"),o,r,a)+"px"}function nt(e,t,n,r,i){return new nt.prototype.init(e,t,n,r,i)}k.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=_e(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=V(t),u=Qe.test(t),l=e.style;if(u||(t=Ge(s)),a=k.cssHooks[t]||k.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=ne.exec(n))&&i[1]&&(n=le(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(k.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=V(t);return Qe.test(t)||(t=Ge(s)),(a=k.cssHooks[t]||k.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=_e(e,t,r)),"normal"===i&&t in Ke&&(i=Ke[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),k.each(["height","width"],function(e,u){k.cssHooks[u]={get:function(e,t,n){if(t)return!Ye.test(k.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?tt(e,u,n):ue(e,Je,function(){return tt(e,u,n)})},set:function(e,t,n){var r,i=Fe(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===k.css(e,"boxSizing",!1,i),s=n?et(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-et(e,u,"border",!1,i)-.5)),s&&(r=ne.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=k.css(e,u)),Ze(0,t,s)}}}),k.cssHooks.marginLeft=ze(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(_e(e,"marginLeft"))||e.getBoundingClientRect().left-ue(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),k.each({margin:"",padding:"",border:"Width"},function(i,o){k.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+re[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(k.cssHooks[i+o].set=Ze)}),k.fn.extend({css:function(e,t){return _(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Fe(e),i=t.length;a<i;a++)o[t[a]]=k.css(e,t[a],!1,r);return o}return void 0!==n?k.style(e,t,n):k.css(e,t)},e,t,1<arguments.length)}}),((k.Tween=nt).prototype={constructor:nt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||k.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(k.cssNumber[n]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,n=nt.propHooks[this.prop];return this.options.duration?this.pos=t=k.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):nt.propHooks._default.set(this),this}}).init.prototype=nt.prototype,(nt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=k.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){k.fx.step[e.prop]?k.fx.step[e.prop](e):1!==e.elem.nodeType||!k.cssHooks[e.prop]&&null==e.elem.style[Ge(e.prop)]?e.elem[e.prop]=e.now:k.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=nt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},k.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},k.fx=nt.prototype.init,k.fx.step={};var rt,it,ot,at,st=/^(?:toggle|show|hide)$/,ut=/queueHooks$/;function lt(){it&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(lt):C.setTimeout(lt,k.fx.interval),k.fx.tick())}function ct(){return C.setTimeout(function(){rt=void 0}),rt=Date.now()}function ft(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=re[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function pt(e,t,n){for(var r,i=(dt.tweeners[t]||[]).concat(dt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function dt(o,e,t){var n,a,r=0,i=dt.prefilters.length,s=k.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=rt||ct(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:k.extend({},e),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},t),originalProperties:e,originalOptions:t,startTime:rt||ct(),duration:t.duration,tweens:[],createTween:function(e,t){var n=k.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=V(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=k.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=dt.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(k._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return k.map(c,pt,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),k.fx.timer(k.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}k.Animation=k.extend(dt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return le(n.elem,e,ne.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(R);for(var n,r=0,i=e.length;r<i;r++)n=e[r],dt.tweeners[n]=dt.tweeners[n]||[],dt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&se(e),v=Q.get(e,"fxshow");for(r in n.queue||(null==(a=k._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,k.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],st.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||k.style(e,r)}if((u=!k.isEmptyObject(t))||!k.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Q.get(e,"display")),"none"===(c=k.css(e,"display"))&&(l?c=l:(fe([e],!0),l=e.style.display||l,c=k.css(e,"display"),fe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===k.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Q.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&fe([e],!0),p.done(function(){for(r in g||fe([e]),Q.remove(e,"fxshow"),d)k.style(e,r,d[r])})),u=pt(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?dt.prefilters.unshift(e):dt.prefilters.push(e)}}),k.speed=function(e,t,n){var r=e&&"object"==typeof e?k.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return k.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in k.fx.speeds?r.duration=k.fx.speeds[r.duration]:r.duration=k.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&k.dequeue(this,r.queue)},r},k.fn.extend({fadeTo:function(e,t,n,r){return this.filter(se).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=k.isEmptyObject(t),o=k.speed(e,n,r),a=function(){var e=dt(this,k.extend({},t),o);(i||Q.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=k.timers,r=Q.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&ut.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||k.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Q.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=k.timers,o=n?n.length:0;for(t.finish=!0,k.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),k.each(["toggle","show","hide"],function(e,r){var i=k.fn[r];k.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(ft(r,!0),e,t,n)}}),k.each({slideDown:ft("show"),slideUp:ft("hide"),slideToggle:ft("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){k.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),k.timers=[],k.fx.tick=function(){var e,t=0,n=k.timers;for(rt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||k.fx.stop(),rt=void 0},k.fx.timer=function(e){k.timers.push(e),k.fx.start()},k.fx.interval=13,k.fx.start=function(){it||(it=!0,lt())},k.fx.stop=function(){it=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function(r,e){return r=k.fx&&k.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},ot=E.createElement("input"),at=E.createElement("select").appendChild(E.createElement("option")),ot.type="checkbox",y.checkOn=""!==ot.value,y.optSelected=at.selected,(ot=E.createElement("input")).value="t",ot.type="radio",y.radioValue="t"===ot.value;var ht,gt=k.expr.attrHandle;k.fn.extend({attr:function(e,t){return _(this,k.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){k.removeAttr(this,e)})}}),k.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?k.prop(e,t,n):(1===o&&k.isXMLDoc(e)||(i=k.attrHooks[t.toLowerCase()]||(k.expr.match.bool.test(t)?ht:void 0)),void 0!==n?null===n?void k.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=k.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(R);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),ht={set:function(e,t,n){return!1===t?k.removeAttr(e,n):e.setAttribute(n,n),n}},k.each(k.expr.match.bool.source.match(/\w+/g),function(e,t){var a=gt[t]||k.find.attr;gt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=gt[o],gt[o]=r,r=null!=a(e,t,n)?o:null,gt[o]=i),r}});var vt=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;function mt(e){return(e.match(R)||[]).join(" ")}function xt(e){return e.getAttribute&&e.getAttribute("class")||""}function bt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(R)||[]}k.fn.extend({prop:function(e,t){return _(this,k.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[k.propFix[e]||e]})}}),k.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&k.isXMLDoc(e)||(t=k.propFix[t]||t,i=k.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=k.find.attr(e,"tabindex");return t?parseInt(t,10):vt.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),y.optSelected||(k.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){k.propFix[this.toLowerCase()]=this}),k.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){k(this).addClass(t.call(this,e,xt(this)))});if((e=bt(t)).length)while(n=this[u++])if(i=xt(n),r=1===n.nodeType&&" "+mt(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){k(this).removeClass(t.call(this,e,xt(this)))});if(!arguments.length)return this.attr("class","");if((e=bt(t)).length)while(n=this[u++])if(i=xt(n),r=1===n.nodeType&&" "+mt(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){k(this).toggleClass(i.call(this,e,xt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=k(this),r=bt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=xt(this))&&Q.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Q.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+mt(xt(n))+" ").indexOf(t))return!0;return!1}});var wt=/\r/g;k.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,k(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=k.map(t,function(e){return null==e?"":e+""})),(r=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=k.valHooks[t.type]||k.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(wt,""):null==e?"":e:void 0}}),k.extend({valHooks:{option:{get:function(e){var t=k.find.attr(e,"value");return null!=t?t:mt(k.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=k(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=k.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<k.inArray(k.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),k.each(["radio","checkbox"],function(){k.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<k.inArray(k(e).val(),t)}},y.checkOn||(k.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var Tt=/^(?:focusinfocus|focusoutblur)$/,Ct=function(e){e.stopPropagation()};k.extend(k.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!Tt.test(d+k.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[k.expando]?e:new k.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:k.makeArray(t,[e]),c=k.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,Tt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Q.get(o,"events")||{})[e.type]&&Q.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&G(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!G(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),k.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,Ct),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,Ct),k.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=k.extend(new k.Event,n,{type:e,isSimulated:!0});k.event.trigger(r,null,t)}}),k.fn.extend({trigger:function(e,t){return this.each(function(){k.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return k.event.trigger(e,t,n,!0)}}),y.focusin||k.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){k.event.simulate(r,e.target,k.event.fix(e))};k.event.special[r]={setup:function(){var e=this.ownerDocument||this,t=Q.access(e,r);t||e.addEventListener(n,i,!0),Q.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=Q.access(e,r)-1;t?Q.access(e,r,t):(e.removeEventListener(n,i,!0),Q.remove(e,r))}}});var Et=C.location,kt=Date.now(),St=/\?/;k.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||k.error("Invalid XML: "+e),t};var Nt=/\[\]$/,At=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,jt=/^(?:input|select|textarea|keygen)/i;function qt(n,e,r,i){var t;if(Array.isArray(e))k.each(e,function(e,t){r||Nt.test(n)?i(n,t):qt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)qt(n+"["+t+"]",e[t],r,i)}k.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!k.isPlainObject(e))k.each(e,function(){i(this.name,this.value)});else for(n in e)qt(n,e[n],t,i);return r.join("&")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=k.prop(this,"elements");return e?k.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!k(this).is(":disabled")&&jt.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=k(this).val();return null==n?null:Array.isArray(n)?k.map(n,function(e){return{name:t.name,value:e.replace(At,"\r\n")}}):{name:t.name,value:n.replace(At,"\r\n")}}).get()}});var Lt=/%20/g,Ht=/#.*$/,Ot=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Rt=/^(?:GET|HEAD)$/,Mt=/^\/\//,It={},Wt={},$t="*/".concat("*"),Ft=E.createElement("a");function Bt(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(R)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function _t(t,i,o,a){var s={},u=t===Wt;function l(e){var r;return s[e]=!0,k.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function zt(e,t){var n,r,i=k.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&k.extend(!0,e,r),e}Ft.href=Et.href,k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,k.ajaxSettings),t):zt(k.ajaxSettings,e)},ajaxPrefilter:Bt(It),ajaxTransport:Bt(Wt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=k.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?k(y):k.event,x=k.Deferred(),b=k.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Pt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Et.href)+"").replace(Mt,Et.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(R)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Ft.protocol+"//"+Ft.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=k.param(v.data,v.traditional)),_t(It,v,t,T),h)return T;for(i in(g=k.event&&v.global)&&0==k.active++&&k.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Rt.test(v.type),f=v.url.replace(Ht,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Lt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(St.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Ot,"$1"),o=(St.test(f)?"&":"?")+"_="+kt+++o),v.url=f+o),v.ifModified&&(k.lastModified[f]&&T.setRequestHeader("If-Modified-Since",k.lastModified[f]),k.etag[f]&&T.setRequestHeader("If-None-Match",k.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+$t+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=_t(Wt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(k.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(k.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--k.active||k.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return k.get(e,t,n,"json")},getScript:function(e,t){return k.get(e,void 0,t,"script")}}),k.each(["get","post"],function(e,i){k[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),k.ajax(k.extend({url:e,type:i,dataType:r,data:t,success:n},k.isPlainObject(e)&&e))}}),k._evalUrl=function(e,t){return k.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){k.globalEval(e,t)}})},k.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=k(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){k(this).wrapInner(n.call(this,e))}):this.each(function(){var e=k(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){k(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){k(this).replaceWith(this.childNodes)}),this}}),k.expr.pseudos.hidden=function(e){return!k.expr.pseudos.visible(e)},k.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},k.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Ut={0:200,1223:204},Xt=k.ajaxSettings.xhr();y.cors=!!Xt&&"withCredentials"in Xt,y.ajax=Xt=!!Xt,k.ajaxTransport(function(i){var o,a;if(y.cors||Xt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Ut[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),k.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return k.globalEval(e),e}}}),k.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),k.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=k("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var Vt,Gt=[],Yt=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||k.expando+"_"+kt++;return this[e]=!0,e}}),k.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Yt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Yt,"$1"+r):!1!==e.jsonp&&(e.url+=(St.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||k.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?k(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Gt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((Vt=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Vt.childNodes.length),k.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=D.exec(e))?[t.createElement(i[1])]:(i=we([e],t,o),o&&o.length&&k(o).remove(),k.merge([],i.childNodes)));var r,i,o},k.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=mt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&k.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?k("<div>").append(k.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){k.fn[t]=function(e){return this.on(t,e)}}),k.expr.pseudos.animated=function(t){return k.grep(k.timers,function(e){return t===e.elem}).length},k.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=k.css(e,"position"),c=k(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=k.css(e,"top"),u=k.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,k.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},k.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){k.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===k.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===k.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=k(e).offset()).top+=k.css(e,"borderTopWidth",!0),i.left+=k.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-k.css(r,"marginTop",!0),left:t.left-i.left-k.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===k.css(e,"position"))e=e.offsetParent;return e||ie})}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;k.fn[t]=function(e){return _(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),k.each(["top","left"],function(e,n){k.cssHooks[n]=ze(y.pixelPosition,function(e,t){if(t)return t=_e(e,n),$e.test(t)?k(e).position()[n]+"px":t})}),k.each({Height:"height",Width:"width"},function(a,s){k.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){k.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return _(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?k.css(e,t,i):k.style(e,t,n,i)},s,n?e:void 0,n)}})}),k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){k.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),k.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),k.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),k.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||k.guid++,i},k.holdReady=function(e){e?k.readyWait++:k.ready(!0)},k.isArray=Array.isArray,k.parseJSON=JSON.parse,k.nodeName=A,k.isFunction=m,k.isWindow=x,k.camelCase=V,k.type=w,k.now=Date.now,k.isNumeric=function(e){var t=k.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return k});var Qt=C.jQuery,Jt=C.$;return k.noConflict=function(e){return C.$===k&&(C.$=Jt),e&&C.jQuery===k&&(C.jQuery=Qt),k},e||(C.jQuery=C.$=k),k});
/*
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(b,c){var $=b.jQuery||b.Cowboy||(b.Cowboy={}),a;$.throttle=a=function(e,f,j,i){var h,d=0;if(typeof f!=="boolean"){i=j;j=f;f=c}function g(){var o=this,m=+new Date()-d,n=arguments;function l(){d=+new Date();j.apply(o,n)}function k(){h=c}if(i&&!h){l()}h&&clearTimeout(h);if(i===c&&m>e){l()}else{if(f!==true){h=setTimeout(i?k:l,i===c?e-m:e)}}}if($.guid){g.guid=j.guid=j.guid||$.guid++}return g};$.debounce=function(d,e,f){return f===c?a(d,e,false):a(d,f,e!==false)}})(this);
/*!
 * imagesLoaded PACKAGED v4.1.0
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}(this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{},n=i[t]=i[t]||[];return n[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=0,o=i[n];e=e||[];for(var r=this._onceEvents&&this._onceEvents[t];o;){var s=r&&r[o];s&&(this.off(t,o),delete r[o]),o.apply(this,e),n+=s?0:1,o=i[n]}return this}},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.imagesLoaded=e(t,t.EvEmitter)}(window,function(t,e){function i(t,e){for(var i in e)t[i]=e[i];return t}function n(t){var e=[];if(Array.isArray(t))e=t;else if("number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e}function o(t,e,r){return this instanceof o?("string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=n(t),this.options=i({},this.options),"function"==typeof e?r=e:i(this.options,e),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(function(){this.check()}.bind(this))):new o(t,e,r)}function r(t){this.img=t}function s(t,e){this.url=t,this.element=e,this.img=new Image}var h=t.jQuery,a=t.console;o.prototype=Object.create(e.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),this.options.background===!0&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&d[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=t.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var d={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,t),n=i.exec(e.backgroundImage)}},o.prototype.addImage=function(t){var e=new r(t);this.images.push(e)},o.prototype.addBackground=function(t,e){var i=new s(t,e);this.images.push(i)},o.prototype.check=function(){function t(t,i,n){setTimeout(function(){e.progress(t,i,n)})}var e=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(e){e.once("progress",t),e.check()}):void this.complete()},o.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,t,e)},o.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},r.prototype=Object.create(e.prototype),r.prototype.check=function(){var t=this.getIsImageComplete();return t?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},r.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},r.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var t=this.getIsImageComplete();t&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},o.makeJQueryPlugin=function(e){e=e||t.jQuery,e&&(h=e,h.fn.imagesLoaded=function(t,e){var i=new o(this,t,e);return i.jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o});
/*! lz-string-1.3.3-min.js | (c) 2013 Pieroxy | Licensed under a WTFPL license */
var LZString={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(e==null)return"";var t="";var n,r,i,s,o,u,a;var f=0;e=LZString.compress(e);while(f<e.length*2){if(f%2==0){n=e.charCodeAt(f/2)>>8;r=e.charCodeAt(f/2)&255;if(f/2+1<e.length)i=e.charCodeAt(f/2+1)>>8;else i=NaN}else{n=e.charCodeAt((f-1)/2)&255;if((f+1)/2<e.length){r=e.charCodeAt((f+1)/2)>>8;i=e.charCodeAt((f+1)/2)&255}else r=i=NaN}f+=3;s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+LZString._keyStr.charAt(s)+LZString._keyStr.charAt(o)+LZString._keyStr.charAt(u)+LZString._keyStr.charAt(a)}return t},decompressFromBase64:function(e){if(e==null)return"";var t="",n=0,r,i,s,o,u,a,f,l,c=0,h=LZString._f;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<e.length){u=LZString._keyStr.indexOf(e.charAt(c++));a=LZString._keyStr.indexOf(e.charAt(c++));f=LZString._keyStr.indexOf(e.charAt(c++));l=LZString._keyStr.indexOf(e.charAt(c++));i=u<<2|a>>4;s=(a&15)<<4|f>>2;o=(f&3)<<6|l;if(n%2==0){r=i<<8;if(f!=64){t+=h(r|s)}if(l!=64){r=o<<8}}else{t=t+h(r|i);if(f!=64){r=s<<8}if(l!=64){t+=h(r|o)}}n+=3}return LZString.decompress(t)},compressToUTF16:function(e){if(e==null)return"";var t="",n,r,i,s=0,o=LZString._f;e=LZString.compress(e);for(n=0;n<e.length;n++){r=e.charCodeAt(n);switch(s++){case 0:t+=o((r>>1)+32);i=(r&1)<<14;break;case 1:t+=o(i+(r>>2)+32);i=(r&3)<<13;break;case 2:t+=o(i+(r>>3)+32);i=(r&7)<<12;break;case 3:t+=o(i+(r>>4)+32);i=(r&15)<<11;break;case 4:t+=o(i+(r>>5)+32);i=(r&31)<<10;break;case 5:t+=o(i+(r>>6)+32);i=(r&63)<<9;break;case 6:t+=o(i+(r>>7)+32);i=(r&127)<<8;break;case 7:t+=o(i+(r>>8)+32);i=(r&255)<<7;break;case 8:t+=o(i+(r>>9)+32);i=(r&511)<<6;break;case 9:t+=o(i+(r>>10)+32);i=(r&1023)<<5;break;case 10:t+=o(i+(r>>11)+32);i=(r&2047)<<4;break;case 11:t+=o(i+(r>>12)+32);i=(r&4095)<<3;break;case 12:t+=o(i+(r>>13)+32);i=(r&8191)<<2;break;case 13:t+=o(i+(r>>14)+32);i=(r&16383)<<1;break;case 14:t+=o(i+(r>>15)+32,(r&32767)+32);s=0;break}}return t+o(i+32)},decompressFromUTF16:function(e){if(e==null)return"";var t="",n,r,i=0,s=0,o=LZString._f;while(s<e.length){r=e.charCodeAt(s)-32;switch(i++){case 0:n=r<<1;break;case 1:t+=o(n|r>>14);n=(r&16383)<<2;break;case 2:t+=o(n|r>>13);n=(r&8191)<<3;break;case 3:t+=o(n|r>>12);n=(r&4095)<<4;break;case 4:t+=o(n|r>>11);n=(r&2047)<<5;break;case 5:t+=o(n|r>>10);n=(r&1023)<<6;break;case 6:t+=o(n|r>>9);n=(r&511)<<7;break;case 7:t+=o(n|r>>8);n=(r&255)<<8;break;case 8:t+=o(n|r>>7);n=(r&127)<<9;break;case 9:t+=o(n|r>>6);n=(r&63)<<10;break;case 10:t+=o(n|r>>5);n=(r&31)<<11;break;case 11:t+=o(n|r>>4);n=(r&15)<<12;break;case 12:t+=o(n|r>>3);n=(r&7)<<13;break;case 13:t+=o(n|r>>2);n=(r&3)<<14;break;case 14:t+=o(n|r>>1);n=(r&1)<<15;break;case 15:t+=o(n|r);i=0;break}s++}return LZString.decompress(t)},compress:function(e){if(e==null)return"";var t,n,r={},i={},s="",o="",u="",a=2,f=3,l=2,c="",h=0,p=0,d,v=LZString._f;for(d=0;d<e.length;d+=1){s=e.charAt(d);if(!Object.prototype.hasOwnProperty.call(r,s)){r[s]=f++;i[s]=true}o=u+s;if(Object.prototype.hasOwnProperty.call(r,o)){u=o}else{if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}r[o]=f++;u=String(s)}}if(u!==""){if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}}n=2;for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}while(true){h=h<<1;if(p==15){c+=v(h);break}else p++}return c},decompress:function(e){if(e==null)return"";if(e=="")return null;var t=[],n,r=4,i=4,s=3,o="",u="",a,f,l,c,h,p,d,v=LZString._f,m={string:e,val:e.charCodeAt(0),position:32768,index:1};for(a=0;a<3;a+=1){t[a]=a}l=0;h=Math.pow(2,2);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(n=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 2:return""}t[3]=d;f=u=d;while(true){if(m.index>m.string.length){return""}l=0;h=Math.pow(2,s);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(d=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 2:return u}if(r==0){r=Math.pow(2,s);s++}if(t[d]){o=t[d]}else{if(d===i){o=f+f.charAt(0)}else{return null}}u+=o;t[i++]=f+o.charAt(0);r--;f=o;if(r==0){r=Math.pow(2,s);s++}}}};if(typeof module!=="undefined"&&module!=null){module.exports=LZString}
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var saveAs=saveAs||navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator)||function(e){"use strict";var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=e.URL||e.webkitURL||e,i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),s="download"in i,o=function(n){var r=t.createEvent("MouseEvents");r.initMouseEvent("click",true,false,e,0,0,0,0,0,false,false,false,false,0,null);n.dispatchEvent(r)},u=e.webkitRequestFileSystem,a=e.requestFileSystem||u||e.mozRequestFileSystem,f=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l="application/octet-stream",c=0,h=[],p=function(){var e=h.length;while(e--){var t=h[e];if(typeof t==="string"){r.revokeObjectURL(t)}else{t.remove()}}h.length=0},d=function(e,t,n){t=[].concat(t);var r=t.length;while(r--){var i=e["on"+t[r]];if(typeof i==="function"){try{i.call(e,n||e)}catch(s){f(s)}}}},v=function(t,r){var f=this,p=t.type,v=false,m,g,y=function(){var e=n().createObjectURL(t);h.push(e);return e},b=function(){d(f,"writestart progress write writeend".split(" "))},w=function(){if(v||!m){m=y(t)}if(g){g.location.href=m}else{window.open(m,"_blank")}f.readyState=f.DONE;b()},E=function(e){return function(){if(f.readyState!==f.DONE){return e.apply(this,arguments)}}},S={create:true,exclusive:false},x;f.readyState=f.INIT;if(!r){r="download"}if(s){m=y(t);i.href=m;i.download=r;o(i);f.readyState=f.DONE;b();return}if(e.chrome&&p&&p!==l){x=t.slice||t.webkitSlice;t=x.call(t,0,t.size,l);v=true}if(u&&r!=="download"){r+=".download"}if(p===l||u){g=e}if(!a){w();return}c+=t.size;a(e.TEMPORARY,c,E(function(e){e.root.getDirectory("saved",S,E(function(e){var n=function(){e.getFile(r,S,E(function(e){e.createWriter(E(function(n){n.onwriteend=function(t){g.location.href=e.toURL();h.push(e);f.readyState=f.DONE;d(f,"writeend",t)};n.onerror=function(){var e=n.error;if(e.code!==e.ABORT_ERR){w()}};"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=f["on"+e]});n.write(t);f.abort=function(){n.abort();f.readyState=f.DONE};f.readyState=f.WRITING}),w)}),w)};e.getFile(r,{create:false},E(function(e){e.remove();n()}),E(function(e){if(e.code===e.NOT_FOUND_ERR){n()}else{w()}}))}),w)}),w)},m=v.prototype,g=function(e,t){return new v(e,t)};m.abort=function(){var e=this;e.readyState=e.DONE;d(e,"abort")};m.readyState=m.INIT=0;m.WRITING=1;m.DONE=2;m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null;e.addEventListener("unload",p,false);return g}(self)
/*! seedrandom.js v2.3.3 | (c) 2013 David Bau, all rights reserved. | Licensed under a BSD-style license */
!function(a,b,c,d,e,f,g,h,i){function j(a){var b,c=a.length,e=this,f=0,g=e.i=e.j=0,h=e.S=[];for(c||(a=[c++]);d>f;)h[f]=f++;for(f=0;d>f;f++)h[f]=h[g=r&g+a[f%c]+(b=h[f])],h[g]=b;(e.g=function(a){for(var b,c=0,f=e.i,g=e.j,h=e.S;a--;)b=h[f=r&f+1],c=c*d+h[r&(h[f]=h[g=r&g+b])+(h[g]=b)];return e.i=f,e.j=g,c})(d)}function k(a,b){var c,d=[],e=typeof a;if(b&&"object"==e)for(c in a)try{d.push(k(a[c],b-1))}catch(f){}return d.length?d:"string"==e?a:a+"\0"}function l(a,b){for(var c,d=a+"",e=0;e<d.length;)b[r&e]=r&(c^=19*b[r&e])+d.charCodeAt(e++);return n(b)}function m(c){try{return a.crypto.getRandomValues(c=new Uint8Array(d)),n(c)}catch(e){return[+new Date,a,(c=a.navigator)&&c.plugins,a.screen,n(b)]}}function n(a){return String.fromCharCode.apply(0,a)}var o=c.pow(d,e),p=c.pow(2,f),q=2*p,r=d-1,s=c["seed"+i]=function(a,f,g){var h=[],r=l(k(f?[a,n(b)]:null==a?m():a,3),h),s=new j(h);return l(n(s.S),b),(g||function(a,b,d){return d?(c[i]=a,b):a})(function(){for(var a=s.g(e),b=o,c=0;p>a;)a=(a+c)*d,b*=d,c=s.g(1);for(;a>=q;)a/=2,b/=2,c>>>=1;return(a+c)/b},r,this==c)};l(c[i](),b),g&&g.exports?g.exports=s:h&&h.amd&&h(function(){return s})}(this,[],Math,256,6,52,"object"==typeof module&&module,"function"==typeof define&&define,"random");
/*! console_hack.js | (c) 2015 Thomas Michael Edwards | Licensed under SugarCube's Simple BSD license */
!function(){for(var methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],length=methods.length,noop=function(){},console=window.console=window.console||{};length--;){var method=methods[length];console[method]||(console[method]=noop)}}();
}else{document.documentElement.setAttribute("data-init", "lacking");}
</script>
<style id="style-normalize" type="text/css">/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}</style>
<style id="style-init-screen" type="text/css">@-webkit-keyframes init-loading-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes init-loading-spin{0%{-o-transform:rotate(0);transform:rotate(0)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes init-loading-spin{0%{-webkit-transform:rotate(0);-o-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}#init-screen{display:none;z-index:500000;position:fixed;top:0;left:0;height:100%;width:100%;font:28px/1 Helmet,Freesans,sans-serif;font-weight:700;color:#eee;background-color:#111;text-align:center}#init-screen>div{display:none;position:relative;margin:0 auto;max-width:1136px;top:25%}html[data-init=lacking] #init-screen,html[data-init=loading] #init-screen,html[data-init=no-js] #init-screen{display:block}html[data-init=lacking] #init-lacking,html[data-init=no-js] #init-no-js{display:block;padding:0 1em}html[data-init=no-js] #init-no-js{color:red}html[data-init=loading] #init-loading{display:block;border:24px solid transparent;border-radius:50%;border-top-color:#7f7f7f;border-bottom-color:#7f7f7f;width:100px;height:100px;-webkit-animation:init-loading-spin 2s linear infinite;-o-animation:init-loading-spin 2s linear infinite;animation:init-loading-spin 2s linear infinite}html[data-init=loading] #init-loading>div{text-indent:9999em;overflow:hidden;white-space:nowrap}html[data-init=loading] #passages,html[data-init=loading] #ui-bar{display:none}</style>
<style id="style-font" type="text/css">@font-face{font-family:tme-fa-icons;src:url(data:application/octet-stream;base64,d09GRgABAAAAADLAAA8AAAAAWHgAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABWAAAADsAAABUIIslek9TLzIAAAGUAAAAQwAAAFY+IEkIY21hcAAAAdgAAAG8AAAF3rob9jFjdnQgAAADlAAAABMAAAAgBtX/BGZwZ20AAAOoAAAFkAAAC3CKkZBZZ2FzcAAACTgAAAAIAAAACAAAABBnbHlmAAAJQAAAI6gAADv+gJOpzGhlYWQAACzoAAAAMwAAADYY1IZaaGhlYQAALRwAAAAgAAAAJAfCBClobXR4AAAtPAAAAJEAAAFMBfb/0WxvY2EAAC3QAAAAqAAAAKhjiHI5bWF4cAAALngAAAAgAAAAIAFjDA9uYW1lAAAumAAAAY0AAAL94+zEpHBvc3QAADAoAAACHAAAA11cG/YjcHJlcAAAMkQAAAB6AAAAhuVBK7x4nGNgZGBg4GIwYLBjYHJx8wlh4MtJLMljkGJgYYAAkDwymzEnMz2RgQPGA8qxgGkOIGaDiAIAJjsFSAB4nGNgZNZgnMDAysDAVMW0h4GBoQdCMz5gMGRkAooysDIzYAUBaa4pDA4vGF4EMgf9z2KIYg5imAYUZgTJAQDSIQumAHic7dTVbltRAETR7dpNCikzQ8rMzMxt/M39mHnsU1/TfZz5jFpaV7pXJunMDLAZmOqaZjD5y4Tx+uPTyeL5lG2L5zN+L94zG8+ztr7ulXH1fra4bvK9M79xiWW2sNXPbWeFHexkF7vZw172sZ8DHOQQhznCUY5xnBOc5BSnOcNZVjnHeS5wkUtc5gpX/f3r3OAmt7jNHe5yj/s84CGPeMwTnvKM57zgJa94zRve8o73fOAjn/jMF77yje/84Ce/WGPun1zi/2tlXKbp3Xyc44bFyZanSWokJDXOOjXSk/LUSXn+pEwCKTNBaqQqZU5IjX+XMjukTBEp80TKZJEyY6RMGylzR8oEkjKLpEwlKfNJyqSSMrOkTC8pc0zKRJMy26RMOSnzTsrkk7IDpGwDKXtByoaQsiukbA0p+0PKJpGyU6RsFyl7RmosQcrukbKFpOwjKZtJyo6Ssq2k7C0pG0zKLpOy1aTsNymbTsrOk7L9pNwBUi4CKbeBlCtByr0g5XKQckNIuSak3BVSLgwpt4aUq0PK/SHlEpFyk0i5TqTcKVIuFim3i5QrRso9I+WykXLjXOYNzP8BuAPUwHicY2BAAxIQyBz0PwuEARJsA90AeJytVml300YUHXlJnIQsJQstamHExGmwRiZswYAJQbJjIF2crZWgixQ76b7xid/gX/Nk2nPoN35a7xsvJJC053Cak6N3583VzNtlElqS2AvrkZSbL8XU1iaN7DwJ6YZNy1F8KDt7IWWKyd8FURCtltq3HYdERCJQta6wRBD7HlmaZHzoUUbLtqRXTcotPekuW+NBvVXffho6yrE7oaRmM3RoPbIlVRhVokimPVLSpmWo+itJK7y/wsxXzVDCiE4iabwZxtBI3htntMpoNbbjKIpsstwoUiSa4UEUeZTVEufkigkMygfNkPLKpxHlw/yIrNijnFawS7bT/L4vead3OT+xX29RtuRAH8iO7ODsdCVfhFtbYdy0k+0oVBF213dCbNnsVP9mj/KaRgO3KzK90IxgqXyFECs/ocz+IVktnE/5kkejWrKRE0HrZU7sSz6B1uOIKXHNGFnQ3dEJEdT9kjMM9pg+Hvzx3imWCxMCeBzLekclnAgTKWFzNEnaMHJgJWWLKqn1rpg45XVaxFvCfu3a0ZfOaONQd2I8Ww8dWzlRyfFoUqeZTJ3aSc2jKQ2ilHQmeMyvAyg/oklebWM1iZVH0zhmxoREIgIt3EtTQSw7saQpBM2jGb25G6a5di1apMkD9dyj9/TmVri501PaDvSzRn9Wp2I62AvT6WnkL/Fp2uUiRen66Rl+TOJB1gIykS02w5SDB2/9DtLL15YchdcG2O7t8yuofdZE8KQB+xvQHk/VKQlMhZhViFZAYq1rWZbJ1awWqcjUd0OaVr6s0wSKchwXx76Mcf1fMzOWmBK+34nTsyMuPXPtSwjTHHybdT2a16nFcgFxZnlOp1mW7+s0x/IDneZZntfpCEtbp6MsP9RpgeVHOh1jeUELmnTfwZCLMOQCDpAwhKUDQ1hegiEsFQxhuQhDWBZhCMslGMLyYxjCchmGsLysZdXUU0nj2plYBmxCYGKOHrnMReVqKrlUQrtoVGpDnhJulVQUz6p/ZaBePPKGObAWSJfIml8xzpWPRuX41hUtbxo7V8Cx6m8fjvY58VLWi4U/Bf/V1lQlvWLNw5Or8BuGnmwnqjapeHRNl89VPbr+X1RUWAv0G0iFWCjKsmxwZyKEjzqdhmqglUPMbMw8tOt1y5qfw/03MUIWUP34NxQaC9yDTllJWe3grNXX27LcO4NyOBMsSTE38/pW+CIjs9J+kVnKno98HnAFjEpl2GoDrRW82ScxD5neJM8EcVtRNkja2M4EiQ0c84B5850EJmHqqg3kTuGGDfgFYW7BeSdconqjLIfuRezzKKT8W6fiRPaoaIzAs9kbYa/vQspvcQwkNPmlfgxUFaGpGDUV0DRSbqgGX8bZum1Cxg70Iyp2w7Ks4sPHFveVkm0ZhHykiNWjo5/WXqJOqtx+ZhSX752+BcEgNTF/e990cZDKu1rJMkdtA1O3GpVT15pD41WH6uZR9b3j7BM5a5puuiceel/TqtvBxVwssPZtDtJSJhfU9WGFDaLLxaVQ6mU0Se+4BxgWGNDvUIqN/6v62HyeK1WF0XEk307Ut9HnYAz8D9h/R/UD0Pdj6HINLs/3mhOfbvThbJmuohfrp+g3MGutuVm6BtzQdAPiIUetjrjKDXynBnF6pLkc6SHgY90V4gHAJoDF4BPdtYzmUwCj+Yw5PsDnzGHQZA6DLeYw2GbOGsAOcxjsMofBHnMYfMGcdYAvmcMgZA6DiDkMnjAnAHjKHAZfMYfB18xh8A1z7gN8yxwGMXMYJMxhsK/p1jDMLV7QXaC2QVWgA1NPWNzD4lBTZcj+jheG/b1BzP7BIKb+qOn2kPoTLwz1Z4OY+otBTP1V050h9TdeGOrvBjH1D4OY+ky/GMtlBr+MfJcKB5RdbD7n74n3D9vFQLkAAQAB//8AD3icrXsLcFzlleZ//v+++nb37dfte/VotVrdrW5JltuKpO6WJVluPyXbsmOEbGRjO4KVjWPZlsM4QIU4IYGlgCE2yxqKIQkJg2GreKQCTCZb1CZkiswjzOwOmSTATNVWTZLdDUwSMrVDsomD23vOf69assFAqgbk+773P4//nPOdc/5mwNjFl8WjosbaWblmxiOmIlTGYXzb11M7Z2ohAMbZCcZ5iG9prZl4whfwGju05xtttitUdwXYEUgkbQtWga5lC+XBaqJI285qpb8dVEc8Gnm5L5QM/f58yAlB399a7dD0mWAmdAqaMvBmKPKX9TdDwSjod9yhx03FAPcvI6Gk2lV33XoXUtKgL8C6Wa0WSzXbVjhg6JoqIPShCK0FOvOuE48K1V4B1VUQAVevugmP7Fz2CmTzW5/8+ZGP/+Kp7h/8oI4MuOZ7M5B9IvujH2Wf+PnCAjzn8ZK6AieMKRcvXnxWWSWCzGARlPcqtqs21WZzEBFgYIVDAYWzVJIrXBlH+hXGlWNM00GAJmYZ8sKBzTJFVZVppijqDFMVdTIWLa0o5JrdaHusPZGIG1IjFhQGK2mAZEe56kJnR1bTY7ZT7eivFGODBTdma3pHtlCNDVbwmgMHx/aO4R8ffeet5/ZCG6TfuV03IaSJU3oIzKsGO9+5PV+BwU5xqnOQx1aO8fW71yvD9fPn55/fA22PmsaFvfSgwZ8wzPiFvZ2DUMnzJ2hHVDMmHucPsSRrq7UQo4DMAV/AW7CANw/Zru3NIx20bBEpXwukArlxxOPReibaG63/SyQyiftzcBy3k1HuOHgjEgFHnkYfh4VodDJC4138Ff8hv5PlWbrWmm2O6grNEgGNCWGnbFtRm1Z04gzQPPWvkqMWF4eWU8DB267Df+gNe84bBvfRpfNI5Ny5yAmHDh5/PPLuByMlekDS9DsRR73nWHetwBShSO5PqCBQONO4E2wGlSvYZG6gMzeQ09SWFZC0tWION3oOVVXGTbGM+hrAzQj0O25yoN8R8YzzRsaZdzLwhpsGPEm783hAJ9+kq286eDX5pn/VydDjvk7i8EuchU21JJ3DNOqFzeABmywPcNXxhu/wB+3whrqwVw7Cn1j8vPfdDH6O7PR3fDV/Cb85wua/waSit309grZJHHOhHEQ9CA7zTGVCUb0ZvXzc1lrRe5Af+4An0aSL9op0IU9y6vRFtAYGKy7KJGFbQrdg2dXqGAwWilld0zUy9xLqd6A/zeFuy7gzYFmBOwOhZ6NNhZakm8YTI7S1pyM1mM032V26qevXGlzZ8+TKvROlB/BBkO9ACDalB7OZuBnuC5tRcAItpalENNOfhajVH1A2a1HjbHZ4N4r54oWLz4qPoe4jrMo2sonapm5QRQBQ3XycKVxwRRxjQuVCnWc6mrzOZ5FvBiraOmia5FubYRpok8n0ioRTKOQMNbWiszxYWAFZrQ1sB+dDJTFYghzyiBN3oB857ndIAha4Se/+YGUtjAkXXUO2xPE2eoe3TWPeMOXmzNi+j9w1HghvVbSAmu4c6nFac6MgbzXFU2baDr1241+98TfHtU/9t7df+MzU4msmfPYj06Wbw8Gqohda0/FkSyiyvtPGG/FsMKq1pLqmPvndkye/+y+08eYIHEJZpFmJra2Nop/VWuKcCwPvgRhnGlOFps6iIdAEmFVAKh53jblZyBU6nAFdbfX03tGwioZ9oGnEyDSWTQCyFzhoR+s/jdjgWLmc3L2K21zEmXCsM5aDm4g9Ny5v0PZVb+dY9Rcd/sl5eTiPj0nTaeiU+BhhW2qbuzJcUy2Nc2gCrjBkxWCqZiArGgOuwSzjAlDb5L91XfpvfYbpij6ZRIUWYoVcLqC2+UqNLddsMrekY3GZztVl2uQjpl4xjedIM+Uybc/r5viShuHgcgXuwQtpuoMHz8utCe/s8S+Y/7xMaYu2DX1yDrez3lp3cyyKdop+HLcLi878Uh9SKOSlj73cOIUFRVKVKHhaSS9JP452RCcYoJ3w85bz8Ckp9VN4xeZj9atpH4FnPCV4OtiDNIVYCrWwsbauK81VxUlaQnA+riFBisoUsiU0LbQpASCmmRAwg1MNJoH19uQ6WpriUV1jIQjphA5QjosiTfiy1tF+kPJKMTFYpAu6lkx40odnTv7VjYtC/QtTJyGH9HmMnKamGrcaqmaagRsMUwR9WeLmwsQREvIRevSvYa8uVFXo9Sc0w5A8/Rp5+jcxhXLuYAOIx/pbY+ggFp0FV8lNoLNAEQvyDkwBZR9T1ZC6xR0qFgsybix3DJcR7iIGwCsCHHQM0nYKVSBXQZPnqG7KDZiqrn8K524gpN9ghAx42k4GsvF3nohnA0kbnglkC9mrl7h4Db2TommKcVE1QOPRd97K5WJxsKO5nIjHbHtx/og3kK8iWys1he/EkKlqCbFOB6iKQp5Q5Yp6DB0AsjmPvHEFSGsoFraPaVpI2zLc2lmudErjJ/eeQwbKPoRBZulcwhwXYc6i1SdiEpiCF+KrFOIrAzKaHdhQ79tw4MAGuJv4rt8sQQu80jloGnnDfNVJBa+vn1WjSg1d8NHrg44FbTgdJ5+T77yy/gDI5wY7633yTbI7+CdyMDyEL2paDd0BvZjyfIYXH2/H+aqjDfXUisgnk3rFYMePoyZBegWanQpM5hKdlUSU1JnoQH2iG1d90IYADi0JPV2/oxMEeB7apm+aBngFw/ObMjzHzv7dgzyOh48fHZnmO9c8Wv+2RAGwHiP20UNnzx46mvYxyaMixDpZX22lQqQgRDqG4kYcMo92cpypAOo0Ti+iSYXJRGc5l8wvQhPfqpE0SYa7nDwkeQyh26OOlbecqVumoCwJ8+mDm+9/5T4eOyOt+4wk8WjavYTIG+7nD5Li2cWv8zGkMYoz51q2u3Y1JQSwfcumSn9JUxW0CZIWQ5isqKCo8zoGFPybx/lyHD2w4AaCBw7Ap1HIxAaHyZlr1tXG1owMt7h5Ox5QmxF4Iv6vDhaQoTFAYADuYIlnLa7b7RwtiOBDtVK1dbyCMXXxn5azOIIKfLFKaQP9K3HKIMYEQosvhkIWH23TQ9wIpCq9M4WxycnJsQIUYrEJ/bPGuOZohfHVzdmMaAmHm418c7DU3xdoyYPebFktPJtpHu7fefjw4R0VHiNTa06ZUTPe09a1sdTUVNrYtbo3nth11VW7tBa1d/U1a1t71rdG2u1IJNkWDYdbUs0pnnFT+OloWzISsdsjqVpvy9prqrNjed41POfPx2+J7TIXaWP5Wgf5bvToBEvpppQYOXPOJoda4gTQE6TsNK8sAvUSSHBFygfnfM9wL+8aK/Bddv0tZ8SufyKZ7ml7s20iCWdsPpPu4YVaXuur/2M6WX8riReTE21vtPUAnn4iyTxdf0vJ+/QM0pwsUL4D5BmUBQEeXpaU4W6RtExzN1In7eT9qHPpIoUdqAzSrdyHIPo1JNRps1uioCWJyIm2U/JG8oO4aZMXozF8b4RupRd5JJv7Nn8ZeUyxjlrakhJHcwO2gHMUDgGLR0MmS0GrIoMRWos0K81LUnPZYgmkw6sM8HtCoQTaT9y0Wu3f/MZuCYfijhMPhUVQNdL2hY8kMroS/8UvEqqeSfC/xzPV07k3vsqyrL+2ykYnhJjEz45OLIdbu4ncrbrWhImzltU7oqqaXAEdMWiHxPsSdvuF70K6/xf6FejjL13YBvFVP+UXrkwnyelZjBcltoLypQIoEmsoiDUw4C2QFS/I/J6yx5ybWOOqaMad0kJlKo+ElAdLqvRTMqOsgucuM64j3hgHU1H1mIkQ084Oje3eXT1lZwL1nwaD0BZMNfFTcHpv+sf7v6LEo4oZMlRbFNqH9tb60nEN0UkQ0mYawZNpR878eFuD1lWsl/Jb9J5iMbPlDKnkh3raBmS66U1M9Jm5rKUmMel1dKLOcxrVSgf5dJqU4o0g0pJyTlV37x4bytpCATOG8VUT4+m9cPoURiakE34ZMes/wbB0Roun+2p7h9oLSlwzQqZq2eIr+xe2/Rhp5QF8hHn5Hh/FfM9ibs32UrNG+l22ZbrnJ8N+fERAcD6YCp6nuPc2Aq/vWXiMfzKaye/BDfzTLPwe33MT8ns4P/y0uiLBdyZw3qRvNvGZegjF6H+escXvreOnkD7zm7IkADTbJEkU4sdw1jmwzpTj42smHLB82ijenjfx9YsXkccR+B5+I1azGtQk+4maTpnLlsBL75E7O1IPea+mzfPmUwQt00FJoG+nPxN/zruZzZprTljyx2GpXiHdYWBZtcINeB+2xVP16/GT9euDwf00TbqgK5gK7QvCmfp/wPn15WDa3BcM1l/Hy8F9wZQ31nf4Q2IjjrXyG+BnzXnMmqXiTuB5CLa01gINjvb8mesSTwHuSAEtzm8anp+uvwbdprkfhUs0wCNIxH6TP1l/vf6aPDThK0TXI5I+tjj+SX/8wIcaPxWX4y+CqsCiEIiAIzhsKrgfh+6qv+4L4RETPl6/zqMKukki9AA96OseZb3Zk7UKVKxZKt65tpR1J9p1sTGgP5Z4ah+KEzl73R/xEfr+I8H5fchlN/Jr0n0c3fSGkrz+vbhd5m2ZWltThDeKUaKh3WTZXWauS+WomBdMkjGvOCRuT9YfcIZxk0x24/5cT3q8redxe8TpTsLn03b9LIaFo/I0eQ7uxtjQm6rffI4elnTcJfbwX/qRFyG+Vw+SaJdyFIpugk0WXCcnaZFo1323viNAWHZPvk1+ugfjTf2sbcPR5LDT442bhwPj6Z5z9qi9wr8B85Ji51yXb3tISxlpSUtaZEYnFX8ZbHI6C8vk4ll2h5/YdRQbM0CUbSmXHsd5rH5zWz7fBnc/5iA1NLANwyQZ2+5JjiYfQ4mle+BxJA1prT9g+770dv4zTz9RnTPp+JlY4DJKoroOucmyT4fnsGIeFC3H9EtmB+qnGyP6413tPvs4BhIwipskDKakeIg+KKTgbl92JBkkHn1J3c8t+9ia2vBKhMFkGBJtEjrGDIzKE1SeAgTJiDAVRYpKmSGwMlksJor5gUWgjKlXYS0gurS4neaYflXJnaWBUjDKNAVhkWoF1WhHz7uJ2PapE8NHJkulySPD62/qVmLapMq10a997JqvnphQarc8dO3UQ2smYr38pfOWszK6fTs+eBKfHy4j8t2uWNrWnbDx5CNfe+TkxrHVE/EEW4ynxM9H2FhtpAeE2tnGFUH1J4xXChxD5hACLNXbLgOA3WU353rI37Y44SipbwdxwED/mEC0rOmuIzmlGkw7SBzNxZ6NN3519+zXRhV1Uosp3TdtGD68s4eXJo8uzHVtjyXc85gC9MYmRh+euuaRk+vhAG43Tm3RLGW7Clp52Oesq3N7dKVjnW9KxCdWjyFvi/nUs+Ja5CnPxtn+2t4NnVwLrELw76JqDMz1MacMGJoR0I5RVsA1lR/DLEdonLJLQWnOMcSamKlrszLnWWZ3mzcVOjsrnYWynTfVNmQ6aQFxrWtL9SQtgjqsojbxf5lp+qquSF1rVGyk02qZZEEKRkPdlv9ff3LVQ6MTFMas8xSft3fNVbd+vqg1KaF5w7RwBsirUye24UVXDS3oIcj/nz+56mF6qQlUAQ++gGoNytcxFG7P98DWMXMoHIL/6l/Z7p1riv8ko2oiyiru129WsSrmUjO1XdtWc0Pr7miOoWOV9YUQ07WQPmsCisWYDge5puAUAI3NIk6EQACmaQ+BGRaAwOSemV1TH90+vnlDrZBNFOi/nEUlLL96lYx5VZLqB5zDQLFQzGm6KuUX89L6YqxRuaPsCwXYTlJE1EVJt9ycWTo8bereoW7Wv38ewfOzmgI/N42Kn53LatjTxUCv85zbEyg+Y5hTcDddq99M2ysc8/51lABfjZ++8KvSxvUlnpCj7U+mIG3vR8yhXSbXEbaB3cDmatdds4lrhi9Z8hskNo2hkI+RQHWN6fMIUwKGFZiNhDmCNq6BoR1gejCoTzNdD86woB6cPDh33YFr91w99dHJLePr1tp525NylKZkzJtthLplN+ADzhOxjpiN1trRPwb/vhKfqIcMg8Mr3DDqd38o4cM36y9KWa+Tsn7v4/ocj134Vcg2TZsf/ABFKH4tYwrtObZYYxoF3QiQC+PjATwUho5+W8MkQlOOqUDxnlMNjZpsfB8zjJCxZe2afKeTjXeuboqT2XcOlsACB6XROFhWch7AeNy/VsZfx4fO5Aj8EjTVRPjLdtrmTS1NX7Azce6kmjZnnHf+1iuBiG0duzsmQTiZPzfjEoTGAqZ7xqt/nmmai8gXOWb0/sG9z8vyyPNOZjKDf9DlRgmQR93keVlHOU/9RTkfH8W8ieTQzWpsc21DGRM0Xw4soAUWDEDPtMB0oS9I5qeXC0PhMySPyTWjuYFctn9JEgWLp6FSXdz71TeSgzuQBmnXVHPXGqWhIhXkF+H2lQXxVqiSO5OthN9CQQSazmBOhdycwSgoZRJvQ28Yz8SVltDiwd3PUxMLN9De1dWehinH5783RvA9xhpyoHgnWAfGvE3sqtqOFT25rGIoMB4GBa0NAaepg2KYyiwVijQqFKGtopEeUFFYgQCboj0jZ8cCk7U1Q2W3MBBLjMRi0SCKxO0od6gD6Muon6Q35JGLDZS9DEpfLNZTA4aqrmrD0rwHCAO8Cs/Ur4a3J0Lql9WU4RfBJiYySfg+cviqaczLvipt59LuhbjXflPdSuRLUUd/9VV422jRv6SF/NbehYrcQ1p2AZ6jd80L5+kSRwE3WV+OVGTs9GvnU6yLDbJsrZ2aE+iijskqPtuHgTAktgz0r+xtaUaslZRRH6FKlRJrBwO9bK+lef8YXipg7j8GSJjM+GRPmSApRv6n//T4VrH3qqbRaNxoqoxSNMfwD6MV18yPulftrX+xZ7gXeka7vMCPgf2aQ8+N4bPuaKz7lg2LIGjjTT3x4T4jvubPYKL+cFtPTxscwm0DA+yVNaMjbFNt/cE9k+sUpoxgas8Gu1qjhG7GqUu+oAFel8B2gTDcgt+54If2XXv1VVsmVvRkM4m4TnnrYCGLtt5foc4F2rWO/NrIbxENvBHUy0WJBYqEg8hbyklAxoATvupfHMCZ3wAHaASEAFz/Y7pUPh+ZumWK7z65G1KGftgMJro0NbIzrOvbm1sCuhL9tBGKtrof1aLaZkdRjS4zYhzSDTDVw4bldnrPGtubWgKGiH0adR1JuR9VI/qErSgB72HMk0emp2+anr6F7kfTydZ+zdKSO0EdDRuTqaip3xAIjapaLa1aWqg/kmqNQEiXzza3ZFbqId3euezR4Iiqbkj5j7ZEIeTX7X4n9vLvLmKL2mAXILVUp0WPoyLCVJVGQ+/yNlGhjP8PNLq4y9vNy9rPrn+eW36OaPmdX0nTF7EIpu9XPlvW1XMgOiHbSHIL1ji1nsbpBdbAyXtlTRwjSHuCqyJvkjfAVEiMe317oeLEURlNKa/CI7tfVLxLp5qb4tFwUFVYJ3R6/STHqy1Xi1R9RLvvd6lSPIba14rZoo6zwa3w/7L18OGzRwC+N7B52+HD2zYPfA8OP3iIH9kyjkd4Fdwj9x85skUPzfXhQd9cSN96mB+97yjgoYUXvZ7kxYu/UW7mL7Eo+rwKK9byTKWsSWWz6N8VBaZxB5ShgDJZHerscm0J6L1at2fNGPH4CqQNZ+gAGTeaPZVNBB52IJ7nt/uI3N/B0707Do+8vmEH37rpdTLX8eEDd47Xr564Y3aIj+67azM8Q4dwYHjpHbJoOu1/8OkH++lk4s59Y2Lo+tsevG1ukA/N3uHb9f9TbkFebNRET61I/GEuOEtdCkxKcdfISpPptmSn01kdVNF4Y4NjHF1rWnh0cxWZKImsJdKcKPPIkZR5RIoYkcJ7dh665dDOHqV/4jgc2ILXkYz77zgwypGsH1zKst/L+ir6nJVsPdtR2zaC4aQTZC9CR4p0jigDQ6gmexJcUeeXdbS0xY7WslzDdpPF8uryAPX0L+tqoVNFD5QrFi7rbKGXwYnkJGCpwra4XMZe1th6JZcOCL0VgV445HepqL+l5jVdKMHP1VeH89a/WtYaK2/9Z/g4noyFYduzjf6WpSS0FIKDRovrC4aaQ9ZArQ9b1r/K58P0Yhi/4Msl4WPhFbUuzCTBb1OitsjmCVsAn+Qs3eokTJ1FeEQlI1nGXNlfnbS8tcc/sYz4wU8vsbd+lr/UII5u7mncOYBJ+WKc+5jsETe/L03AXCfmN4IlTVnCOYiVSxyWr5h45up7d/Lpu568c7ey4zRcu6yjzk9P3Xvu3im5qb9yaf98ab2AwZIsy0Zrq6nXxkG22zi121ScGiC71IoiZwcZqlAmzUCmvaU5GgkkzaQfoNCjlKimWnxvGhtR5b4r0roYFX59BZLFsvVB5NMRIVAGQ65bJoBsRuaFbLJM/0n3nZCLlZaWYKj+efWy88WezKv+yiG5dKnN23mX2uUJbi5bY+Rc4XgxBrHXGnlYb637gwLPEuXVBmD1ViiIyzgRfl5f9NddvfoB9NDxw0clWD9KV0FbdhMMjzfc+H7uJXEG8fo6Ns4O1q5fU+KCCq16PhXG3JuJcczFw6GwEaLSBXkQwNwF4DgLs1AgHDqA2FToAXEgCDpj+jTudDaDgUmnGsaG9bWx1UOVctJGzBlDf2HJWgZyh1HHkeV53RK5WC6Gc8fr45AzKSByxwlWHShTsxydSgfVLhALUZsXOiS8w0TlVOdJ006bC4ZayA43j7cN9WCqeCgYDTvGJzKnKG0Jn7ou6KSC18Frs8FUk2Jch1frv65/kWLdMMbf2fWfDKac4HFdaYpb8HY9ZDXZhnEylEgHP7t2L6YMcO46M22b111HA113zoFBDJQUpy/WLx6B36K+MxQdmlHBKerm0BIJKqUu68GgoLY0VSpexdChJiDC1WpC9qwK1cQYpS7U0BW0JAzeMrX6P+hRI2Dy4z/hqqmb4gS3jG8GLT77P1Ue5E4wfOFTFoioAS8NYVYZhv9umJapaPV6hct6wHdkHiowcqVYnvUivt5Qa+3vK/X2dBXy2Uy6pclBE4pR4XkwxWHTtq93vH+tv0l2U6pFvbNRePWrv51uBFbBWmgHbw/upXv+0LnRc1AxL/RjLrVgmvx/yP0Fq1KJxarV2A+PHct2HDvWwbvxJIYX60/THfzHrcdGH7shQm/iC2l6E/fXRumtaPU/ybeyx+p34UkVL0LJv9PAUHOomzL1w8q9uZaYoV3SIOoujHBKKii60eKMxhJHXUMgTQW0InVqqErq22AbYN6BHOMkFCMtlpWLDDc/0NM23tYLZ1uGMX5ZrWfPtkQj+chQ61lZiH+gZSiai0Sbz4JhDbeswXd2PSVr8E/twqtr8KXdu690Q2KpI6jHMMuhBjdRdbG9iQslEae6YVhDV7gBdOiHgK4iKtSERkv4yOpAP8ZMpimmNqtSRuUFG50FDD2AeaYRNrasGS0P2LTwuGDncpRJNtZ5Fpev85SVhMY6T3ewBJrtjAFIs8XZi95eSXOXLJkW75wKaXmE7afkst1TsjBDJxP3v3I//kG6Z9R+ce7WnfcfrvHRo6fPnT46CpteTMJZ7yXKMb2XTlHieMpspgUYLz+k3UsJV/LFTWNH7vvT08eHlfWHHtx+69yLSbZMRhHWhDn2SG0oYCC3qE/B0qAKuZqPg+b5XkErlwWmYkKlMkNY2eLmUAqF3OJinmKjrPIhuK1/W/IJ6z8kh5K1D2aK+/UTWqOzkz1fC4xVOgKKKqgjZqKV9nhTGGOgUGnZjiK4Mq8jJFKOMwJ0UxSLdlO/Ymvrtq8H3/UG+nBNcG0e7Vh79xt/yOf37KklDMPYaeyc3LZ1y8hwT671KoP8BApooL9agOqYUm2FATeRptTcdeQGxexmC3pWyw2u5ZSr4l9xsLCKW+DaaeqxVskXZql+XdTggY9NDrcHk331MoTzqZSj3fGlCe3GxJQT6IsGjeBkQOGQO53v+VKSb9E1EVMQ5vKs2/R7axiimWAmiVCh4/MZ1eYrecvvMWx9oa71KppmNkVhBs6G6m+veHkw8amOFi0QFY4pTI7RrikRxSd1jgBaCeytDEHmYSsUN/HTEEyqQVQ6ppY4937ER/nPmMXaWK6W8TvQy1cj+s28wcIlS70LHqQsSoS5rB18abP70ubwv0VMqrRhJALnb2SJXZ76vg7pAPc9++oF2+s8XzLyZUMt/3ajhy35encPGy4n+lIy4Xvvou1JERMJFmTa8zqHldSwlaBa9k6VC63heDzM/3cYttfndDMiKlbIwCN7eV2F8FS61toUNZhCzHltUoKChwg/yah6WVnr8jIXJer+ultoizj14CWn/GfvvEU5uIjTdtnx8nw86K1TlzWF5QsXBhYXGlw+3rLk/5IB/G8+gzZuYUagPa8ByoUaWfiRIuA35I4CrJOMVariLtOCaKD+Ryq3gvWTwSDci1AAfVtQi7zzsmWE4F5Vq/+RPKDe8714vX5SVSVGuXjxa2K/iCyN42qyOkbLkXwt6FIjmt5sRsHC11VB2yANZQl1HL+GWjFC9Em4Vx7Q2oKTeB2+oKkeL3xEkBU015zWlri4VEBrpICIlwZ7Eso2mgSVKs8GLeJN5YsLnmn7Lh7/45KS6ncSg5I/Por8NcaWi7UW27Te2JeyTGPqPg3VS9j2CzJyeznjn1qaGXCrpsq8ro655n7+1zi3WwkBRkGuRl5e3eMyi6L0TvDJcnYwTnM14fWG5Xyh5nXVLya56BmNJRUi25oYoiGRJBGXdaO+Rb1Y9R861mlZYzodsf21K8/wZ1mC8I75Hr9viTsF+fsW5BzxTSO1IFQNz6DJvnC/lPv9L6Ab4KcvfJU6gC94y9NfMP31s7i5XY5RIn6LJqKRxjAKDuOVppiQA65ycUhaEvVeQya8dVuF6uCYKClVFADVGd5FyGt9RTWAAgg50ahiNFm2YkcCarHv3QTW/6Jna0TY0VA0FEpnMkbciKJ0RGSrrMN/XzzKfy7p3saOsq21cUl7FVQ2Dboqxg8D38S4hnxooL2bGRU1qurqAtP1Q1M7xzd3Sd4MKlx9aN7cxtWq/1OQAi25ohrK0s0ilVHwbgmKVNGWD1T/IMmcmd2u68h5MhPsLpW6Mf7ZEUPfceC+0zfhdXy9uTm5cQffujnZrMQFzmZdv+n0HyDOnl33Z4RjOcFoIL338N50IIpBxBEd9+2+7fV+vGGHQ5Y18NCTDw1EwkITYRu/JwZe9fPMI+IfxFUsyjbSqvKhAcwt168pdedsTBbTzZxTnRzRxQyV/if8uggP8y2VcpqWw7iyTmgJOy3GuEu5oK35P5xC0L6GZFag308hopD9/6r3KyoE7rKG5Tqi3D9z8s6TM/3+7mEeeCxiPDanxdWDjxmRxwKIeebmVFVePajGtTl5VaWLcGDdLdMVpbTvxD0n9pWUyvQtew1RfioQFOU/1vU/Lotg4KmyMEz9nnuM2OINTVu8ETPuuUeXPuNZUcFYEmd9rFRbYSxfVUjLiN9dFerqyvd2yKWFBEEB548Fup3m1PWnBQHUERnjyKYur0O1v1pBfvl30u2Hnj4EwydOw/CBOyd23vd4+YefpuUbvHb84elmO9HXD1P3Tq1f48YM5VZ17msH5/d1fPtmWQndeOwTd1EnZNeXbtwsoBRbcbJ29T3T0GbGDO+3J95aen6KxViWDVCHL8i5wsPAxPLfE1FDb55RmQnmCYgrEoijOyX+6KeDoE66Tt5ONjkSgheKBA9LqL6qpqchU0E7QaSYtJ3+irSVimrrmpLJU3ej0gsK6vTRXbdlEXtnb9u17Z9B+Un9m9Hg5rmoE93YF4zCPwZ31H9b/6f6b3cEgzvAgAIYO4IwfMe64Q03nOX3fXzD8Lo7brzrLtiCz85tCkajwb6N0b9LJD738MOfSxTs2x7mj3yGsEgjzzBYB9Xw2hGCYAZOzYWG2uR6nFlvxlJeEZfO732ziNsX84be4ffMGz7/gRmQb1dyTX8Q/dtArU8Hb8Wybmgod53NBlQOilxbg9mPCIstK3sTAzE7O5BMJuTKkvJgwfulBskXM0CBMymXLQrpkSoDMVmJ6aA2QjGG4SJkRk38g5sd61dtYGoQ4St+jHY+U23r4aVWOEjtseoMnDgvfwCEm2+hp6r/X91AK4zYkU3HMVEaxnR3qBfqPzn+/wHPnsOreJxjYGRgYABi1vIsoXh+m68M3MwvgCIMt5YoxkDp2P9f/2exVDAHAbkcDEwgUQAz1Qu/AHicY2BkYGAO+p/FwMBS9v/r/68sFQxAERQQDACh8QbyeJxdT0sVwzAMy49AkAxAkbT3UQiAITGAISmAYQiA9th4ttUs7Q568UeSlVidiwSkB3PUPg+ESd6ZD/+8v7HyrtzwghY89ZB6BcyrYqc6RZhw48YhaA1Wc/v1PQtdeXJ/HppUmFM597nvBVK7D+Z+E8/uQZLBgDyaz3Llvxx02S3c/Hv813JrznryZP4F+6lSfQAAAAAAAAAAUAC2ATABaAGyAfoCJAKwAzYDmgQSBFwExgUyBbQF/AZOBvwHRAe2B/YISgigCPIJGglCCWQJignACgAKQAp2CroLAAtGC4oL8gxcDPINng5iDuYPag/6EF4RIBGGEeQSShKYEyQTbhOyFAoUYhS+FVoVphYoFooXHBeGGFoYnhjGGOwZChlOGXgZrBneGhwaWhqgGtIbLhvyHHQc2B1QHZ4d/wABAAAAUwBtAAYAAAAAAAIAIAAwAHMAAAB2C3AAAAAAeJx1kN9q2zAUh39q0441YxcbjN3tXJWWEcc1lEGvWkLbXZeSu8JUV/6T2VKQlY48w95ifYa9zt6jd/vFESUUYiP5O5/O8ZEE4AP+QWH9nHKsWeEdozXv4A0uIu/Sf488IN9G3sMQPyLv0/+MfICv+BV5iI/4wz+owVtGM/yNrPBZfYm8g/fqW+Rd+svIA/Jd5D18UovI+/S/Ix9gqp4iD3GoniduvvR1WQU5mhxLlmap3C/FUdVWN6IXoXK+k3MpnA2maVySuza0ZlToUZ07292YctFov6k2eWp8VzsrJ0m6qa+NNV4H87Dq1j2WWQiFFN61chX7yNy7mclDUoUwPxuPN/tjAoc5lvCoUaJCgOCI9pjfDGk/BPfMEGaus2pYaDQ0GgtWVP1Kx/ico2BkaQ0zGnKCnHNL09KNuK451721rLqhLfmfht5vzdrmp7Sr3nUfC07YL92afU1r+wrd7/Dh5WwdHrmLjDawanUK3+9acPXqPML7Wq3NaHL6pL+1QHuGMd8t5/8PvPGO3QAAAHicbZLnlpswEIV9DRiwvZtseu89Ib333vvmBWRZYMVC0pHEEufpg8BO/kTncOfTaLgMOtPr97o17P1/baKPACEiDBAjQYohRhhjDevYhu3YwA7sxC7sxh7sxT7sxwEcxCEcxhEcxTEcxwmcxCmcxhmcxTmcxwVcxCVkuIwruIpruI4buIlbuI07uIt7uI8HeIhHeIwneIpneI4XeIlXeI03eIt3eI8P+IhP+Iwv+Ipv+I5N/OiF1hEz9JKxUrtFrDl1lWF9NR9QIikToRaVjUouKxvOmNBjLxnlhgo2DbnM1djLKrNGnGPScSUzItzGv93yPP2bSQSX84z9cqFQdJ56yZRmMhW8mLlJJSaBI0XYPDaZKDUviZmvr6DrNjJMi0WcK1MTM02mqpbZlJtEsNx5SI238jSodJtoS7qv+BpPw67IY9xU+dg5TXjROTWwdGrIOzWhT+uA0jolxqjaZrSOnCF2Nmq16651EYpMm1fakAul9SJQeR5QVYQlk1VkZ8SwoVNFIVjWnKQrlBGdMToftdoZjrs77DajqXKrS02YEFxbbtdWkG0x44JJVUS5aBqKSlJwmhDrmOF2Hv9Wqsy4TNqoKhfmSrrQKuNSL5nvPG6p0s0AkEWkSWVZMy1Kx3ljk03qLuZ14lTmB8gNGmByGrGfjLrhlhJV2f7SaIneNF1ypQNbybBUSgZswQaWEUNngeay1/sD4l/60HicY/DewXAiKGIjI2Nf5AbGnRwMHAzJBRsZWJ02MTAyaIEYm7mYGDkgLD4GMIvNaRfTAaA0J5DN7rSLwQHCZmZw2ajC2BEYscGhI2Ijc4rLRjUQbxdHAwMji0NHckgESEkkEGzmYWLk0drB+L91A0vvRiYGFwAMdiP0AAA=) format('woff')}</style>
<style id="style-core" type="text/css">html{font:16px/1 Helmet,Freesans,sans-serif}#store-area,tw-storydata{display:none!important;z-index:0}.no-transition{-webkit-transition:none!important;-o-transition:none!important;transition:none!important}:-webkit-full-screen{height:100%;width:100%}:-ms-fullscreen{height:100%;width:100%}:fullscreen{height:100%;width:100%}body::-ms-backdrop{background:0 0}:focus{outline:thin dotted}:disabled{cursor:not-allowed!important}body{color:#eee;background-color:#111;overflow:auto}a{cursor:pointer;color:#68d;text-decoration:none;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}a:hover{color:#8af;text-decoration:underline}a.link-broken{color:#c22}a.link-broken:hover{color:#e44}a[disabled],span.link-disabled{color:#aaa;cursor:not-allowed!important;text-decoration:none}area{cursor:pointer}button{cursor:pointer;color:#eee;background-color:#35a;border:1px solid #57c;line-height:normal;padding:.4em;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}button:hover{background-color:#57c;border-color:#79e}button:disabled{background-color:#444;border:1px solid #666}input,select,textarea{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}select{padding:.34em .4em}input[type=text]{min-width:18em}textarea{min-width:30em;resize:vertical}input[type=checkbox],input[type=file],input[type=radio],select{cursor:pointer}input[type=range]{-webkit-appearance:none;min-height:1.2em}input[type=range]:focus{outline:0}input[type=range]::-webkit-slider-runnable-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;margin-top:-5px;width:33px}input[type=range]:focus::-webkit-slider-runnable-track{background:#222}input[type=range]::-moz-range-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-moz-range-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;width:33px}input[type=range]::-ms-track{background:0 0;border-color:transparent;color:transparent;cursor:pointer;height:10px;width:calc(100% - 1px)}input[type=range]::-ms-fill-lower{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-fill-upper{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:16px;width:33px}input:not(:disabled):focus,input:not(:disabled):hover,select:not(:disabled):focus,select:not(:disabled):hover,textarea:not(:disabled):focus,textarea:not(:disabled):hover{background-color:#333;border-color:#eee}hr{display:block;height:1px;border:none;border-top:1px solid #eee;margin:1em 0;padding:0}audio,canvas,progress,video{max-width:100%;vertical-align:middle}.error-view{background-color:#511;border-left:.5em solid #c22;display:inline-block;margin:.1em;max-width:100%;padding:0 .25em;position:relative}.error-view>.error-toggle{background-color:transparent;border:none;line-height:inherit;left:0;padding:0;position:absolute;top:0;width:1.75em}.error-view>.error{display:inline-block;margin-left:.25em}.error-view>.error-toggle+.error{margin-left:1.5em}.error-view>.error-source[hidden]{display:none}.error-view>.error-source:not([hidden]){background-color:rgba(0,0,0,.2);display:block;margin:0 0 .25em;overflow-x:auto;padding:.25em}.highlight,.marked{color:#ff0;font-weight:700;font-style:italic}.nobr{white-space:nowrap}.error-view>.error-toggle:before,.error-view>.error:before,[data-icon-after]:after,[data-icon-before]:before,[data-icon]:before,a.link-external:after{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}[data-icon]:before{content:attr(data-icon)}[data-icon-before]:before{content:attr(data-icon-before) "\00a0"}[data-icon-after]:after{content:"\00a0" attr(data-icon-after)}.error-view>.error-toggle:before{content:"\e81a"}.error-view>.error-toggle.enabled:before{content:"\e818"}.error-view>.error:before{content:"\e80d\00a0\00a0"}a.link-external:after{content:"\00a0\e80e"}</style>
<style id="style-core-display" type="text/css">#story{z-index:10;margin:2.5em}@media screen and (max-width:1136px){#story{margin-right:1.5em}}#passages{max-width:54em;margin:0 auto}</style>
<style id="style-core-passage" type="text/css">.passage{line-height:1.75;text-align:left;-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.passage-in{opacity:0}.passage ol,.passage ul{margin-left:.5em;padding-left:1.5em}.passage table{margin:1em 0;border-collapse:collapse;font-size:100%}.passage caption,.passage td,.passage th,.passage tr{padding:3px}</style>
<style id="style-core-macro" type="text/css">.macro-append-insert,.macro-linkappend-insert,.macro-linkprepend-insert,.macro-linkreplace-insert,.macro-prepend-insert,.macro-repeat-insert,.macro-replace-insert,.macro-timed-insert{-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.macro-append-in,.macro-linkappend-in,.macro-linkprepend-in,.macro-linkreplace-in,.macro-prepend-in,.macro-repeat-in,.macro-replace-in,.macro-timed-in{opacity:0}</style>
<style id="style-ui-dialog" type="text/css">html[data-dialog] body{overflow:hidden}#ui-overlay.open{visibility:visible;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-overlay:not(.open){-webkit-transition:visibility .2s step-end,opacity .2s ease-in;-o-transition:visibility .2s step-end,opacity .2s ease-in;transition:visibility .2s step-end,opacity .2s ease-in}#ui-overlay{visibility:hidden;opacity:0;z-index:100000;position:fixed;top:-50%;left:-50%;height:200%;width:200%}#ui-dialog.open{display:block;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-dialog{display:none;opacity:0;z-index:100100;position:fixed;top:50px;margin:0;padding:0}#ui-dialog>*{-webkit-box-sizing:border-box;box-sizing:border-box}#ui-dialog-titlebar{position:relative}#ui-dialog-close{display:block;position:absolute;right:0;top:0;white-space:nowrap}#ui-dialog-body{overflow:auto;min-width:280px;height:92%;height:calc(100% - 2.1em)}#ui-overlay{background-color:#000}#ui-overlay.open{opacity:.8}#ui-dialog{max-width:66em}#ui-dialog.open{opacity:1}#ui-dialog-titlebar{background-color:#444;min-height:24px}#ui-dialog-title{margin:0;padding:.2em 3.5em .2em .5em;font-size:1.5em;text-align:center;text-transform:uppercase}#ui-dialog-close{cursor:pointer;font-size:120%;margin:0;padding:0;width:3.6em;height:92%;background-color:transparent;border:1px solid transparent;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}#ui-dialog-close:hover{background-color:#b44;border-color:#d66}#ui-dialog-body{background-color:#111;border:1px solid #444;text-align:left;line-height:1.5;padding:1em}#ui-dialog-body>:first-child{margin-top:0}#ui-dialog-body hr{background-color:#444}#ui-dialog-body ul.buttons{margin:0;padding:0;list-style:none}#ui-dialog-body ul.buttons li{display:inline-block;margin:0;padding:.4em .4em 0 0}#ui-dialog-body ul.buttons>li+li>button{margin-left:1em}#ui-dialog-close{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-close{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}</style>
<style id="style-ui" type="text/css">#ui-dialog-body.settings [id|=setting-body]>div:first-child{display:table;width:100%}#ui-dialog-body.settings [id|=setting-label]{display:table-cell;padding:.4em 2em .4em 0}#ui-dialog-body.settings [id|=setting-label]+div{display:table-cell;min-width:8em;text-align:right;vertical-align:middle;white-space:nowrap}#ui-dialog-body.list{padding:0}#ui-dialog-body.list ul{margin:0;padding:0;list-style:none;border:1px solid transparent}#ui-dialog-body.list li{margin:0}#ui-dialog-body.list li:not(:first-child){border-top:1px solid #444}#ui-dialog-body.list li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-decoration:none}#ui-dialog-body.list li a:hover{background-color:#333;border-color:#eee}#ui-dialog-body.saves{padding:0 0 1px}#ui-dialog-body.saves>:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves table{border-spacing:0;width:100%}#ui-dialog-body.saves tr:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves td{padding:.33em .33em}#ui-dialog-body.saves td:first-child{min-width:1.5em;text-align:center}#ui-dialog-body.saves td:nth-child(3){line-height:1.2}#ui-dialog-body.saves td:last-child{text-align:right}#ui-dialog-body.saves .empty{color:#999;speak:none;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves .datestamp{font-size:75%;margin-left:1em}#ui-dialog-body.saves ul.buttons li{padding:.4em}#ui-dialog-body.saves ul.buttons>li+li>button{margin-left:.2em}#ui-dialog-body.saves ul.buttons li:last-child{float:right}#ui-dialog-body.settings div[id|=header-body]{margin:1em 0}#ui-dialog-body.settings div[id|=header-body]:first-child{margin-top:0}#ui-dialog-body.settings div[id|=header-body]:not(:first-child){border-top:1px solid #444;padding-top:1em}#ui-dialog-body.settings div[id|=header-body]>*{margin:0}#ui-dialog-body.settings h2[id|=header-heading]{font-size:1.375em}#ui-dialog-body.settings p[id|=header-desc],#ui-dialog-body.settings p[id|=setting-desc]{font-size:87.5%;margin:0 0 0 .5em}#ui-dialog-body.settings div[id|=setting-body]+div[id|=setting-body]{margin:1em 0}#ui-dialog-body.settings [id|=setting-control]{white-space:nowrap}#ui-dialog-body.settings button[id|=setting-control]{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}#ui-dialog-body.settings button[id|=setting-control]:hover{background-color:#333;border-color:#eee}#ui-dialog-body.settings button[id|=setting-control].enabled{background-color:#282;border-color:#4a4}#ui-dialog-body.settings button[id|=setting-control].enabled:hover{background-color:#4a4;border-color:#6c6}#ui-dialog-body.settings input[type=range][id|=setting-control]{max-width:35vw}#ui-dialog-body.list a,#ui-dialog-body.settings span[id|=setting-input]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves button[id=saves-clear]:before,#ui-dialog-body.saves button[id=saves-export]:before,#ui-dialog-body.saves button[id=saves-import]:before,#ui-dialog-body.settings button[id|=setting-control].enabled:after,#ui-dialog-body.settings button[id|=setting-control]:after{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}#ui-dialog-body.saves button[id=saves-export]:before{content:"\e829\00a0"}#ui-dialog-body.saves button[id=saves-import]:before{content:"\e82a\00a0"}#ui-dialog-body.saves button[id=saves-clear]:before{content:"\e827\00a0"}#ui-dialog-body.settings button[id|=setting-control]:after{content:"\00a0\00a0\e830"}#ui-dialog-body.settings button[id|=setting-control].enabled:after{content:"\00a0\00a0\e831"}</style>
<style id="style-ui-bar" type="text/css">#story{margin-left:20em;-webkit-transition:margin-left .2s ease-in;-o-transition:margin-left .2s ease-in;transition:margin-left .2s ease-in}#ui-bar.stowed~#story{margin-left:4.5em}@media screen and (max-width:1136px){#story{margin-left:19em}#ui-bar.stowed~#story{margin-left:3.5em}}@media screen and (max-width:768px){#story{margin-left:3.5em}}#ui-bar{position:fixed;z-index:50;top:0;left:0;width:17.5em;height:100%;margin:0;padding:0;-webkit-transition:left .2s ease-in;-o-transition:left .2s ease-in;transition:left .2s ease-in}#ui-bar.stowed{left:-15.5em}#ui-bar-tray{position:absolute;top:.2em;left:0;right:0}#ui-bar-body{height:90%;height:calc(100% - 2.5em);margin:2.5em 0;padding:0 1.5em}#ui-bar.stowed #ui-bar-body,#ui-bar.stowed #ui-bar-history{visibility:hidden;-webkit-transition:visibility .2s step-end;-o-transition:visibility .2s step-end;transition:visibility .2s step-end}#ui-bar{background-color:#222;border-right:1px solid #444;text-align:center}#ui-bar a{text-decoration:none}#ui-bar hr{border-color:#444}#ui-bar-history [id|=history],#ui-bar-toggle{font-size:1.2em;line-height:inherit;color:#eee;background-color:transparent;border:1px solid #444}#ui-bar-toggle{display:block;position:absolute;top:0;right:0;border-right:none;padding:.3em .45em .25em}#ui-bar.stowed #ui-bar-toggle{padding:.3em .35em .25em .55em}#ui-bar-toggle:hover{background-color:#444;border-color:#eee}#ui-bar-history{margin:0 auto}#ui-bar-history [id|=history]{padding:.2em .45em .35em}#ui-bar-history #history-jumpto{padding:.2em .665em .35em}#ui-bar-history [id|=history]:not(:first-child){margin-left:1.2em}#ui-bar-history [id|=history]:hover{background-color:#444;border-color:#eee}#ui-bar-history [id|=history]:disabled{color:#444;background-color:transparent;border-color:#444}#ui-bar-body{line-height:1.5;overflow:auto}#ui-bar-body>:not(:first-child){margin-top:2em}#story-title{margin:0;font-size:162.5%}#story-author{margin-top:2em;font-weight:700}#menu ul{margin:1em 0 0;padding:0;list-style:none;border:1px solid #444}#menu ul:empty{display:none}#menu li{margin:0}#menu li:not(:first-child){border-top:1px solid #444}#menu li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-transform:uppercase}#menu li a:hover{background-color:#444;border-color:#eee}#menu a,#ui-bar-history [id|=history],#ui-bar-toggle{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#menu-core li[id|=menu-item] a:before,#ui-bar-history [id|=history],#ui-bar-toggle:before{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}#ui-bar-toggle:before{content:"\e81d"}#ui-bar.stowed #ui-bar-toggle:before{content:"\e81e"}#menu-item-saves a:before{content:"\e82b\00a0"}#menu-item-settings a:before{content:"\e82d\00a0"}#menu-item-restart a:before{content:"\e82c\00a0"}#menu-item-share a:before{content:"\e82f\00a0"}</style>
<style id="style-ui-debug" type="text/css">#debug-bar{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:0;margin:0;max-height:75%;padding:.5em;position:fixed;right:0;z-index:99900}#debug-bar>div:not([id])+div{margin-top:.5em}#debug-bar>div>label{margin-right:.5em}#debug-bar>div>input[type=text]{min-width:0;width:8em}#debug-bar>div>select{width:15em}#debug-bar-toggle{color:#eee;background-color:#222;border:1px solid #444;height:101%;height:calc(100% + 1px);left:-2em;left:calc(-2em - 1px);position:absolute;top:-1px;width:2em}#debug-bar-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-hint{bottom:.175em;font-size:4.5em;opacity:.33;pointer-events:none;position:fixed;right:.6em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}#debug-bar-watch{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:102%;bottom:calc(100% + 1px);font-size:.9em;left:-1px;max-height:650%;max-height:65vh;position:absolute;overflow-x:hidden;overflow-y:scroll;right:0;z-index:99800}#debug-bar-watch[hidden]{display:none}#debug-bar-watch div{color:#999;font-style:italic;margin:1em auto;text-align:center}#debug-bar-watch table{width:100%}#debug-bar-watch tr:nth-child(2n){background-color:rgba(127,127,127,.15)}#debug-bar-watch td{padding:.2em 0}#debug-bar-watch td:first-child+td{padding:.2em .3em .2em .1em}#debug-bar-watch .watch-delete{background-color:transparent;border:none;color:#c00}#debug-bar-watch-all,#debug-bar-watch-none{margin-left:.5em}#debug-bar-views-toggle,#debug-bar-watch-toggle{color:#eee;background-color:transparent;border:1px solid #444;margin-right:1em;padding:.4em}#debug-bar-views-toggle:hover,#debug-bar-watch-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle,html[data-debug-view] #debug-bar-views-toggle{background-color:#282;border-color:#4a4}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:hover,html[data-debug-view] #debug-bar-views-toggle:hover{background-color:#4a4;border-color:#6c6}#debug-bar-hint:after,#debug-bar-toggle:before,#debug-bar-views-toggle:after,#debug-bar-watch .watch-delete:before,#debug-bar-watch-add:before,#debug-bar-watch-all:before,#debug-bar-watch-none:before,#debug-bar-watch-toggle:after{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}#debug-bar-toggle:before{content:"\e838"}#debug-bar-hint:after{content:"\e838\202f\e822"}#debug-bar-watch .watch-delete:before{content:"\e804"}#debug-bar-watch-add:before{content:"\e805"}#debug-bar-watch-all:before{content:"\e83a"}#debug-bar-watch-none:before{content:"\e827"}#debug-bar-views-toggle:after,#debug-bar-watch-toggle:after{content:"\00a0\00a0\e830"}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:after,html[data-debug-view] #debug-bar-views-toggle:after{content:"\00a0\00a0\e831"}html[data-debug-view] .debug{padding:.25em;background-color:#234}html[data-debug-view] .debug[title]{cursor:help}html[data-debug-view] .debug.block{display:inline-block;vertical-align:middle}html[data-debug-view] .debug.invalid{text-decoration:line-through}html[data-debug-view] .debug.hidden,html[data-debug-view] .debug.hidden .debug{background-color:#555}html:not([data-debug-view]) .debug.hidden{display:none}html[data-debug-view] .debug[data-name][data-type].nonvoid:after,html[data-debug-view] .debug[data-name][data-type]:before{background-color:rgba(0,0,0,.25);font-family:monospace,monospace;white-space:pre}html[data-debug-view] .debug[data-name][data-type]:before{content:attr(data-name)}html[data-debug-view] .debug[data-name][data-type|=macro]:before{content:"<<" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=macro].nonvoid:after{content:"<</" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=html]:before{content:"<" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type|=html].nonvoid:after{content:"</" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type]:not(:empty):before{margin-right:.25em}html[data-debug-view] .debug[data-name][data-type].nonvoid:not(:empty):after{margin-left:.25em}html[data-debug-view] .debug[data-name][data-type|=special],html[data-debug-view] .debug[data-name][data-type|=special]:before{display:block}</style>
</head>
<body>
	<div id="init-screen">
		<div id="init-no-js"><noscript>JavaScript is required. Please enable it to continue.</noscript></div>
		<div id="init-lacking">Your browser lacks required capabilities. Please upgrade it or switch to another to continue.</div>
		<div id="init-loading"><div>Loading&hellip;</div></div>
	</div>
	<tw-storydata name="Dawn of Corruption" startnode="565" creator="Twine" creator-version="2.3.9" ifid="118862A8-E72B-4477-9D9C-1ADCDF707B6E" zoom="0.6" format="SugarCube" format-version="2.31.1" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">/* twine-user-stylesheet #1: "Story Stylesheet" */
@import url(https://fonts.googleapis.com/css?family=Patua+One&display=swap);
@import url(https://fonts.googleapis.com/css?family=Georgia&display=swap);
@import url(https://fonts.googleapis.com/css?family=Helvetica&display=swap);

@font-face {
  font-family: DarkAndBlack;
  src: url(https://sombreve.github.io/Dawn-of-Corruption-Site/Fonts/dark-and-black.otf);
}
@font-face {
  font-family: BreatheFire;
  src: url(https://sombreve.github.io/Dawn-of-Corruption-Site/Fonts/Breathe-Fire.otf);
}
 
body, tw-story
{
  font-family: Georgia;
  font-size: 1.20em;
  color: #DFDFDF;
}

hr
{
    margin: 0;
}

a
{
  color: #89abff;
}

.corruptText0
{
  color: #DCB580;
}

.corruptText25
{
  color: #BCB2A6;
}

.corruptText50
{
  color: #99C8E2;
}

.corruptText75
{
  color: #BFB0D6;
}

.corruptText100
{
  color: #a21270;
}

.corruptBackground0
{
  background: #ffb858 !important;
}

.corruptBackground25
{
  background: #cccccc !important;
}

.corruptBackground50
{
  background: #99C8E2 !important;
}

.corruptBackground75
{
  background: #9f70e6 !important;
}

.corruptBackground100
{
  background: #980094d9 !important;
}

.corruptBackground0 button
{
  background: #9f7f54 !important;
}

.corruptBackground25 button
{
  background: #939287 !important;
}

.corruptBackground50 button
{
  background: #304651 !important;
}

.corruptBackground75 button
{
  background: #2d1c47 !important;
}

.corruptBackground100 button
{
  background: #27000f !important;
}

#splash-screen {
	position: fixed;
	left: 0;
	top: 0;
	right: 0;
	bottom: 0;
	z-index: 100;
	background-color: #111;
	color: #eee;
}
#splash-screen > img {
	display: block;
	position: absolute;
	left: 50%;
	top: 50%;
	transform: translateX(-50%) translateY(-50%);
}

.comboMoveName
{
  float: left;
}

.comboValueElementInList
{
    background-color: #999;
    border-radius: 25px 0px 0px 25px;
    padding: 7px 15px 7px 15px;
    width: 12px;
    float: left;
    margin: 0px 1px 0px 0px;
    font-weight: bold;
    text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
}

.comboValueElementInList::before {
    content: "";
    position: absolute;
    background-color: #00000000;
    height: 47px;
    width: 25px;
    border-top-left-radius: 18px;
    border-bottom-left-radius: 18px;
    box-shadow: inset 20px 0px 0px 0px #999;
    margin-top: -7px;
    margin-left: 11px;
}

#ChangeFightSkillList
{
    padding: 1px 0px 0px 0px;
}

.comboValue
{
  padding: 1px 9px 1px 9px;
  border-radius: 30px;
  float: right;
  background-color: #999;
  color: #DFDFDF;
  font-size: 16px;
  line-height: 26px;
  margin-top: 3px;
  margin-right: 2px;
  font-weight: bold;
  width: 9px;
  text-align: center;
}

.monolith
{
  font-family: BreatheFire;
  font-size: 24px;
}

.info-column1 {
  font-weight: bold;
  text-align: right;
  float: left;
  width: 40%;
  padding: 10px;
  font-size: 0.8em;
}

.info-column2 {
  text-align: left;
  float: left;
  width: 40%;
  padding: 10px;
  font-size: 0.8em;
}

.info-row:after {
  content: "";
  display: table;
  clear: both;
}

.cycle-column1 {
  text-align: left;
  float: left;
  width: 40%;
  padding: 10px;
  font-size: 0.8em;
}

.cycle-column2 {
  text-align: right;
  float: left;
  width: 40%;
  padding: 10px;
  font-size: 0.8em;
}

.cycle-title {
  color: #C0C0C0;
  font-weight: bold;
}

.cycle-row:after {
  content: "";
  display: table;
  clear: both;
}

@-webkit-keyframes animation-lightspeed-in {
  0% {
    opacity: 0;
    -webkit-transform: translateX(-200%);
            transform: translateX(-200%);
  }
  100% {
    opacity: 1;
    -webkit-transform: translateX(0);
            transform: translateX(0);
  }
}

@keyframes animation-lightspeed-in {
  0% {
    opacity: 0;
    -webkit-transform: translateX(-200%);
            transform: translateX(-200%);
  }
  100% {
    opacity: 1;
    -webkit-transform: translateX(0);
            transform: translateX(0);
  }
}

.chart-horizontal {
  margin: 0;
  padding: 0;
  list-style: none;
  overflow: hidden;
}

.chart-horizontal::after {
  clear: both;
  content: "";
  display: block;
}

.chart-horizontal .chart-bar {
  -webkit-animation: 1s animation-lightspeed-in ease forwards;
          animation: 1s animation-lightspeed-in ease forwards;
  height: 20px;
  margin: 0.5%;
  opacity: 0;
  overflow: hidden;
}

.chart-horizontal .chart-bar:nth-of-type(10) {
  -webkit-animation-delay: 2s;
          animation-delay: 2s;
}

.chart-horizontal .chart-bar:nth-of-type(9) {
  -webkit-animation-delay: 1.8s;
          animation-delay: 1.8s;
}

.chart-horizontal .chart-bar:nth-of-type(8) {
  -webkit-animation-delay: 1.6s;
          animation-delay: 1.6s;
}

.chart-horizontal .chart-bar:nth-of-type(7) {
  -webkit-animation-delay: 1.4s;
          animation-delay: 1.4s;
}

.chart-horizontal .chart-bar:nth-of-type(6) {
  -webkit-animation-delay: 1.2s;
          animation-delay: 1.2s;
}

.chart-horizontal .chart-bar:nth-of-type(5) {
  -webkit-animation-delay: 1s;
          animation-delay: 1s;
}

.chart-horizontal .chart-bar:nth-of-type(4) {
  -webkit-animation-delay: 0.8s;
          animation-delay: 0.8s;
}

.chart-horizontal .chart-bar:nth-of-type(3) {
  -webkit-animation-delay: 0.6s;
          animation-delay: 0.6s;
}

.chart-horizontal .chart-bar:nth-of-type(2) {
  -webkit-animation-delay: 0.4s;
          animation-delay: 0.4s;
}

.chart-horizontal .chart-bar:nth-of-type(1) {
  -webkit-animation-delay: 0.2s;
          animation-delay: 0.2s;
}

.chart-horizontal .chart-bar[data-skill="0"] {width: 1%;}
.chart-horizontal .chart-bar[data-skill="2"] {width: 2%;}
.chart-horizontal .chart-bar[data-skill="4"] {width: 4%;}
.chart-horizontal .chart-bar[data-skill="6"] {width: 6%;}
.chart-horizontal .chart-bar[data-skill="8"] {width: 8%;}
.chart-horizontal .chart-bar[data-skill="10"] {width: 10%;}
.chart-horizontal .chart-bar[data-skill="12"] {width: 12%;}
.chart-horizontal .chart-bar[data-skill="14"] {width: 14%;}
.chart-horizontal .chart-bar[data-skill="16"] {width: 16%;}
.chart-horizontal .chart-bar[data-skill="18"] {width: 18%;}
.chart-horizontal .chart-bar[data-skill="20"] {width: 20%;}
.chart-horizontal .chart-bar[data-skill="22"] {width: 22%;}
.chart-horizontal .chart-bar[data-skill="24"] {width: 24%;}
.chart-horizontal .chart-bar[data-skill="26"] {width: 26%;}
.chart-horizontal .chart-bar[data-skill="28"] {width: 28%;}
.chart-horizontal .chart-bar[data-skill="30"] {width: 30%;}
.chart-horizontal .chart-bar[data-skill="32"] {width: 32%;}
.chart-horizontal .chart-bar[data-skill="34"] {width: 34%;}
.chart-horizontal .chart-bar[data-skill="36"] {width: 36%;}
.chart-horizontal .chart-bar[data-skill="38"] {width: 38%;}
.chart-horizontal .chart-bar[data-skill="40"] {width: 40%;}
.chart-horizontal .chart-bar[data-skill="42"] {width: 42%;}
.chart-horizontal .chart-bar[data-skill="44"] {width: 44%;}
.chart-horizontal .chart-bar[data-skill="46"] {width: 46%;}
.chart-horizontal .chart-bar[data-skill="48"] {width: 48%;}
.chart-horizontal .chart-bar[data-skill="50"] {width: 50%;}
.chart-horizontal .chart-bar[data-skill="52"] {width: 52%;}
.chart-horizontal .chart-bar[data-skill="54"] {width: 54%;}
.chart-horizontal .chart-bar[data-skill="56"] {width: 56%;}
.chart-horizontal .chart-bar[data-skill="58"] {width: 58%;}
.chart-horizontal .chart-bar[data-skill="60"] {width: 60%;}
.chart-horizontal .chart-bar[data-skill="62"] {width: 62%;}
.chart-horizontal .chart-bar[data-skill="64"] {width: 64%;}
.chart-horizontal .chart-bar[data-skill="66"] {width: 66%;}
.chart-horizontal .chart-bar[data-skill="68"] {width: 68%;}
.chart-horizontal .chart-bar[data-skill="70"] {width: 70%;}
.chart-horizontal .chart-bar[data-skill="72"] {width: 72%;}
.chart-horizontal .chart-bar[data-skill="74"] {width: 74%;}
.chart-horizontal .chart-bar[data-skill="76"] {width: 76%;}
.chart-horizontal .chart-bar[data-skill="78"] {width: 78%;}
.chart-horizontal .chart-bar[data-skill="80"] {width: 80%;}
.chart-horizontal .chart-bar[data-skill="82"] {width: 82%;}
.chart-horizontal .chart-bar[data-skill="84"] {width: 84%;}
.chart-horizontal .chart-bar[data-skill="86"] {width: 86%;}
.chart-horizontal .chart-bar[data-skill="88"] {width: 88%;}
.chart-horizontal .chart-bar[data-skill="90"] {width: 90%;}
.chart-horizontal .chart-bar[data-skill="92"] {width: 92%;}
.chart-horizontal .chart-bar[data-skill="94"] {width: 94%;}
.chart-horizontal .chart-bar[data-skill="96"] {width: 96%;}
.chart-horizontal .chart-bar[data-skill="98"] {width: 98%;}
.chart-horizontal .chart-bar[data-skill="100"] {width: 100%;}

.stat-column1 {
  text-align: left;
  float: left;
  width: 20%;
  padding: 10px 0px 0px 10px;
  font-size: 0.8em;
}

.stat-column2 {
  text-align: right;
  float: left;
  width: 55%;
  padding: 10px 0px 0px 0px;
  margin: 0px 10px 0px 0px;
  font-size: 0.8em;
}

.stat-perturn {
  text-align: center;
  font-weight: bold;
  padding: 0;
  margin: 0;
  font-size: 0.7em;
}

.stat-title {
font-weight: bold;
}

.stat-value {
}

.stat-row {
  padding: 0px 0px 0px 40px;
}

.stat-row:after {
  content: "";
  display: table;
  clear: both;
}

body
{
  background:url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Background_fog.png);
}

#story
{
  background-color:#292B2F;
}

#story-title 
{
	display: none;
}

#story-author
{
	display: none;
}

#menu
{
  display:none;
}

.Sidebar.Corrupt0
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_sidebar_corrupt0.png);
}

.Sidebar.Corrupt25
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_sidebar_corrupt25.png);
}

.Sidebar.Corrupt50
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_sidebar_corrupt50.png);
}

.Sidebar.Corrupt75
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_sidebar_corrupt75.png);
}

.Sidebar.Corrupt100
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_sidebar_corrupt100.png);
}

.EnemyImage
{
    text-align: center;
}

#ui-bar-toggle
{
  display:none;
}

#ui-bar
{
  font-size: 1em;
  overflow: hidden, -moz-scrollbars-none;
}

#ui-bar-body::-webkit-scrollbar 
{ 
  width: 0 !important ;
}

#ui-bar-body 
{ 
  overflow: visible, -moz-scrollbars-none; 
  -ms-overflow-style: none;
}

#ui-bar-body>:not(:first-child)
{
  margin-top: 0px;
}

/*loading screen*/
#init-screen
{
  background-color: #000;
}

/*html[data-init=loading] #init-loading
{
  border:0;
  background: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/IconDiscord.png);
  animation: init-loading-spin 100s linear infinite;
  width: 512px;
  height: 512px;
}*/

#story-title
{
}

#ui-sidebar-toggle
{
  display: block;
  position: absolute;
  top: 0;
  right: 0;
  border-right: none;
  padding: 0;
  cursor: pointer;
}

.LargeBorder
{
  border: 64px solid transparent;
  padding: 0px;
}

.LargeBorder.Corrupt0
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_borderlarge_corrupt0.png) 45% round;
}
.LargeBorder.Corrupt25
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_borderlarge_corrupt25.png) 45% round;
}
.LargeBorder.Corrupt50
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_borderlarge_corrupt50.png) 45% round;
}
.LargeBorder.Corrupt75
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_borderlarge_corrupt75.png) 45% round;
}
.LargeBorder.Corrupt100
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_borderlarge_corrupt100.png) 45% round;
}

.outerComboContainer
{
    background: #151515;
}

.comboCounterContainer
{
    background: #2b2b2b;
}

.comboReadyButton
{
  display: inline-block;
  background-color: #694269;
  color: #fff;
  text-align: center;
  border-radius: 6px;
}

.captionButton
{
  cursor: pointer;
}

.picked {
  opacity: 0.65;
}

.inactive {
  pointer-events: none;
  cursor: default;
  opacity: .35;
}

.reallyInactive {
  pointer-events: none;
  cursor: default;
  opacity: .15;
}

.passage button {
	background: #455A64;
  border-color: #BEC5D8;
}

.hidden {
  display:none;
}

.expandInfo {
  border: 2px solid #ededed;
  background-color: #464646;
  padding: 5px;
}

table.LevelUpStatTable {
  max-width: 600px;
  text-align: left;
  border-collapse: collapse;
}
table.LevelUpStatTable td, table.LevelUpStatTable th {
  border: 1px solid #AAAAAA;
  padding: 8px 4px;
  height: 50px;
}

.StatCaption
{
  margin-top: 5px;
  margin-right: 10px;
  margin-left: 0;
  resize: vertical;
  border: 32px solid transparent;
  padding: 0px;
  color: white;
}

.StatCaption.Corrupt0
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_bordersmall_corrupt0.png) 40% round;
}
.StatCaption.Corrupt25
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_bordersmall_corrupt25.png) 40% round;
}
.StatCaption.Corrupt50
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_bordersmall_corrupt50.png) 40% round;
}
.StatCaption.Corrupt75
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_bordersmall_corrupt75.png) 40% round;
}
.StatCaption.Corrupt100
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_bordersmall_corrupt100.png) 40% round;
}

.ComboFightMovesContainer
{
    text-align:center;
}

.FightSkillsCombo {
    display: inline-block;
}

.RightComboZone {
    display: inline-block;
    float: right;
}

.ComboButtons button{
    background: #999999;
}

/* Tooltip container */
.PassiveAbility {
  background: #000000;
  border-radius: 10px;
  margin-top: 5px;
  margin-bottom: 10px;
  text-align: center;
}

.PassiveAbilityHeader
{
  text-transform: capitalize;
}

.levelUpCardCategory{
  text-align: center;
  border-radius: 5px;
  margin-top: 40px;
  padding: 10px 10px 10px 10px;
}

.AbilityGradeVeryLow{
  background: #4646467a;
}

.AbilityGradeLow{
  background: #717171;
}

.AbilityGradeMedium{
  background: #254024;
}

.AbilityGradeHigh{
  background: #34124e;
}

.AbilityGradeVeryHigh{
  background: #5f3d00;
}

.levelUpCards{
  font-size: 21px;
  text-align: left;
  border-radius: 5px;
  margin-top: 15px;
  padding: 10px 5px 5px 5px;
}

.levelUpCards p{
  text-align: left;
  background: #131412;
  padding: 10px 10px 10px 20px;
  font-size: 18px;
  border-radius: 3px;
  margin-block-start: 0em;
  margin-block-end: 0em;
  margin-inline-start: 0px;
  margin-inline-end: 0px;
}


/* Tooltip text */
.PassiveAbilityBody {
  background: #131412;
  border-radius: 5px;
  margin-top: 5px;
  margin-bottom: 0px;
  font-size: 15px;
  text-align: center;
  padding-left: 10px;
  padding-right: 10px;
}

#ProgressBarContainer {
  height: 20px;
  width: 200px;
  position: relative;
  margin: 0 auto;
  border: 1px;
}
#ProgressBarContent,
#ProgressBarBorder {
  width: 100%;
  height: 100%;
  position: absolute;
}
#ProgressBarBorder {
  z-index: 10;
}

progress#HPProgress {
  background: crimson;
  vertical-align: baseline;
}

progress#HPProgress::-webkit-progress-value {
  background: crimson url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_bars_healthbar.png) no-repeat border-box;
}

progress#StaminaProgress {
  background: #397131;
  vertical-align: baseline;
}

progress#StaminaProgress::-webkit-progress-value {
  background: crimson url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_bars_staminabar.png) no-repeat border-box;
}

progress#ArousalProgress {
  background: #65318A;
  vertical-align: baseline;
}

progress#ArousalProgress::-webkit-progress-value {
  background: crimson url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_bars_arousalbar.png) no-repeat border-box;
}

#StatModifierPositive
{
  color:#2dd8ff;
}

#StatModifierNegative
{
  color:red;
}

.FightSkillCard 
{
  display:inline-block;
  min-width: 250px;
  max-width: 250px;
  min-height: 234px;
  max-height: 234px;
  margin-top: 10px;
  margin-right: 10px;
  margin-left: 0;
  vertical-align: top;
  resize: vertical;
  font-family: Patua One;
  text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
  padding: 10px;
  color: rgba(255, 255, 255, 1);
}

.FightSkillCard.slotted.Corrupt0
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_talisman_cor0.png);
}

.FightSkillCard.slotted.Corrupt25
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_talisman_cor25.png);
}

.FightSkillCard.slotted.Corrupt50
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_talisman_cor50.png);
}

.FightSkillCard.slotted.Corrupt75
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_talisman_cor75.png);
}

.FightSkillCard.slotted.Corrupt100
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_talisman_cor100.png);
}

.FightSkillCard.demon.Corrupt0
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_demon_cor0.png);
}

.FightSkillCard.demon.Corrupt25
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_demon_cor25.png);
}

.FightSkillCard.demon.Corrupt50
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_demon_cor50.png);
}

.FightSkillCard.demon.Corrupt75
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_demon_cor75.png);
}

.FightSkillCard.demon.Corrupt100
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_demon_cor100.png);
}

.FightSkillCard.special.Corrupt0
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_special_cor0.png);
}

.FightSkillCard.special.Corrupt25
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_special_cor25.png);
}

.FightSkillCard.special.Corrupt50
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_special_cor50.png);
}

.FightSkillCard.special.Corrupt75
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_special_cor75.png);
}

.FightSkillCard.special.Corrupt100
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_special_cor100.png);
}

.FightSkillCard.symbiote.Corrupt0
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_symbiote_cor0.png);
}

.FightSkillCard.symbiote.Corrupt25
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_symbiote_cor25.png);
}

.FightSkillCard.symbiote.Corrupt50
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_symbiote_cor50.png);
}

.FightSkillCard.symbiote.Corrupt75
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_symbiote_cor75.png);
}

.FightSkillCard.symbiote.Corrupt100
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_symbiote_cor100.png);
}

.FightSkillCard.sigil.Corrupt0
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_special_cor0.png);
}

.FightSkillCard.sigil.Corrupt25
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_special_cor25.png);
}

.FightSkillCard.sigil.Corrupt50
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_special_cor50.png);
}

.FightSkillCard.sigil.Corrupt75
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_special_cor75.png);
}

.FightSkillCard.sigil.Corrupt100
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/card_special_cor100.png);
}

#FightSkillHeader { 
  margin-top: 5px;
  margin-bottom: 10px;
  margin-left: 23px;
  font-size: 20px;
  overflow: hidden;
}

#FightSkillBody { 
  margin-top: 5px;
  margin-bottom: 0px;
  font-size: 16px;
  line-height: 23px;
  text-align: left;
  padding-left: 10px;
}

.tooltip {
  position: relative;
  display: inline-block;
  border-bottom: 1px dotted black;
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: 180px;
  background-color: #555;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 5px 0;
  position: absolute;
  z-index: 11;
  bottom: 125%;
  left: 50%;
  margin-left: -90px;
  opacity: 0;
  transition: opacity 0.3s;
  font-size: 13px;
}

.tooltip .tooltiptext::after {
  content: "";
  position: absolute;
  top: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: #555 transparent transparent transparent;
}

.tooltip:hover .tooltiptext {
  visibility: visible;
  opacity: 1;
}

.tooltipskill {
  position: relative;
  display: inline-block;
  border-bottom: 1px dotted black;
}

.tooltipskill .tooltipskilltext {
  visibility: hidden;
  width: 250px;
  background-color: #555;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 5px 0;
  position: absolute;
  z-index: 1;
  bottom: 100%;
  left: 36%;
  margin-left: -90px;
  opacity: 0;
  transition: opacity 0.3s;
  font-size: 13px;
}

.tooltipskill .tooltipskilltext::after {
  content: "";
  position: absolute;
  top: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: #555 transparent transparent transparent;
}

.tooltipskill:hover .tooltipskilltext {
  visibility: visible;
  opacity: 1;
}

.glitch {
  position: relative;
  margin: 0 auto;
  background: #292B2F;
  white-space: nowrap;
  color: #87CEFA;
}

.glitch::before,
.glitch::after {
  -webkit-animation-iteration-count: infinite;
          animation-iteration-count: infinite;
  -webkit-animation-timing-function: linear;
          animation-timing-function: linear;
  animation-direction: alternate-reverse;
  overflow: hidden;
  position: absolute;
  clip: rect(0, 9999px, 0, 0);
  content: attr(data-text);
}

.glitch::after {
  -webkit-animation-name: glitch-animation;
          animation-name: glitch-animation;
  -webkit-animation-duration: 4s;
          animation-duration: 4s;
  left: 2px;
  top: -8px;
  text-shadow: 2px 2px 4px #000000;
  background: #292B2F;
}

.glitch::before {
  -webkit-animation-name: glitch-animation-2;
          animation-name: glitch-animation-2;
  -webkit-animation-duration: 6s;
          animation-duration: 6s;
  left: -2px;
  top: -8px;
  text-shadow: 2px 2px 4px #000000;
  background: #292B2F;
}

/* Expanded Animations */
@-webkit-keyframes glitch-animation {
  0% {
    clip: rect(42px, 9999px, 44px, 0);
  }
  5% {
    clip: rect(12px, 9999px, 59px, 0);
  }
  10% {
    clip: rect(48px, 9999px, 29px, 0);
  }
  15.0% {
    clip: rect(42px, 9999px, 73px, 0);
  }
  20% {
    clip: rect(63px, 9999px, 27px, 0);
  }
  25% {
    clip: rect(34px, 9999px, 55px, 0);
  }
  30.0% {
    clip: rect(86px, 9999px, 73px, 0);
  }
  35% {
    clip: rect(20px, 9999px, 20px, 0);
  }
  40% {
    clip: rect(26px, 9999px, 60px, 0);
  }
  45% {
    clip: rect(25px, 9999px, 66px, 0);
  }
  50% {
    clip: rect(57px, 9999px, 98px, 0);
  }
  55.0% {
    clip: rect(5px, 9999px, 46px, 0);
  }
  60.0% {
    clip: rect(82px, 9999px, 31px, 0);
  }
  65% {
    clip: rect(54px, 9999px, 27px, 0);
  }
  70% {
    clip: rect(28px, 9999px, 99px, 0);
  }
  75% {
    clip: rect(45px, 9999px, 69px, 0);
  }
  80% {
    clip: rect(23px, 9999px, 85px, 0);
  }
  85.0% {
    clip: rect(54px, 9999px, 84px, 0);
  }
  90% {
    clip: rect(45px, 9999px, 47px, 0);
  }
  95% {
    clip: rect(37px, 9999px, 20px, 0);
  }
  100% {
    clip: rect(4px, 9999px, 91px, 0);
  }
}
@keyframes glitch-animation {
  0% {
    clip: rect(42px, 9999px, 44px, 0);
  }
  5% {
    clip: rect(12px, 9999px, 59px, 0);
  }
  10% {
    clip: rect(48px, 9999px, 29px, 0);
  }
  15.0% {
    clip: rect(42px, 9999px, 73px, 0);
  }
  20% {
    clip: rect(63px, 9999px, 27px, 0);
  }
  25% {
    clip: rect(34px, 9999px, 55px, 0);
  }
  30.0% {
    clip: rect(86px, 9999px, 73px, 0);
  }
  35% {
    clip: rect(20px, 9999px, 20px, 0);
  }
  40% {
    clip: rect(26px, 9999px, 60px, 0);
  }
  45% {
    clip: rect(25px, 9999px, 66px, 0);
  }
  50% {
    clip: rect(57px, 9999px, 98px, 0);
  }
  55.0% {
    clip: rect(5px, 9999px, 46px, 0);
  }
  60.0% {
    clip: rect(82px, 9999px, 31px, 0);
  }
  65% {
    clip: rect(54px, 9999px, 27px, 0);
  }
  70% {
    clip: rect(28px, 9999px, 99px, 0);
  }
  75% {
    clip: rect(45px, 9999px, 69px, 0);
  }
  80% {
    clip: rect(23px, 9999px, 85px, 0);
  }
  85.0% {
    clip: rect(54px, 9999px, 84px, 0);
  }
  90% {
    clip: rect(45px, 9999px, 47px, 0);
  }
  95% {
    clip: rect(37px, 9999px, 20px, 0);
  }
  100% {
    clip: rect(4px, 9999px, 91px, 0);
  }
}
@-webkit-keyframes glitch-animation-2 {
  0% {
    clip: rect(65px, 9999px, 100px, 0);
  }
  5% {
    clip: rect(52px, 9999px, 74px, 0);
  }
  10% {
    clip: rect(79px, 9999px, 85px, 0);
  }
  15.0% {
    clip: rect(75px, 9999px, 5px, 0);
  }
  20% {
    clip: rect(67px, 9999px, 61px, 0);
  }
  25% {
    clip: rect(14px, 9999px, 79px, 0);
  }
  30.0% {
    clip: rect(1px, 9999px, 66px, 0);
  }
  35% {
    clip: rect(86px, 9999px, 30px, 0);
  }
  40% {
    clip: rect(23px, 9999px, 98px, 0);
  }
  45% {
    clip: rect(85px, 9999px, 72px, 0);
  }
  50% {
    clip: rect(71px, 9999px, 75px, 0);
  }
  55.0% {
    clip: rect(2px, 9999px, 48px, 0);
  }
  60.0% {
    clip: rect(30px, 9999px, 16px, 0);
  }
  65% {
    clip: rect(59px, 9999px, 50px, 0);
  }
  70% {
    clip: rect(41px, 9999px, 62px, 0);
  }
  75% {
    clip: rect(2px, 9999px, 82px, 0);
  }
  80% {
    clip: rect(47px, 9999px, 73px, 0);
  }
  85.0% {
    clip: rect(3px, 9999px, 27px, 0);
  }
  90% {
    clip: rect(26px, 9999px, 55px, 0);
  }
  95% {
    clip: rect(42px, 9999px, 97px, 0);
  }
  100% {
    clip: rect(38px, 9999px, 49px, 0);
  }
}
@keyframes glitch-animation-2 {
  0% {
    clip: rect(65px, 9999px, 100px, 0);
  }
  5% {
    clip: rect(52px, 9999px, 74px, 0);
  }
  10% {
    clip: rect(79px, 9999px, 85px, 0);
  }
  15.0% {
    clip: rect(75px, 9999px, 5px, 0);
  }
  20% {
    clip: rect(67px, 9999px, 61px, 0);
  }
  25% {
    clip: rect(14px, 9999px, 79px, 0);
  }
  30.0% {
    clip: rect(1px, 9999px, 66px, 0);
  }
  35% {
    clip: rect(86px, 9999px, 30px, 0);
  }
  40% {
    clip: rect(23px, 9999px, 98px, 0);
  }
  45% {
    clip: rect(85px, 9999px, 72px, 0);
  }
  50% {
    clip: rect(71px, 9999px, 75px, 0);
  }
  55.0% {
    clip: rect(2px, 9999px, 48px, 0);
  }
  60.0% {
    clip: rect(30px, 9999px, 16px, 0);
  }
  65% {
    clip: rect(59px, 9999px, 50px, 0);
  }
  70% {
    clip: rect(41px, 9999px, 62px, 0);
  }
  75% {
    clip: rect(2px, 9999px, 82px, 0);
  }
  80% {
    clip: rect(47px, 9999px, 73px, 0);
  }
  85.0% {
    clip: rect(3px, 9999px, 27px, 0);
  }
  90% {
    clip: rect(26px, 9999px, 55px, 0);
  }
  95% {
    clip: rect(42px, 9999px, 97px, 0);
  }
  100% {
    clip: rect(38px, 9999px, 49px, 0);
  }
}
/* twine-user-stylesheet #2: "typedjs-integration-module.css" */
/* Typed.js text (and cursor) styling. */
.typed, .typed-cursor {
	font-family: monospace, monospace;
	color: lime;
}

/* Typed.js animated cursor styling. */
@-webkit-keyframes blink {
	0% { opacity: 1; }
	50% { opacity: 0; }
	100% { opacity: 1; }
}
@-moz-keyframes blink {
	0% { opacity: 1; }
	50% { opacity: 0; }
	100% { opacity: 1; }
}
@keyframes blink {
	0% { opacity: 1; }
	50% { opacity: 0; }
	100% { opacity: 1; }
}
.typed-cursor {
	opacity: 1;
	-webkit-animation: blink 0.7s infinite;
	-moz-animation: blink 0.7s infinite;
	animation: blink 0.7s infinite;
}
</style><script role="script" id="twine-user-script" type="text/twine-javascript">/* twine-user-script #1: "AbilityHelper.js" */
setup.callAbilityTrigger = function(character, triggerName, abilityParams)
{
    if(character.fight.abilities == undefined)
        return "";

    var displayString = [];

    var i;
    for(i = 0; i < character.fight.abilities.length; i++)
	{
		if(character.fight.abilities[i][triggerName] != undefined)
		{
			displayString.push(character.fight.abilities[i][triggerName](abilityParams));
		}
    }
    
    return displayString.join("\n");
};

setup.upgradeAbility = function(character, abilityID)
{
    var i;
    for(i = 0; i < character.fight.abilities.length; i++)
    {
        if(character.fight.abilities[i].id == abilityID)
        {
            if(character.fight.abilities[i].upgrade)
            {
                character.fight.abilities[i] = character.fight.abilities[i].upgrade;
                if(character.fight.abilities[i].onAcquire)
                {
                    character.fight.abilities[i].onAcquire(character);
                }

                return true;
            }
        }
    }

    return false;
};

setup.hasAbility = function(character, abilityID, abilityRank=1)
{
    var i;
    for(i = 0; i < character.abilityHandler.abilityRuntimeDatas.length; i++)
    {
        if(character.abilityHandler.abilityRuntimeDatas[i].abilityData.id == abilityID)
        {
            if(character.abilityHandler.abilityRuntimeDatas[i].rank == abilityRank)
            {
                return true;
            }
        }
    }

    return false;
};

setup.hasModifier = function(character, name)
{
    var i;
    for(i = 0; i < character.fight.variables.fightModifiers.length; i++)
    {
        if(character.fight.variables.fightModifiers[i].name == name)
        {
            return true;
        }
    }

    return false;
};

setup.levelUp = function(character, levelUpParams, abilityChoiceIndex)
{
    State.variables.Level++;

    setup.setBaseStatValue(character, "hp", levelUpParams.hp.value);
    setup.setBaseStatValue(character, "stamina", levelUpParams.stamina.value);
    setup.setBaseStatValue(character, "strength", levelUpParams.strength.value);
    setup.setBaseStatValue(character, "arousalGain", levelUpParams.arousalGain.value);
    setup.setBaseStatValue(character, "staminaRecovery", levelUpParams.staminaRecovery.value);

    if(abilityChoiceIndex != undefined)
    {
        character.applyAbilityRuntimeData(State.variables.AbilityList[abilityChoiceIndex]);
    }

    var params = 
    {
        trigger: State.variables.AbilityTrigger.ON_LEVEL_UP,
        self: character,
    }
    character.broadcastAbilityTrigger(params);
};

setup.getDemonicTFPassage = function(character)
{
    if(setup.hasAbility(character, "Ability_DemonicCorruption"))
    {
        return "Transformation_Incubus_Level2_1";
    }
    else if(setup.hasAbility(character, "Ability_DemonicCorruption_2"))
    {
        return "Transformation_Incubus_Level3_1";
    }
    else if(setup.hasAbility(character, "Ability_DemonicCorruption_3"))
    {
        return undefined;
    }
    return "Transformation_Incubus_Level1_1"  
};

setup.displaySeedMoveIntro = function(character, target, color)
{
    var displayString = " ";

    displayString += character.info.name +" feels an urge building within him as his balls suddenly expand.\n";
    displayString += "A thundering roar emerges from him as a sudden orgasm overtakes his body!\n";
    displayString += setup.processFlavours(State.variables.CharacterSheet_Player, "Thick loads of "+color+" cum shoots out from his "+setup.getLength(setup.getStatValue(character, "cock"))+" @[all| cocks| noverb], "+target.info.name+" is inevitably hit by some of it.\n");
    return displayString;
}

setup.getDemonicTFCost = function(character)
{
    if(setup.hasAbility(character, "Ability_DemonicCorruption"))
    {
        return 300;
    }
    else if(setup.hasAbility(character, "Ability_DemonicCorruption_2"))
    {
        return 500;
    }
    else if(setup.hasAbility(character, "Ability_DemonicCorruption_3"))
    {
        return undefined;
    }
    return 100;
};

setup.getNyxChosenFeedEssenceCost = function()
{
    if(State.variables.WorldState.apothusChosen.essenceLevel == 0)
    {
        return 1500;
    }
    else if(State.variables.WorldState.apothusChosen.essenceLevel == 1)
    {
        return 3000;
    }
    else if(State.variables.WorldState.apothusChosen.essenceLevel == 2)
    {
        return 5000;
    }
    return 9999999;
};

setup.displayStatsUp = function(character, levelUpParams)
{
    var displayString = "<table class='LevelUpStatTable'>";

    displayString += "<colgroup>";
    displayString += "<col span='1' style='width: 70%;'>";
    displayString += "<col span='1' style='width: 10%;'>";
    displayString += "<col span='1' style='width: 10%;'>";
    displayString += "<col span='1' style='width: 10%;'>";
    displayString += "</colgroup>";

    for(var propertyName in levelUpParams) 
    {
        if(levelUpParams[propertyName].name == undefined)
            continue;

        displayString += "<tr>";
        displayString += "<td>";
        displayString += levelUpParams[propertyName].name;
        displayString += "</td>";

        displayString += "<td>";
        displayString +=" <span id='" + propertyName + "'>"+ levelUpParams[propertyName].value +"</span>";
        displayString += "</td>";

        displayString += "<td>";
        displayString += "<span class='LevelUpPlus'>"
                            +"<<button '+'>>"
                                +"<<set $LevelUpParams['"+ propertyName +"'].value++>>"
                                +"<<replace '#" + propertyName + "'>><<print $LevelUpParams['"+ propertyName +"'].value>><</replace>>"
                                +"<<set $LevelUpParams.point-->>"
                                +"<<replace '#LevelUp-Points'>><<print $LevelUpParams.point>><</replace>>"
                                +"<<if $LevelUpParams.point <= 0>>"
                                    +"<<addclass '.LevelUpPlus' 'hidden'>>"
                                    +"<<removeclass '.LevelUpConfirm' 'inactive'>>"
                                +"<</if>>"
                                +"<<set _canRemove = setup.canRemoveAbilityPoint('"+propertyName+"', $LevelUpParams['"+propertyName+"'].value)>>"
                                +"<<if $LevelUpParams.point < 5  && _canRemove>>"
                                    +"<<removeclass '.LevelUpMinus"+ propertyName +"' 'hidden'>>"
                                +"<</if>>"
                            +"<</button>>"
                        +"</span>";
        displayString += "</td>";

        displayString += "<td>";
        displayString += "<span class='LevelUpMinus"+ propertyName +" hidden'>"
                            +"<<button '-'>>"
                                +"<<set $LevelUpParams['"+ propertyName +"'].value-->>"
                                +"<<replace '#" + propertyName + "'>><<print $LevelUpParams['"+ propertyName +"'].value>><</replace>>"
                                +"<<set $LevelUpParams.point++>>"
                                +"<<replace '#LevelUp-Points'>><<print $LevelUpParams.point>><</replace>>"
                                +"<<if $LevelUpParams.point > 0>>"
                                    +"<<removeclass '.LevelUpPlus' 'hidden'>>"
                                    +"<<addclass '.LevelUpConfirm' 'inactive'>>"
                                +"<</if>>"
                                +"<<set _canRemove = setup.canRemoveAbilityPoint('"+propertyName+"', $LevelUpParams['"+propertyName+"'].value)>>"
                                +"<<if $LevelUpParams.point >= 5  || !_canRemove>>"
                                    +"<<addclass '.LevelUpMinus"+ propertyName +"' 'hidden'>>"
                                +"<</if>>"
                            +"<</button>>"
                        +"</span>";
        displayString += "</td>";

        displayString += "</tr>";
    }

    displayString += "</table>";

    return displayString;
};

setup.printChangeFightSkillList = function()
{
    var displayString = "";

    displayString += State.variables.FightMovesLeft + ' moves left to choose.\n';

    for(let i = 0; i < State.variables.ComboableMovesChoices.length; i++) 
    {
        if(State.variables.FightMovesLeft <= 0 && (State.variables.ComboableMovesChoices[i].chosen == undefined || State.variables.ComboableMovesChoices[i].chosen == false))
        {
            displayString += "<span class='reallyInactive'>";
        }
        
        var pickedClass = "";
        if(State.variables.ComboableMovesChoices[i].chosen == true)
        {
            pickedClass += "picked ";
        }
        
        let params = 'class="FightSkillCard '+pickedClass+setup.getCorruptionUIClassName(State.variables.ComboableMovesChoices[i].skillType, setup.getStatValue(State.variables.CharacterSheet_Player, "corruption"))+'"';
        displayString += '<span '+params+'>';
        displayString += '<<link "'+setup.getSkillDisplayString(State.variables.CharacterSheet_Player, undefined, State.variables.ComboableMovesChoices[i], undefined)+'">>';
        displayString += '<<replace "#ChangeFightSkillList">>';

        if(State.variables.ComboableMovesChoices[i].chosen == true)
        {
            displayString += '<<set $FightMovesLeft++>>';
            displayString += '<<set $ComboableMovesChoices['+i+'].chosen = false>>';
        }
        else
        {
            displayString += '<<set $FightMovesLeft-->>';
            displayString += '<<set $ComboableMovesChoices['+i+'].chosen = true>>';
        }
        displayString += '<<print setup.printChangeFightSkillList()>>';

        displayString += '<</replace>>';
        displayString += '<</link>>';
        displayString += '</span>';

        if(State.variables.FightMovesLeft <= 0 && (State.variables.ComboableMovesChoices[i].chosen == undefined || State.variables.ComboableMovesChoices[i].chosen == false))
        {
            displayString += '</span>';
        }
    }

    displayString += "\n\n";
    displayString += "[[Cancel->Village][[setup.resetComboableFightMoveList()]]]";
    displayString += "\n";

    if(State.variables.FightMovesLeft <= 0)
    {
        displayString += "[[Apply->Village][setup.applyComboableFightMoveList(); setup.resetComboableFightMoveList()]]";
    }
    else
    {
        displayString += "<span class='inactive'>[[Apply->Village]]</span>";
    }

    return displayString;
}

setup.resetComboableFightMoveList = function()
{
    var movelist = setup.getFightMovesWithAddons(State.variables.CharacterSheet_Player);

    State.variables.ComboableMovesChoices = undefined;
    for(let i = 0; i < movelist.length; ++i)
    {
        movelist[i].chosen = false;
    }
}

setup.applyComboableFightMoveList = function()
{
    var movelist = setup.getFightMovesWithAddons(State.variables.CharacterSheet_Player);

    for(let i = 0; i < movelist.length; ++i)
    {
        movelist[i].equipped = false;
    }
    
    State.variables.ComboableMovesChoices = State.variables.ComboableMovesChoices.filter(function(val) {
        return val.chosen == true;
    });
    
    console.log("applyin shit")
    console.log(State.variables.ComboableMovesChoices)

    for(let i = 0; i < movelist.length; ++i)
    {
        for(let j = 0; j < State.variables.ComboableMovesChoices.length; ++j)
        {
            if(movelist[i].id == State.variables.ComboableMovesChoices[j].id)
            {
                movelist[i].equipped = true;
            }
        }
    }

    State.variables.ComboableMovesChoices = undefined;
}

setup.displayChangeFightMoves = function()
{
    var displayString = "";
    var movelist = setup.getFightMovesWithAddons(State.variables.CharacterSheet_Player);

    State.variables.ComboableMovesChoices = movelist.filter(function(val) {
        console.log("combo")
        console.log(val)
        if(val.comboCost != undefined)
        {
            return true;
        }
        return false;
    });

    
    displayString += '<span id="ChangeFightSkillList">';
    displayString += setup.printChangeFightSkillList();
    displayString += '</span>';

    console.log("logginb")
    console.log(displayString)

    return displayString;
};

setup.canRemoveAbilityPoint = function(propertyName, value)
{
    if(State.variables.CharacterSheet_Player.fight[propertyName] != undefined)
    {
        if(State.variables.CharacterSheet_Player.fight[propertyName] >= value)
        {
            return false;
        }
            
    }

    return true;
};

setup.displayAbilitiesUp = function(character)
{
    var displayString = "";

    for(var propertyName in State.variables.AbilityCategory)
    {
        var categoryString = setup.getAbilityCategoryDescription(character, State.variables.AbilityCategory[propertyName]);
        if(categoryString != "")
        {
            displayString += setup.getAbilityCategory(State.variables.AbilityCategory[propertyName]);
            displayString += categoryString;
            displayString += "</div>"
        }
    }

    return displayString;
};

setup.getAbilityCategoryDescription = function(character, category)
{
    var i;
    var j;
    var displayString = "";
    for(var gradeProperty in State.variables.AbilityGrade)
    {
        for(i = 0; i < State.variables.AbilityList.length; i++)
        {
            if(category != State.variables.AbilityList[i].category)
            {
                continue;
            }
                
            if(State.variables.AbilityGrade[gradeProperty] != State.variables.AbilityList[i].grade)
            {
                continue;
            }

            var ability = undefined;
            var unlocked = false;
            for(j = 0; j < character.abilityHandler.abilityRuntimeDatas.length; j++)
            {
                let abilityRuntimeData = character.abilityHandler.abilityRuntimeDatas[j];
                let abilityData = character.abilityHandler.abilityRuntimeDatas[j].abilityData;

                if(State.variables.AbilityList[i].baseID == abilityData.baseID)
                {
                    unlocked = true;
                    if(abilityRuntimeData.canRank()){
                        ability = abilityData;
                        displayString += setup.createRadioButton(i, abilityRuntimeData, abilityData, character);
                    }else if (abilityData.nextAbility != undefined){
                        if (abilityData.upgradeConditionFunction(abilityRuntimeData, character)){
                            displayString += setup.createRadioButton(i, abilityRuntimeData, abilityData, character);
                        }else{
                            let info = abilityData.nextAbility.name + " " + "[Conditions Not Met]" +" :\n";
                            info += "<p style='opacity:.35'>" + abilityData.nextAbility.description(character, undefined) + '</p>';
                            info += "<p style='color:#9e21218c;'>" + abilityData.upgradeDescription(character) + '</p>';
                            displayString += '<div class="levelUpCards '+setup.getAbilityGradeClass(abilityData)+'"><span class="inactive">' + info + '</span></div>';
                        }
                    }
                }
            }
            if(!unlocked && (State.variables.AbilityList[i].unlockCondition(character)))
            {            
                displayString += setup.createRadioButton(i, undefined, State.variables.AbilityList[i], character);
            }
        }
    }

    return displayString;
}

setup.getAbilityCategory = function(category)
{
    var displayString = '<div class="levelUpCardCategory">';
    displayString += setup.getAbilityCategoryDisplayName(category);

    return displayString;
}

setup.getAbilityCategoryDisplayName = function(category)
{
    var categories = State.variables.AbilityCategory;

    var displayString = "<h2>";

    switch(category)
    {
        case categories.NONE:
            displayString += "";
            break;
        case categories.WARRIOR:
            displayString += "Ways of the Salvager";
            break;
        case categories.GROWTH:
            displayString += "Powers of Growth";
            break;
        case categories.SOMBREVE:
            displayString += "Whispers of Sombreve";
            break;
        case categories.ORTHA:
            displayString += "Teachings of Ortha";
            break;
        case categories.LUST:
            displayString += "Lustful Instincts";
            break;
    }

    displayString += "</h2>";

    return displayString;
}

setup.getAbilityGradeClass = function(abilityData)
{
    var grades = State.variables.AbilityGrade;
    switch(abilityData.grade)
    {
        case grades.VERYLOW:
            return "AbilityGradeVeryLow";
        case grades.LOW:
            return "AbilityGradeLow";
        case grades.MEDIUM:
            return "AbilityGradeMedium";
        case grades.HIGH:
            return "AbilityGradeHigh";
        case grades.VERYHIGH:
            return "AbilityGradeVeryHigh";
    }
}  

setup.createRadioButton = function(radioListIndex, abilityRuntimeData, abilityData, character){
    var upgradeString = "";
    var abilityData = abilityData;
    
    if(abilityRuntimeData != undefined){
        if(abilityRuntimeData.canRank()){
            upgradeString += " [" + abilityRuntimeData.rank + "/" + abilityData.maxRank + "]" + " → " + " [" + (abilityRuntimeData.rank + 1) + "/" + abilityData.maxRank + "]"
        }else{
            if ((abilityData.nextAbility != undefined) && (abilityData.upgradeConditionFunction(abilityRuntimeData, character))){
                abilityData = abilityData.nextAbility;
                upgradeString += " [Upgradable]";
            }else{
                abilityData = abilityData.nextAbility;
            }
        }
    }

    //stupid ass hack - Can we keep this comment in here forever? - OK
    var levelUpRuntimeData = clone(abilityRuntimeData);
    if(levelUpRuntimeData != undefined)
    {
        if(abilityRuntimeData.canRank()){
            levelUpRuntimeData.rank++;
        }
    }

    var radioInfo = abilityData.name + " " + upgradeString +" :\n";
    radioInfo += '<div><p>' + abilityData.description(character, levelUpRuntimeData) + '</p></div>';

    let radioButton = "<label><<radiobutton '_AbilityChoiceIndex' '" + radioListIndex + "' checked>>      " +  radioInfo + " </label>";
    let div = "<div class='levelUpCards "+setup.getAbilityGradeClass(abilityData)+"'>" + radioButton + "</div>";
    return div
}

setup.applyCurseOfTheNaga = function()
{    
    if(!setup.hasAbility(State.variables.CharacterSheet_Player, "Ability_CurseOfTheNaga"))
    {
        let musclesDrain = Math.ceil(setup.getStatValue(State.variables.CharacterSheet_Player, "muscles") * 0.2);

        let height = setup.getStatValue(State.variables.CharacterSheet_Player, "height") - Math.min(68, setup.getStatValue(State.variables.CharacterSheet_Player, "height"));
        let heightDrain = Math.ceil(height * 0.2);

        let cock = setup.getStatValue(State.variables.CharacterSheet_Player, "cock") - Math.min(6, setup.getStatValue(State.variables.CharacterSheet_Player, "cock"));
        let cockDrain = Math.ceil(cock * 0.2);

        let balls = setup.getStatValue(State.variables.CharacterSheet_Player, "balls") - Math.min(2, setup.getStatValue(State.variables.CharacterSheet_Player, "balls"));
        let ballsDrain = Math.ceil(balls * 0.2);

        if(musclesDrain <= 0 || heightDrain <= 0 || cockDrain <= 0 || ballsDrain <= 0)
        {
            return "TooSmall";
        } 

        State.variables.CharacterSheet_Player.quest.curseOfTheNagaStatDrain.muscles = musclesDrain;
        State.variables.CharacterSheet_Player.quest.curseOfTheNagaStatDrain.height = heightDrain;
        State.variables.CharacterSheet_Player.quest.curseOfTheNagaStatDrain.cock = cockDrain;
        State.variables.CharacterSheet_Player.quest.curseOfTheNagaStatDrain.balls = ballsDrain;

        State.variables.CharacterSheet_Player.applyAbilityRuntimeData(State.variables.Ability_CurseOfTheNaga);
        State.variables.CharacterSheet_Lost_Naga.applyAbilityRuntimeData(State.variables.Ability_StolenMass);

        return "Cursed";
    }

    return "AlreadyCursed";
}

setup.removeCurseOfTheNaga = function()
{
    State.variables.CharacterSheet_Player.removeAbilityRuntimeData(State.variables.Ability_CurseOfTheNaga);
    return State.variables.CharacterSheet_Lost_Naga.removeAbilityRuntimeData(State.variables.Ability_StolenMass);
}

setup.removeAbility = function(character, abilityid)
{
    if(setup.hasAbility(character, abilityid))
    {
        character.fight.abilities = character.fight.abilities.filter(function(val) {
            if(val.id == abilityid)
            {
                return false;
            }
              return true;
        });

        return true;
    }
    return false;
}
/* twine-user-script #2: "FightHelper.js" */
setup.killEntity = function(characterSheet)
{		
	characterSheet.info.alive = false;
	var character = undefined;
	var i;
	for (i = 0; i < State.variables.EasyRandomEncounters.length; i++) 
	{
		if(character.info.name === characterSheet.info.name)
		{
			State.variables.EasyRandomEncounters.splice(i, 1);
			return;
		}
	}

	for (i = 0; i < State.variables.MediumRandomEncounters.length; i++) 
	{
		if(character.info.name === characterSheet.info.name)
		{
			State.variables.MediumRandomEncounters.splice(i, 1);
			return;
		}
	}
};

setup.createEntity = function(characterSheet, difficulty = 0)
{	
	characterSheet.info.alive = true;

	var difficultyArrayName = setup.getEncounterListNameByDifficulty(difficulty);

	if(State.variables[difficultyArrayName] != undefined)
	{
		State.variables[difficultyArrayName].push(characterSheet.id);
		return;
	}
	return;
};

setup.getEncounterListNameByDifficulty = function(difficulty)
{
	switch(difficulty)
	{
		case 0:
			return "EasyRandomEncounters";
		case 1:
			return "MediumRandomEncounters";
	}
}

setup.getEncounterList = function(difficulty)
{
	switch(difficulty)
	{
		case 0:
			return State.variables.EasyRandomEncounters;
		case 1:
			return State.variables.MediumRandomEncounters;
	}
}

setup.getAllEncounters = function()
{
	var allEncounters = [];
	allEncounters = allEncounters.concat(State.variables.EasyRandomEncounters);
	allEncounters = allEncounters.concat(State.variables.MediumRandomEncounters);
	return allEncounters;
}


setup.getEncounterAmount = function()
{
	return State.variables.EasyRandomEncounters.length + State.variables.MediumRandomEncounters.length
}

setup.aiFightStart = function()
{
	if(State.variables.Encounter_Target.fight.aiFightStart)
	{
		State.variables.Encounter_Target.fight.aiFightStart()
	}
};

setup.broadcastFightFlowTrigger = function(player, enemy, trigger)
{
    var displayString = "";
    var params = 
    {
        trigger: trigger,
        self: player,
        target: enemy,
    }
    displayString += player.broadcastAbilityTrigger(params);

    params = 
    {
        trigger: trigger,
        self: enemy,
        target: player,
    }
    displayString += enemy.broadcastAbilityTrigger(params);

    return displayString;
}

setup.getSkillDisplayString = function(character, target, fightMove, fightHotkey, useDoubleBackslashLinebreak = true)
{
	var displayString = "";
    var allowedLines = 8;

    var linebreak = "\\n";

    if(useDoubleBackslashLinebreak == false)
    {
        linebreak = "\n";
    }

    if(fightMove.comboValue != undefined)
    {
        displayString += " <div id='FightSkillHeader'>"

        displayString += "<div class='comboMoveName'>";
        if(fightHotkey != undefined)
        {
            displayString += fightHotkey +". ";
        }
        displayString += fightMove.name;
        displayString += "</div>";
        displayString += "<div class='comboValue'>";
        displayString += fightMove.comboValue;
        displayString += "</div>";

        displayString += "</div> <p id='FightSkillBody'>";
    }
    else
    {
        displayString += " <div id='FightSkillHeader'>";
        if(fightHotkey != undefined)
        {
            displayString += fightHotkey +". ";
        }
        displayString += fightMove.name +"</div> <p id='FightSkillBody'>";
    }
	
	if(fightMove.dmg)
	{
		displayString += setup.getAttackDamageDisplay(character, fightMove);
		//Attack damage always uses one line
		allowedLines--;
	}
	
	if(fightMove.critMod != 100)
	{
		displayString += "Chance to crit: " + setup.displayChanceToHit(character, fightMove);
		displayString += linebreak;
		allowedLines--;
	}

	if(fightMove.cooldown)
	{
	  displayString += "Cooldown: " + fightMove.cooldown + " turns";
	  displayString += linebreak;
	  allowedLines--;
	}
	
	if(fightMove.staminaCost != 0)
	{
	  displayString += "Stamina cost: " + fightMove.staminaCost
	  displayString += linebreak;
	  allowedLines--;
	}

	if(fightMove.maxStack)
	{
		displayString += "Stackable up to: " + fightMove.maxStack;
		displayString += linebreak;
		allowedLines--;
    }
    
    if(fightMove.comboCost != undefined && fightMove.comboCost != 0)
	{
	  displayString += "Action Slots Cost: " + fightMove.comboCost
	  displayString += linebreak;
	  allowedLines--;
	}

	if(fightMove.skillStatsToDescriptionSpacing)
	{
		allowedLines -= fightMove.skillStatsToDescriptionSpacing;
	}
	else
	{
		//assume one line for flavour text by default
		allowedLines--;
	}

	for(; allowedLines > 0; allowedLines--)
	{
		displayString += linebreak;
	}
	
	displayString += fightMove.skillDescription;
    displayString += "</p>";
    
    console.log(displayString);
	
	return displayString;
};

setup.getAttackChanceToHit = function(character, fightMove)
{
	return setup.getCritChance(character) + fightMove.critMod;
};

setup.getAttackDamage = function(character, fightMove)
{
	var strength = setup.getStatValue(character, "strength");
	if(fightMove.dmg)
	{
		return fightMove.dmg + ~~(strength / 5);
	}
	
	return 0;
};

setup.getAttackDamageDisplay = function(character, fightMove)
{
	var displayString = "";

	if(fightMove.dmg)
	{
		displayString += "Damage: ";
	
		if(setup.getAttackDamage(character, fightMove) == fightMove.dmg)
		{
			displayString += fightMove.dmg;
		}
		else
		{
			displayString += " <span class='tooltip' id=";
			if(setup.getAttackDamage(character, fightMove) < fightMove.dmg)
			{
				displayString += "'StatModifierNegative'";
			}
			else
			{
				displayString += "'StatModifierPositive'";
			}

			displayString += ">"+ setup.getAttackDamage(character, fightMove);

			displayString += "<span class='tooltiptext'>";

			var statValue = setup.getStatValue(character, "strength");
			var damageMod = {mod: setup.mod.ADD, value: ~~(statValue / 5)};

			displayString += setup.displayModifierText(damageMod, "Strength Stat ");

			displayString += "</span>";
			displayString += "</span>";
		}
		
		displayString += "\\n";
    }
    
    console.log(displayString);

	return displayString;
};

setup.applyCooldown = function(character, target, fightMove)
{
	var cooldown = 
	{
		skillID: fightMove.name,
		value: fightMove.cooldown,
	}

	character.fight.variables.cooldowns.push(cooldown);
}

setup.updateCooldowns = function(character, target)
{
	character.fight.variables.cooldowns = character.fight.variables.cooldowns.filter(function(val) 
	{
		val.value --;
		if(val.value <= 0)
		{
			return false;
		}
	  	return true;
	});
}

setup.preAttacksUpdate = function(character, target)
{    
    State.variables.FightTurn++;
    var abilityString = setup.broadcastFightFlowTrigger(character, target, State.variables.AbilityTrigger.ON_FIGHT_TURN_START);

	setup.updateCooldowns(character, target);
	setup.updateCooldowns(target, character);

	if(target.fight.preAttacksAIUpdate)
	{
		target.fight.preAttacksAIUpdate();
	}

	if (abilityString != ""){
		return "\n\n" + abilityString + "\n";
	}
	return abilityString + "\n";
};

setup.postAttacksAIUpdate = function(character)
{
	if(character.fight.postAttacksAIUpdate)
	{
		character.fight.postAttacksAIUpdate();
	}
};

setup.doComboAttack = function(attackerSheet, victimSheet)
{
    console.log("doin combo")
    var displayString = "";
    for(let i = 0; i < State.variables.FightComboStackIndexes.length; i++)
    {
        attackerSheet.fight.variables.currentFightMoveOutcome = "";
        let fightSkillIndex = State.variables.FightComboStackIndexes[i];
        attackerSheet.fight.variables.currentFightMove = State.variables.FightSkills[fightSkillIndex];

        if(State.variables.FightSkills[fightSkillIndex].attackAttemptDesc && State.variables.FightSkills[fightSkillIndex].currentStep == State.variables.FightSkills[fightSkillIndex].steps)
        {
            displayString += State.variables.FightSkills[fightSkillIndex].attackAttemptDesc(attackerSheet, victimSheet);
        }
        
        displayString += setup.doAttack(attackerSheet, victimSheet);
        displayString += "\n"
        console.log("doin "+ displayString)
    }

    console.log("stam was "+attackerSheet.fight.variables.currentStamina)
    attackerSheet.fight.variables.currentStamina -= setup.calculateComboStaminaCost();
    console.log("stam is "+attackerSheet.fight.variables.currentStamina)

    console.log("asdasd" + displayString);
    attackerSheet.fight.variables.currentFightMoveOutcome = displayString;
}

setup.doAttack = function(attackerSheet, victimSheet)
{
	var attackerFightSheet = attackerSheet.fight;
	var attackerFightVariables = attackerFightSheet.variables;

    function addToFightOutcome(attackerFightVariables, displayString)
    {
        if (displayString != "" && displayString != undefined)
        {
			if (displayString == "undefined" || displayString == undefined){
				console.log("WARN: Undefined return received from ability " + attackerFightVariables.currentFightMove.id);
			}else{

                console.log("Pushing " + displayString)
                displayString += "\n";
                console.log("pre push " + attackerFightVariables.currentFightMoveOutcome)
				attackerFightVariables.currentFightMoveOutcome += displayString;
                console.log("post push " + attackerFightVariables.currentFightMoveOutcome)
			}
		}
	}

	if(attackerFightVariables.currentFightMove.persistentEffectOpponent)
	{
        console.log("doin persist effect ")
		if(attackerFightVariables.currentFightMove.persistentEffectOpponent.onActivate)
		{
            console.log("doin persist effect on activate")
			attackerFightVariables.currentFightMove.persistentEffectOpponent.onActivate(attackerSheet, victimSheet, undefined);
		}
	}

	var params =
	{
        self: attackerSheet,
        target: victimSheet,
		thresholdToMiss: setup.getAttackChanceToHit(attackerSheet, attackerFightVariables.currentFightMove),
		attackDamage: setup.getAttackDamage(attackerSheet, attackerFightVariables.currentFightMove),
		hitcheck: random(0,100),
		ignoreAdditionalEffects: false,
		finalDamageModifier: 1,
    };

	attackerFightVariables.currentFightMoveOutcome = ""
    addToFightOutcome(attackerFightVariables, setup.callAbilityTrigger(attackerSheet, "onDoAttack", params));

    if(params.attackDamage <= 0)
    {
        params.trigger = State.variables.AbilityTrigger.ON_FIGHT_DO_DAMAGELESS_ATTACK;
        addToFightOutcome(attackerFightVariables, attackerSheet.broadcastAbilityTrigger(params));
    }

	if(attackerFightVariables.currentFightMove.cooldown)
	{
		setup.applyCooldown(attackerSheet, victimSheet, attackerFightVariables.currentFightMove);
	}

	if(attackerFightVariables.stunnedDuration > 0)
	{
        //hook hook MOVE THIS SOMEWHERE ELSE
		attackerFightVariables.stunnedDuration -= 1;

		if(attackerFightVariables.stunnedDuration == 0)
		{
			attackerFightVariables.hypnotizedMoveList = [];
		}
	}
	else if(attackerFightVariables.currentFightMove.doesNothing || attackerFightVariables.currentFightMove.currentStep != attackerFightVariables.currentFightMove.steps)
	{
		//do nothing
	}
	else
	{
		if(attackerFightVariables.currentFightMove.attackHitDesc)
		{
			addToFightOutcome(attackerFightVariables, attackerFightVariables.currentFightMove.attackHitDesc(attackerSheet, victimSheet));
		}

		if(attackerFightVariables.currentFightMove.persistentEffectOpponent)
		{
            //remove this next version
			setup.addPersistentEffect(victimSheet, attackerFightVariables.currentFightMove.persistentEffectOpponent);
		}

		if(params.hitcheck <= params.thresholdToMiss)
		{
            
			params.attackDamage = Math.ceil(params.attackDamage * setup.getStatValue(attackerSheet, "critDamage"));
		}

		if(!params.ignoreAdditionalEffects)
		{
			if(params.attackDamage != 0)
			{
                console.log("crit chance was "+params.thresholdToMiss)
				//remove this next version
				addToFightOutcome(attackerFightVariables, setup.triggerVictimPersistentEffects(attackerSheet, victimSheet, "onDamagingHit", params));
			}
		}

        params.attackDamage = Math.ceil(params.attackDamage * params.finalDamageModifier);
        
        params.trigger = State.variables.AbilityTrigger.ON_FIGHT_PRE_RECEIVE_DAMAGE;
            
        if(!params.ignoreAdditionalEffects)
        {
			let abilityString = victimSheet.broadcastAbilityTrigger(params);
            addToFightOutcome(attackerFightVariables, abilityString);
        }

		if(params.attackDamage != 0)
		{
			if(params.hitcheck <= params.thresholdToMiss)
			{
				addToFightOutcome(attackerFightVariables, "It hits with a critical hit for <span style='color:#ff0000;'>" + params.attackDamage + "</span> damage!");
			}
			else
			{
				addToFightOutcome(attackerFightVariables, "It hits for <span style='color:#ff0000;'>" + params.attackDamage + "</span> damage!");
            }
			params.trigger = State.variables.AbilityTrigger.ON_FIGHT_POST_RECEIVE_DAMAGE;
            
			if(!params.ignoreAdditionalEffects)
			{
				let abilityString = victimSheet.broadcastAbilityTrigger(params);
                addToFightOutcome(attackerFightVariables, abilityString);
            }
            var previousHP = victimSheet.fight.variables.currentHP;
            victimSheet.fight.variables.currentHP = Math.max(victimSheet.fight.variables.currentHP - params.attackDamage, 0);

            console.log("PREV HP / CURR HP " +victimSheet.info.name + " " + (victimSheet.fight.variables.currentHP / setup.getStatValue(victimSheet, "hp")));

            if(victimSheet.fight.variables.currentHP / setup.getStatValue(victimSheet, "hp") <= 0.5 &&
            previousHP / setup.getStatValue(victimSheet, "hp") > 0.5)
            {
                console.log("ENTER MID HEALTH " +victimSheet.info.name);
                params.trigger = State.variables.AbilityTrigger.ON_ENTER_MID_HEALTH;
                addToFightOutcome(attackerFightVariables, victimSheet.broadcastAbilityTrigger(params));
            }
            else if(victimSheet.fight.variables.currentHP / setup.getStatValue(victimSheet, "hp") > 0.5 &&
                previousHP / setup.getStatValue(victimSheet, "hp") <= 0.5)
            {
                console.log("EXIT MID HEALTH " +victimSheet.info.name);
                params.trigger = State.variables.AbilityTrigger.ON_ENTER_MID_HEALTH;
                addToFightOutcome(attackerFightVariables, victimSheet.broadcastAbilityTrigger(params));
            }

            if(victimSheet.fight.variables.currentHP / setup.getStatValue(victimSheet, "hp") <= 0.25 &&
               previousHP / setup.getStatValue(victimSheet, "hp") > 0.25)
            {
                console.log("ENTER LOW HEALTH " +victimSheet.info.name);
				params.trigger = State.variables.AbilityTrigger.ON_ENTER_LOW_HEALTH;
                addToFightOutcome(attackerFightVariables, victimSheet.broadcastAbilityTrigger(params));
            }
            else if(victimSheet.fight.variables.currentHP / setup.getStatValue(victimSheet, "hp") > 0.25 &&
               previousHP / setup.getStatValue(victimSheet, "hp") <= 0.25)
            {
                console.log("EXIT LOW HEALTH " +victimSheet.info.name);
				params.trigger = State.variables.AbilityTrigger.ON_EXIT_LOW_HEALTH;
                addToFightOutcome(attackerFightVariables, victimSheet.broadcastAbilityTrigger(params));
            }
        }
		
		if(!params.ignoreAdditionalEffects)
		{
			for(let i = 0; i < attackerFightVariables.currentFightMove.additionalEffects.length; i++)
			{
				let additionalEffectText = attackerFightVariables.currentFightMove.additionalEffects[i](attackerSheet, victimSheet);

				if(additionalEffectText != "")
				{
					addToFightOutcome(attackerFightVariables, additionalEffectText);
				}
			}
		}
	}

	attackerFightVariables.currentStamina += setup.getStaminaRecovery(attackerSheet);
	
	if(attackerFightVariables.currentStamina > setup.getMaxStamina(attackerSheet))
	{
		attackerFightVariables.currentStamina = setup.getMaxStamina(attackerSheet);
	}
    
    if(State.variables.FightComboStackIndexes.length == 0)
    {
        attackerFightVariables.currentStamina -= attackerFightVariables.currentFightMove.staminaCost;
    }
    
    return attackerFightVariables.currentFightMoveOutcome;
};

setup.displayFightMove = function(attackerSheet, victimSheet)
{
	var attackerFightVariables = attackerSheet.fight.variables;
	var victimFightVariables = victimSheet.fight.variables;
	
	var displayString = [];

	if(typeof attackerFightVariables.currentFightMove !== 'undefined' && typeof victimFightVariables.currentFightMove !== 'undefined')
	{
        if(attackerFightVariables.currentFightMove.comboValue != undefined)
        {
            for(let i = 0; i < State.variables.FightComboStackIndexes.length; i++)
            {
                let fightSkillIndex = State.variables.FightComboStackIndexes[i];
                State.variables.FightSkills[fightSkillIndex].available = true;
            }
        }
        if(attackerFightVariables.currentFightMove.comboValue == undefined)
        {
            if(attackerFightVariables.currentFightMove.attackAttemptDesc && attackerFightVariables.currentFightMove.currentStep == attackerFightVariables.currentFightMove.steps)
            {
                displayString.push(attackerFightVariables.currentFightMove.attackAttemptDesc(attackerSheet, victimSheet));
            }
        }

        if (attackerFightVariables.currentFightMoveOutcome.length > 0){
            console.log("FUCK")
            console.log(attackerFightVariables.currentFightMoveOutcome)
            displayString.push(attackerFightVariables.currentFightMoveOutcome +"\n");
        }
	}
	displayString = displayString.join("\n");
	if (displayString != ""){
		return displayString + "<br><br>"
	}
};

setup.learnRandomMoveFromTarget = function(attackerSheet, victimSheet)
{
    var victimMovelist = setup.getFightMovesWithAddons(victimSheet);
    var attackerMovelist = setup.getFightMovesWithAddons(attackerSheet);

    var victimNoComboSkills = victimMovelist.filter(function(val) {
        console.log("hi")
        console.log(val)
        if(val.skillType != "special" && val.comboCost == undefined)
        {
            return true;
        }
        return false;
    });
    
    var attackerNoComboSkills = attackerMovelist.filter(function(val) {
        console.log("hi")
        console.log(val)
        if(val.skillType != "special" && val.comboCost == undefined)
        {
            return true;
        }
        return false;
    });
	
	victimNoComboSkills = victimNoComboSkills.filter(function(val) 
	{
		if(val.unlearnable == true)
		{
			return false;
		}

		var i;
	  	for(i = 0; i < attackerNoComboSkills.length; i++)
		{
			if(val.name == attackerNoComboSkills[i].name)
			{
				return false;
			}
		}
	  	return true;
	});
	
	return victimNoComboSkills.random();
};

setup.hasLostFight = function(character)
{
	return character.fight.variables.currentHP <= 0 || character.fight.variables.surrender;
}

setup.onFightEnd = function(winner, loser)
{
    var displayString = "";
    var params = 
    {
        trigger: State.variables.AbilityTrigger.ON_FIGHT_BATTLE_WON,
        self: winner,
        target: loser,
    }
    displayString += winner.broadcastAbilityTrigger(params);

    var params = 
    {
        trigger: State.variables.AbilityTrigger.ON_FIGHT_BATTLE_LOST,
        self: loser,
        target: winner,
    }
    displayString += loser.broadcastAbilityTrigger(params);

    return displayString;
}

setup.updateFightStatus = function(attackerSheet, victimSheet)
{
	var victimFightVariables = victimSheet.fight.variables;
	
	var displayString = "";

	if(setup.hasLostFight(victimSheet) && setup.hasLostFight(attackerSheet))
	{
		attackerSheet.fight.variables.currentHP = 0.1;
		displayString += "You both fall down in exhaustion. Yet through sheer willpower, you manage to force yourself to slowly get on your feet.\n\n";
		displayString += "[[Continue->Fight Outcome]]";
		State.variables.FightSkills = undefined;
	}
	else if(setup.hasLostFight(victimSheet))
	{
		displayString += attackerSheet.info.name + " wins the fight \n\n";
		displayString += "[[Continue->Fight Outcome]]";
		State.variables.FightSkills = undefined;
	}
	else if(setup.hasLostFight(attackerSheet))
	{
		displayString += attackerSheet.info.name + " loses the fight \n\n";
		displayString += "[[Continue->Fight Outcome]]";
		State.variables.FightSkills = undefined;
	}
	else
	{
		if(setup.isStunned(victimSheet))
		{
			if(victimFightVariables.hypnotizedMoveList.length > 0)
			{
				victimFightVariables.currentFightMove = victimFightVariables.hypnotizedMoveList.random();
			}
			else
			{
				victimFightVariables.currentFightMove = State.variables.Special_Move_Stunned;
			}
		}
		else
		{
            var victimAvailableMoves = setup.getFightMovesWithAddons(victimSheet);
			victimAvailableMoves = victimAvailableMoves.filter(function(val) {
				if(setup.canActivateFightMove(victimSheet, attackerSheet, val) == "")
				{
					return true;
				}
				return false;
			});

			if(victimAvailableMoves.length <= 0)
			{
				victimAvailableMoves.push(State.variables.FightMove_Basic_Attack);
			}

			if(victimFightVariables.currentFightMove && victimFightVariables.currentFightMove.currentStep != victimFightVariables.currentFightMove.steps)
			{
				victimFightVariables.currentFightMove.currentStep++;
			}
			else
			{
				if(victimSheet.fight.getNextFightMove)
				{
					victimFightVariables.currentFightMove = victimSheet.fight.getNextFightMove();
				}
				else
				{					
					victimFightVariables.currentFightMove = victimAvailableMoves.random();
				}
			}
		}

		var attackerEffects = setup.displayCurrentPersistentEffects(attackerSheet, victimSheet);
		if(attackerEffects != "")
		{
			displayString += attackerEffects;
			displayString += "\n";
		}

		var victimEffects = setup.displayCurrentPersistentEffects(victimSheet, attackerSheet);
		if(victimEffects != "")
		{
			displayString += victimEffects;
			displayString += "\n";
		}
		
		displayString += victimSheet.info.name + " looks " + State.variables.Fight_HealthDescriptor(setup.getMaxHP(victimSheet), victimFightVariables.currentHP);
		displayString += "\n\n";

		displayString += victimFightVariables.currentFightMove.preparation(victimSheet, attackerSheet);
		
		if(victimFightVariables.currentFightMove.callbackOnPreparation)
		{
            victimFightVariables.currentFightMove.callbackOnPreparation(victimSheet, attackerSheet);
		}
		
		displayString +="\n";
        displayString +="\n";
        
        displayString +="<<click 'Inspect "+victimSheet.info.name+"'>><<toggleclass '#InspectText' 'hidden'>><</click>> \n";
        displayString +="<span id='InspectText' class='hidden'> "+setup.getInspectText(attackerSheet, victimSheet)+"</span>";
        
		
		if(setup.isStunned(attackerSheet))
		{
			if(attackerSheet.fight.variables.hypnotizedMoveList.length > 0)
			{
				State.variables.availableFightMoves = attackerSheet.fight.variables.hypnotizedMoveList;

				displayString += setup.displayAvailableFightMoves(attackerSheet, victimSheet, State.variables.availableFightMoves);
			}
			else
			{
				var _fightMoveDescription = setup.getSkillDisplayString(attackerSheet, victimSheet, State.variables.Special_Move_Stunned, "1", false);
			
				displayString += "<a class='FightSkillCard "+setup.getCorruptionUIClassName(State.variables.Special_Move_Stunned.skillType, setup.getStatValue(attackerSheet, "corruption"))+"' data-passage='FightLogic' data-setter='$CharacterSheet_Player.fight.variables.currentFightMove = $Special_Move_Stunned'>"+ _fightMoveDescription +" </a>";
			}
		}
		else
		{
            State.variables.availableFightMoves = setup.getFightMovesWithAddons(attackerSheet);
			displayString += setup.displayAvailableFightMoves(attackerSheet, victimSheet, State.variables.availableFightMoves);
		}
	}
	
	return displayString;
};

setup.getInspectText = function(character, target)
{
    var displayString = "";

    displayString += character.info.name  + " inspects "+target.info.name+" carefully.\n\n";

    if(target.info.picture != undefined)
    {
        displayString += setup.displayEncounterImage(target.info.picture) + "\n\n";
    }

    displayString += "HP: "+target.fight.variables.currentHP+"/"+setup.displayStatValue(target, "hp")+"\n";
    displayString += "Stamina: "+target.fight.variables.currentStamina+"/"+setup.displayStatValue(target, "stamina")+"\n";
    displayString += "Arousal: "+target.fight.variables.currentArousal+"\n\n";

    displayString += "Strength: "+setup.displayStatValue(target, "strength")+"\n";
    displayString += "Critical Hit Chance: "+setup.displayStatValue(target, "critChance")+"\n";
    displayString += "Arousal per Turn: "+setup.displayStatValue(target, "arousalGain")+"\n";
    displayString += "Stamina per Turn: "+setup.displayStatValue(target, "staminaRecovery")+"\n\n";

    displayString += "Corruption: "+setup.getStatValue(target, "corruption")+"\n";
    displayString += "Muscles: "+setup.getMusclesDescriptor(target)+"("+setup.displayStatValue(target, "muscles")+")\n";
    displayString += "Height: "+setup.displayStatValue(target, "height", true)+"\n";
    displayString += "Cock Size: "+setup.displayStatValue(target, "cock", true)+"\n\n";

    displayString += "Passive Abilities:\n";

    if(character.abilityHandler.abilityRuntimeDatas.length > 0)
    {
        for(let i = 0; i < target.abilityHandler.abilityRuntimeDatas.length; ++i)
        {
            let abilityRuntimeData = target.abilityHandler.abilityRuntimeDatas[i];
            if(abilityRuntimeData.isActive == true)
            {
                displayString += abilityRuntimeData.abilityData.name +": "+ abilityRuntimeData.abilityData.description(target, abilityRuntimeData) +"\n";
            }
        }
    }
    else
    {
        displayString += "None\n";
    }

    displayString += "\n"

    return displayString;
}

setup.getFightMoveCooldown = function(attackerSheet, victimSheet, fightMove)
{
	if(fightMove.cooldown)
	{
		for(let i = 0; i < attackerSheet.fight.variables.cooldowns.length; i++)
		{
			if(attackerSheet.fight.variables.cooldowns[i].skillID == fightMove.name)
			{
				return attackerSheet.fight.variables.cooldowns[i].value;
			}
		}
	}

	return 0;
}

setup.calculateAvailableComboSlots = function()
{
    var maxSlots = setup.getStatValue(State.variables.CharacterSheet_Player, "actionSlots");
    var slotsTaken = setup.calculateTakenComboSlots();

    return maxSlots - slotsTaken;
}

setup.calculateTakenComboSlots = function()
{
    var slotsTaken = 0;
    for(let i = 0; i < State.variables.FightComboStackIndexes.length; i++)
    {
        let fightMove = State.variables.FightSkills[State.variables.FightComboStackIndexes[i]];
        if(!fightMove.available)
        {
            slotsTaken += fightMove.comboCost;
        }
    }

    return slotsTaken;
}

setup.canActivateFightMove = function(attackerSheet, victimSheet, fightMove, fightSkillIndex)
{
    if(fightSkillIndex != undefined && fightMove.comboValue != undefined)
    {
        if(!fightMove.available)
        {
            return "This move is already part of your combo.";
        }
        
        if(setup.calculateAvailableComboSlots() < fightMove.comboCost)
        {
            return "Not enough slots left for this move in your combo.";
        }

        if(fightMove.maxStack)
        {
            if(!setup.canStackPersistentEffect(attackerSheet, victimSheet, fightMove.persistentEffectOpponent.id, fightMove.maxStack))
            {
                return "Can't stack this skill more than " + fightMove.maxStack + " times.";
            }
        }

        if(State.variables.FightComboStackIndexes.length != 0)
        {
            var latestComboValue = State.variables.FightSkills[State.variables.FightComboStackIndexes[State.variables.FightComboStackIndexes.length - 1]].comboValue;
            var currentComboValue = State.variables.FightSkills[fightSkillIndex].comboValue;
    
            console.log("latest: "+latestComboValue+" current: "+currentComboValue);
    
            if(currentComboValue - 1 != latestComboValue && currentComboValue + 1 != latestComboValue)
            {
                return "This move's Combo Value ("+currentComboValue+") is not adjacent to the Combo Value of the latest move of your combo ("+latestComboValue+")";
            }
        }

        if(fightMove.staminaCost)
        {
            console.log("current stam "+attackerSheet.fight.variables.currentStamina)
            console.log("stuff "+(setup.calculateComboStaminaCost() + fightMove.staminaCost))
            console.log(attackerSheet)
            if(attackerSheet.fight.variables.currentStamina < (setup.calculateComboStaminaCost() + fightMove.staminaCost))
            {
                console.log("why tho ")
                return "Not enough Stamina.";
            }
        }
    }
    else
    {
        if(fightMove.maxStack)
        {
            if(!setup.canStackPersistentEffect(attackerSheet, victimSheet, fightMove.persistentEffectOpponent.id, fightMove.maxStack))
            {
                return "Can't stack this skill more than " + fightMove.maxStack + " times.";
            }
        }
    
        if(fightMove.staminaCost)
        {
            if(attackerSheet.fight.variables.currentStamina < fightMove.staminaCost)
            {
                return "Not enough Stamina.";
            }
        }
    
        let cooldown = setup.getFightMoveCooldown(attackerSheet, victimSheet, fightMove);
    
        if(cooldown != 0)
        {
            return "In cooldown for " + cooldown + " more turns."
        }
    }


	if(fightMove.activationCondition)
	{
		if(!fightMove.activationCondition(attackerSheet, victimSheet))
		{
			return "Can't activate this skill.";
		}
    }

	return "";
}

setup.displayAvailableFightMoves = function(character, target, fightMoves)
{
    var displayString = "";

    var comboSkills = fightMoves.filter(function(val) {
        console.log("combo")
        console.log(val)
        if(val.comboCost != undefined && val.equipped == true)
        {
            return true;
        }
        return false;
    });

    var noComboSkills = fightMoves.filter(function(val) {
        console.log("hi")
        console.log(val)
        if(val.skillType != "special" && val.comboCost == undefined)
        {
            return true;
        }
        return false;
    });

    var specialSkills = fightMoves.filter(function(val) {
        console.log("hi")
        console.log(val)
        if(val.skillType == "special")
        {
            return true;
        }
        return false;
    });
    console.log("special")
    console.log(specialSkills)

    State.variables.FightSkills = [];
    State.variables.FightComboStackIndexes = [];
    
    var i;
    console.log("DOIN IT")
    
    if(comboSkills.length != 0)
    {
        for(var i = 0; i < setup.getStatValue(character, "comboMovesPerTurn"); i++)
        {
            var skill = {...comboSkills.random()};
    
            skill.comboValue = setup.getRandomInt(1, 5);
            skill.available = true;
            State.variables.FightSkills.push(skill);
        }
    }

    State.variables.FightSkills.push(...noComboSkills);
    State.variables.FightSkills.push(...specialSkills);

    displayString += '<span id="FightSkillsList">';
	displayString += setup.printAvailableFightMovesString(character, target);
    displayString += '</span>';

    return displayString;
};

setup.printComboCost = function(character, target)
{
    var displayString = "";

    displayString += "Stamina Cost: "+ setup.calculateComboStaminaCost()+" \nAction Slots Remaining: "+setup.calculateAvailableComboSlots();

    return displayString;
}

setup.calculateComboStaminaCost = function(character, target)
{
    var staminaCost = 0;
    for(let i = 0; i < State.variables.FightComboStackIndexes.length; i++)
    {
        let fightMove = State.variables.FightSkills[State.variables.FightComboStackIndexes[i]];
        if(!fightMove.available)
        {
            staminaCost += fightMove.staminaCost;
            console.log("cost increased by "+ fightMove.name + " " + fightMove.staminaCost)
            console.log("now at " + staminaCost)
        }
    }

    return staminaCost;
}

setup.printAvailableFightMovesString = function(character, target)
{
    var displayString= "";
    
    displayString += '<div class="outerComboContainer '+setup.getCorruptionUIClassName("StatCaption", setup.getStatValue(character, "corruption"))+'">';
    displayString += setup.printComboCost(character, target);
    displayString += '\n\n'
    displayString += '<div class="comboCounterContainer '+setup.getCorruptionUIClassName("StatCaption", setup.getStatValue(character, "corruption"))+'">';
    displayString += '<div class="FightSkillsCombo">'+setup.printFightSkillsComboList()+'</div>';
    if(State.variables.FightComboStackIndexes.length > 0)
    {
        
        displayString += '<div class="RightComboZone">';
        displayString += '<span class="'+setup.getCorruptBackgroundClass(character)+'">';
        displayString += '<<button "Clear">>';
        displayString += '<<run setup.clearCombo()>>';
        displayString += '<<replace "#FightSkillsList">> <<print setup.printAvailableFightMovesString(State.variables.CharacterSheet_Player, State.variables.Encounter_Target)>> <</replace>>';
        displayString += '<</button>>';
        displayString += '</span>';
        displayString += '</div>';
        displayString += '<div class="RightComboZone">';
        displayString += '&nbsp;';
        displayString += '</div>';
        displayString += '<div class="RightComboZone">';
        displayString += '<span class="'+setup.getCorruptBackgroundClass(character)+'">';
        displayString += '<<button [[Attack with Combo!->FightLogic]]>><</button>>';
        displayString += '</span>';
        displayString += '</div>';
    }
    displayString += '</div>';

    var comboSkills = [];
    for(let i = 0; i < State.variables.FightSkills.length; ++i)
    {
        if(State.variables.FightSkills[i].comboCost != undefined)
        {
            comboSkills.push(
                {
                    fightSkill: State.variables.FightSkills[i],
                    index: i,
                }
                );
        }
    }

    var noComboSkills = [];
    for(let i = 0; i < State.variables.FightSkills.length; ++i)
    {
        if(State.variables.FightSkills[i].skillType != "special" && State.variables.FightSkills[i].comboCost == undefined)
        {
            noComboSkills.push(
                {
                    fightSkill: State.variables.FightSkills[i],
                    index: i,
                }
                );
        }
    }

    var specialSkills = [];
    for(let i = 0; i < State.variables.FightSkills.length; ++i)
    {
        if(State.variables.FightSkills[i].skillType == "special")
        {
            specialSkills.push(
                {
                    fightSkill: State.variables.FightSkills[i],
                    index: i,
                }
                );
        }
    }

    displayString += '<div class="ComboFightMovesContainer">';
    for(let i = 0; i < comboSkills.length; ++i)
    {
        console.log("displayin")
        console.log(comboSkills[i])
        displayString += setup.displayFightSkillCard(character, target, comboSkills[i].fightSkill, comboSkills[i].index);
    }
    
    if(noComboSkills.length != 0)
    {
        displayString += "<br><br><hr><br>";
    }
    
    for(let i = 0; i < noComboSkills.length; ++i)
    {
        displayString += setup.displayFightSkillCard(character, target, noComboSkills[i].fightSkill, noComboSkills[i].index);
    }

    displayString += "</div>";
    displayString += "</div>";

    for(let i = 0; i < specialSkills.length; ++i)
    {
        displayString += setup.displayFightSkillCard(character, target, specialSkills[i].fightSkill, specialSkills[i].index);
    }

    return displayString;
}

setup.displayFightSkillCard = function(character, target, fightSkill, index)
{
    var displayString = "";
    console.log("fight skill")
    console.log(fightSkill)
    console.log(index)

    var fightMoveActivationString = setup.canActivateFightMove(character, target, fightSkill, index);
        
    if(fightMoveActivationString != "")
    {
        displayString += "<span class='tooltipskill'>";
        if(!fightSkill.available)
        {
            displayString += "<span class='picked'>";
        }
        else
        {
            displayString += "<span class='inactive'>";
        }
    }

    let _fightMoveDescription = setup.getSkillDisplayString(character, target, fightSkill, State.variables.FightHotkeys[index]);
    let params = 'class="FightSkillCard '+setup.getCorruptionUIClassName(fightSkill.skillType, setup.getStatValue(character, "corruption"))+'"';

    displayString += '<span '+params+'>';
    displayString += '<<link "'+_fightMoveDescription+'">>';
    displayString += '<<set $CharacterSheet_Player.fight.variables.currentFightMove = setup.getFightMoveByName("'+fightSkill.name+'")>>';
    displayString += '<<run setup.onAttackClick("'+index+'")>>';

    if(fightSkill.comboValue != undefined)
    {
        displayString += '<<replace "#FightSkillsList">> <<print setup.printAvailableFightMovesString(State.variables.CharacterSheet_Player, State.variables.Encounter_Target)>><</replace>>';
    }

    displayString += '<</link>>';
    displayString += '</span>';

    if( fightMoveActivationString != "")
    {
        displayString += "</span>";//inactive close

        displayString += "<span class='tooltipskilltext'>";
        displayString += fightMoveActivationString;
        displayString += "</span></span>";
    }

    return displayString;
}

setup.clearCombo = function()
{
    for(let i = 0; i < State.variables.FightComboStackIndexes.length; i++)
    {
        let fightSkillIndex = State.variables.FightComboStackIndexes[i];
        State.variables.FightSkills[fightSkillIndex].available = true;
    }

    State.variables.FightComboStackIndexes = [];
}

setup.onAttackClick = function(fightSkillIndex)
{
    console.log("clicked attack!");
    console.log(State.variables.FightSkills[fightSkillIndex]);
    console.log("stam combo cost "+ (setup.calculateComboStaminaCost() + State.variables.FightSkills[fightSkillIndex].staminaCost));

    setup.attackPressedLogic(fightSkillIndex);
}

setup.attackPressedLogic = function(fightSkillIndex)
{
    if(State.variables.FightSkills[fightSkillIndex].comboValue != undefined)
    {
        if(setup.canActivateFightMove(State.variables.CharacterSheet_Player, State.variables.Encounter_Target, State.variables.FightSkills[fightSkillIndex], fightSkillIndex) == "")
        {
            State.variables.FightSkills[fightSkillIndex].available = false;
            State.variables.FightComboStackIndexes.push(fightSkillIndex);
    
            console.log("Activated Attack!");
        }
    }
    else
    {
        State.variables.CharacterSheet_Player.fight.variables.currentFightMove = State.variables.FightSkills[fightSkillIndex];
        Engine.play("FightLogic");
    }
}

setup.printFightSkillsComboList = function()
{
    var displayString = "";

    for(let i = 0; i < State.variables.FightComboStackIndexes.length; i++)
    {
        for(let j = 0; j < State.variables.FightSkills[State.variables.FightComboStackIndexes[i]].comboCost; j++)
        {
            displayString += "<div class='comboValueElementInList'>"
            if(j == State.variables.FightSkills[State.variables.FightComboStackIndexes[i]].comboCost - 1)
            {
                displayString += State.variables.FightSkills[State.variables.FightComboStackIndexes[i]].comboValue;
            }
            else
            {
                displayString += "&nbsp;";
            }
            
            displayString += "</div>"
        }
    }

    return displayString;
}

setup.getFightMoveByName = function(attackName)
{
	for(let i = 0; i < State.variables.FightMoves.length; i++)
	{
		if(State.variables.FightMoves[i].name == attackName)
		{
			return State.variables.FightMoves[i];
		}
	}
};

setup.getStyleforFightMoveType = function(fightMove)
{
	if(fightMove.skillType == "symbiote")
	{
		switch(State.variables.SymbioteColor)
		{
			case State.variables.ColourPool.WHITE:
				return "symbioteWhite";
			case State.variables.ColourPool.BLACK:
				return "symbioteBlack";
			case State.variables.ColourPool.BLUE:
				return "symbioteBlue";
			case State.variables.ColourPool.GREEN:
				return "symbioteGreen";
			case State.variables.ColourPool.RED:
				return "symbioteRed";
			case State.variables.ColourPool.PURPLE:
				return "symbiotePurple";
			case State.variables.ColourPool.BROWN:
				return "symbioteBrown";
			case State.variables.ColourPool.YELLOW:
				return "symbioteYellow";
		}
	}
	else{
		return fightMove.skillType;
	}
}

setup.getCharacterSheet = function(sheetID)
{
	return State.variables[sheetID];
}

setup.getRandomEncounter = function(difficulty)
{	
	var encounters;
    encounters = setup.getEncounterList(difficulty);
    
    encounters = encounters.filter(function(val)
	{
		if(val == State.variables.LastEncounter)
		{
			return false;
		}
	  	return true;
    });
    
    var randomEncounter = encounters.random();
    State.variables.LastEncounter = randomEncounter;
    
	return State.variables[randomEncounter];
};

setup.fillDestinationArray = function()
{
	var lookup = Story.lookup("tags", "Explore");

	State.variables.Explore_Destinations = [];

	var i;
	for(i = 0; i < lookup.length; i++)
	{
		State.variables.Explore_Destinations.push(lookup[i].title);
	}
};

setup.getExploreDestination = function()
{
	var encounterAmount = setup.getEncounterAmount();
	var destinationRange = encounterAmount + State.variables.Explore_Destinations.length;

    var choice = Math.floor(Math.random() * destinationRange);
	
	if(choice < encounterAmount && (State.variables.LastExplorationEnemyEncounter < 2 || State.variables.Explore_Destinations.length == 0))
	{
        State.variables.LastExplorationEnemyEncounter++;
		return "RandomEcounter";
	}
	else
	{
        State.variables.LastExplorationEnemyEncounter = 0;
		return State.variables.Explore_Destinations.random();
	}
};

setup.getFightStartPassages = function(character)
{
	var displayString = "";
	
	if(setup.sizeCharactercomparison(State.variables.CharacterSheet_Player, character) >= State.variables.Comparators.REACHES_WAIST)
	{
		displayString += "[[Fight->FightLogic]]\n" +
		"[[They are too small for you to care->Village]]\n";
	}
	else
	{
		displayString += "[[Fight->FightLogic]]\n" +
		"[[Run Away->Village]]\n";
	}

	return displayString;
};

/* twine-user-script #3: "FightMoveEffects.js" */
setup.addPersistentEffect = function(character, persistentEffect)
{
	character.fight.variables.persistentEffects.push(persistentEffect);
};

setup.removePersistentEffect = function(character, persistentEffect)
{
	character.fight.variables.persistentEffects = character.fight.variables.persistentEffects.filter(function(val) {
		if(val.id == persistentEffect.id)
		{
			return false;
		}
		return true;
	})
};

setup.triggerVictimPersistentEffects = function(attacker, victim, trigger, params)
{
	var displayString = "";
	var persistentEffects = victim.fight.variables.persistentEffects;
	for(let i = 0; i < persistentEffects.length; i++)
	{
		if(persistentEffects[i][trigger])
		{
			displayString += persistentEffects[i][trigger](attacker, victim, params) + "\n";
		}
	}

	return displayString;
};

setup.canStackPersistentEffect = function(attacker, victim, effectID, maxStack)
{
	var persistentEffects = victim.fight.variables.persistentEffects;
    var stackCount = 0;

    if(State.variables.FightComboStackIndexes != undefined)
    {
        for(let i = 0; i < State.variables.FightComboStackIndexes.length; i++)
        {
            let fightMove = State.variables.FightSkills[State.variables.FightComboStackIndexes[i]];
            if(fightMove.persistentEffectOpponent != undefined)
            {
                if(fightMove.persistentEffectOpponent.id == effectID)
                {
                    stackCount++;
                }
            }
        }
    }

	for(let i = 0; i < persistentEffects.length; i++)
	{
		if(persistentEffects[i].id == effectID)
		{
			stackCount++;
		}
	}
	
	return stackCount < maxStack;
}


setup.displayCurrentPersistentEffects = function(character, target)
{
	var displayString = "";
	var persistentEffects = character.fight.variables.persistentEffects;
	for(let i = 0; i < persistentEffects.length; i++)
	{
		displayString += persistentEffects[i].constantDesc(character, target) +"\n";
	}

	return displayString;
};

setup.hypnotize = function(attackerSheet, victimSheet, stunDuration = 2)
{
	if(victimSheet.fight.immuneToCharms)
	{
		return victimSheet.info.name+"'s mind is too strong to be hypnotized!";
	}
	else
	{
		victimSheet.fight.variables.stunnedDuration = stunDuration;
		victimSheet.fight.variables.hypnotizedMoveList = [State.variables.FightMove_Worship];

		return victimSheet.info.name+" falls under the mind shattering influence of "+attackerSheet.info.name+". He eagerly wait for his master's commands.";
	}
}

setup.worship = function(attackerSheet, victimSheet)
{
	victimSheet.fight.variables.currentArousal += 20;

	victimSheet.fight.variables.currentArousal = Math.min(victimSheet.fight.variables.currentArousal, 100);

	return "";
};

setup.stunTarget = function(attackerSheet, victimSheet, stunDuration = 2)
{
	if(victimSheet.fight.immuneToStun)
	{
		return victimSheet.info.name+"'s body is too hardened to be stunned!";
	}
	else
	{
		victimSheet.fight.variables.stunnedDuration = stunDuration;

		return victimSheet.info.name+" struggles to move.";
	}
	
};

setup.infestStun = function(attackerSheet, victimSheet)
{
	var displayString = "";
	if(victimSheet.fight.variables.currentArousal >= 50)
	{
		displayString = setup.stunTarget(attackerSheet, victimSheet, 1);
	}	

	return displayString;
};

setup.witheringVenom = function(attackerSheet, victimSheet)
{
	var displayString = "";
	
	displayString += victimSheet.applyAbilityRuntimeData(State.variables.Ability_WitheringVenom);

	return displayString;
};

setup.doParry = function(attackerSheet, victimSheet)
{
    var displayString = "";
	
	displayString += attackerSheet.applyAbilityRuntimeData(State.variables.Ability_ActiveParry);

	return displayString;
}

setup.surrender = function(attackerSheet, victimSheet)
{
	attackerSheet.fight.variables.surrender = true;

	return "";
};

setup.incubusStrikeEffects = function(attackerSheet, victimSheet)
{
	var attackDamage = setup.getAttackDamage(attackerSheet, attackerSheet.fight.variables.currentFightMove);
	var lustAbsorbtion = attackDamage * 3;

	victimSheet.fight.variables.currentArousal -= lustAbsorbtion;
	victimSheet.fight.variables.currentArousal = Math.max(victimSheet.fight.variables.currentArousal, setup.getStatValue(victimSheet, "minArousal"));

	var cockGrowth = Math.ceil(attackDamage * 0.07);
	var ballsGrowth = Math.ceil(attackDamage * 0.025);
	var muscleGrowth = Math.ceil(attackDamage * 0.02);
	var sizeGrowth = Math.ceil(attackDamage * 0.13);

	cockGrowth = setup.applyGrowth(attackerSheet, "cock", cockGrowth);
	ballsGrowth = setup.applyGrowth(attackerSheet, "balls", ballsGrowth);
	muscleGrowth = setup.applyGrowth(attackerSheet, "muscles", muscleGrowth);
	sizeGrowth = setup.applyGrowth(attackerSheet, "height", sizeGrowth);

	var His = setup.getPronoun(attackerSheet,"pronounDepPosCap");
	var his = setup.getPronoun(attackerSheet,"pronounDepPos");

	var displayString = "";
	var muscleTextFlavour = undefined
	var cockTextFlavour = undefined
	if(attackerSheet.id == "CharacterSheet_Player"){
		muscleTextFlavour = setup.getMuscleGrowthSequenceText(attackerSheet, "Your")
		cockTextFlavour = setup.getFlavourBasedDescription(attackerSheet, "CockGrowthFlavourText", 1)

		displayString += cockTextFlavour + "\n\n";
        displayString += muscleTextFlavour + " and ";

        if(setup.hasLimb(attackerSheet.info.anatomy, "cocks"))
        {
            displayString += "your cock has grown "+ setup.getLength(cockGrowth) + ".\n";
        }
        
        if(setup.hasLimb(attackerSheet.info.anatomy, "balls"))
        {
            displayString += "Your balls grow by "+ setup.getLength(ballsGrowth) + ".\n";
        }
        
		displayString += "Your body has become "+ setup.getLength(sizeGrowth) + " taller \n";
		
		displayString += "You marvel at your " + setup.getLength(setup.getStatValue(attackerSheet, "height")) + " muscular frame. ";
		displayString += "Your "+ setup.getLength(setup.getStatValue(attackerSheet, "cock")) + " cock throbs with arousal."
		
	}else{
		muscleTextFlavour = setup.getMuscleGrowthSequenceText(attackerSheet, His)
		cockTextFlavour = setup.getFlavourBasedDescription(attackerSheet, "CockGrowthFlavourText", 1)

		displayString += cockTextFlavour + "\n\n";
        displayString += muscleTextFlavour + " and ";

        if(setup.hasLimb(attackerSheet.info.anatomy, "cocks"))
        {
            displayString +=  his+" cock has grown by "+ setup.getLength(cockGrowth) + ".\n";
        }

        if(setup.hasLimb(attackerSheet.info.anatomy, "balls"))
        {
            displayString += his+" balls have grown by "+ setup.getLength(ballsGrowth) + ".\n";
        }

		displayString += his+" body becomes "+ setup.getLength(sizeGrowth) + " taller \n";
		
		displayString += attackerSheet.info.name +" marvels at "+his+" " + setup.getLength(setup.getStatValue(attackerSheet, "height")) + " muscular frame. ";
		displayString += His+" "+ setup.getLength(setup.getStatValue(attackerSheet, "cock")) + " cock throbs with arousal."
	}

	return displayString;
};

setup.slimeLungeEffects = function(attackerSheet, victimSheet)
{
    var displayString = "";

    console.log("size comp "+setup.sizecomparison(setup.getStatValue(attackerSheet, "height"), setup.getStatValue(victimSheet, "height")))
    console.log("comparing to "+State.variables.Comparators.SLIGHTLY_BIGGER)
    if(setup.sizecomparison(setup.getStatValue(attackerSheet, "height"), setup.getStatValue(victimSheet, "height")) >= State.variables.Comparators.SLIGHTLY_BIGGER)
    {
        console.log("GOT IN ")
        
        if(setup.getRandomInt(0, 100) > 80)
        {
            displayString += attackerSheet.info.name+" knocks "+victimSheet.info.name+" down on their back.";
            console.log("STUNNED ")
            setup.stunTarget(attackerSheet, victimSheet, 1);
        }
    }
    else
    {
        displayString += attackerSheet.info.name+" clashes against "+victimSheet.info.name+"'s body, but their impressive stature stands.";
    }

    return displayString;
}

setup.incubusCallEffects = function(attackerSheet, victimSheet)
{
	victimSheet.fight.variables.currentArousal += 40;
	victimSheet.fight.variables.currentArousal = Math.min(victimSheet.fight.variables.currentArousal, 100);

	var ballsGrowth = 1;
	var cockGrowth = 2;
	var bodyGrowth = 3;
	bodyGrowth = setup.applyGrowth(victimSheet, "height", bodyGrowth);
	cockGrowth = setup.applyGrowth(victimSheet, "cock", cockGrowth);
	ballsGrowth = setup.applyGrowth(victimSheet, "balls", ballsGrowth);

	var displayString = "";
	displayString += victimSheet.info.name + " gains <span style='color:#ac46c5;'>40</span> Arousal \n";
	displayString += victimSheet.info.name+"'s cock permanently grows by "+ setup.getLength(cockGrowth) + "\n";
	displayString += victimSheet.info.name+"'s body permanently grows by "+ setup.getLength(bodyGrowth) + "\n";
	displayString += victimSheet.info.name+"'s balls permanently grows by "+ setup.getLength(ballsGrowth);

	return displayString;
};

setup.masturbate = function(attackerSheet, victimSheet)
{
	attackerSheet.fight.variables.currentArousal += Math.abs(setup.getStatValue(attackerSheet, "arousalGain"))

	attackerSheet.fight.variables.currentArousal = Math.min(attackerSheet.fight.variables.currentArousal, 100);

	return "";
};

setup.focusFightMove = function(attackerSheet, victimSheet)
{
	attackerSheet.fight.variables.currentStamina += setup.getStatValue(attackerSheet, "staminaRecovery")

	attackerSheet.fight.variables.currentStamina = Math.min(attackerSheet.fight.variables.currentStamina, setup.getMaxStamina(attackerSheet));

	return "";
};
/* twine-user-script #4: "FightMoveStore.js" */
setup.displayFightMoveStore = function()
{
    var displayString = "";
    var moves = setup.getAvailableStoreFightMoves(State.variables.CharacterSheet_Player);

    for(let i = 0; i < moves.length; i++)
    {
        
        if(State.variables.Essence < moves[i].essenceCost)
        {
            displayString += "<span class = 'inactive'>";
        }

        displayString += "[["+moves[i].name+" ["+moves[i].essenceCost+" Essence]->"+moves[i].buyPassage+"]]";

        if(State.variables.Essence < moves[i].essenceCost)
        {
            displayString += "</span>";
        }

        displayString += "\n";
    }

    return displayString;
}

setup.buyFightMove = function(character, fightMoveName)
{
    var move = setup.getFightMoveByName(fightMoveName);
    if(move)
    {
        character.fight.fightMoves.push(move);
    }

    State.variables.Essence -= move.essenceCost;

    State.variables.BoughtFightMoves++;
}

setup.getSigilBoughtPassage = function()
{
    if(State.variables.BoughtFightMoves <= 0)
    {
        return "Buy_First_Sigil_1";
    }
    else
    {
        return "Buy_More_Sigil";
    }
}

setup.getFightMoveByName = function(fightMoveName)
{
    var moves = State.variables.FightMoves;
    for(let i = 0; i < moves.length; i++)
    {
        if(moves[i].name == fightMoveName)
        {
            return moves[i];
        }
    }
}

setup.getAvailableStoreFightMoves = function(character)
{    
    var movesFromStore = [...State.variables.FightMoves];
    movesFromStore = movesFromStore.filter(function(val) {
        if(val.buyFromStore)
        {
            return true;
        }
	  	return false;
    });

    var characterMoves = [...character.fight.fightMoves];
	characterMoves = characterMoves.filter(function(val) {
        if(val.buyFromStore)
        {
            return true;
        }
	  	return false;
    });

    movesFromStore = movesFromStore.filter(function(val) {
		var i;
	  	for(i = 0; i < characterMoves.length; i++)
		{
			if(characterMoves[i].name == val.name)
			{
				return false;
			}
		}
	  	return true;
    });
	
	return movesFromStore;
};
/* twine-user-script #5: "StatsHelper.js" */
setup.isStunned = function(character)
{
	return character.fight.variables.stunnedDuration > 0;
};

setup.getPronoun = function(character, desc)
{	
	if(character.info.gender == "male")
	{
		switch(desc)
		{
			case "pronoun":
				return "he";
			case "pronounCap":
				return "He";
			case "pronounDepPos":
				return "his";
			case "pronounDepPosCap":
				return "His";
			case "pronounObject":
					return "him";
			case "pronounObjectCap":
				return "Him";
		}
	}
	
	return "";
};

setup.getSymbioteStats = function()
{
	return State.variables.Player_Symbiote_Modifiers_Level_1;
}

setup.applyFightModifier = function(character, modifier)
{	
	character.fight.variables.fightModifiers.push(modifier);

	for(var propertyName in modifier) 
	{
		if(character.fight.variables[propertyName])
		{
			character.fight.variables[propertyName].push(modifier[propertyName]);
		}
	}
};

setup.getValueWithModifier = function(character, valueToModify, propertyName)
{
	var i;
    var modifiers = setup.getModifiers(character);
    var modifierLines = [];
    var replaceArray = [];
    
    for(i = 0; i < modifiers.length; i++)
    {
        for(var modifierPropertyName in modifiers[i])
        {
            if(propertyName == modifierPropertyName)
            {
                modifierLines.push(modifiers[i][modifierPropertyName]);
            }
        }
    }

	for(i = 0; i < modifierLines.length; i++)
	{
		if(Array.isArray(modifierLines[i].value))
		{
			if(modifierLines[i].mod == setup.mod.ADD)
			{
				valueToModify.push(...modifierLines[i].value);
            }
            else if(modifierLines[i].mod == setup.mod.REPLACE)
            {
                replaceArray.push(...modifierLines[i].value);
            }
		}
		else if(!isNaN(modifierLines[i].value))
		{
			if(modifierLines[i].mod == setup.mod.ADD)
			{
                valueToModify = valueToModify + modifierLines[i].value;
			}
			else if(modifierLines[i].mod == setup.mod.REMOVE)
			{
				valueToModify -= modifierLines[i].value;
			}
		}
    }
    
    if(replaceArray.length > 0)
    {
        valueToModify = replaceArray;
    }

	for(i = 0; i < modifierLines.length; i++)
	{
		if(modifierLines[i].mod == setup.mod.REPLACE)
		{
			valueToModify = modifierLines[i].value;
		}
    }
    
	return valueToModify;
};

setup.updateArousal = function(character)
{	
	var arousalGain = setup.getArousalGain(character);
	character.fight.variables.currentArousal += arousalGain;
	if(character.fight.variables.currentArousal >= 100)
	{
		character.fight.variables.currentArousal = 100;
        var params = 
        {
            trigger: State.variables.AbilityTrigger.ON_MAX_LUST,
            self: character,
		}
		
		// TODO: REMOVE THIS IF STATEMENT WHEN ENEMIES HAVE MAX AROUSAL MECHANICS
		if (character.id == "CharacterSheet_Player"){
			return character.broadcastAbilityTrigger(params) + "\n\n";
		}else{
			return character.broadcastAbilityTrigger(params)
		}
        
	}
	else if(character.fight.variables.currentArousal < setup.getStatValue(character, "minArousal"))
	{
        character.fight.variables.currentArousal = setup.getStatValue(character, "minArousal");
        
        var params = 
        {
            trigger: State.variables.AbilityTrigger.ON_MIN_LUST,
            self: character,
        }
        return character.broadcastAbilityTrigger(params) + "\n\n";
	}

	return "";
};

setup.applyCorruption = function(character, amount)
{	
    var previousCorruption = setup.getStatValue(character, "corruption");
    setup.addToBaseStatValue(character, "corruption", amount)
     
    var params = 
    {
        trigger: State.variables.AbilityTrigger.ON_GAIN_CORRUPTION,
        self: character,
    }
    character.broadcastAbilityTrigger(params);

	if(character.info.name == State.variables.CharacterSheet_Player.info.name)
	{
		//did we change tier?
		if(Math.floor(previousCorruption / 25) != Math.floor(setup.getStatValue(character, "corruption") / 25))
		{
			setup.updateStaticCorruptionUI(character);
		}
	}
};

setup.updateStaticCorruptionUI = function(character)
{
	var corruption = setup.getStatValue(character, "corruption");
	var story = document.getElementById("story");
	story.className = setup.getCorruptionUIClassName("LargeBorder", corruption);

	var uibar = document.getElementById("ui-bar");
	uibar.className = setup.getCorruptionUIClassName("Sidebar", corruption);

	document.getElementById("ui-sidebar-toggle").src = setup.getSideBarButton();
}

setup.getCorruptionUIClassName = function(baseClass, corruption)
{
	var corruptionTier = Math.floor(corruption / 25);
	switch(corruptionTier)
	{
		case 0:
			return baseClass+" Corrupt0";
		case 1:
			return baseClass+" Corrupt25";
		case 2:
			return baseClass+" Corrupt50";
		case 3:
			return baseClass+" Corrupt75";
		case 4:
			return baseClass+" Corrupt100";
		default:
			return baseClass+" Corrupt100";
	}
}

setup.getProgressBarImage = function(character)
{
	var corruptionTier = Math.floor(setup.getStatValue(character, "corruption") / 25);
	switch(corruptionTier)
	{
		case 0:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_bars_corrupt0.png";
		case 1:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_bars_corrupt25.png";
		case 2:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_bars_corrupt50.png";
		case 3:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_bars_corrupt75.png";
		case 4:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_bars_corrupt100.png";
		default:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_bars_corrupt100.png";
	}
}

setup.getSaveIcon = function(character)
{
	var corruptionTier = Math.floor(setup.getStatValue(character, "corruption") / 25);
	switch(corruptionTier)
	{
		case 0:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_save_corrupt0.png";
		case 1:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_save_corrupt25.png";
		case 2:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_save_corrupt50.png";
		case 3:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_save_corrupt75.png";
		case 4:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_save_corrupt100.png";
		default:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_save_corrupt100.png";
	}
}

setup.getResetIcon = function(character)
{
	var corruptionTier = Math.floor(setup.getStatValue(character, "corruption") / 25);
	switch(corruptionTier)
	{
		case 0:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_reset_corrupt0.png";
		case 1:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_reset_corrupt25.png";
		case 2:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_reset_corrupt50.png";
		case 3:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_reset_corrupt75.png";
		case 4:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_reset_corrupt100.png";
		default:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_reset_corrupt100.png";
	}
}

setup.getSideBarButton = function()
{
	var corruptionTier = Math.floor(setup.getStatValue(State.variables.CharacterSheet_Player, "corruption") / 25);
	if(UIBar.isStowed())
	{
		switch(corruptionTier)
		{
			case 0:
				return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_expand_corrupt0.png";
			case 1:
				return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_expand_corrupt25.png";
			case 2:
				return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_expand_corrupt50.png";
			case 3:
				return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_expand_corrupt75.png";
			case 4:
				return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_expand_corrupt100.png";
			default:
				return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_expand_corrupt100.png";
		}
	}
	else
	{
		switch(corruptionTier)
		{
			case 0:
				return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_collapse_corrupt0.png";
			case 1:
				return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_collapse_corrupt25.png";
			case 2:
				return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_collapse_corrupt50.png";
			case 3:
				return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_collapse_corrupt75.png";
			case 4:
				return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_collapse_corrupt100.png";
			default:
				return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_collapse_corrupt100.png";
		}
	}
}

setup.onVillageEnterCallback = function()
{
	var currentPassage = Story.get(State.peek().title);

    if(currentPassage.tags && currentPassage.tags.includes("Overworld"))
    {
        if(State.variables.InOverworld == false || State.variables.InOverworld == undefined)
        {
            State.variables.InOverworld = true;
            setup.addDays(1);
        }
    }
    else
    {
        State.variables.InOverworld = false;
    }
};

setup.saveFightAttributes = function(character)
{
	character.fight.variables = State.variables.FightVariables;
	State.variables[character.id].info = character.info;
	State.variables[character.id].fight = character.fight;
}

setup.applyGrowth = function(character, type, amount)
{
    switch(type)
    {
        case "cock":
            if(!setup.hasLimb(character.info.anatomy, "cocks"))
            {
                return 0;
            }
            break;
        case "muscles":
            if(!setup.hasLimb(character.info.anatomy, "arms") &&
               !setup.hasLimb(character.info.anatomy, "pecs") &&
               !setup.hasLimb(character.info.anatomy, "abdominals") &&
               !setup.hasLimb(character.info.anatomy, "legs"))
            {
                return 0;
            }
            break;
        case "balls":
            if(!setup.hasLimb(character.info.anatomy, "balls"))
            {
                return 0;
            }
            break;
	}
	
	console.log("type " +type)

	console.log("before multiplier " +amount)

    var multiplier = setup.getStatValue(character, "growthMultiplier");

	amount *= multiplier;
    
    console.log("after multiplier " + amount)

	if(amount > 0)
	{
        switch(type)
        {
            case "cock":
                amount += setup.getStatValue(character, "bonusGrowthCock");
                break;
            case "muscles":
                amount += setup.getStatValue(character, "bonusGrowthMuscles");
                break;
            case "height":
                amount += setup.getStatValue(character, "bonusGrowthHeight");
                break;
            case "balls":
                amount += setup.getStatValue(character, "bonusGrowthBalls");
                break;
        }
	}
	
	console.log("after bonus " + amount)

	var growth = setup.applyGrowthEqualizer(character, type, Math.ceil(amount));
	
	console.log("after equalizer " + growth)

	switch(type)
	{
		case "cock":
            setup.addToBaseStatValue(character, "cock", growth);
			break;
		case "muscles":
            setup.addToBaseStatValue(character, "muscles", growth);
			break;
		case "height":
            setup.addToBaseStatValue(character, "height", growth);
			break;
		case "balls":
            setup.addToBaseStatValue(character, "balls", growth);
			break;
	}

    var params = 
    {
        trigger: State.variables.AbilityTrigger.ON_APPLY_GROWTH,
        self: character,
    }
    character.broadcastAbilityTrigger(params);

	return growth;
}

setup.applyGrowthEqualizer = function(character, type, amount)
{
	/*switch(type)
	{
		case "cock":
		var bodyCockRatio = setup.getStatValue(character, "height") / setup.getStatValue(character, "cock");

		if(bodyCockRatio < 1.2)
		{
			return 1;
		}
		else if(bodyCockRatio < 1.8)
		{
			return Math.ceil(amount * 0.3);
		}
		else if(bodyCockRatio < 2.5)
		{
			return Math.ceil(amount * 0.5);
		}
		else if(bodyCockRatio < 3.5)
		{
			return Math.ceil(amount * 0.75);
		}

		var cockBodyRatio = setup.getStatValue(character, "cock") / setup.getStatValue(character, "height");

		if(cockBodyRatio < 0.05)
		{
			return Math.ceil(amount * 1.5);
		}
		break;
		case "balls":
			
		var ballsCockRatio = setup.getStatValue(character, "balls") / setup.getStatValue(character, "cock");
		if(ballsCockRatio > 0.4)
		{
            console.log("APPLYING BALLS EQUALIZER BALLS "+ setup.getStatValue(character, "balls")+ " COCK "+setup.getStatValue(character, "cock"))
			return Math.ceil(amount * 0.5);
		}

		var bodyBallsRatio = setup.getStatValue(character, "height") / setup.getStatValue(character, "cock");
		if(bodyBallsRatio < 1.75)
		{
			return 1;
		}
		else if(bodyCockRatio < 2)
		{
			return Math.ceil(amount * 0.3);
		}
		else if(bodyCockRatio < 3)
		{
			return Math.ceil(amount * 0.5);
		}
		else if(bodyCockRatio < 4)
		{
			return Math.ceil(amount * 0.75);
		}
		break;		
	}*/

	return amount;
}

setup.displayInfoStats = function(character)
{
    var displayString = "";

    displayString += "<div class='cycle-row'>"
    displayString +=    "<div class='cycle-column1'>"
    displayString +=    "<span class='cycle-title'>CYCLE</span>: "+ (~~(State.variables.Day / (State.variables.DaysPerCycle*4)) + 1);
    displayString +=    "</div>";
    displayString +=    "<div class='cycle-column2'>";
    displayString +=    "<span class='cycle-title'>DAY</span>: "+(State.variables.Day % (State.variables.DaysPerCycle*4) + 1);
    displayString +=    "</div>";
    displayString += "</div>";
    displayString += "<hr>";
    displayString += "<div class='info-row'>"
    displayString +=    "<div class='info-column1 "+setup.getCorruptTextClass(character)+"'>"
    displayString +=        "NAME\n"
    displayString +=        "RACE\n"
    displayString +=        "LEVEL &nbsp;&nbsp;"+State.variables.Level+"\n"
    displayString +=        "ESSENCE\n"
    displayString +=        "CORRUPTION\n"
    displayString +=    "</div>";
    displayString +=    "<div class='info-column2'>"
    displayString +=        State.variables.CharacterSheet_Player.info.name+"\n";
    displayString +=        setup.getRace(State.variables.CharacterSheet_Player.info.anatomy)+"\n";
    displayString +=        State.variables.Exp +"/"+ setup.getXPRequirement(State.variables.Level)+ "\n"
    displayString +=        State.variables.Essence+ "\n"
    displayString +=        setup.displayStatValue(State.variables.CharacterSheet_Player, "corruption")
    displayString +=    "</div>";
    displayString += "</div>";

return displayString;
}

setup.displayFightStats = function(character)
{
	var displayString = "";

    displayString +="<div class='stat-row'>";
    displayString +="<div class='stat-column1'><span class='stat-title' style='color:#ff0000'>Health</span>";
    displayString +="</div>";
    displayString +="<div class='stat-column2'>";
	if(character.fight.variables.currentHP != undefined)
	{
		displayString += "$CharacterSheet_Player.fight.variables.currentHP / " + setup.displayStatValue(character, "hp"); 
	}
	else
	{
		displayString += setup.getStatValue(character, "hp") + " / " + setup.displayStatValue(character, "hp"); 
    }
    displayString +="</div>";
    displayString +="</div>";
    if(character.fight.variables.currentHP != undefined)
    {
		displayString += setup.displayStatProgressBar(character, "currentHP", setup.getMaxHP(character), "HPProgress");
    }
    else
    {
		displayString += setup.displayStatFullProgressBar(character, setup.getMaxHP(character), "HPProgress");
    }
    displayString += "<div class='stat-perturn'>";
	displayString +=    "&nbsp;";
    displayString += "</div>";
    
    displayString +="<div class='stat-row'>";
    displayString +=    "<div class='stat-column1'><span class='stat-title' style='color:#00da50' >Stamina</span>";
    displayString +=    "</div>";
    displayString +=    "<div class='stat-column2'>";
	if(character.fight.variables.currentStamina != undefined)
	{
		displayString += "$CharacterSheet_Player.fight.variables.currentStamina / " + setup.displayStatValue(character, "stamina");
	}
	else
	{
		displayString += setup.getStatValue(character, "stamina")+" / " + setup.displayStatValue(character, "stamina");
    }
    displayString +=    "</div>";
    displayString +="</div>";
    if(character.fight.variables.currentStamina != undefined)
	{
		displayString += setup.displayStatProgressBar(character, "currentStamina", setup.getMaxStamina(character), "StaminaProgress");
	}
	else
	{
		displayString += setup.displayStatFullProgressBar(character, setup.getMaxStamina(character), "StaminaProgress");
    }
    displayString += "<div class='stat-perturn'>";
	displayString += setup.displaySign(character.fight.staminaRecovery) +  setup.displayStatValue(character, "staminaRecovery");
    displayString +=" <span style='color:#00da50'>per turn </span></div>";

	if(setup.hasAbility(character, "Ability_EchoForm"))
	{
		displayString +="<div class='stat-row'>";
		displayString +=    "<div class='stat-column1'><span class='stat-title' style='color:#d600b2'>Arousal</span>";
		displayString +=    "</div>";
		displayString +=    "<div class='stat-column2'>";
		if(character.fight.variables.currentStamina != undefined)
		{
			displayString += "$CharacterSheet_Player.fight.variables.currentArousal / 100";
		}
		else
		{
			displayString += setup.displayStatValue(character, "minArousal")+" / 100";
		}
		displayString +=    "</div>";
		displayString +="</div>";
		
		if(character.fight.variables.currentStamina != undefined)
		{
			displayString += setup.displayStatProgressBar(character, "currentArousal", 100, "ArousalProgress");
		}
		else
		{
			displayString += setup.displayStatFullProgressBar(character, 100, "ArousalProgress");
		}
		
		displayString += "<div class='stat-perturn'>";
		displayString += setup.displaySign(setup.getArousalGain(character)) +  setup.displayStatValue(character, "arousalGain");
		displayString +=" <span style='color:#d600b2'>per turn </span></div>";
	}

    displayString +="<div class='info-row'>";
    displayString +=    "<div class='info-column1 "+setup.getCorruptTextClass(character)+"'>";
    displayString +=        "STRENGTH\n";
    displayString +=        "CRIT CHANCE\n";
    displayString +=        "CRIT DAMAGE\n";
    displayString +=    "</div>";
    displayString +=    "<div class='info-column2'>";
    displayString +=        setup.displayStatValue(character, "strength") + "\n";
    displayString +=        setup.displayStatValue(character, "critChance") + "\n";
    displayString +=        "× "+setup.displayStatValue(character, "critDamage") + "\n";
    displayString +=    "</div>";
    displayString +="</div>";
    displayString +="<hr>";
    
    displayString += setup.displayBodyStats(character);
	
	return displayString;
};

setup.displayStatProgressBar = function(character, currentStatVariable, statValue, statStyle)
{
    var displayString = "";

	displayString += "<div id='ProgressBarContainer'>";
	displayString += 	"<div id='ProgressBarContent'>";
	displayString += 		"<progress id='"+statStyle+"' @value=\"$CharacterSheet_Player.fight.variables."+currentStatVariable+"\" @max=\"" + statValue + "\"></progress>";
	displayString += 	"</div>";
	displayString += 	"<div id='ProgressBarBorder'><img src='"+setup.getProgressBarImage(character)+"'></div>";
	displayString += "</div>";
	
	return displayString;
}

setup.displayStatFullProgressBar = function(character, statValue, statStyle)
{
	var displayString = "";

	displayString += "<div id='ProgressBarContainer'>";
	displayString += 	"<div id='ProgressBarContent'>";
	displayString += 		"<progress id='"+statStyle+"' @value=\""+statValue+"\" @max=\"" + statValue + "\"></progress>";
	displayString += 	"</div>";
	displayString += 	"<div id='ProgressBarBorder'><img src='"+setup.getProgressBarImage(character)+"'></div>";
	displayString += "</div>";
	
	return displayString;
}

setup.displayBodyStats = function(character)
{
    var displayString = "";

    displayString +="<div class='info-row'>";
    displayString +=    "<div class='info-column1 "+setup.getCorruptTextClass(character)+"'>";
    displayString +=        "BODY TYPE\n";
    displayString +=        "HEIGHT\n";
    displayString +=        "COCK SIZE\n";
    displayString +=        "BALLS SIZE\n";
    displayString +=    "</div>";
    displayString +=    "<div class='info-column2'>";
    displayString +=        setup.getMusclesDescriptor(character)+"("+ setup.displayStatValue(character, "muscles")+")\n";
    displayString +=        setup.displayStatValue(character, "height", true) +"\n";
    displayString +=        setup.displayStatValue(character, "cock", true)+"\n";
    displayString +=        setup.displayStatValue(character, "balls", true)+"\n";
    displayString +=    "</div>";
    displayString +="</div>";
    displayString +="<hr>";

    return displayString;
}

setup.getCorruptTextClass = function(character)
{
    var corruptionTier = Math.floor(setup.getStatValue(character, "corruption") / 25);
    switch(corruptionTier)
	{
		case 0:
			return "corruptText0";
		case 1:
			return "corruptText25";
		case 2:
			return "corruptText50";
		case 3:
			return "corruptText75";
		case 4:
			return "corruptText100";
		default:
			return "corruptText100";
	}
}

setup.getCorruptBackgroundClass = function(character)
{
    var corruptionTier = Math.floor(setup.getStatValue(character, "corruption") / 25);
    switch(corruptionTier)
	{
		case 0:
			return "corruptBackground0";
		case 1:
			return "corruptBackground25";
		case 2:
			return "corruptBackground50";
		case 3:
			return "corruptBackground75";
		case 4:
			return "corruptBackground100";
		default:
			return "corruptBackground100";
	}
}

setup.displayPersistentAbilities = function(character)
{
	var displayString = "";
    var abilities = character.abilityHandler.abilityRuntimeDatas;

	var i;
	for(i = 0; i < abilities.length; i++)
	{
        if(abilities[i].isActive == false)
        {
            continue;
        }

        var modifier = abilities[i].modifier;
        var rankString  = setup.displayRankText(abilities[i]);

		displayString += "<details class='PassiveAbility'>";
		displayString += "<summary class='PassiveAbilityHeader'>" + abilities[i].abilityData.name + " "+rankString+"</summary>";
		displayString += 	"<p class='PassiveAbilityBody' >";


		for(var propertyName in modifier)
		{
			if(propertyName == "maxHPMods")
			{
				displayString += setup.displayModifierText(modifier[propertyName], "Max HP");
				displayString += "\n"
			}

			if(propertyName == "maxStaminaMods")
			{
				displayString += setup.displayModifierText(modifier[propertyName], "Max Stamina");
				displayString += "\n"
			}

			if(propertyName == "strengthMods")
			{
				displayString +=  setup.displayModifierText(modifier[propertyName], "Strength");
				displayString += "\n"
			}

			if(propertyName == "critChanceMods")
			{
				displayString += setup.displayModifierText(modifier[propertyName], "Crit Chance");
				displayString += "\n"
            }
            
            if(propertyName == "critDamageMods")
			{
				displayString += setup.displayModifierText(modifier[propertyName], "Crit Damage Multiplier");
				displayString += "\n"
			}
            
            if(propertyName == "essenceMultiplierMods")
			{
				displayString += setup.displayModifierText(modifier[propertyName], "Essence Gain Multiplier");
				displayString += "\n" 
			}
            
            if(propertyName == "actionSlotsMods")
			{
				displayString += setup.displayModifierText(modifier[propertyName], "Action Slots");
				displayString += "\n" 
			}
            
            if(propertyName == "comboMovesPerTurnMods")
			{
				displayString += setup.displayModifierText(modifier[propertyName], "Combo Moves Per Turn");
				displayString += "\n" 
			}

			if(propertyName == "arousalGainMods")
			{
				displayString += setup.displayModifierText(modifier[propertyName], "Arousal Gain");
				displayString += "\n"
			}

			if(propertyName == "minArousalMods")
			{
				displayString += setup.displayModifierText(modifier[propertyName], "Min Arousal");
				displayString += "\n"
			}

			if(propertyName == "staminaRecoveryMods")
			{
				displayString += setup.displayModifierText(modifier[propertyName], "Stamina Recovery");
				displayString += "\n"
			}

			if(propertyName == "corruptionMods")
			{
				displayString += setup.displayModifierText(modifier[propertyName], "Corruption");
				displayString += "\n"
			}

			if(propertyName == "cockMods")
			{
				displayString += setup.displayModifierText(modifier[propertyName], "Cock Size", true);
				displayString += "\n"
			}

			if(propertyName == "ballsMods")
			{
				displayString += setup.displayModifierText(modifier[propertyName], "Balls Size", true);
				displayString += "\n"
			}

			if(propertyName == "heightMods")
			{
				displayString += setup.displayModifierText(modifier[propertyName], "Body Size", true);
				displayString += "\n"
			}

			if(propertyName == "musclesMods")
			{
				displayString += setup.displayModifierText(modifier[propertyName], "Muscles");
				displayString += "\n"
            }
        }         
           
        if(abilities[i].abilityData.description != undefined || abilities[i].abilityData.description(character, abilities[i]) != "")
        {
            displayString += abilities[i].abilityData.description(character, abilities[i]);
            displayString += "\n"
        }
        
		displayString += 	"</p>";
		displayString += "</details>";
    }

	return displayString;
}

setup.displayRankText = function(abilityRuntimeData)
{
    var rankString = "";

    if(abilityRuntimeData.abilityData.maxRank > 1)
    {
        rankString += "["+abilityRuntimeData.rank+"]";
    }

    return rankString;
}

setup.displayModifierText = function(modifier, propertyName, asLength = false)
{
	if(asLength)
    {
		return propertyName + setup.displayModifierTypeText(modifier) +" "+ setup.getLength(modifier.value);
	}
	else
	{
		return propertyName + setup.displayModifierTypeText(modifier) +" "+ modifier.value;
	}
}

setup.displayModifierTypeText = function(modifier)
{
	var displayString = "";

	if(modifier.mod == setup.mod.ADD)
	{
		displayString += " + ";
	}
	else if(modifier.mod == setup.mod.REMOVE)
	{
		displayString += " - ";
	}
	else if(modifier.mod == setup.mod.REPLACE)
	{
		displayString += " becomes ";
	}

	return displayString;
}

setup.displayChanceToHit = function(character, fightMove)
{    
    var displayString = "";

	if(fightMove.critMod != undefined)
	{
        var statValue = setup.getStatValue(character, "critChance");
        var critChance = statValue + fightMove.critMod;

        displayString += " <span class='tooltip' id=";
        if(statValue < 0)
        {
            displayString += "'StatModifierNegative'";
        }
        else
        {
            displayString += "'StatModifierPositive'";
        }

        displayString += ">"+ critChance;

        displayString += "<span class='tooltiptext'>";

        var statValue = setup.getStatValue(character, "critChance");
        var damageMod = {mod: setup.mod.ADD, value: statValue};

        displayString += setup.displayModifierText(damageMod, "Crit Chance Stat ");

        displayString += "</span>";
        displayString += "</span>";
    }
    console.log("crit lololol");
    console.log(displayString);

    return displayString;
}

setup.displaySign = function(number)
{
	if(number >= 0)
	{
		return "+";
	}
		
	return "";
}

setup.getModifiers = function(character)
{    
    var modifiers = [];
    var runtimeAbilityDatas = character.abilityHandler.abilityRuntimeDatas;
    for(let i = 0; i < runtimeAbilityDatas.length; i++)
	{
        if(runtimeAbilityDatas[i].modifier != undefined && runtimeAbilityDatas[i].isActive == true)
        {
            modifiers.push(runtimeAbilityDatas[i].modifier);
        }
    }

	return modifiers;
}

setup.getModifiersForStat = function(character, statName)
{
	var baseModifiers = setup.getModifiers(character);
	var statInfo = setup.getStatModifierPropertyName(statName);

	var modifiers = [];
	var i;
	for(i = 0; i < baseModifiers.length; i++)
	{
		for(var propertyName in baseModifiers[i])
		{
			if(propertyName == statInfo.modifierProperty)
			{
				modifiers.push(baseModifiers[i]);
			}
		}
	}

	return modifiers;
}

setup.getStatModifierPropertyName = function(stat)
{
	var statInfo = {name: stat, modifier: undefined};

	switch(stat)
	{
		case "hp":
			statInfo.modifierProperty = "maxHPMods";
			break;
		case "stamina":
			statInfo.modifierProperty = "maxStaminaMods";
			break;
		case "strength":
			statInfo.modifierProperty = "strengthMods";
			break;
		case "critChance":
			statInfo.modifierProperty = "critChanceMods";
			break;
		case "critDamage":
			statInfo.modifierProperty = "critDamageMods";
			break;
		case "essenceMultiplier":
			statInfo.modifierProperty = "essenceMultiplierMods";
			break;
		case "actionSlots":
			statInfo.modifierProperty = "actionSlotsMods";
			break;
		case "comboMovesPerTurn":
			statInfo.modifierProperty = "comboMovesPerTurnMods";
			break;
		case "arousalGain":
			statInfo.modifierProperty = "arousalGainMods";
			break;
		case "minArousal":
			statInfo.modifierProperty = "minArousalMods";
			break;
		case "growthMultiplier":
			statInfo.modifierProperty = "growthMods";
			break;
		case "staminaRecovery":
			statInfo.modifierProperty = "staminaRecoveryMods";
			break;
		case "corruption":
			statInfo.modifierProperty = "corruptionMods";
			break;
		case "muscles":
			statInfo.modifierProperty = "musclesMods";
			break;
		case "height":
			statInfo.modifierProperty = "heightMods";
			break;
		case "cock":
			statInfo.modifierProperty = "cockMods";
			break;
		case "balls":
			statInfo.modifierProperty = "ballsMods";
            break;
        default:
            alert(stat +" not handled by getStatModifierPropertyName")
            break;
	}

	return statInfo;
};

setup.getStatValue = function(character, stat)
{
	switch(stat)
	{
		case "hp":
			return setup.getMaxHP(character);
		case "stamina":
			return setup.getMaxStamina(character);
		case "strength":
			return setup.getStrength(character);
		case "critChance":
			return setup.getCritChance(character);
		case "critDamage":
			return setup.getCritDamage(character);
		case "essenceMultiplier":
			return setup.getEssenceMultiplier(character);
		case "actionSlots":
			return setup.getActionSlots(character);
		case "comboMovesPerTurn":
			return setup.getComboMovesPerTurn(character);
		case "arousalGain":
            return setup.getArousalGain(character);
        case "minArousal":
            return setup.getMinArousal(character);
		case "growthMultiplier":
			return setup.getGrowthMultiplier(character);
		case "bonusGrowthBalls":
			return setup.getBonusGrowth(character, "balls");
		case "bonusGrowthHeight":
			return setup.getBonusGrowth(character, "height");
		case "bonusGrowthMuscles":
			return setup.getBonusGrowth(character, "muscles");
		case "bonusGrowthCock":
			return setup.getBonusGrowth(character, "cock");
		case "staminaRecovery":
			return setup.getStaminaRecovery(character);
		case "corruption":
			return setup.getCorruption(character);
		case "muscles":
			return setup.getMuscles(character);
		case "height":
			return setup.getHeight(character);
		case "cock":
			return setup.getCock(character);
		case "balls":
			return setup.getBalls(character);
	}

	return undefined;
};

setup.setBaseStatValue = function(character, stat, value)
{
    //hook hook - Hook hook
	switch(stat)
	{
		case "hp":
        case "stamina":
        case "strength":
        case "critChance":
        case "critDamage":
        case "essenceMultiplier":
        case "actionSlots":
        case "comboMovesPerTurn":
        case "arousalGain":
        case "minArousal":
		case "growthMultiplier":
        case "staminaRecovery":
            character.fight[stat] = value;
            break;
        case "muscles":
        case "corruption":
        case "height":
        case "cock":
        case "balls":
            character.info[stat] = value;
            break;
		case "bonusGrowthBalls":
            character.fight.bonusGrowth.balls = value;
            break;
		case "bonusGrowthHeight":
            character.fight.bonusGrowth.height = value;
            break;
		case "bonusGrowthMuscles":
            character.fight.bonusGrowth.muscles = value;
            break;
		case "bonusGrowthCock":
            character.fight.bonusGrowth.cock = value;
            break;
    }
    
    var params = 
    {
        trigger: State.variables.AbilityTrigger.ON_STAT_CHANGE,
        self: character,
    }
    return character.broadcastAbilityTrigger(params);
};

setup.addToBaseStatValue = function(character, stat, value)
{
	let baseValue = setup.getStatValueNoModifiers(character, stat)
	let newValue = baseValue + value;
	if (baseValue != newValue-value || value != newValue-baseValue || newValue >= 999999999){
		setup.setBaseStatValue(character, stat, 999999999);
	}else{
		setup.setBaseStatValue(character, stat, newValue);
	}
};

setup.getStatValueNoModifiers = function(character, stat)
{
	switch(stat)
	{
		case "hp":
		case "stamina":
		case "strength":
		case "critChance":
		case "critDamage":
		case "essenceMultiplier":
		case "actionSlots":
		case "comboMovesPerTurn":
		case "arousalGain":
		case "minArousal":
        case "growthMultiplier":
        case "staminaRecovery":
			return character.fight[stat];
		case "corruption":
        case "muscles":
		case "height":
		case "cock":
		case "balls":
			return character.info[stat];
        case "bonusGrowthBalls":
            return character.info.bonusGrowth.balls;
        case "bonusGrowthHeight":
            return character.info.bonusGrowth.height;
        case "bonusGrowthMuscles":
            return character.info.bonusGrowth.muscles;
        case "bonusGrowthCock":
            return character.info.bonusGrowth.cock;
    }

    alert(stat +" not handled by getStatValueNoModifiers")
};

setup.getMaxHP = function(character)
{
	var maxHP = character.fight.hp;
	maxHP = setup.getValueWithModifier(character, maxHP, "maxHPMods");
	if(character.fight.variables.currentHP)
	{
		if(character.fight.variables.currentHP > maxHP)
		{
			character.fight.variables.currentHP = maxHP;
		}
	}

	return maxHP;
};

setup.getMaxStamina = function(character)
{
	var maxStam = character.fight.stamina;
	maxStam = setup.getValueWithModifier(character, maxStam, "maxStaminaMods");
	if(character.fight.variables.currentStamina)
	{
		if(character.fight.variables.currentStamina > maxStam)
		{
			character.fight.variables.currentStamina = maxStam;
		}
	}
	return maxStam;
};

setup.getStrength = function(character)
{
	var strength = character.fight.strength;
	return setup.getValueWithModifier(character, strength, "strengthMods");
};

setup.getCritChance = function(character)
{
	var critChance = character.fight.critChance;
	return setup.getValueWithModifier(character, critChance, "critChanceMods");
};

setup.getCritDamage = function(character)
{
	var critDamage = character.fight.critDamage;
	return setup.getValueWithModifier(character, critDamage, "critDamageMods");
};

setup.getEssenceMultiplier = function(character)
{
	var essenceMultiplier = character.fight.essenceModifierToAdd;
	return setup.getValueWithModifier(character, essenceMultiplier, "essenceMultiplierMods");
};

setup.getActionSlots = function(character)
{
	var actionSlots = character.fight.actionSlots;
	return setup.getValueWithModifier(character, actionSlots, "actionSlotsMods");
};

setup.getComboMovesPerTurn = function(character)
{
	var comboMovesPerTurn = character.fight.comboMovesPerTurn;
	return setup.getValueWithModifier(character, comboMovesPerTurn, "comboMovesPerTurnMods");
};

setup.getArousalGain = function(character)
{
	var arousalGain = character.fight.arousalGain;
	return setup.getValueWithModifier(character, arousalGain, "arousalGainMods");
};

setup.getGrowthMultiplier = function(character)
{
    var growthMultiplier = character.fight.growthMultiplier;
    var stuff = setup.getValueWithModifier(character, growthMultiplier, "growthMods");
	return stuff
};

setup.addDays = function(value)
{
    return setup.setDays(State.variables.Day + value)
}

setup.setDays = function(value)
{
    State.variables.Day = value;

	var displayString = "";
    var params = 
    {
        trigger: State.variables.AbilityTrigger.ON_DAY_CHANGE,
        self: State.variables.CharacterSheet_Player,
	}
    displayString += State.variables.CharacterSheet_Player.broadcastAbilityTrigger(params);

    return displayString;
}

setup.getBonusGrowth = function(character, type)
{
    switch(type)
    {
        case "balls":
            var value = character.fight.bonusGrowth.balls;
	        return setup.getValueWithModifier(character, value, "bonusGrowthBalls");
        case "cock":
            var value = character.fight.bonusGrowth.cock;
	        return setup.getValueWithModifier(character, value, "bonusGrowthCock");
        case "muscles":
            var value = character.fight.bonusGrowth.muscles;
	        return setup.getValueWithModifier(character, value, "bonusGrowthMuscles");
        case "height":
            var value = character.fight.bonusGrowth.height;
	        return setup.getValueWithModifier(character, value, "bonusGrowthHeight");
    }
};

setup.getMinArousal = function(character)
{
    var value = character.fight.minArousal;
	return setup.getValueWithModifier(character, value, "minArousalMods");
}

setup.getStaminaRecovery = function(character)
{
	var staminaRecovery = character.fight.staminaRecovery;
	return setup.getValueWithModifier(character, staminaRecovery, "staminaRecoveryMods");
};

setup.getCorruption = function(character)
{
	var corruption = character.info.corruption;
	return setup.getValueWithModifier(character, corruption, "corruptionMods");
}

setup.getMuscles = function(character)
{
	return setup.getValueWithModifier(character, character.info.muscles, "musclesMods");
}

setup.getHeight = function(character)
{
	return setup.getValueWithModifier(character, character.info.height, "heightMods");
}

setup.getCock = function(character)
{
	return setup.getValueWithModifier(character, character.info.cock, "cockMods");
}

setup.getBalls = function(character)
{
	return setup.getValueWithModifier(character, character.info.balls, "ballsMods");
}

setup.getFightMovesWithAddons = function(character)
{
	var fightMoves = [...character.fight.fightMoves];
    fightMoves = setup.getValueWithModifier(character, fightMoves, "fightMovesMods");

    var fightMovesNoDup = [];

    let idCount = {};
    for(let i = 0; i < fightMoves.length; i++)
    {
        if(idCount[fightMoves[i].id] == undefined)
        {
            fightMovesNoDup.push(fightMoves[i])
            idCount[fightMoves[i].id] = true;
        }
    }

    return fightMovesNoDup;
};

setup.modifiersEqual = function(a, b) 
{
	if (a === b) return true;
	if (a == null || b == null) return false;
	if (a.length != b.length) return false;
  
	// If you don't care about the order of the elements inside
	// the array, you should sort both arrays here.
	// Please note that calling sort on an array will modify that array.
	// you might want to clone your array first.
  
	for (var i = 0; i < a.length; ++i) {
	  if (a[i].name !== b[i].name) return false;
	}
	return true;
};

setup.canLevelUp = function(level)
{
	return State.variables.Exp >= setup.getXPRequirement(level);
};

setup.canExplore = function()
{
	return State.variables.Quest_CanExplore;
};

setup.getXPRequirement = function(level)
{
	if(level <= State.variables.LevelUpTable.length)
	{
		return State.variables.LevelUpTable[level - 1];
	}
	else
	{
		var lastLevelXP =  State.variables.LevelUpTable[State.variables.LevelUpTable.length -1];
		var secondToLastLevelXP =  State.variables.LevelUpTable[State.variables.LevelUpTable.length -2];

		var endlessTier = lastLevelXP - secondToLastLevelXP;

		return lastLevelXP + endlessTier * (level - State.variables.LevelUpTable.length);
	}
	
};

setup.gainEssence= function(amount)
{
    State.variables.Essence += setup.getEssenceGain(amount); 
    
    var displayString = "";
    var params = 
    {
        trigger: State.variables.AbilityTrigger.ON_GAIN_ESSENCE,
        self: State.variables.CharacterSheet_Player,
    }
    displayString += State.variables.CharacterSheet_Player.broadcastAbilityTrigger(params);

    return displayString;
}

setup.getEssenceGain= function(amount)
{
    console.log("essence mods" + setup.getStatValue(State.variables.CharacterSheet_Player, "essenceMultiplier"));
	return amount + Math.ceil(amount * setup.getStatValue(State.variables.CharacterSheet_Player, "essenceMultiplier")); 
}
/* twine-user-script #6: "abilityData.js" */
setup.AbilityDataFactory =
{
    createAbilityData : function(param)
    {
        var newAbilityData = {};
        newAbilityData.id = param.id;
        newAbilityData.name = param.name;
        newAbilityData.description = param.description;
        newAbilityData.maxRank = param.maxRank;

        newAbilityData.unlockableFromLevelScreen = false;
        newAbilityData.isGlobalAbility = false;
        newAbilityData.startBehaviourInstructions = [];
        newAbilityData.updateBehaviourInstructions = [];
        newAbilityData.endBehaviourInstructions = [];
        newAbilityData.removeBehaviourInstructions = [];
        newAbilityData.category = State.variables.AbilityCategory.NONE;
        newAbilityData.setCategory = function(category)
        {
            this.category = category;
        }

        newAbilityData.grade = State.variables.AbilityGrade.MEDIUM;
        newAbilityData.setGrade = function(grade)
        {
            this.grade = grade;
        }

        newAbilityData.upgradeDescription = "";
        newAbilityData.upgradeConditionFunction = function()
        {
            return false;
        }
        newAbilityData.unlockCondition = function()
        {
            return false;
        }
        newAbilityData.nextAbility = undefined;

        var idRegex = /(.*)_\d|(.*)\b/g;
        var match = idRegex.exec(param.id);
        
        if(match[1] != undefined)
        {
            newAbilityData.baseID = match[1];
        }
        else
        {
            newAbilityData.baseID = match[0];
        }

        newAbilityData.setUpgrade = function(upgradeConditionFunction, nextAbility, upgradeDescription = "")
        {
            this.upgradeConditionFunction = upgradeConditionFunction;
            this.upgradeDescription = upgradeDescription;
            this.nextAbility = nextAbility;
        }
    
        newAbilityData.setUnlockableFromLevelScreen = function(unlockableFromLevelScreen)
        {
            this.unlockableFromLevelScreen = unlockableFromLevelScreen;
            State.variables.AbilityList.push(State.variables[this.baseID]);
        }
    
        newAbilityData.setAsGlobalAbility = function()
        {
            this.isGlobalAbility = true;
            State.variables.GlobalAbilities.push(State.variables[this.id]);
        }
    
        newAbilityData.setUnlockCondition = function(unlockCondition)
        {
            this.unlockCondition = unlockCondition;
        }
    
        newAbilityData.addBehaviour = function(phase, triggers, triggerFunction){
            var instruction = {};
            instruction["triggers"] = triggers;
            instruction["triggerFunction"]  = triggerFunction;
            switch(phase) {
                case "start":
                    this.startBehaviourInstructions.push(instruction);
                    break;
                case "update":
                    this.updateBehaviourInstructions.push(instruction);
                    break;
                case "end":
                    this.endBehaviourInstructions.push(instruction);
                    break;
                case "remove":
                    this.removeBehaviourInstructions.push(instruction);
                    break;
            }
        }

        return newAbilityData;
    }    
}
/* twine-user-script #7: "abilityHandler.js" */
setup.AbilityHandlerFactory =
{
    createAbilityHandler : function(param)
    {
        var newAbilityHandler = {};
        newAbilityHandler.abilityRuntimeDatas = [];
        newAbilityHandler.ownerID = param.ownerID;
        console.log("createAbilityHandler "+param.ownerID);

        newAbilityHandler.broadcastAbilityTrigger = function(abilityParams)
        {
            var displayString = [];
    
            for(let i = 0; i < this.abilityRuntimeDatas.length; i++)
            {
                var handledAbilityTrigger = this.handleAbilityTrigger(this.abilityRuntimeDatas[i], abilityParams);
                if (handledAbilityTrigger != "undefined" && handledAbilityTrigger != "" && handledAbilityTrigger != undefined)
                {
                    let abilitytext = "∇ : " + handledAbilityTrigger
                    displayString.push(abilitytext);
                }
            }
    
            return displayString.join("\n\n");
        }

        newAbilityHandler.runBehaviour = function(abilityRuntimeData, abilityParams, behaviourInstructions, phase)
        {
            var behaviourInstructionsLength = behaviourInstructions.length;
            var displayString = "";

            if (behaviourInstructionsLength != 0)
            {
                for (var index = 0; index < behaviourInstructionsLength; ++index) {
                    var behaviourTriggers = behaviourInstructions[index].triggers;

                    if ((behaviourTriggers & abilityParams.trigger) == abilityParams.trigger){
                        switch(phase){
                            case "start":
                                abilityRuntimeData.isActive = true;
                                abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
                                {
                                    abilityID: abilityRuntimeData.abilityData.id
                                });
                                break;
                            case "update":
                                break;
                            case "end":
                                break;
                            case "remove":
                                break;
                        }

                        var behaviourFunction = behaviourInstructions[index].triggerFunction;
                        if (behaviourFunction != undefined){
                            displayString += behaviourInstructions[index].triggerFunction(abilityRuntimeData, abilityParams);
                        }

                        switch(phase){
                            case "start":
                                break;
                            case "update":
                                break;
                            case "end":
                                abilityRuntimeData.isActive = false;
                                break;
                            case "remove":
                                abilityParams.self.removeAbilityRuntimeData(abilityRuntimeData.abilityData)
                                break;
                        }

                        if(abilityRuntimeData.isScheduledForRemoval)
                        {
                            abilityParams.self.removeAbilityRuntimeData(abilityRuntimeData.abilityData)
                        }
                        break;
                    }
                }
            }
            return displayString;
        }

        newAbilityHandler.handleAbilityTrigger = function(abilityRuntimeData, abilityParams)
        {
            var displayString = "";

            switch (abilityRuntimeData.isActive){
                case true:
                    displayString += this.runBehaviour(
                        abilityRuntimeData,
                        abilityParams,
                        abilityRuntimeData.abilityData.updateBehaviourInstructions,
                        "update"
                    )

                    displayString += this.runBehaviour(
                        abilityRuntimeData,
                        abilityParams,
                        abilityRuntimeData.abilityData.endBehaviourInstructions,
                        "end"
                    )
                    break;
                case false:
                    displayString += this.runBehaviour(
                        abilityRuntimeData,
                        abilityParams,
                        abilityRuntimeData.abilityData.startBehaviourInstructions,
                        "start"
                    )

                    displayString += this.runBehaviour(
                        abilityRuntimeData,
                        abilityParams,
                        abilityRuntimeData.abilityData.updateBehaviourInstructions,
                        "update"
                    )
                    break;
            }

            displayString += this.runBehaviour(
                abilityRuntimeData,
                abilityParams,
                abilityRuntimeData.abilityData.removeBehaviourInstructions,
                "remove"
            )

            return displayString;
        }

        newAbilityHandler.removeAbilityRuntimeData = function(abilityData)
        {
            for(let i =0; i < this.abilityRuntimeDatas.length; ++i)
            {
                if(this.abilityRuntimeDatas[i].abilityData.baseID == abilityData.baseID)
                {
                    this.abilityRuntimeDatas.splice(i,1);
                    break;
                }
            }
        }

        newAbilityHandler.applyAbilityRuntimeData = function(abilityData, blackboard)
        {      
            console.log("applyAbilityRuntimeData "+abilityData.baseID);
            console.log(abilityData);
            console.log(this);

            var runtimeData;
            var character = State.variables[this.ownerID];
            let learned = false;
            let applied = false;
    
            var baseID = abilityData.baseID;
            
            //check if already learned, try to level it up in that case
            for(let i = 0; i < this.abilityRuntimeDatas.length; ++i)
            {
    
                if(this.abilityRuntimeDatas[i].abilityData.baseID == baseID)
                {
                    learned = true;
                    if(this.abilityRuntimeDatas[i].abilityData.upgradeConditionFunction(this.abilityRuntimeDatas[i], character))
                    {
                        this.abilityRuntimeDatas[i] = setup.AbilityRuntimeDataFactory.createAbilityRuntimeData({
                            abilityData: this.abilityRuntimeDatas[i].abilityData.nextAbility,
                            blackboard: blackboard,
                        });
    
                        runtimeData = this.abilityRuntimeDatas[i];
                        applied = true;
                    }else if(this.abilityRuntimeDatas[i].canRank()){
                        this.abilityRuntimeDatas[i].addRank();
                        runtimeData = this.abilityRuntimeDatas[i];
                        applied = true;
                    }
                }
            }
    
            if(!learned)
            {
                runtimeData = setup.AbilityRuntimeDataFactory.createAbilityRuntimeData({
                    abilityData: abilityData,
                    blackboard: blackboard,
                });
                this.abilityRuntimeDatas.push(runtimeData);
                applied = true;
            }
    
            if(applied)
            {
                console.log("ability applied, sending triggers ");
                console.log(runtimeData);
                var params = 
                {
                    trigger: State.variables.AbilityTrigger.ON_ACQUIRE,
                    self: character,
                }
                this.handleAbilityTrigger(runtimeData, params);
            }
        }

        for(let i = 0; i < State.variables.GlobalAbilities.length; i++)
        {
            console.log("applyAbilityRuntimeData at creation "+State.variables.GlobalAbilities[i]);
            newAbilityHandler.applyAbilityRuntimeData(State.variables.GlobalAbilities[i])
        }

        console.log("finished createAbilityHandler "+param.ownerID);
        console.log(newAbilityHandler);

        return newAbilityHandler;
    }
}
/* twine-user-script #8: "abilityRuntimeData.js" */
setup.AbilityRuntimeDataFactory =
{
    createAbilityRuntimeData : function(param)
    {
        var newAbilityRuntimeData = {};
        newAbilityRuntimeData.abilityData = param.abilityData;

        //not sure if we need to do this lmao
        if(param.blackboard != undefined)
        {
            newAbilityRuntimeData.blackboard = param.blackboard;
        }
        else
        {
            newAbilityRuntimeData.blackboard = {};
        }

        newAbilityRuntimeData.isActive = false;
        newAbilityRuntimeData.isScheduledForRemoval = false;
        newAbilityRuntimeData.rank = 1;
        newAbilityRuntimeData.modifier = setup.ModifierFactory.createModifier(param.abilityData.id);

        newAbilityRuntimeData.canRank = function()
        {
            if(this.rank < this.abilityData.maxRank){
                return true;
            }else{
                return false;
            }
        }
    
        newAbilityRuntimeData.addRank = function()
        {
            if(this.canRank()){
                this.rank += 1
            }
        }
    
        newAbilityRuntimeData.getRankGrowth = function(growthType, growthFactor)
        {
            switch(growthType){
                case "constant":
                    return growthFactor; 
                case "linear":
                    return this.rank * growthFactor;
                case "exp":
                    return Math.pow(growthFactor, this.rank);
                case "log":
                    return Math.log(this.rank) / Math.log(growthFactor);
            }
        }

        return newAbilityRuntimeData;
    }    
}
/* twine-user-script #9: "characterClass.js" */
setup.CharacterFactory =
{
    createCharacter : function(param)
    {
        var newCharacter = {};
        newCharacter.id = param.id;
        newCharacter.info = param.info;
        newCharacter.symbiote = param.symbiote;     
        newCharacter.fight = param.fight;
        newCharacter.quest = param.quest;
        newCharacter.text = param.text;   
        
        newCharacter.createFlavourEvent = function(eventName){
            if(this.text[eventName] == undefined)
            {
                this.text[eventName] = {};
            }
        }

        newCharacter.addHeightFlavourText = function(eventName, sizeLevel, flavourText)
        {
            var sizeKey = ""
            switch(sizeLevel){
                case 1:
                    sizeKey = "small";
                    break;
                case 2:
                    sizeKey = "medium";
                    break;
                case 3:
                    sizeKey = "large";
                    break;
                case 4:
                    sizeKey = "huge";
                    break;
            }

            this.createFlavourEvent(eventName)

            if(this.text[eventName]['heightFlavour'] == undefined)
            {
                var innerDict = {
                    "small": [],
                    "medium": [],
                    "large": [],
                    "huge": []
                }
                innerDict[sizeKey] = [flavourText]
                this.text[eventName]['heightFlavour'] = innerDict
            }else{
                this.text[eventName]['heightFlavour'][sizeKey].push(flavourText)
            }
        }

        newCharacter.addCorruptionFlavourText = function(eventName, corruptionLevel, flavourText)
        {
            var corruptionKey = ""
            switch(corruptionLevel){
                case 1:
                    corruptionKey = "corrupt25";
                    break;
                case 2:
                    corruptionKey = "corrupt50";
                    break;
                case 3:
                    corruptionKey = "corrupt75";
                    break;
                case 4:
                    corruptionKey = "corrupt100";
                    break;
            }

            this.createFlavourEvent(eventName)

            if(this.text[eventName]['corruptionFlavour'] == undefined)
            {
                var innerDict = {
                    "corrupt25": [],
                    "corrupt50": [],
                    "corrupt75": [],
                    "corrupt100": []
                }
                innerDict[corruptionKey] = [flavourText]
                this.text[eventName]['corruptionFlavour'] = innerDict
            }else{
                this.text[eventName]['corruptionFlavour'][corruptionKey].push(flavourText)
            }

        }

        newCharacter.broadcastAbilityTrigger = function(abilityParams)
        {
            return this.abilityHandler.broadcastAbilityTrigger(abilityParams);
        };

        newCharacter.removeAbilityRuntimeData = function(abilityData)
        {
            this.abilityHandler.removeAbilityRuntimeData(abilityData);
        }

        newCharacter.applyAbilityRuntimeData = function(abilityData, blackboard)
        {
            this.abilityHandler.applyAbilityRuntimeData(abilityData, blackboard);
        }

        //sad hack because ability handler init will read for the character variable in State.variables directly
        State.variables[param.id] = newCharacter;

        var abilityHandlerParam = 
        {
            ownerID: param.id,
        };
        newCharacter.abilityHandler = setup.AbilityHandlerFactory.createAbilityHandler(abilityHandlerParam);

        return newCharacter;
    },
}
/* twine-user-script #10: "modifier.js" */
setup.ModifierFactory = 
{
    createModifier : function(param)
    {
        var newModifier = {};
        newModifier.abilityID = param.abilityID;
        
        newModifier.setCorruptionMods = function(mods)
        {
            this.corruptionMods = mods;
    
            setup.updateStaticCorruptionUI(State.variables.CharacterSheet_Player);
        }

        return newModifier;
    }
}
/* twine-user-script #11: "DescriptionHelper.js" */

setup.autoCap = function(str)
{
	var strArr = str.split(/([\.\?\!])/);
	var retStr = "";
	strArr.forEach((sentence) => {
		// Capitalize the first letter of each sentence.
		var index = sentence.search(/[A-Za-z]/);
		if (index >= 0) {
			retStr += sentence.slice(0,index) + sentence.charAt(index).toUpperCase() + sentence.slice(index + 1);
		}
		else {
			retStr += sentence;		
		}
	});
	return retStr;
}

setup.displayStatValue = function(character, statName, asLength = false, useDoubleLineBreak = false)
{
	var statValue = setup.getStatValue(character, statName);
    var statInfo = setup.getStatModifierPropertyName(statName);
    
    var tooltipStrings = [];
    var runtimeAbilityDatas = character.abilityHandler.abilityRuntimeDatas;
    for(i = 0; i < runtimeAbilityDatas.length; i++)
	{
        if(runtimeAbilityDatas[i].modifier[statInfo.modifierProperty] != undefined)
        {
            if(!runtimeAbilityDatas[i].isActive)
                continue;
            var rankString = setup.displayRankText(runtimeAbilityDatas[i]);

            tooltipStrings.push(
                setup.displayModifierText(runtimeAbilityDatas[i].modifier[statInfo.modifierProperty], 
                    runtimeAbilityDatas[i].abilityData.name + rankString + ":", 
                    asLength)
                );
        }
    }

    var displayString = "";
    
    if(tooltipStrings.length > 0)
    {
        displayString +="<span class='tooltip' id=";
        if(statValue - setup.getStatValueNoModifiers(character, statName) < 0)
        {
            displayString += "'StatModifierNegative'";
        }
        else
        {
            displayString += "'StatModifierPositive'";
        }

        displayString += ">";
    }
            
    if(asLength)
    {
        displayString += setup.getLength(statValue);
    }
    else
    {
        displayString += statValue;
    }
            
    if(tooltipStrings.length > 0)
    {

        displayString += "<span class='tooltiptext'>";    
    
        var i;
        for(i = 0; i < tooltipStrings.length; i++)
        {
            displayString += tooltipStrings[i];

            if(useDoubleLineBreak)
            {
                displayString += "\\n"
            }
            else
            {
                displayString += "\n"
            }
        }
        
        displayString += "</span>";

        displayString += "</span>";
    }

	return displayString;
};

setup.getRaceLimbDescriptor = function(limb, name=toString(limb), namePlural=toString(limb))
{
	var englishNumbers = State.variables.englishNumbers;
	var displayString = "";
	if (limb)
	{
		displayString += englishNumbers[limb.defaultNumber] + " " 
						 + (limb.raceTexture ? limb.raceTexture.random() + " " : "")
						 + (limb.defaultNumber > 1 ? namePlural : name);
	}
	return displayString;
}

setup.renderGraph = function()
{
	var allEncounters = setup.getAllEncounters()

	//TODO: Maybe we can automate this in a future version through the characterFactory
	allEncounters.push("CharacterSheet_Player")
	allEncounters.push("CharacterSheet_MQ002_DragonMonk")
	allEncounters.push("CharacterSheet_Apothus")
	allEncounters.push("CharacterSheet_Elder")
	allEncounters.push("CharacterSheet_MQ002_Guard")
	allEncounters.push("CharacterSheet_MQ002_NyxParasite")
	allEncounters.push("CharacterSheet_Elder")
	allEncounters.push("CharacterSheet_Apothus")

	var sizeDict = {}
	for(var encounterIndex in allEncounters)
	{
		var character = State.variables[allEncounters[encounterIndex]]
		sizeDict[character.info.name] = [
			setup.getStatValue(character, 'height'),
			setup.getCorruptBackgroundClass(character),
			setup.getLength(setup.getStatValue(character, "height")),
			character.quest.met
		]
	}

	var items = Object.keys(sizeDict).map(
		function(key) {
			return [key, sizeDict[key]];
		}
	);

	items.sort(
		function(first, second) {
			return second[1][0] - first[1][0];
		}
	);
	var max = items[0][1][0];

	var chartItems = "";

	function round2(x)
	{
		return Math.ceil(x/2)*2;
	}

	for(let i = 0; i < items.length; i++)
	{
		if (items[i][1][3] == true){
			var normalisedSize = round2((items[i][1][0]/max)*100)
			var nameText = '<span style="color:#99C8E2">' + items[i][0] + '</span><span>: (' + items[i][1][2] + ')</span>'
			chartItems += nameText + '<li class="chart-bar ' + items[i][1][1] + '" data-skill="' + normalisedSize + '"></li>'
		}
	}

	var chart = '<ul class="chart-horizontal">' + chartItems + '</ul>';
	var displayString = "<div><h2>Size Chart:</h2></div>"
	displayString += '<div><section class="chart-wrapper">' + chart + '</section></div>';
	return displayString;
}

setup.getRaceDescriptor = function(race)
{
	
	var displayString = setup.autoCap(race.description) + "\n";


	/* Only describe certain anatomy if it is non-standard */
	// This is a pretty hacky way to get plural and singular names of anatomy. Need to figure out a better way.
	// Doesn't even work for "Teeths"
	const limbArr = ["heads", "eyes", "jaws", "teeths", "hands", "tongues", "arms", "pecs", "abdominals", "legs", "wings", "horns", "tails"];
	var anatomyStr = "";
	limbArr.forEach(limbStr => {
		var limb = race[limbStr];
		if (limb != undefined
			&& ( State.variables.RacePool.DEFAULT[limbStr] == undefined
				|| limb.defaultNumber != State.variables.RacePool.DEFAULT[limbStr].defaultNumber))	
		{
			var singular;
			var plural;
			if (limbStr == "teeths"){
				singular = "tooth";
				plural = "teeth";
			}
			else {
				// Trim off the "s"
				singular = limbStr.slice(0,-1)
				plural = limbStr;
			}
			anatomyStr += setup.autoCap(setup.getRaceLimbDescriptor(limb, singular, plural)) + "\n";
		}	
	});

	if (anatomyStr.length > 0)
	{
		displayString += "\n" + anatomyStr;
	}

	/* males Section */
	displayString += "\nmales:\n";
	displayString += setup.autoCap(setup.getRaceLimbDescriptor(race.cocks, "penis", "penises")) +"\n";
	displayString += setup.autoCap(setup.getRaceLimbDescriptor(race.balls, "ball", "balls")) + "\n";

	return displayString;
}

setup.getMusclesDescriptor = function(character)
{
	var displayString = "";

	var value = setup.getMuscles(character);

	if(value >= 100)
	{
		displayString += "Astronomical";
	}
	else if(value >= 90)
	{
		displayString += "Godlike";
	}
	else if(value >= 80)
	{
		displayString += "Demi-God";
	}
	else if(value >= 70)
	{
		displayString += "Mountainous";
	}
	else if(value >= 60)
	{
		displayString += "Monumental";
	}
	else if(value >= 50)
	{
		displayString += "Gigantic";
	}
	else if(value >= 40)
	{
		displayString += "Hulking";
	}
	else if(value >= 30)
	{
		displayString += "Powerful";
	}
	else if(value >= 20)
	{
		displayString += "Brawny";
	}
	else if(value >= 15)
	{
		displayString += "Ripped";
	}
	else if(value >= 10)
	{
		displayString += "Athletic";
	}
	else if(value >= 5)
	{
		displayString += "Fit";
	}
	else
	{
		displayString += "Slim";
	}

	return displayString;
}

setup.getVerseFromCycle = function(day, phaseLength){
	
	var date = (day+1) / (phaseLength * 4);
	var phase = (date % 1).toFixed(2);

	if (phase <= 0.25){
		return "The Third Verse"
	}else if (phase <= 0.5){
		return "The Sixth Verse"
	}else if (phase <= 0.75){
		return "The Ninth Verse"
	}else if (phase <= 1){
		return "The Twelfth Verse"
	}
}

setup.getLength = function(value)
{
	var displayString = "";
	var shownUnits = 2;
	if(State.variables.Measurement == State.variables.Units.METRIC)
	{
		var cm = Math.floor(value * 2.54);
		if(cm / 100000 >= 1 && shownUnits != 0)
		{
			var km = ~~(cm / 100000);
			cm -= km * 100000;

			displayString += km + "km " ;
			shownUnits--;
		}

		if(cm / 100 >= 1 && shownUnits != 0)
		{
            if(cm > 0)
            {
                var m = ~~(cm / 100);
                cm -= m * 100;
    
                displayString += m + "m " ;
            }

			shownUnits--;
		}

		if(cm < 100 && shownUnits != 0)
		{
            if(cm > 0)
            {
                displayString += cm % 100+"cm";
            }

			shownUnits--;
		}
	}
	else
	{
		if(value / 63360 >= 1 && shownUnits != 0)
		{
			var miles = ~~(value / 63360);
			value -= miles * 63360;

			displayString += miles + "miles ";
			shownUnits--;
		}

		if(value / 12 >= 1 && shownUnits != 0)
		{
            if(value > 0)
            {
                var ft = ~~(value / 12);
                value -= ft * 12;
    
                displayString += ft + "ft ";
            }

			shownUnits--;
		}

		if(value < 12 && shownUnits != 0)
		{
            if(value > 0)
            {
                displayString += value % 12+"in";
            }
            
			shownUnits--;
		}
	}

	return displayString;
};

setup.getHornsSize = function(character)
{
    return setup.getLength(Math.floor(setup.getStatValue(character, "height") / 7));
}

setup.getRandomColor = function()
{
    return State.variables.Colors.random();
}

setup.sizeNormalPersoncomparison = function(character)
{
	return setup.sizecomparison(setup.getStatValue(character, "height"), 72);
}

setup.sizeNormalPersoncomparisonCock = function(character)
{
	return setup.cockcomparison(setup.getStatValue(character, "cock"), 8);
}

setup.sizecomparisonCock = function(charA, charB)
{
	return setup.cockcomparison(setup.getStatValue(charA, "cock"), setup.getStatValue(charB, "cock"));
}

setup.sizeNormalPersoncomparisonMuscle = function(character)
{
	return setup.musclecomparison(setup.getStatValue(character, "muscles"), 5);
}

setup.sizecomparisonMuscle = function(charA, charB)
{
	return setup.musclecomparison(setup.getStatValue(charA, "muscles"), setup.getStatValue(charB, "muscles"));
}

setup.sizeCharactercomparison = function(charA, charB)
{
	return setup.sizecomparison(setup.getStatValue(charA, "height"), setup.getStatValue(charB, "height"));
}

setup.getMuscleGrowthSequenceText = function(character, pronoun="Your")
{
	var displayString = "";
	var muscleGrowthFlavourText = setup.getFlavourBasedDescription(character, "MuscleGrowthFlavourText");
	var muscleDescriptor = setup.getMusclesDescriptor(character);
	var muscleStatValue = setup.displayStatValue(character, "muscles");

	displayString += pronoun + " " + muscleGrowthFlavourText + " \n\n";
	displayString += pronoun + " muscles have increased in size! They are now " + muscleDescriptor + "(" + muscleStatValue + ")";
	return displayString;
}

setup.getFlavourBasedDescription = function(character, eventKey, minFlavourAmount=4, comparingCharacter=undefined, useSymbiote=false)
{
	var descriptorObjectArray = [];
	var specificDescriptors = undefined;
	var gender = undefined;

	var textSheet = character['text'];
	if(textSheet != undefined)
	{
		var eventValue = textSheet[eventKey];
		if(eventValue != undefined)
		{
			specificDescriptors = eventValue;
		}
	}

	if(specificDescriptors != undefined)
	{
		descriptorObjectArray = specificDescriptors;
	}

	var univesalFlavourObject = State.variables.UniversalFlavour;

	var universalFlavourObjects = univesalFlavourObject[eventKey];

	if(universalFlavourObjects != undefined)
	{
		//fill descriptors from the universal list if we are missing some.

		for(var flavourObjectpropertyName in universalFlavourObjects)
		{
			if(descriptorObjectArray[flavourObjectpropertyName] == undefined)
			{
				descriptorObjectArray[flavourObjectpropertyName] = {};
			}

			//Overkill since we'll still parse the category we want later lmao, I'm sure this is dumb but it's 2AM.
			for(var flavourObjectCategoryName in universalFlavourObjects[flavourObjectpropertyName])
			{
				if(descriptorObjectArray[flavourObjectpropertyName][flavourObjectCategoryName] == undefined)
				{
					descriptorObjectArray[flavourObjectpropertyName][flavourObjectCategoryName] = [];
				}
				
				var universalFlavourValueCopy = [...universalFlavourObjects[flavourObjectpropertyName][flavourObjectCategoryName]];
				while(descriptorObjectArray[flavourObjectpropertyName][flavourObjectCategoryName].length < minFlavourAmount && universalFlavourValueCopy.length > 0)
				{
					var flavour = universalFlavourValueCopy.random();

					descriptorObjectArray[flavourObjectpropertyName][flavourObjectCategoryName].push(flavour);

					let spliceIndex = universalFlavourValueCopy.indexOf(flavour);
					universalFlavourValueCopy.splice(spliceIndex, 1);
				}
			}
		}
	}

	let displayString = "";

	for(var propertyName in descriptorObjectArray)
	{
		//build a sequence of randomly picked flavour text from all available types

		let flavourTextList = undefined;
		switch(propertyName)
		{
			case "heightFlavour":
				flavourTextList = setup.getEventValueHeight(character, comparingCharacter, descriptorObjectArray[propertyName]);
				break;
			case "corruptionFlavour":
				flavourTextList = setup.getEventValueCorruption(character, descriptorObjectArray[propertyName]);
				break;
			case "musclesFlavour":
				flavourTextList = setup.getEventValueMuscle(character, comparingCharacter, descriptorObjectArray[propertyName]);
				break;
			case "cockSizeFlavour":
				flavourTextList = setup.getEventValueCockSize(character, undefined, descriptorObjectArray[propertyName]);
				break;
		}

		if(flavourTextList != undefined)
		{
			displayString += setup.processFlavours(character, flavourTextList.random() + " ", useSymbiote);
		}
	}
	
	return displayString;
}

setup.getEventValueCorruption = function(character, eventValue)
{
	var arr = undefined;
	var corruptionComparitors = State.variables.CorruptionComparators;
	var	corruption = setup.getStatValue(character, "corruption");
	
	if(corruption <= corruptionComparitors.PURE){
		arr = eventValue['corrupt25'];
	}else if(corruption <= corruptionComparitors.NEUTRAL){
		arr = eventValue['corrupt50'];
	}else if(corruption <= corruptionComparitors.TAINTED){
		arr = eventValue['corrupt75'];
	}else if(corruption >= corruptionComparitors.CORRUPT){
		arr = eventValue['corrupt100'];
	}

	return arr
}

setup.getEventValueHeight = function(character, comparingCharacter, eventValue)
{
	var arr = undefined;
	var size = undefined;
	var comparators = State.variables.Comparators;

	if(comparingCharacter == undefined){
		size = setup.sizeNormalPersoncomparison(character);
	}else{
		size = setup.sizeCharactercomparison(character, comparingCharacter);
    }
	
	if(size <= comparators.SLIGHTLY_BIGGER){
		arr = eventValue['small'];
	}else if(size <= comparators.REACHES_WAIST){
		arr = eventValue['medium'];
	}else if(size <= comparators.FITS_ON_HAND){
		arr = eventValue['large'];
	}else if(size >= comparators.FITS_ON_FINGER){
		arr = eventValue['huge'];
	}
	return arr
}

setup.getEventValueMuscle = function(character, comparingCharacter, eventValue)
{
	var arr = undefined;
	var size = undefined;
	var muscleComparators = State.variables.MuscleComparators;

	if(comparingCharacter == undefined){
		size = setup.sizeNormalPersoncomparisonMuscle(character);
	}else{
		size = setup.sizecomparisonMuscle(character, comparingCharacter);
	}

	if(size <= muscleComparators.EQUAL){
		arr = eventValue['small'];
	}else if(size <= muscleComparators.DWARFING){
		arr = eventValue['medium'];
	}else if(size <= muscleComparators.MACRO){
		arr = eventValue['large'];
	}else if(size >= muscleComparators.GIGA){
		arr = eventValue['huge'];
	}
	return arr
}

setup.getEventValueCockSize = function(character, comparingCharacter, eventValue)
{
	var arr = undefined;
	var size = undefined;
	var comparators = State.variables.CockComparators;

	if(comparingCharacter == undefined){
		size = setup.sizeNormalPersoncomparisonCock(character);
	}else{
		size = setup.sizecomparisonCock(character, comparingCharacter);
	}

	if(size <= comparators.MUCH_BIGGER){
		arr = eventValue['small'];
	}else if(size <= comparators.MASSIVE){
		arr = eventValue['medium'];
	}else if(size <= comparators.MACRO){
		arr = eventValue['large'];
	}else if(size >= comparators.GIGA){
		arr = eventValue['huge'];
	}
	return arr
}

setup.musclecomparison = function(a, b)
{
	var sizeRatio = a / b;
	var comparators = State.variables.MuscleComparators;
	
	if(sizeRatio > 14)
	{
		return comparators.GIGA;
	}
	else if(sizeRatio > 8)
	{
		return comparators.MACRO;
	}
	else if(sizeRatio > 4.25)
	{
		return comparators.GIANT;
	}
	else if(sizeRatio > 1.8)
	{
		return comparators.DWARFING;
	}
	else if(sizeRatio > 1.4)
	{
		return comparators.MUCH_BIGGER;
	}
	else if(sizeRatio > 1.15)
	{
		return comparators.BIGGER;
	}
	else if(sizeRatio > 1.05)
	{
		return comparators.SLIGHTLY_BIGGER;
	}
	else if(sizeRatio > 0.95)
	{
		return comparators.EQUAL;
	}
	else if(sizeRatio > 0.85)
	{
		return comparators.SLIGHTLY_SMALLER;
	}
	else if(sizeRatio > 0.7)
	{
		return comparators.SMALLER;
	}
	else if(sizeRatio > 0.5)
	{
		return comparators.MUCH_SMALLER;
	}
	else if(sizeRatio > 0.1)
	{
		return comparators.MICRO_TO;
	}
}

setup.sizecomparison = function(a, b)
{
	var sizeRatio = a / b;
	var comparators = State.variables.Comparators;
	
	if(sizeRatio > 14)
	{
		return comparators.FITS_ON_FINGER;
	}
	else if(sizeRatio > 8)
	{
		return comparators.FITS_ON_HAND;
	}
	else if(sizeRatio > 4.25)
	{
		return comparators.REACHES_KNEES;
	}
	else if(sizeRatio > 1.8)
	{
		return comparators.REACHES_WAIST;
	}
	else if(sizeRatio > 1.4)
	{
		return comparators.MUCH_BIGGER;
	}
	else if(sizeRatio > 1.15)
	{
		return comparators.BIGGER;
	}
	else if(sizeRatio > 1.05)
	{
		return comparators.SLIGHTLY_BIGGER;
	}
	else if(sizeRatio > 0.95)
	{
		return comparators.EQUAL;
	}
	else if(sizeRatio > 0.85)
	{
		return comparators.SLIGHTLY_SMALLER;
	}
	else if(sizeRatio > 0.7)
	{
		return comparators.SMALLER;
	}
	else if(sizeRatio > 0.5)
	{
		return comparators.MUCH_SMALLER;
	}
	else if(sizeRatio > 0.1)
	{
		return comparators.MICRO_TO;
	}
}

setup.cockcomparison = function(a, b)
{
	var sizeRatio = a / b;
	var comparators = State.variables.CockComparators;
	
	if(sizeRatio > 13)
	{
		return comparators.GIGA;
	}
	else if(sizeRatio > 8)
	{
		return comparators.MACRO;
	}
	else if(sizeRatio > 4.25)
	{
		return comparators.HYPER;
	}
	else if(sizeRatio > 2.8)
	{
		return comparators.MASSIVE;
	}
	else if(sizeRatio > 1.4)
	{
		return comparators.MUCH_BIGGER;
	}
	else if(sizeRatio > 1.15)
	{
		return comparators.BIGGER;
	}
	else if(sizeRatio > 1.05)
	{
		return comparators.SLIGHTLY_BIGGER;
	}
	else if(sizeRatio > 0.95)
	{
		return comparators.EQUAL;
	}
	else if(sizeRatio > 0.85)
	{
		return comparators.SLIGHTLY_SMALLER;
	}
	else if(sizeRatio > 0.7)
	{
		return comparators.SMALLER;
	}
	else if(sizeRatio > 0.5)
	{
		return comparators.MUCH_SMALLER;
	}
	else if(sizeRatio > 0.1)
	{
		return comparators.MICRO_TO;
	}
}

setup.displayEncounterImage = function(path)
{
    var displayString = '<div class="EnemyImage">'
    displayString += '[img['+path+']]'
    displayString += '</div>'

    return displayString;
}
/* twine-user-script #12: "FlavourFactory.js" */
/*

Welcome to the Brewery!

This nifty engine hooks into any flavour text you find in the system by the use of wildcards. If you would
like to hook this engine up into a string of texts, make sure to either include the "processFlavours" function
as a wrapper for your output string.

This will enable automatic text generation for things like:

> race
> multi
> colour
> size based descriptions
> corruption based descriptions

Once you have wrapped the string correctly and its funneled into here, you can use wildcards! They follow the structure below:

@[number of limbs you would like| an optional set of adjectives you want to inject| the limbs you are talking about| verb instruction set]

Lets drill into that:

The first parameter is a number or the word "all". The engine will handle it if you request more than a player has. It will default to how many limbs are available.
The second parameter is a string of words and grammer but separated by "~" instead of spaces.
The third parameter is the key you set up on your character sheet within the anatomy. E.G. arms (Note this word is always plural)
The final parameter is the trickiest, it is an instruction on how to inject the verb at the last sentence:
     - If your sentence ends with a verb use the following:  one=[my verb]~more=[my verb]. E.g. one=hurtle~more=hurtles
     - If your sentence does NOT end with a verb, simply use the word: noverb

Here's a few examples":

Your @[all| arms| one=hurtles~more=hurtle] down toward the enemy.
Your @[all| barbed,~pulsating,~forked~and| tongues| one=slides~more=slide] out of your mouth.
You flex your @[1| arms| noverb], triumphantly."

*/

setup.getLimbNumber = function(numberRequirement, characterLimb, keyOnly=false)
{
    var englishNumbers = State.variables.englishNumbers;
    var gameMaxNumber = Object.keys(englishNumbers).length
    var availableLimbs = undefined; 
    var currentLimbNumber = characterLimb['number'];
    var resultantNumber = undefined;

    if(currentLimbNumber > gameMaxNumber)
    {
        return ["forest of", "cluster of", "mountain of", "egregious collection of"].random()
    }else{
        availableLimbs = currentLimbNumber
    }

    if(numberRequirement == "all")
    {
        resultantNumber = availableLimbs
    }else{
        if(numberRequirement <= availableLimbs)
        {
            resultantNumber = numberRequirement
        }else{
            resultantNumber = availableLimbs
        }
    }

    if(keyOnly){
        return resultantNumber
    }else{
        return englishNumbers[resultantNumber]
    }
}

setup.compileBrew = function(brewArr)
{   
    var brewedArray = [];
    brewArr.forEach(addDefinedItemsTobrew); 
    function addDefinedItemsTobrew(item) 
    { 
        if(item != undefined){
            brewedArray.push(item)
        }
    }
    return brewedArray.join(" ");
}

setup.getAdjective = function(limb, characterAnatomy, character, customAdjectives)
{
    var comparators = State.variables.Comparators;
    var corruptionComparitors = State.variables.CorruptionComparators;

    var size = setup.sizeNormalPersoncomparison(character);
    var corruption = setup.getStatValue(character, "corruption")
    var sizeCategory = undefined;
    var corruptionCategory = undefined;

    //get the size index for the RacePool
	if(size <= comparators.SLIGHTLY_BIGGER){
		sizeCategory = 'small';
	}else if(size <= comparators.REACHES_WAIST){
		sizeCategory = 'medium';
	}else if(size <= comparators.FITS_ON_HAND){
		sizeCategory = 'large';
	}else if(size >= comparators.FITS_ON_FINGER){
		sizeCategory = 'huge';
	}

    //get the corruption index for the RacePool
	if(corruption <= corruptionComparitors.NEUTRAL){
		corruptionCategory = "pure";
	}else{
        corruptionCategory = "corrupt"
	}
    
    var limbDetails = undefined;
    
    if(characterAnatomy["race"][limb] != undefined)
    {
        limbDetails = characterAnatomy["race"][limb]
    }else{
        return "<<Error: This race does not have this limb natively>>"
    }

    var brewArr = [];
    var adjectivePool = State.variables.AdjectivePool[limb];

    //Add custom adjectives, if exists
    if(customAdjectives != undefined)
    {
        brewArr.push(customAdjectives.split("~").join(" "));
    }

    //Add size based description if exists
    if(adjectivePool[sizeCategory] != undefined)
    {
        if(Math.floor(Math.random() * 5) == 4){
            brewArr.push(adjectivePool[sizeCategory].random());
        }else{
            brewArr.push(undefined);
        }
    }

    //Add corruption text if exists
    if(adjectivePool.adjectives[corruptionCategory] != undefined)
    {
        if(Math.floor(Math.random() * 5) == 4){
            brewArr.push(adjectivePool.adjectives[corruptionCategory].random());
        }else{
            brewArr.push(undefined);
        }
    }

    //Add racial texture if exists
    if(limbDetails.raceTexture != undefined)
    {
        if(Array.isArray(limbDetails.raceTexture)){
            brewArr.push(limbDetails.raceTexture.random());
        }else{
            let customArray = limbDetails.raceTexture.trim();
            customArray = limbDetails.raceTexture.split(",");
            if(Math.floor(Math.random() * 5) == 4){
                brewArr.push(customArray.random());
            }else{
                brewArr.push(undefined);
            }
        }
    }

    return setup.compileBrew(brewArr);
}

setup.processVerbInstructionSet = function(verbInstructions, number, limb, colour, adjective)
{
    var vowels = ["a", "e", "i", "o", "u"];
    
    if(verbInstructions == "a~an"){
        if(colour != undefined && vowels.includes(colour.substring(0,1))){
            return "an";
        }else if(vowels.includes(adjective.substring(0,1))){
            return "an";
        }else if(vowels.includes(limb.substring(0,1))){
            return "an"
        }else{
            return "a"
        }
    }

    if(verbInstructions == "noverb"){
        return undefined;
    }else{
        let oneRegEx = /one=(.*)\b/;
        let moreRegEx = /more=(.*)\b/;
        var verbList = verbInstructions.split("~");
        var oneVerb = oneRegEx.exec(verbList[0]);
        var moreVerb = moreRegEx.exec(verbList[1]);
    
        if(number == 1){
            return oneVerb[1].split("%").join(" ");
        }else{
            return moreVerb[1].split("%").join(" ");
        }
    }
}

setup.brewFlavour = function(numberRequirement, customAdjectives, limb, verbInstructions, characterAnatomy, character)
{
    var number = setup.getLimbNumber(numberRequirement, characterAnatomy[limb], true);
    var numberText = setup.getLimbNumber(numberRequirement, characterAnatomy[limb]);
    var adjective = setup.getAdjective(limb, characterAnatomy[limb], character, customAdjectives);
    var colour = undefined;
    var verb = setup.processVerbInstructionSet(verbInstructions, number, limb, colour, adjective);

    if(Math.floor(Math.random() * 5) == 4){
        colour = characterAnatomy[limb].colour;
    }

    if(limb == "cocks"){
        limb = ["cocks", "dicks", "tools", "rods", "poles", "shafts", "javelins", "lances", "spires"].random();
    }
    
    if(limb == "vaginas"){
        limb = ["vaginas", "clits", "nether-lips", "vulvas", "rocks"].random();
    }

    if(limb == "breasts"){
        limb = ["breasts", "boobs", "knockers", "melons", "bosoms"].random();
    }

    if(limb == "balls"){
        limb = ["balls", "testicles", "nuts", "orbs", "gonads", "rocks"].random();
    }

    if(numberText == ""){
        if(["a", "an"].includes(verb))
        {
            let result = [verb, colour, adjective, limb.substring(0, limb.length-1)];
            return setup.compileBrew(result)
        }else{
            let result = [colour, adjective, limb.substring(0, limb.length-1), verb];
            return setup.compileBrew(result)
        }
    }else if(numberText == "two"){
        let result = [colour, adjective, limb, verb];
        return setup.compileBrew(result)
    }else{
        let result = [numberText, colour, adjective, limb, verb];
        return setup.compileBrew(result)
    }s
}

setup.applyLimbFilter = function(anatomy, flavourText){
    var textToProcess = "";
    var sentenceTail = "";
    var filterRegex = /(>[\s\S]*?|^[\s\S]*?)<limbs=(.*)>([\s\S]*?)<\/limbs>([\s\S]*?)$/;
    var limbFilterMatch = filterRegex.exec(flavourText);

    if (limbFilterMatch != null){
        while (limbFilterMatch != null){
            var include = true;
            var limbsRequirements = limbFilterMatch[2].replace(/\s/g, "").split(',');

            if (limbFilterMatch[1] != null && limbFilterMatch[1] != ""){
                textToProcess += limbFilterMatch[1];
            }

            for (let i = 0; i < limbsRequirements.length; i++){
                var limb = limbsRequirements[i];
                if (!setup.hasLimb(anatomy, limb)){
                    include = false;
                    break;
                }
            }
    
            if (include){
                textToProcess += limbFilterMatch[3]
            }
    
            sentenceTail = limbFilterMatch[4];
            limbFilterMatch = filterRegex.exec(limbFilterMatch[4]);
        }
    }else{
        textToProcess = flavourText;
    }

    if (sentenceTail != null){
        textToProcess += sentenceTail;
    }

    return textToProcess;
}

setup.hasLimb = function(anatomy, limb)
{
    return anatomy[limb] != undefined && anatomy[limb]["number"] != 0;
}

setup.processFlavours = function(character, flavourText, useSymbiote=false)
{

    if (character.id == "CharacterSheet_Player"){
        setup.gender.setPronouns(
            {
                "subjective" : "you",
                "objective" : "you",
                "possessive" : "yours",
                "determiner" : "your",
                "reflexive" : "yourself",
                "noun" : "you"
            }
        )
    }else{
        setup.gender.setPronouns(character.info.gender);
    }
    
    var anatomy = undefined;
    if (useSymbiote)
    {
        anatomy = character.symbiote.anatomy;
    }   
    else 
    {
        anatomy = character.info.anatomy;
    }

    //Resolve limb requirements
    flavourText = setup.applyLimbFilter(anatomy, flavourText)
    
    var processedFlavour = flavourText;
    var flavourParameters = undefined;
    var fullFlavourtag = undefined;
    var tagRegex = /\B@\[([^\]]*)\]/g;
    var match = tagRegex.exec(flavourText);

    var numberRequirement = undefined;
    var customAdjectives = undefined;
    var limb = undefined;
    var verbInstructions = undefined;

    while (match != null) {
        fullFlavourtag = match[0];
        flavourParameters = match[1].replace(/\s/g, "").split("|");

        numberRequirement = undefined;
        customAdjectives = undefined;
        limb = undefined;
        verbInstructions = undefined;

        if(flavourParameters.length == 3)
        {
            numberRequirement = flavourParameters[0];
            limb = flavourParameters[1];
            verbInstructions = flavourParameters[2];
        }else if(flavourParameters.length == 4)
        {
            numberRequirement = flavourParameters[0];
            customAdjectives = flavourParameters[1];
            limb = flavourParameters[2];
            verbInstructions = flavourParameters[3];
        }

        let brewedFlavour = setup.brewFlavour(
            numberRequirement,
            customAdjectives,
            limb,
            verbInstructions,
            anatomy,
            character
        );

        processedFlavour = processedFlavour.replace(fullFlavourtag, brewedFlavour);
        match = tagRegex.exec(flavourText);
    }
    return processedFlavour;
}
/* twine-user-script #13: "MathHelper.js" */
/* Box-Muller transform for quick random standard deviation calculations.
https://en.wikipedia.org/wiki/Box%E2%80%93Muller_transform
Where 0 is the mean and 1 is a standard deviation
 */

/* Provide a mean and unit deviation. You can change (or remove) the min and max value sanity checks */
setup.getHeightCalc = function(meanValue, devValue, minValue=1, maxValue=null)
{
    var u = Math.random();
    var v = Math.random();
    var x = Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);

    var value = meanValue + devValue*x;
    if (maxValue)
    {
        value = min(maxValue, value);
    }
    if (minValue)
    {
        value = max(minValue, value0);
    }
    return value;
}
/* twine-user-script #14: "RaceHelper.js" */
setup.changeLimb = function(anatomy, limb, newRace)
{
    if(newRace[limb] != undefined){
        anatomy[limb].race = newRace;
    }
    return;
}

setup.colourLimb = function(anatomy, limb, newColour)
{
    anatomy[limb].colour = newColour;
    return;
}


setup.colourAllLimbs = function(anatomy, newColour)
{
    var limbList = Object.keys(anatomy);

    limbList.forEach(function(limb) 
    {
        setup.colourLimb(anatomy, limb, newColour);
    });
}


setup.changeLimbNumber = function(anatomy, limb, number, mod=false)
{
    if(mod == "add"){
        anatomy[limb].number += number;
    }else if(mod == "multiply"){
        anatomy[limb].number = anatomy[limb].number * number;
    }else{
        anatomy[limb].number = number;
    }
    return;
}


// Alter the number of limbs you have during a race change, based on the racial differences.
// So you having a bajillion dicks won't be overridden because you went from dragon to human.
setup.alterLimbNumbers = function(anatomy, newRace)
{
    var limbList = Object.keys(anatomy)
    limbList.forEach((limb) => {
        if(newRace[limb] != undefined)
        {
            var oldRace = anatomy[limb].race;     
            var oldRaceDefault = 0;
            if (oldRace[limb] != undefined){
                oldRaceDefault = parseInt(oldRace[limb].defaultNumber);
            }
            var newLimbNumber = parseInt(newRace[limb].defaultNumber) - oldRaceDefault;
            setup.changeLimbNumber(anatomy, limb, newLimbNumber, "add");
        } else {
            setup.changeLimbNumber(anatomy, limb, 0);
        }
    });
}


// TODO: When we rewrite content to handle females, remove the default gender value here.
/**
 * Completely rewrite the input anatomy according to a given race from the RacePool
 * @param: {Object} anatomy - An object found in each CharacterSheet's info page. It details the race and number of limbs
 * @param: {Object} newRace - An template taken from the RacePool that will be impressed on the input anatomy
 * @param: {string} gender - defaults to male. Accepts [male] [female] [herm]
 * @param: {boolean} changeLimbNumber - true tells this function to add or substract limbs instead of overwrite them
 * @return: undefined
 */
setup.transformEntireAnatomy = function(anatomy, newRace, gender="male", changeLimbNumber=false)
{
    var limbList = Object.keys(anatomy);

    function transformLimb(anatomy, newRace, limb, changeLimbNumber){
        if (typeof anatomy[limb] != "string"){
            if (changeLimbNumber){
                setup.alterLimbNumbers(anatomy, newRace);
            }
            setup.changeLimb(anatomy, limb, newRace);
        }
    }

    limbList.forEach(changeRace); 
    function changeRace(limb) 
    { 
        switch (gender){
            case "male":
                if (limb != "vaginas" && limb != "breasts"){
                    transformLimb(anatomy, newRace, limb, changeLimbNumber)
                }
                break;
            case "female":
                if (limb != "cocks" && limb != "balls"){
                    transformLimb(anatomy, newRace, limb, changeLimbNumber)
                }
                break;
            case "herm":
                transformLimb(anatomy, newRace, limb, changeLimbNumber)
                break;
        }
    }
    return;

}


/**
 * Gets the default number of limbs for an input limb type
 * @param: {Object} anatomy - An object found in each CharacterSheet's info page. It details the race and number of limbs
 * @param: {string} limb - the type of limb, a keyword that exists within the RacePool template object
 * @return: {integer} - The default number of limbs for an input limb type
 */
setup.getDefaultNumberOfLimbs = function(anatomy, limb){
    if (anatomy[limb].race != undefined){
        let race = anatomy[limb].race;
        if (race[limb] != undefined){
            if (race[limb].defaultNumber != undefined){
                return race[limb].defaultNumber
            }
        }
    }
    return 0;
}

/**
 * Changes a characters limbs to be representative of their gender.
 * @param: {Object} anatomy - An object found in each CharacterSheet's info page. It details the race and number of limbs
 * @param: {string} gender - the gender of the character. Accepts [male] [female] [herm]
 * @return: undefined
 */
setup.changeGender = function(anatomy, gender)
{
    switch (gender){
        case "male":
            setup.changeLimbNumber(anatomy, "cocks", setup.getDefaultNumberOfLimbs(anatomy, "cocks"))
            setup.changeLimbNumber(anatomy, "balls", setup.getDefaultNumberOfLimbs(anatomy, "balls"))
            setup.changeLimbNumber(anatomy, "breasts", 0)
            setup.changeLimbNumber(anatomy, "vaginas", 0)
            break;
        case "female":
            setup.changeLimbNumber(anatomy, "vaginas", setup.getDefaultNumberOfLimbs(anatomy, "vaginas"))
            setup.changeLimbNumber(anatomy, "breasts", setup.getDefaultNumberOfLimbs(anatomy, "breasts"))
            setup.changeLimbNumber(anatomy, "cocks", 0)
            setup.changeLimbNumber(anatomy, "balls", 0)
            break;
        case "herm":
            setup.changeLimbNumber(anatomy, "vaginas", setup.getDefaultNumberOfLimbs(anatomy, "vaginas"))
            setup.changeLimbNumber(anatomy, "breasts", setup.getDefaultNumberOfLimbs(anatomy, "breasts"))
            setup.changeLimbNumber(anatomy, "cocks", setup.getDefaultNumberOfLimbs(anatomy, "cocks"))
            setup.changeLimbNumber(anatomy, "balls", setup.getDefaultNumberOfLimbs(anatomy, "balls"))
            break;
    }
    return;
}


setup.getRandomLimb = function(anatomy){
    let limb = Object.keys(anatomy);
    let limbNumber = 0;
    var limbToChange = undefined;
    limb = limb.filter(e => e !== 'teeths');
    while (limbNumber == 0){
        limbToChange = limb.random();
        limbNumber = setup.getDefaultNumberOfLimbs(anatomy, limbToChange)
    }
    return {limb: limbToChange, defaultNumber: limbNumber}
}


setup.resetAllColours = function(anatomy)
{
    var limbList = Object.keys(anatomy);

    limbList.forEach(resetColour); 
    function resetColour(limb) 
    {
        if (typeof anatomy[limb] != "string"){
            setup.colourLimb(anatomy, limb, State.variables.ColourPool.DEFAULT) 
        }
    }
    return;  
}


/**
 * Sets a character's anatomy to have the default number of limbs as specified in the RacePool template
 * @param: {Object} anatomy - An object found in each CharacterSheet's info page. It details the race and number of limbs
 * @param: {Object} newRace - An template taken from the RacePool that will be impressed on the input anatomy
 * @param: {string} gender - the gender of the character. Accepts [male] [female] [herm]
 * @return: undefined
 */
setup.setDefaultLimbNumbers = function(anatomy, newRace, gender)
{
    var limbList = Object.keys(anatomy);

    function setDefaultLimb(anatomy, limb){
        if (typeof anatomy[limb] != "string"){
            if(newRace[limb] != undefined)
            {
                setup.changeLimbNumber(anatomy, limb, parseInt(newRace[limb].defaultNumber));
            }else{
                setup.changeLimbNumber(anatomy, limb, 0);
            }   
        }
    }

    limbList.forEach(changeLimbNumbers); 
    function changeLimbNumbers(limb) 
    {
        switch (gender){
            case "male":
                if (limb != "vaginas" && limb != "breasts"){
                    setDefaultLimb(anatomy, limb);
                }
                break;
            case "female":
                if (limb != "cocks" && limb != "balls"){
                    setDefaultLimb(anatomy, limb);
                }
                break;
            case "herm":
                setDefaultLimb(anatomy, limb);
                break
        }
        
    }
    return;
}


setup.setRandomRace = function(anatomy)
{
    var racePool = Object.keys(State.variables.RacePool);
    var newRace = State.variables.RacePool[racePool.random()]
    if(newRace.name == undefined || newRace.name == "Demon" || newRace.name == "Lord of Lust" || newRace.name == "Naga" || newRace.name == "Symbiote"){
        let newKey = [
            "DEFAULT",
            "WOLF",
            "MINOTAUR",
            "DRAGONBORN",
            "BEHEMOTH"
        ].random();
        newRace = State.variables.RacePool[newKey]
    }
    setup.setRace(anatomy, newRace);
    return;
}


setup.setRace = function(anatomy, newRace, gender="male")
{
    setup.transformEntireAnatomy(anatomy, newRace, gender);
    setup.setDefaultLimbNumbers(anatomy, newRace, gender);
    setup.resetAllColours(anatomy);
    return;
}


setup.getRace = function(anatomy, lower=false)
{
    var limbList = Object.keys(anatomy);
    var raceLimbList = [];

    limbList.forEach(getRaceLimbs); 
    function getRaceLimbs(limb) 
    {
        raceLimbList.push(anatomy[limb].race.name);
    }

    if(raceLimbList.length == 0)
        return null;
    var modeMap = {};
    var maxEl = raceLimbList[0], maxCount = 1;
    for(var i = 0; i < raceLimbList.length; i++)
    {
        var el = raceLimbList[i];
        if(modeMap[el] == null)
            modeMap[el] = 1;
        else
            modeMap[el]++;  
        if(modeMap[el] > maxCount)
        {
            maxEl = el;
            maxCount = modeMap[el];
        }
    }
    if(lower){
        return maxEl.toLowerCase()
    }else{
        return maxEl;
    }
}
/* twine-user-script #15: "QuestHelper.js" */
setup.getVillagePassages = function()
{
    var displayString = "";
    var i;
    
    for(i = 0; i < State.variables.Quest_InProgress.length; i++)
    {
        if(State.variables.Quest_InProgress[i].villagePassage)
        {
            displayString += State.variables.Quest_InProgress[i].villagePassage + "\n";
        }
    }

    return displayString;
}

setup.completeQuest = function(quest)
{
    quest.onComplete();

    var i;
    for(i = 0; i < State.variables.Quest_InProgress.length; i++)
    {
        if(State.variables.Quest_InProgress[i].id === quest.id)
        {
            State.variables.Quest_InProgress.splice(i, 1);
            return;
        }
    }
}

setup.removeExplorationDestination = function(quest)
{
    var i;

    for(i = 0; i < State.variables.Explore_Destinations.length; i++)
    {
        if(State.variables.Explore_Destinations[i] == quest)
        {
            State.variables.Explore_Destinations.splice(i, 1);
            break;
        }
    }
}


setup.getVillageDescriptor = function()
{
    var displayString = "";

    var i;
    for(i = 0; i < State.variables.Quest_InProgress.length; i++)
    {
        if(State.variables.Quest_InProgress[i].villageDescriptor)
        {
            displayString += State.variables.Quest_InProgress[i].villageDescriptor +"\n\n";
        }
    }
    displayString += setup.displayVillageCorruptionDescriptor();

    return displayString;
}

setup.upgradeLakkosStats = function(level)
{
    switch(level)
    {
        case 1:
            setup.setBaseStatValue(State.variables.CharacterSheet_Lakkos, "hp", 150)
            setup.setBaseStatValue(State.variables.CharacterSheet_Lakkos, "stamina", 60)
            setup.setBaseStatValue(State.variables.CharacterSheet_Lakkos, "strength", 60)
            setup.setBaseStatValue(State.variables.CharacterSheet_Lakkos, "critChance", 20)
            setup.setBaseStatValue(State.variables.CharacterSheet_Lakkos, "staminaRecovery", 10)
            setup.setBaseStatValue(State.variables.CharacterSheet_Lakkos, "corruption", 50)
            break;

        case 2:
            setup.setBaseStatValue(State.variables.CharacterSheet_Lakkos, "hp", 320)
            setup.setBaseStatValue(State.variables.CharacterSheet_Lakkos, "stamina", 95)
            setup.setBaseStatValue(State.variables.CharacterSheet_Lakkos, "strength", 70)
            setup.setBaseStatValue(State.variables.CharacterSheet_Lakkos, "critChance", 40)
            setup.setBaseStatValue(State.variables.CharacterSheet_Lakkos, "staminaRecovery", 25)
            setup.setBaseStatValue(State.variables.CharacterSheet_Lakkos, "corruption", 70)
            State.variables.CharacterSheet_Lakkos.fight.fightReward = State.variables.RewardTier.HIGH;
            break;

        case 3:
            setup.setBaseStatValue(State.variables.CharacterSheet_Lakkos, "hp", 500)
            setup.setBaseStatValue(State.variables.CharacterSheet_Lakkos, "stamina", 210)
            setup.setBaseStatValue(State.variables.CharacterSheet_Lakkos, "strength", 140)
            setup.setBaseStatValue(State.variables.CharacterSheet_Lakkos, "critChance", 80)
            setup.setBaseStatValue(State.variables.CharacterSheet_Lakkos, "staminaRecovery", 50)
            setup.setBaseStatValue(State.variables.CharacterSheet_Lakkos, "corruption", 95)
            State.variables.CharacterSheet_Lakkos.fight.fightReward = State.variables.RewardTier.VERY_HIGH;
            break;
    }
}

setup.displayVillageCorruptionDescriptor = function()
{
    var displayString = "";
    var corruption = setup.getStatValue(State.variables.CharacterSheet_Player, "corruption");

    if(corruption >= 100)
    {
        displayString += "Terrifying roars and monstrous moans constantly fill the village. Its people now roam its corrupted ruins in search of anything to fuck and turn.";
    }
    else if(corruption >= 75)
    {
        displayString += "The village is eerily quiet. Your corruption is rotting it to its core. Those who haven't fled can barely handle the lust taking over their mind.";
    }
    else if(corruption >= 50)
    {
        displayString += "The village's soil is darkened and corrupted. People glance at you with looks of contained terror. Whispers and schemes softly ring behind your back.";
    }
    else if(corruption >= 25)
    {
        displayString += "People give you worrying looks. You are not the same as before...";
    }
    else
    {
        displayString += "Life is not easy for the people here, but together they do their best to make it work. Every scrap fills a purpose. Everyone has a role to play.";
    }

    return displayString;
}

setup.displayJournal = function(quest)
{
    var displayString = "";

    var i;
    for(i = 0; i < State.variables.Quest_InProgress.length; i++)
    {
        displayString += State.variables.Quest_InProgress[i].description + "\n\n";
    }

    if(displayString == "")
    {
        displayString +="Your journal is turned to a blank page"
    }

    return displayString;
}

setup.MQ002_Manor_IsMassiveInManor = function(character)
{
    let manorSize = 12 * 12;

    var isMassive = setup.sizecomparison(setup.getStatValue(character, "height"), manorSize) >= State.variables.Comparators.BIGGER;
    return isMassive;
}

setup.MQ002_Manor_IsGiganticInManor = function(character)
{
    let giganticSize = 12 * 18;

    var isMassive = setup.sizecomparison(setup.getStatValue(character, "height"), giganticSize) >= State.variables.Comparators.BIGGER;
    return isMassive;
}

setup.MQ002_Manor_IsCorruptedInManor = function(character)
{
    return setup.getStatValue(character, "corruption") > 50;
}

setup.MQ002_Manor_HasBrokenPartOfManor = function()
{
    var manorAreaState = State.variables.WorldState.cultManor;

    for(var propertyName in manorAreaState) 
    {
        if(manorAreaState[propertyName].isBroken)
        {
            return true;
        }
    }

    return false;
}

setup.MQ002_Manor_RandomEncounter = function()
{
    return random(0,100) > 10;
}

setup.MQ002_GiveNyxLightAbility = function()
{
    if(!setup.hasAbility(State.variables.CharacterSheet_Player, "Ability_TouchedByNyxsLight"))
    {
        State.variables.CharacterSheet_Player.applyAbilityRuntimeData(State.variables.Ability_TouchedByNyxsLight);
    }
}

setup.MQ002_AddNyxParasiteInfection = function()
{
    State.variables.CharacterSheet_Player.applyAbilityRuntimeData(State.variables.Ability_NyxParasiteInfection);

    ++State.variables.CharacterSheet_Player.quest.nyxParasiteInfections;
}

setup.MQ002_LeavingManor = function(character)
{
    //TODO make sure this is hooked in every exit case - Hook hook
    if(setup.hasAbility(character, "Ability_TouchedByNyxsLight"))
    {
        character.removeAbilityRuntimeData(State.variables.Ability_TouchedByNyxsLight);
    }
}

setup.MQ002_HasBrokenSeal = function()
{
    return State.variables.CharacterSheet_MQ002_DragonMonk.quest.infected == true || 
    State.variables.CharacterSheet_Player.quest.oaths.drenth == State.variables.Oath.BROKEN ||
    State.variables.CharacterSheet_MQ002_DragonMonk.quest.beaten == true
}

setup.MQ002_HasIntactOath = function()
{
    return State.variables.CharacterSheet_Player.quest.oaths.drenth == State.variables.Oath.ACTIVE;
}

setup.breakOath = function(oath)
{
    switch(oath)
    {
        case "drenth":
            if(State.variables.CharacterSheet_Player.quest.oaths.drenth == State.variables.Oath.ACTIVE)
            {
                State.variables.CharacterSheet_Player.removeAbilityRuntimeData(State.variables.Ability_Oath_Containment);
                State.variables.CharacterSheet_Player.quest.oaths.drenth = State.variables.Oath.BROKEN;

                if(!setup.hasAbility(State.variables.CharacterSheet_Player, "Ability_Oathbreaker"))
                {
                    State.variables.CharacterSheet_Player.applyAbilityRuntimeData(State.variables.Ability_Oathbreaker);
                }
            }
            break;
    }
}

setup.triggerEnding = function(endingID)
{
    for(let i = 0; i < State.variables.EndingSheet.length; ++i)
    {
        if(State.variables.EndingSheet[i].id == endingID)
        {
            State.variables.EndingSheet[i].unlocked = true;
        }
    }
}

setup.triggerEndingsPostWorldCallbacks = function()
{
    console.log("triggerEndingsPostWorldCallbacks");
    console.log(State.variables.EndingSheet);
    for(let i = 0; i < State.variables.EndingSheet.length; ++i)
    {
        if(State.variables.EndingSheet[i].unlocked == true)
        {
            console.log("on reset "+State.variables.EndingSheet[i].id)
            State.variables.EndingSheet[i].onPostWorldReset();
        }
    }
}
/* twine-user-script #16: "RewardHelper.js" */
setup.getFightReward = function(beatenCharacter)
{
    var essence = 0;
    var xp = 0;

    if(beatenCharacter == undefined)
    {
        xp = setup.getRandomInt(50, 100);
    }
    else
    {
        if(beatenCharacter.fight.fightReward == State.variables.RewardTier.VERY_LOW)
        {
            essence = setup.getRandomInt(10,20);
            xp = setup.getRandomInt(100, 199);
        }
        else if(beatenCharacter.fight.fightReward == State.variables.RewardTier.LOW)
        {
            essence = setup.getRandomInt(25,50);
            xp = setup.getRandomInt(200, 400);
        }
        else if(beatenCharacter.fight.fightReward == State.variables.RewardTier.MEDIUM)
        {
            essence = setup.getRandomInt(75,100);
            xp = setup.getRandomInt(650, 800);
        }
        else if(beatenCharacter.fight.fightReward == State.variables.RewardTier.HIGH)
        {
            essence = setup.getRandomInt(125,150);
            xp = setup.getRandomInt(900, 1300);
        }
        else if(beatenCharacter.fight.fightReward == State.variables.RewardTier.VERY_HIGH)
        {
            essence = setup.getRandomInt(200,300);
            xp = setup.getRandomInt(1600, 2000);
        }
    }

    var essenceGain = setup.getEssenceGain(essence);
    var gainEssenceString = setup.gainEssence(essence);
    State.variables.Exp += xp;

    return gainEssenceString + "You gain " + essenceGain + " Essence of Power and " + xp + " XP!";
};

setup.getRandomInt = function(min, max) {
    min = Math.ceil(min);
    max = Math.floor(max);
    return Math.floor(Math.random() * (max - min + 1)) + min;
};
/* twine-user-script #17: "0_JSInit.js" */
(function () {
	State.variables.SpecialBuild = $("tw-storydata")
		.attr("options")
		.splitOrEmpty(/\s+/)
		.includes("debug");
})();

var $rightUiBarTray = $('<div id="right-ui-bar"></div>').insertAfter("#ui-bar-tray");
var sidebarSource = "<img src='https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_collapse_corrupt0.png' id='ui-sidebar-toggle' tabindex='0'>";
var $rightButton = $rightUiBarTray.append(sidebarSource);

$rightButton.ariaClick({
		label : "Toggle the Right UI bar"
	}, function () {
		if(UIBar.isStowed())
		{
			UIBar.unstow();
		}
		else
		{
			UIBar.stow();
		}

		document.getElementById("ui-sidebar-toggle").src = setup.getSideBarButton();
	});

(function () {
	var debug = $("tw-storydata")
	.attr("options")
	.splitOrEmpty(/\s+/)
	.includes("debug");

	if(debug)
	{
		return;
	}

	// Duration of the splash image's fade in.
	var fadeIn  = 3000; // in milliseconds

	// Delay before the splash screen begins to fade out.
	var linger  = 4000; // in milliseconds

	// Duration of the splash screen's fade out.
	var fadeOut = 3000; // in milliseconds

	// Splash image.
	var $image  = $('<img src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Logo_large.png">').hide();

	// Display the splash screen.
	$(document.body)
		.append('<div id="splash-screen"></div>')
		.find('#splash-screen')
			.append($image)
			.find('img')
				.fadeIn(fadeIn)
				.end()
			.delay(linger)
			.fadeOut(fadeOut);

	// Set up the removal of the splash screen.
	setTimeout(function () {
		$('#splash-screen').remove();
	}, fadeIn + linger + fadeOut + 1000);
})();
/* twine-user-script #18: "DebugTools.js" */
setup.debug_LearnAllMoves = function()
{
	State.variables.CharacterSheet_Player.fight.fightMoves = [
		State.variables.FightMove_Sigil_Vitality,
		State.variables.FightMove_Sigil_Pain,
        State.variables.FightMove_Basic_Attack, 
		State.variables.FightMove_Masturbate, 
		State.variables.FightMove_Sigil_Perception,
		State.variables.FightMove_Sigil_Growth, 
        State.variables.FightMove_IncubusCall,
		State.variables.FightMove_IncubusStrike,
		State.variables.FightMove_Do_Nothing, 
		State.variables.FightMove_Bash, 
		State.variables.FightMove_Slash, 
		State.variables.FightMove_SummonParasite, 
		State.variables.FightMove_Stomp, 
		State.variables.FightMove_Goo_Stun, 
        State.variables.FightMove_Submit_Completely];

    for(let i = 0; i < 4; ++i)
    {
        State.variables.CharacterSheet_Player.fight.fightMoves[i].equipped = true;
    }
}

setup.debug_SetHeight = function(character, comparator)
{
	console.log("Setting")
	
	var comparators = State.variables.Comparators;
	if(comparator <= comparators.SMALLER)
	{
        setup.setBaseStatValue(character, "height", 50);
	}
	else if(comparator <= comparators.EQUAL)
	{
        setup.setBaseStatValue(character, "height", 71);
	}
	else if(comparator <= comparators.REACHES_WAIST)
	{
        setup.setBaseStatValue(character, "height", 130);
	}
	else if(comparator >= comparators.REACHES_KNEES)
	{
        setup.setBaseStatValue(character, "height", 360);
	}
}

setup.debug_GodStats = function()
{
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "strength", 99999)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "hp", 99999)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "stamina", 99999)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "critChance", 100)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "arousalGain", 20)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "staminaRecovery", 20)
}

setup.debug_GodSize = function()
{
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "height", 99999)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "cock", 9999)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "balls", 3333)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "muscles", 9999)
}

setup.debug_GreatSize = function()
{
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "height", 240)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "cock", 70)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "balls", 24)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "muscles", 70)
}

setup.debug_BigSize = function()
{
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "height", 96)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "cock", 24)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "balls", 8)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "muscles", 25)
}

setup.debug_GetEssence = function()
{
    setup.gainEssence(9999);
}

setup.debug_GetExp = function()
{
	State.variables.Exp = 99999;
}

setup.debug_GetLevels = function()
{
	State.variables.Level = 999;
}

setup.debug_GetCorruption = function()
{
	setup.applyCorruption(State.variables.CharacterSheet_Player, 25);
}

setup.debug_ResetCorruption = function()
{
	setup.applyCorruption(State.variables.CharacterSheet_Player, setup.getStatValue(State.variables.CharacterSheet_Player, "corruption") * -1);
}

setup.debug_SetCanExplore = function()
{
	State.variables.Quest_CanExplore = true;
}

setup.debug_DebugStarter_MQ001 = function()
{
	State.variables.Quest_InProgress = [State.variables.Quest_MQ001_01];
}

setup.debug_DebugStarter_MQ002 = function()
{
	State.variables.Quest_InProgress = [State.variables.Quest_MQ002];
}

setup.toggleDebugMode = function()
{
	State.variables.Debug = !State.variables.Debug;
	state.display(state.active.title, null, "back");
}

setup.saves = function()
{
	UI.saves();
}

setup.restart = function()
{
	UI.restart();
}
/* twine-user-script #19: "KeyboardEvents.js" */
$(document).on("keydown.keygame", function(evt) {
    setup.handleFightHotkeys(evt.which);
});

setup.handleFightHotkeys = function(keypress)
{
    if(State.variables.FightSkills == undefined)
        return;

    var fightHotkeys = State.variables.FightHotkeys;
    for(let i = 0; i < fightHotkeys.length && i < State.variables.FightSkills.length; ++i)
    {
        if(fightHotkeys[i].charCodeAt(0) == keypress)
        {
            if(State.variables.FightSkills[i].comboCost == undefined)
            {
                setup.attackPressedLogic(i);
            }
            return;
        }
    }
}
/* twine-user-script #20: "PassageStart.js" */
$(document).on(':passagestart', function (ev) {
    setup.onVillageEnterCallback();
    $(document.head).append('<meta name="viewport" content="width=1024">');
});
/* twine-user-script #21: "Pronouns.js" */
(function () {
    'use strict';
    // v1.1.0; by Chapel, for SugarCube 2 (>= v2.29.0)

    if (!Template || !Template.add || typeof Template.add !== 'function') {
        alert('Warning, this version of SugarCube does not include the Template API. Please upgrade to v2.29.0 or higher.');
        return;
    }

    // DOCUMENTATION LINK: https://twinelab.net/custom-macros-for-sugarcube-2/#/./pronoun-templates

    // CONFIGURATION

    var config = {
        name : 'gender',
        showSetting : true,
        label : 'Gender',
        desc : '',
        storyVar : '%%gender',
        default : 'female' // female, male, or other
    };

    // DATA

    // the point-replace id
    var settingID = '#setting-control-' + config.name;

    // preset pornoun map
    var genderMap = {
        subjective : ['she', 'he', 'you', 'they'],
        objective : ['her', 'him', 'you', 'them'],
        possessive : ['hers', 'his', 'yours', 'theirs'],
        determiner : ['her', 'his', 'your', 'their'],
        reflexive : ['herself', 'himself', 'yourself', 'themself'],
        noun : ['woman', 'man', 'you', 'person']
    };

    // INTERNAL FUNCTIONS

    // custom dialog function
    function createDialog (name, element, classes) {
        var reopen = false;
        if (Dialog.isOpen() && $('#ui-dialog-body').hasClass('settings')) {
            reopen = true;
        }
        Dialog.close();
        Dialog.setup(name, (reopen) ? classes + ' reopen' : classes);
        Dialog.append(element);
        Dialog.open();
    }

    function genderForm () { // create a form for users to configure their pronouns
        var $wrapper = $(document.createElement('div'));

        function createInput (label, name, def) { // create text inputs
            return $(document.createElement('label'))
                .append(label)
                .css('display', 'block')
                .append($(document.createElement('input'))
                    .attr({
                        type : 'text',
                        name : name
                    })
                    .css({
                        float : 'right',
                        'margin-left' : '0.2em'
                    })
                    .val(def)
                );
        }

        function createDropdown (label, name, list) { // create dropdowns
            var $select = $(document.createElement('select'))
                .attr('name', name)
                .css('float', 'right');
            list.forEach( function (opt, idx) {
                console.log(idx);
                $(document.createElement('option'))
                    .attr('value', String(idx))
                    .append(opt)
                    .appendTo($select);
            });
            return $(document.createElement('label')).css('display', 'block').append(label, $select);
        }

        var $inputs = Object.keys(genderMap).map( function (key) {
            // create an input for each type of pronoun
            var idx = 3;
            if (config.default === 'male') {
                idx = 1;
            } else if (config.default === 'female') {
                idx = 0;
            } else if (config.default === 'you') {
                idx = 2;
            }
            var sv = State.variables;
            var def = genderMap[key][idx];
            if (sv[config.storyVar] && sv[config.storyVar][key]) {
                def = sv[config.storyVar][key];
            }
            return createInput(key.toUpperFirst() + ': ', 'gender-' + key, def);
        });

        var $presets = createDropdown('Presets: ', 'gender-preset', ['She/Her', 'He/Him', 'They/Them'])
            .on('change', function () {
                // auto-fill text inputs when the preset is changed
                var value = Number($(this).find('select').val());
                if (!Number.isNaN(value)) {
                    $inputs.forEach( function ($input) {
                        var $text = $input.find('input');
                        var type = $text.attr('name').split('-')[1];
                        $text.val(genderMap[type][value]);
                    });
                }
            });

        var $select = $presets.find('select');
        if (!State.variables[config.storyVar]) {
            // set defaults
            if (config.default === 'male') {
                $select.val('1');
            } else if (config.default === 'female') {
                $select.val('0');
            } else if (config.default === 'you'){
                $select.val('2');
            } else {
                $select.val('3');
            }
        } else {
            $select.val(''); // custom config, no preset
        }
        
        var $confirm = $(document.createElement('button'))
            .wiki('Confirm')
            .addClass('gender-confirm')
            .ariaClick({ label : 'Confirm pronoun selection.' }, function () {
                // this button saves the pronoun config settings
                var sv = State.variables;
                sv[config.storyVar] = {};
                $inputs.forEach( function ($input) {
                    var $text = $input.find('input');
                    var type = $text.attr('name').split('-')[1];
                    sv[config.storyVar][type] = $text.val().trim().toLowerCase();
                });
                // reopen the settings modal or close the modal
                if ($('#ui-dialog-body').hasClass('reopen')) {
                    UI.settings();
                }
                Dialog.close();
            });

        var $form = (function () {
            // add some line breaks to the generated form
            var $els = [$presets, '<br>'];
            $inputs.forEach( function ($input) {
                $els.push($input);
                $els.push('<br>');
            });
            $els.push($confirm);
            return $els;
        }());

        return $wrapper.append($form);

    }

    // CORE FUNCTIONS

    function handleGender () {
        // this function opens the custom modal
        createDialog('Customize Gender', genderForm(), 'custom-gender');
    }

    function getFromPreset (n) {
        // default
        if (typeof n !== "number" || Number.isNaN(n) || n > 3 || n < 0) {
            n = 0;
        }
        var ret = {};
        Object.keys(genderMap).forEach( function (key) {
            ret[key] = genderMap[key][n];
        });
        return ret;
    }

    function getGender () {
        // get the player's gender (custom or grab the default)
        // custom
        if (State.variables[config.storyVar] && State.variables[config.storyVar].subjective) {
            return State.variables[config.storyVar];
        }
        // default
        return getFromPreset(config.default === 'male' ? 1 : 0);
    }

    function setPreset (gender) {
        var pn;
        switch (gender) {
            case 'female':
                pn = getFromPreset(0);
                break;
            case 'male':
                pn = getFromPreset(1);
                break;
            case 'you':
                pn = getFromPreset(2);
                break;
            default:
                pn = getFromPreset(3);
        }
        State.variables[config.storyVar] = clone(pn);
        return pn;
    }

    function setPronouns (obj) {
        if (typeof obj !== 'object') {
            return;
        }
        State.variables[config.storyVar] = setPreset(config.default === 'male' ? 1 : 0);
        return Object.assign(State.variables[config.storyVar], obj);
    }

    // SETTINGS API

    if (config.showSetting) {
        Setting.addToggle(config.name, {
            label : config.label,
            desc : (config.desc && typeof config.desc === 'string' && config.desc.trim()) ? 
                config.desc.trim() : undefined
        });

        $(document).on(':dialogopen :dialogopened', function () {
            if ($('#ui-dialog-body').hasClass('settings')) {
                $(settingID).parent('div').empty().append( $(document.createElement('button'))
                    .append('Configure...')
                    .ariaClick( function () {
                        handleGender();
                    })
                );
            }
        });
    }

    // singular endings
    var replaceWith_are = /^is$/i; // is
    var replaceWith_were = /^was$/i; // was
    var replaceWith_have = /^has$/i; // has
    var replaceWith_o = /oes$/i; // does, goes
    var replaceWith_ie = /^[dl]ies$/i; // dies
    var replaceWith_y = /ies$/i; // dries
    var remove_es = /sses$/i; // posesses
    var remove_es2 = /hes$/i; // catches
    var remove_s = /s$/i; // surpises, plays
    // the above are tested in order; if none apply, return singular form (e.g: ran -> ran)

    // test for 'they' pronoun
    var hasThey = /they|you/i;

    function makePlural (singular) {
        if (!singular || typeof singular !== 'string') {
            return singular;
        }
        singular = singular.trim();
        if (replaceWith_are.test(singular)) {
            return singular.replace(replaceWith_are, 'are');
        }
        if (replaceWith_were.test(singular)) {
            return singular.replace(replaceWith_were, 'were');
        }
        if (replaceWith_have.test(singular)) {
            return singular.replace(replaceWith_have, 'have');
        }
        if (replaceWith_o.test(singular)) {
            return singular.replace(replaceWith_o, 'o');
        }
        if (replaceWith_ie.test(singular)) {
            // need to use replaceWith_y regex here.
            return singular.replace(replaceWith_y, 'ie');
        }
        if (replaceWith_y.test(singular)) {
            return singular.replace(replaceWith_y, 'y');
        }
        if (remove_es.test(singular)) {
            return singular.replace(remove_es, 'ss');
        }
        if (remove_es2.test(singular)) {
            return singular.replace(remove_es2, 'h');
        }
        if (remove_s.test(singular)) {
            return singular.replace(remove_s, '');
        }
        return singular;
    }

    function _getPronounsArePlural () {
        console.log(getGender().subjective.trim())
        return hasThey.test(getGender().subjective.trim());
    }

    // usage: pluralize('dries', null, true) -> dry; pluralize('supresses', 'supress') -> supresses
    function pluralize (singular, plural, forcePlural) {
        if (!forcePlural) {
            return singular;
        }
        if (plural && typeof plural === 'string') {
            return plural;
        }
        return makePlural(singular);
    }

    // TEMPLATES

    function isUpper (name, string) {
        // is name is uppercase, return uppercased string
        if (name.first() === name.first().toUpperCase()) {
            return string.toUpperFirst();
        }
        return string;
    }
    
    Template.add(['he', 'she', 'you', 'they', 'He', 'She', 'You', 'They'], function () {
        return isUpper(this.name, getGender().subjective);
    });
    Template.add(['him', 'her', 'them', 'Him', 'Her', 'Them', 'you_', 'You_'], function () {
        return isUpper(this.name, getGender().objective);
    });
    Template.add(['his', 'hers', 'theirs', 'His', 'Hers', 'Theirs', 'yours', 'Yours'], function () {
        return isUpper(this.name, getGender().possessive);
    });
    Template.add(['his_', 'her_', 'their', 'His_', 'Her_', 'Their', 'your', 'Your'], function () {
        return isUpper(this.name, getGender().determiner);
    });
    Template.add(['himself', 'herself', 'themself', 'Himself', 'Herself', 'Themself', 'yourself', 'Yourself'], function () {
        return isUpper(this.name, getGender().reflexive);
    });
    Template.add(['man', 'woman', 'person', 'Man', 'Woman', 'Person', 'you__', 'You__'], function () {
        return isUpper(this.name, getGender().noun);
    });
    Template.add(['he-s', 'she-s', 'they-re', 'He-s', 'She-s', 'They-re'], function () {
        return isUpper(this.name, getGender().subjective + pluralize("&apos;s", "&apos;re", _getPronounsArePlural()));
    });

    // MACRO

    // `<<pronouns>>` -> opens the modal for pronoun configuration, probably best paired with a link
    Macro.add('pronouns', {
        skipArgs : true,
        handler : function () {
            handleGender();
        }
    });

    // <<verb singular [plural] [makePlural]>>
    Macro.add('verb', {
        handler: function () {
            var pl = _getPronounsArePlural();

            if (this.args.length < 1) {
                return this.error('Please pass at least a singular third person pronoun to this macro.');
            }

            if (this.args.includes('plural')) {
                pl = true;
            }

            this.output.append(pluralize(String(this.args[0]), (this.args[1]) ? String(this.args[1]) : null, !!pl));
        }
    });

    // JAVASCRIPT API

    setup.gender = {
        // get the pronoun object; `setup.gender.pronouns().subjective` -> get `he`, `she`, etc
        pronouns : getGender,
        // set pronouns from presets or manually
        setPronouns : function (presetOrObj) {
            if (typeof presetOrObj === 'string') {
                return setPreset(presetOrObj);
            }
            if (typeof presetOrObj === 'object') {
                return setPronouns(presetOrObj);
            }
        },
        // open the pronoun config modal from JS; `setup.gender.dialog()`
        dialog : handleGender,
        // pluralizer function
        pluralize : makePlural
    };

    window.gender = window.gender || setup.gender;

}());
/* twine-user-script #22: "SavesManager.js" */
Config.saves.onLoad = function () {
    prerender['update-save-file'] = function (_, taskName) {
        delete prerender[taskName];
        new Wikifier(null, Story.get('update-save').text);
    };
};
/* twine-user-script #23: "VariableInitializer.js" */
setup.variableInitializer = 
{
	initializeFightVariables : function(encounterTarget)
	{
		encounterTarget.fight.variables.currentHP = 0;
		State.variables.CharacterSheet_Player.fight.variables.currentHP = 0;
		
		encounterTarget.fight.variables.currentStamina = 0;
		State.variables.CharacterSheet_Player.fight.variables.currentStamina = 0;

		encounterTarget.fight.variables.currentArousal = setup.getStatValue(encounterTarget, "minArousal");
		State.variables.CharacterSheet_Player.fight.variables.currentArousal = setup.getStatValue(State.variables.CharacterSheet_Player, "minArousal");
		
		encounterTarget.fight.variables.stunnedDuration = 0;
		State.variables.CharacterSheet_Player.fight.variables.stunnedDuration =0;

		encounterTarget.fight.variables.hypnotizedMoveList = [];
		State.variables.CharacterSheet_Player.fight.variables.hypnotizedMoveList = [];

		encounterTarget.fight.variables.cooldowns = [];
		State.variables.CharacterSheet_Player.fight.variables.cooldowns = [];

		var onFightStartAbilityParamsPlayer =
		{
			character: State.variables.CharacterSheet_Player,
		}
		setup.callAbilityTrigger(State.variables.CharacterSheet_Player, "onFightStart", onFightStartAbilityParamsPlayer);

		var onFightStartAbilityParamsAI =
		{
			character: encounterTarget,
		}
		setup.callAbilityTrigger(encounterTarget, "onFightStart", onFightStartAbilityParamsAI);

		encounterTarget.fight.variables.currentHP = setup.getMaxHP(encounterTarget);
		State.variables.CharacterSheet_Player.fight.variables.currentHP = setup.getMaxHP(State.variables.CharacterSheet_Player);
		
		encounterTarget.fight.variables.currentStamina = setup.getMaxStamina(encounterTarget);
        State.variables.CharacterSheet_Player.fight.variables.currentStamina = setup.getMaxStamina(State.variables.CharacterSheet_Player);
        
        State.variables.FightTurn = 0;
	}
};

setup.mod = 
{
	ADD: 1,
	REMOVE: 2,
	REPLACE: 3,
	CUSTOM: 4,
	IGNORE: 5
}</script><tw-passagedata pid="1" name="Configuration" tags="twee2" position="100,100" size="100,100">Twee2::build_config.story_ifid = &#39;76585E15-C0E7-4404-A55B-BEFC4CDF112B&#39;</tw-passagedata><tw-passagedata pid="2" name="update-save" tags="" position="225,100" size="100,100">&lt;&lt;script&gt;&gt;
&lt;&lt;include StoryInit_UI&gt;&gt;
&lt;&lt;/script&gt;&gt;

&lt;&lt;if $Version &lt; 10104&gt;&gt;
    &lt;&lt;set $Version to 10104&gt;&gt;
    &lt;&lt;set $VersionStr to &#39;0.1.4&#39;&gt;&gt;
    
    &lt;&lt;include Ability_AppetiteForGrowth&gt;&gt;
    &lt;&lt;include Ability_DemonicCorruption&gt;&gt;
    &lt;&lt;include Ability_HerculeanBuild&gt;&gt;
    &lt;&lt;include Ability_Masochism&gt;&gt;
    &lt;&lt;include Ability_VigorOfTheEndowed&gt;&gt;
    &lt;&lt;include Ability_WideAttacks&gt;&gt;
    &lt;&lt;include StoryInit_FightMoves&gt;&gt;
    &lt;&lt;include Modifiers_Size_Diff&gt;&gt;
    &lt;&lt;include StoryInit_StateDrivenModifiers&gt;&gt;

    &lt;&lt;set $Debug = false&gt;&gt;

    &lt;&lt;set $Comparators = 
    {
        MICRO_TO:  1,
        MUCH_SMALLER: 2,
        SMALLER: 3,
        EQUAL: 4,
        BIGGER: 5,
        MUCH_BIGGER: 5,
        REACHES_WAIST: 6,
        REACHES_KNEES: 7,
        FITS_ON_HAND: 8,
        FITS_ON_FINGER: 9,
    }&gt;&gt;

    &lt;&lt;set $Debug = false&gt;&gt;

    &lt;&lt;set $FighterSheet_Imp =
    {
        hp: 18,
        stamina: 6,
        strength: 6,
        critChance: 45,
        arousalGain: 20,
        staminaRecovery: 2,
        variables: $FightVariables,
        fightMoves: [$FightMove_Basic_Attack],
        abilities: [],
        onMaxArousal: function(character)
        {
            //todo
        },
        fightReward: $RewardTier.LOW,
        encounterIntroText: &quot;&lt;&lt;include Encounter_Intro_Imp&gt;&gt;&quot;,
        encounterStartText: &quot;&lt;&lt;include Encounter_Start_Imp&gt;&gt;&quot;,
        outcomePlayerWins: &quot;&lt;&lt;include Encounter_Win_Imp&gt;&gt;&quot;,
        outcomePlayerLoses: &quot;&lt;&lt;include Encounter_Loss_Imp&gt;&gt;&quot;
    }&gt;&gt;

    &lt;&lt;set $InfoSheet_Imp =
    {
        name: &quot;Imp&quot;,
        gender: &quot;male&quot;,
        corruption: 0,
        muscles: 0,
        height: 50,
        cock: 10,
        alive: true
    }&gt;&gt;

    &lt;&lt;set $QuestSheet_Lakkos =
    {
        beatenOnce: false,
    }&gt;&gt;

    &lt;&lt;set $CharacterSheet_Lakkos =
    {
        id:&quot;CharacterSheet_Lakkos&quot;,
        info: $InfoSheet_Lakkos,
        fight: $CharacterSheet_Lakkos.fight,
        quest: $QuestSheet_Lakkos,
    }&gt;&gt;

    &lt;&lt;set $QuestSheet_Lost_Werewolf =
    {
        beatenOnce: false,
    }&gt;&gt;

    &lt;&lt;set $CharacterSheet_Lost_Werewolf =
    {
        id:&quot;CharacterSheet_Lost_Werewolf&quot;,
        info: $InfoSheet_Lost_Werewolf,
        fight: $FighterSheet_Lost_Werewolf,
        quest: $QuestSheet_Lost_Werewolf,
    }&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $Version &lt; 10105&gt;&gt;
    &lt;&lt;set $Version to 10105&gt;&gt;
    &lt;&lt;set $VersionStr to &#39;0.1.5&#39;&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $Version &lt; 10200&gt;&gt;
    &lt;&lt;set $Version to 10200&gt;&gt;
    &lt;&lt;set $VersionStr to &#39;0.2.0&#39;&gt;&gt;

    &lt;&lt;set $Comparators = 
    {
        MICRO_TO:  1,
        MUCH_SMALLER: 2,
        SMALLER: 3,
        SLIGHTLY_SMALLER: 4,
        EQUAL: 5,
        SLIGHTLY_BIGGER: 6,
        BIGGER: 7,
        MUCH_BIGGER: 8,
        REACHES_WAIST: 9,
        REACHES_KNEES: 10,
        FITS_ON_HAND: 11,
        FITS_ON_FINGER: 12,
    }&gt;&gt;

    &lt;&lt;include StoryInit_RandomEncounters&gt;&gt;
    &lt;&lt;include StoryInit_Abilities&gt;&gt;
    &lt;&lt;include StoryInit_FightMoves&gt;&gt;
    &lt;&lt;include StoryInit_FightVariables&gt;&gt;
    &lt;&lt;include Sheets_Elder&gt;&gt;
    
    &lt;&lt;include Sheets_Lost_Naga&gt;&gt;

    &lt;&lt;set $QuestSheet_Player = 
    {
        curseOfTheNagaStatDrain:
            {
                muscles: 0,
                height: 0,
                cock: 0,
            },
    }&gt;&gt;

    &lt;&lt;set $CharacterSheet_Player.quest = $QuestSheet_Player&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $Version &lt; 10201&gt;&gt;
    &lt;&lt;set $Version to 10201&gt;&gt;
    &lt;&lt;set $VersionStr to &#39;0.2.1&#39;&gt;&gt;

    &lt;&lt;include StoryInit_Abilities&gt;&gt;
    &lt;&lt;include StoryInit_FightMoves&gt;&gt;
    &lt;&lt;include StoryInit_FightVariables&gt;&gt;
    &lt;&lt;include Modifiers_Player_Symbiote&gt;&gt;
    &lt;&lt;include Modifiers_Size_Diff&gt;&gt;

&lt;&lt;set $CharacterSheet_Player.fight.critChance = $CharacterSheet_Player.fight.accuracy&gt;&gt;
&lt;&lt;set $CharacterSheet_Player.fight.variables = $FightVariables&gt;&gt;

&lt;&lt;script&gt;&gt;
let i;
for(i = 0; i &lt; State.variables.CharacterSheet_Player.fight.fightMoves.length; i++)
{
    let j;
    for(j = 0; j &lt; State.variables.FightMoves.length; j++)
    {
        if(State.variables.CharacterSheet_Player.fight.fightMoves[i].name == State.variables.FightMoves[j].name)
        {
            State.variables.CharacterSheet_Player.fight.fightMoves[i] = State.variables.FightMoves[j];
        }
    }
}
&lt;&lt;/script&gt;&gt;

    &lt;&lt;include Sheets_Imp&gt;&gt;
    &lt;&lt;include Sheets_Tok&gt;&gt;
    &lt;&lt;include Sheets_Lakkos&gt;&gt;
    &lt;&lt;include Sheets_Lost_Werewolf&gt;&gt;
    &lt;&lt;include Sheets_Lost_Naga&gt;&gt;
    &lt;&lt;include Sheets_Elder&gt;&gt;
    &lt;&lt;include Sheets_MQ002_Guard&gt;&gt;

    &lt;&lt;set $LevelUpTable = 
[
    180,
    500,
    900,
	2200,
	4000,
	5600,
	7000,
	8300,
	10000,
	15000,
]&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $Version &lt; 10202&gt;&gt;
    &lt;&lt;set $Version to 10202&gt;&gt;
    &lt;&lt;set $VersionStr to &#39;0.2.2&#39;&gt;&gt;

    &lt;&lt;set $RewardTier = 
    {
        VERY_LOW:  1,
        LOW:  2,
        MEDIUM: 3,
        HIGH: 4,
        VERY_HIGH: 5,
    }&gt;&gt;

    &lt;&lt;include StoryInit_FightMoves&gt;&gt;

    &lt;&lt;set $CharacterSheet_Imp.fight =
{
	hp: 34,
	stamina: 6,
	strength: 6,
	critChance: 20,
	arousalGain: 20,
	staminaRecovery: 4,
	variables: $FightVariables,
	fightMoves: [$FightMove_Basic_Attack],
	abilities: [$Ability_AppetiteForGrowth_2],
	onMaxArousal: function(character)
	{
		//todo
	},
	fightReward: $RewardTier.LOW,
	encounterIntroText: &quot;&lt;&lt;include Encounter_Intro_Imp&gt;&gt;&quot;,
	encounterStartText: &quot;&lt;&lt;include Encounter_Start_Imp&gt;&gt;&quot;,
	outcomePlayerWins: &quot;&lt;&lt;include Encounter_Win_Imp&gt;&gt;&quot;,
	outcomePlayerLoses: &quot;&lt;&lt;include Encounter_Loss_Imp&gt;&gt;&quot;
}&gt;&gt;

&lt;&lt;set $CharacterSheet_Tok.fight =
{
	hp: 72,
	stamina: 20,
	strength: 10,
	critChance: 20,
	arousalGain: 20,
	staminaRecovery: 4,
	variables: $FightVariables,
	fightMoves: [$FightMove_Lunge,$FightMove_Goo_Stun],
    abilities: [],
	onMaxArousal: function(character)
	{
		//todo
	},
    fightReward: $RewardTier.HIGH,
    encounterIntroText: &quot;&lt;&lt;include Tok_Fight_Intro&gt;&gt;&quot;,
    encounterStartText: &quot;His immense stature is intimidating, he looks powerful enough to break you in half. Yet you feel an alien instinct warp your reason. The sight of his massive muscles and cock nearly drives you mad with excitement. Your own cock throbs as you ready your weapon.&quot;
    + &quot;\n The fear is all gone, all you think of is to make this beast yours.&quot;,
	outcomePlayerWins: 
		&quot;&lt;&lt;include Tok_Fight_Won&gt;&gt;&quot;,
	outcomePlayerLoses: 
		&quot;Tok brings you down to your knees. \n \n[[Continue-&gt;Tok Fight Lost]]&quot;
}&gt;&gt;

&lt;&lt;set $CharacterSheet_Lakkos.fight =
{
	hp: 50,
	stamina: 25,
	strength: 9,
	critChance: 20,
	arousalGain: 20,
	staminaRecovery: 14,
	variables: $FightVariables,
	fightMoves: [$FightMove_Basic_Attack, $FightMove_IncubusCall, $FightMove_IncubusStrike],
    abilities: [$Ability_VigorOfTheEndowed_2],
	onMaxArousal: function(character)
	{
		//todo
	},
	fightReward: $RewardTier.MEDIUM,
	encounterIntroText: &quot;&lt;&lt;include Encounter_Intro_Lakkos&gt;&gt;&quot;,
	encounterStartText: &quot;&lt;&lt;include Encounter_Start_Lakkos&gt;&gt;&quot;,
	outcomePlayerWins: &quot;&lt;&lt;include Encounter_Win_Lakkos&gt;&gt;&quot;,
	outcomePlayerLoses: &quot;&lt;&lt;include Encounter_Loss_Lakkos_0&gt;&gt;&quot;
}&gt;&gt;

&lt;&lt;set $CharacterSheet_Lost_Werewolf.fight =
{
	hp: 30,
	stamina: 12,
	strength: 9,
	critChance: 20,
	arousalGain: 20,
	staminaRecovery: 8,
	variables: $FightVariables,
	fightMoves: [$FightMove_Basic_Attack, $FightMove_Infest],
    abilities: [$Ability_HerculeanBuild],
	onMaxArousal: function(character)
	{
		//todo
	},
	fightReward: $RewardTier.MEDIUM,
	encounterIntroText: &quot;&lt;&lt;include Encounter_Intro_Lost_Werewolf&gt;&gt;&quot;,
	encounterStartText: &quot;&lt;&lt;include Encounter_Start_Lost_Werewolf&gt;&gt;&quot;,
	outcomePlayerWins: &quot;&lt;&lt;include Encounter_Win_Lost_Werewolf&gt;&gt;&quot;,
	outcomePlayerLoses: &quot;&lt;&lt;include Encounter_Loss_Lost_Werewolf&gt;&gt;&quot;
}&gt;&gt;

&lt;&lt;set $CharacterSheet_Lost_Naga.fight =
{
	hp: 90,
	stamina: 22,
	strength: 15,
	critChance: 20,
	arousalGain: 20,
	staminaRecovery: 14,
	variables: $FightVariables,
	fightMoves: [$FightMove_Basic_Attack, $FightMove_Infest, $FightMove_Hypnotize],
    abilities: [$Ability_AppetiteForGrowth],
	onMaxArousal: function(character)
	{
		//todo
	},
	fightReward: $RewardTier.HIGH,
	encounterIntroText: &quot;&lt;&lt;include Encounter_Intro_Lost_Naga&gt;&gt;&quot;,
	encounterStartText: &quot;&lt;&lt;include Encounter_Start_Lost_Naga&gt;&gt;&quot;,
	outcomePlayerWins: &quot;&lt;&lt;include Encounter_Win_Lost_Naga&gt;&gt;&quot;,
	outcomePlayerLoses: &quot;&lt;&lt;include Encounter_Loss_Lost_Naga_1&gt;&gt;&quot;
}&gt;&gt;

&lt;&lt;set $CharacterSheet_MQ002_Guard.fight =
{
	hp: 130,
	stamina: 35,
	strength: 40,
	critChance: 0,
	arousalGain: 10,
	staminaRecovery: 8,
	variables: $FightVariables,
	fightMoves: [$FightMove_Basic_Attack, $FightMove_ChargedStrike],
	abilities: [$Ability_Masochism_2],
	onMaxArousal: function(character)
	{
		//todo
	},
	fightReward: $RewardTier.HIGH,
	encounterIntroText: &quot;&quot;,
	encounterStartText: &quot;Minotaur Guard readies his weapon&quot;,
	outcomePlayerWins: &quot;&lt;&lt;include Quest_MQ002_Entrance_PlayerWins&gt;&gt;&quot;,
	outcomePlayerLoses: &quot;&lt;&lt;include Quest_MQ002_Entrance_PlayerLoses&gt;&gt;&quot;
}&gt;&gt;

&lt;&lt;script&gt;&gt;
    State.variables.CharacterSheet_Player.fight.fightMoves.push(State.variables.FightMove_Inspect);
&lt;&lt;/script&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $Version &gt;= 10300 &amp;&amp; $Version &lt; 10301&gt;&gt;

&lt;&lt;set $Version = 10301&gt;&gt;
&lt;&lt;set $VersionStr = &#39;0.3.1&#39;&gt;&gt;

&lt;&lt;include FightMove_Sigil_Vitality&gt;&gt;
&lt;&lt;include FightMove_Sigil_Pain&gt;&gt;
&lt;&lt;include FightMove_Sigil_Perception&gt;&gt;
&lt;&lt;include FightMove_Sigil_Growth&gt;&gt;
&lt;&lt;include FightMove_WitheringVenom&gt;&gt;

&lt;&lt;set $FightHotkeys = [&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;,&quot;6&quot;,&quot;7&quot;,&quot;8&quot;,&quot;9&quot;,&quot;0&quot;,&quot;Q&quot;,&quot;W&quot;,&quot;E&quot;,&quot;R&quot;,&quot;T&quot;,&quot;Y&quot;,&quot;U&quot;,&quot;I&quot;,&quot;O&quot;,&quot;P&quot;]&gt;&gt;

&lt;&lt;/if&gt;&gt;

&lt;&lt;if $Version &gt;= 10301 &amp;&amp; $Version &lt; 10302&gt;&gt;

&lt;&lt;set $Version = 10302&gt;&gt;
&lt;&lt;set $VersionStr = &#39;0.3.2\n Cannot upgrade save file. Play at your own risk.&#39;&gt;&gt;

&lt;&lt;/if&gt;&gt;

&lt;&lt;if $Version &gt;= 10302 &amp;&amp; $Version &lt; 10303&gt;&gt;

&lt;&lt;set $Version = 10303&gt;&gt;
&lt;&lt;set $VersionStr = &#39;0.3.3\n SAVE FILE NOT COMPATIBLE WITH THIS VERSION! PLAY AT YOUR OWN RISKS!&#39;&gt;&gt;

&lt;&lt;/if&gt;&gt;

&lt;&lt;if $Version &gt;= 10303 &amp;&amp; $Version &lt; 10304&gt;&gt;

&lt;&lt;set $Version = 10304&gt;&gt;
&lt;&lt;set $VersionStr = &#39;0.3.4\n SAVE FILE NOT COMPATIBLE WITH THIS VERSION! PLAY AT YOUR OWN RISKS!&#39;&gt;&gt;

&lt;&lt;/if&gt;&gt;

&lt;&lt;if $Version &gt;= 10303 &amp;&amp; $Version &lt; 10304&gt;&gt;

&lt;&lt;set $Version = 10305&gt;&gt;
&lt;&lt;set $VersionStr = &#39;0.3.5\n SAVE FILE NOT COMPATIBLE WITH THIS VERSION! PLAY AT YOUR OWN RISKS!&#39;&gt;&gt;

&lt;&lt;/if&gt;&gt;
&lt;&lt;if $Version &gt;= 10304 &amp;&amp; $Version &lt; 10400&gt;&gt;

&lt;&lt;set $Version = 10400&gt;&gt;
&lt;&lt;set $VersionStr = &#39;0.4.0\n SAVE FILE NOT COMPATIBLE WITH THIS VERSION! PLAY AT YOUR OWN RISKS!&#39;&gt;&gt;

&lt;&lt;/if&gt;&gt;
&lt;&lt;if $Version &gt;= 10400 &amp;&amp; $Version &lt; 10401&gt;&gt;

&lt;&lt;set $Version = 10401&gt;&gt;
&lt;&lt;set $VersionStr = &#39;0.4.1\n SAVE FILE NOT COMPATIBLE WITH THIS VERSION! PLAY AT YOUR OWN RISKS!&#39;&gt;&gt;

&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="3" name="PassageReady" tags="" position="350,100" size="100,100">&lt;meta name=&quot;viewport&quot; content=&quot;width=1024&quot;&gt;</tw-passagedata><tw-passagedata pid="4" name="StoryInit" tags="" position="161,1322" size="100,100">&lt;&lt;include StoryInit_Base&gt;&gt;
&lt;&lt;include StoryInit_Widgets&gt;&gt;
&lt;&lt;include StoryInit_UniversalFlavour&gt;&gt;
&lt;&lt;include StoryInit_FightVariables&gt;&gt;
&lt;&lt;include StoryInit_FightMoves&gt;&gt;
&lt;&lt;include Quest_MQ001&gt;&gt;
&lt;&lt;include Quest_MQ001_EchoFirstEncounter&gt;&gt;
&lt;&lt;include Quest_MQ002&gt;&gt;
&lt;&lt;include StoryInit_QuestVariables&gt;&gt;
&lt;&lt;include StoryInit_Abilities&gt;&gt;
&lt;&lt;include Sheets_Player&gt;&gt;
&lt;&lt;include Sheets_Imp&gt;&gt;
&lt;&lt;include Sheets_Tok&gt;&gt;
&lt;&lt;include Sheets_Lakkos&gt;&gt;
&lt;&lt;include Sheets_Lost_Entity&gt;&gt;
&lt;&lt;include Sheets_Lost_Harbinger&gt;&gt;
&lt;&lt;include Sheets_Swarm&gt;&gt;
&lt;&lt;include Sheets_Lost_Naga&gt;&gt;
&lt;&lt;include Sheets_Elder&gt;&gt;
&lt;&lt;include Sheets_MQ002_Guard&gt;&gt;
&lt;&lt;include Sheets_MQ002_NyxParasite&gt;&gt;
&lt;&lt;include Sheets_MQ002_DragonMonk&gt;&gt;
&lt;&lt;include Sheets_Apothus&gt;&gt;
&lt;&lt;include Sheets_Apothus_2nd_Form&gt;&gt;
&lt;&lt;include Sheets_Ortha&gt;&gt;
&lt;&lt;include Sheets_Slime&gt;&gt;
&lt;&lt;include StoryInit_StateDrivenModifiers&gt;&gt;
&lt;&lt;include StoryInit_WorldState&gt;&gt;
&lt;&lt;include StoryInit_EndingSheet&gt;&gt;
&lt;&lt;include StoryInit_UI&gt;&gt;
&lt;&lt;include StoryInit_Music&gt;&gt;

&lt;&lt;include StoryInit_RandomEncounters&gt;&gt;</tw-passagedata><tw-passagedata pid="5" name="StoryInit_Abilities" tags="" position="600,100" size="100,100">&lt;&lt;include StoryInit_AbilityTrigger&gt;&gt;

&lt;&lt;set $AbilityList = []&gt;&gt;
&lt;&lt;set $GlobalAbilities = []&gt;&gt;

&lt;&lt;include Ability_Tank&gt;&gt;
&lt;&lt;include Ability_Berserking&gt;&gt;
&lt;&lt;include Ability_DeadlyAim&gt;&gt;

&lt;&lt;include Ability_Mutant_2&gt;&gt;
&lt;&lt;include Ability_Mutant&gt;&gt;

&lt;&lt;include Ability_Global_Bigger_Than_Target_1&gt;&gt;
&lt;&lt;include Ability_Global_Bigger_Than_Target_2&gt;&gt;
&lt;&lt;include Ability_Global_Bigger_Than_Target_3&gt;&gt;

&lt;&lt;include Ability_ThirdVerse&gt;&gt;
&lt;&lt;include Ability_SixthVerse&gt;&gt;
&lt;&lt;include Ability_NinthVerse&gt;&gt;
&lt;&lt;include Ability_TwelfthVerse&gt;&gt;

&lt;&lt;include Ability_EchoForm&gt;&gt;

&lt;&lt;include Ability_Masochism&gt;&gt;
&lt;&lt;include Ability_HerculeanBuild&gt;&gt;

&lt;&lt;include Ability_DemonicCorruption_3&gt;&gt;
&lt;&lt;include Ability_DemonicCorruption_2&gt;&gt;
&lt;&lt;include Ability_DemonicCorruption&gt;&gt;

&lt;&lt;include Ability_StolenMass&gt;&gt;
&lt;&lt;include Ability_CurseOfTheNaga&gt;&gt;

&lt;&lt;include Ability_VigorOfTheEndowed_2&gt;&gt;
&lt;&lt;include Ability_VigorOfTheEndowed&gt;&gt;

&lt;&lt;include Ability_AppetiteForGrowth_2&gt;&gt;
&lt;&lt;include Ability_AppetiteForGrowth&gt;&gt;

&lt;&lt;include Ability_NyxParasiteInfection_2&gt;&gt;
&lt;&lt;include Ability_NyxParasiteInfection&gt;&gt;

&lt;&lt;include Ability_TouchedByNyxsLight&gt;&gt;
&lt;&lt;include Ability_EmbracedByNyxsLight&gt;&gt;

&lt;&lt;include Ability_Oath_Containment&gt;&gt;
&lt;&lt;include Ability_Oath_Nyx&gt;&gt;
&lt;&lt;include Ability_UnstoppableExpansion&gt;&gt;
&lt;&lt;include Ability_Oathbreaker&gt;&gt;
&lt;&lt;include Ability_NeverendingGrowth&gt;&gt;
&lt;&lt;include Ability_OrgasmicGrowth&gt;&gt;
&lt;&lt;include Ability_LastStand&gt;&gt;
&lt;&lt;include Ability_ToLiveForEcho&gt;&gt;
&lt;&lt;include Ability_WarriorOfDuality&gt;&gt;
&lt;&lt;include Ability_WitheringVenom&gt;&gt;
&lt;&lt;include Ability_CodexPassion&gt;&gt;
&lt;&lt;include Ability_UnderTheEyeOfOrtha&gt;&gt;
&lt;&lt;include Ability_EssenceHoarder&gt;&gt;
&lt;&lt;include Ability_SombrevesWhisper&gt;&gt;
&lt;&lt;include Ability_VampiricLust&gt;&gt;
&lt;&lt;include Ability_KalethsFervour&gt;&gt;
&lt;&lt;include Ability_ActiveParry&gt;&gt;
&lt;&lt;include Ability_ParryEnergy&gt;&gt;
&lt;&lt;include Ability_BrinkOfMadness&gt;&gt;
&lt;&lt;include Ability_PiercingPrecision&gt;&gt;
&lt;&lt;include Ability_ChannelTheAstralSoul&gt;&gt;
&lt;&lt;include Ability_ValiantRush&gt;&gt;
&lt;&lt;include Ability_SigilOfPerception&gt;&gt;
&lt;&lt;include Ability_TaintedByTheLost&gt;&gt;
&lt;&lt;include Ability_SurvivorOfTheFirstEclipse&gt;&gt;
&lt;&lt;include Ability_MemoriesOfTheChosen&gt;&gt;
&lt;&lt;include Ability_MemoriesOfApothus&gt;&gt;
&lt;&lt;include Ability_HostOfEcho&gt;&gt;</tw-passagedata><tw-passagedata pid="6" name="StoryInit_AbilityTrigger" tags="" position="725,100" size="100,100">&lt;&lt;script&gt;&gt;
State.variables.AbilityTrigger = 
{
    ON_ACQUIRE: 1 &lt;&lt; 0,
    ON_FIGHT_START: 1 &lt;&lt; 1,
    ON_FIGHT_TURN_START: 1 &lt;&lt; 2,
    ON_FIGHT_DAMAGING_HIT: 1 &lt;&lt; 3,
    ON_FIGHT_PRE_RECEIVE_DAMAGE: 1 &lt;&lt; 5,
    ON_FIGHT_POST_RECEIVE_DAMAGE: 1 &lt;&lt; 4,
    ON_FIGHT_END: 1 &lt;&lt; 6,
    ON_MAX_LUST: 1 &lt;&lt; 7,
    ON_MIN_LUST: 1 &lt;&lt; 8,
    ON_APPLY_GROWTH: 1 &lt;&lt; 9,
    ON_ENTER_MID_HEALTH: 1 &lt;&lt; 10,
    ON_EXIT_MID_HEALTH: 1 &lt;&lt; 11,
    ON_ENTER_LOW_HEALTH: 1 &lt;&lt; 12,
    ON_EXIT_LOW_HEALTH: 1 &lt;&lt; 13,
    ON_LEVEL_UP: 1 &lt;&lt; 14,
    ON_FIGHT_DO_DAMAGELESS_ATTACK: 1 &lt;&lt; 15,
    ON_FIGHT_BATTLE_WON: 1 &lt;&lt; 16,
    ON_FIGHT_BATTLE_LOST: 1 &lt;&lt; 17,
    ON_GAIN_CORRUPTION: 1 &lt;&lt; 18,
    ON_GAIN_ESSENCE: 1 &lt;&lt; 19,
    ON_DAY_CHANGE: 1 &lt;&lt; 20,
    ON_STAT_CHANGE: 1 &lt;&lt; 21,
}
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="7" name="StoryInit_Base" tags="" position="850,100" size="100,100">&lt;&lt;script&gt;&gt;
Config.history.maxStates = 1;
Config.history.controls = false;
&lt;&lt;/script&gt;&gt;

&lt;&lt;set $Version = 10401&gt;&gt;
&lt;&lt;set $VersionStr = &#39;0.4.1&#39;&gt;&gt;

&lt;&lt;set $FightHotkeys = [&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;,&quot;6&quot;,&quot;7&quot;,&quot;8&quot;,&quot;9&quot;,&quot;0&quot;,&quot;Q&quot;,&quot;W&quot;,&quot;E&quot;,&quot;R&quot;,&quot;T&quot;,&quot;Y&quot;,&quot;U&quot;,&quot;I&quot;,&quot;O&quot;,&quot;P&quot;]&gt;&gt;

&lt;&lt;set $DeathTextEnum = 
{
	NORMAL:  1,
    POST_APOTHUS:  2,
}&gt;&gt;

&lt;&lt;set $LastExplorationEnemyEncounter = 0&gt;&gt;

&lt;&lt;set $DeathText = $DeathTextEnum.NORMAL&gt;&gt;

&lt;&lt;set $RewardTier = 
{
	VERY_LOW:  1,
    LOW:  2,
    MEDIUM: 3,
    HIGH: 4,
    VERY_HIGH: 5,
}&gt;&gt;

&lt;&lt;set $Units = 
{
    IMPERIAL:  1,
    METRIC: 2
}&gt;&gt;

&lt;&lt;set $Oath = 
{
    NONE:  1,
    ACTIVE: 2,
	BROKEN: 3,
}&gt;&gt;

&lt;&lt;set $Comparators = 
{
    MICRO_TO:  1,
	MUCH_SMALLER: 2,
	SMALLER: 3,
	SLIGHTLY_SMALLER: 4,
	EQUAL: 5,
	SLIGHTLY_BIGGER: 6,
	BIGGER: 7,
	MUCH_BIGGER: 8,
	REACHES_WAIST: 9,
	REACHES_KNEES: 10,
	FITS_ON_HAND: 11,
	FITS_ON_FINGER: 12,
}&gt;&gt;

&lt;&lt;set $CockComparators = 
{
    MICRO_TO:  1,
	MUCH_SMALLER: 2,
	SMALLER: 3,
	SLIGHTLY_SMALLER: 4,
	EQUAL: 5,
	SLIGHTLY_BIGGER: 6,
	BIGGER: 7,
	MUCH_BIGGER: 8,
	MASSIVE: 9,
	HYPER: 10,
	MACRO: 11,
	GIGA: 12,
}&gt;&gt;

&lt;&lt;set $CorruptionComparators = 
{
    PURE:  25,
	NEUTRAL: 50,
	TAINTED: 75,
	CORRUPT: 100
}&gt;&gt;


&lt;&lt;set $ColourPool = 
{
	DEFAULT: undefined,
    RED: &quot;red&quot;,
	ORANGE: &quot;orange&quot;,
	YELLOW: &quot;yellow&quot;,
	GREEN: &quot;green&quot;,
	BLUE: &quot;blue&quot;,
	INDIGO: &quot;indigo&quot;,
	VIOLET: &quot;violet&quot;,
	PURPLE: &quot;purple&quot;,
	WHITE: &quot;white&quot;,
	GREY: &quot;grey&quot;,
	BLACK: &quot;black&quot;,
	OBSIDIAN: &quot;obsidian&quot;,
	AMBER: &quot;amber&quot;,
	PINK: &quot;pink&quot;,
	BROWN: &quot;brown&quot;,
	TAN: &quot;tan&quot;,
	BEIGE: &quot;beige&quot;,
	EMERALD: &quot;emerald&quot;,
	SAPPHIRE: &quot;sapphire&quot;,
	CRIMSON: &quot;crimson&quot;,
	GOLDEN: &quot;golden&quot;
}&gt;&gt;

&lt;&lt;set $MuscleComparators = 
{
    MICRO_TO:  1,
	MUCH_SMALLER: 2,
	SMALLER: 3,
	SLIGHTLY_SMALLER: 4,
	EQUAL: 5,
	SLIGHTLY_BIGGER: 6,
	BIGGER: 7,
	MUCH_BIGGER: 8,
	DWARFING: 9,
	GIANT: 10,
	MACRO: 11,
	GIGA: 12,
}&gt;&gt;

&lt;&lt;set $englishNumbers = 
{
	1: &quot;&quot;,
	2: &quot;two&quot;,
	3: &quot;three&quot;,
	4: &quot;four&quot;,
	5: &quot;five&quot;,
	6: &quot;six&quot;,
	7: &quot;seven&quot;,
	8: &quot;eight&quot;,
	9: &quot;nine&quot;,
	10: &quot;ten&quot;,
	11: &quot;eleven&quot;,
	12: &quot;twelve&quot;,
	13: &quot;thirteen&quot;,
	14: &quot;fourteen&quot;,
	15: &quot;fifteen&quot;,
	16: &quot;sixteen&quot;,
	17: &quot;seventeen&quot;,
	18: &quot;eighteen&quot;,
	19: &quot;nineteen&quot;,
	20: &quot;twenty&quot;,
	21: &quot;twenty one&quot;,
	22: &quot;twenty two&quot;,
	23: &quot;twenty three&quot;,
	24: &quot;twenty four&quot;,
	25: &quot;twenty five&quot;,
	26: &quot;twenty six&quot;,
	27: &quot;twenty seven&quot;,
	28: &quot;twenty eight&quot;,
	29: &quot;twenty nine&quot;,
	30: &quot;thirty&quot;,
	31: &quot;thirty one&quot;,
	32: &quot;thirty two&quot;,
	33: &quot;thirty three&quot;,
	34: &quot;thirty four&quot;,
	35: &quot;thirty five&quot;,
	36: &quot;thirty six&quot;,
	37: &quot;thirty seven&quot;,
	38: &quot;thirty eight&quot;,
	39: &quot;thirty nine&quot;,
	40: &quot;forty&quot;
}&gt;&gt;

&lt;&lt;set $SymbioteBoost = &quot;muscles&quot;&gt;&gt;

&lt;&lt;set $Debug = $SpecialBuild&gt;&gt;

&lt;&lt;set $Colors = [&quot;orange&quot;, &quot;blue&quot;, &quot;grey&quot;]&gt;&gt;

&lt;&lt;set $BoughtFightMoves = 0&gt;&gt;
&lt;&lt;set $DaysPerCycle = 24&gt;&gt;
&lt;&lt;set $FightTurn = 0&gt;&gt;

&lt;&lt;set $LevelUpTable = 
[
    180,
    500,
    1300,
	2400,
	3700,
	5600,
	7000,
	8300,
	10000,
	15000,
]&gt;&gt;

&lt;&lt;set $AbilityCategory =
{
    NONE: 0,
    WARRIOR: 1,
    GROWTH: 2,
    SOMBREVE: 3,
    ORTHA: 4,
    LUST: 5,
}&gt;&gt;

/*always order from best to worst*/
&lt;&lt;set $AbilityGrade =
{
    VERYHIGH: 4,
    HIGH: 3,
    MEDIUM: 2,
    LOW: 1,
    VERYLOW: 0,
}&gt;&gt;

/*Stats -BEGIN*/
&lt;&lt;set $Day = 0&gt;&gt;

&lt;&lt;set $Essence = 0&gt;&gt;

&lt;&lt;set $Exp = 0&gt;&gt;
&lt;&lt;set $Level = 1&gt;&gt;
/*Stats -END*/

/*Descriptors*/
&lt;&lt;set $Fight_HealthDescriptor = function(maxHP, curHP)
{
	if(curHP / maxHP &gt; 0.7)
	{
		return &quot;&lt;span style=&#39;color:#46c546;&#39;&gt;&quot; + &quot;healthy&quot; + &quot;&lt;/span&gt;&quot;;
	}
	else if(curHP / maxHP &gt; 0.5)
	{
		return &quot;&lt;span style=&#39;color:#c5bb46;&#39;&gt;&quot; + &quot;out of breath&quot; + &quot;&lt;/span&gt;&quot;;
	}
	else if(curHP / maxHP &gt; 0.3)
	{
		return &quot;&lt;span style=&#39;color:#ff9840;&#39;&gt;&quot; + &quot;exhausted&quot; + &quot;&lt;/span&gt;&quot;;
	}
	else
	{
		return &quot;&lt;span style=&#39;color:#ff0000;&#39;&gt;&quot; + &quot;nearly dead&quot; + &quot;&lt;/span&gt;&quot;;
	}
};
&gt;&gt;

&lt;&lt;set $AdjectivePool =
{
	heads: {
		medium: [&quot;large&quot;],
		large: [&quot;sizeable&quot;],
		huge: [&quot;massive&quot;, &quot;huge&quot;],
		adjectives: {
			pure: [&quot;rugged&quot;, &quot;square-jawed&quot;],
			corrupt: [&quot;rugged&quot;, &quot;square-jawed&quot;]
		}
	},
	eyes: {
		adjectives: {
			corrupt: [&quot;glowing&quot;, &quot;demonic&quot;, &quot;fiery&quot;, &quot;burning&quot;, &quot;blazing&quot;]
		}
	},
	jaws: {
		small: [&quot;defined&quot;],
		medium: [&quot;square&quot;],
		large: [&quot;powerful&quot;],
		huge: [&quot;massive&quot;],
		adjectives: {
		}
	},
	teeths: {
		raceTexture: [&quot;average&quot;],
		adjectives: {
		}
	},
	hands: {
		small: [&quot;average&quot;],
		medium: [&quot;meaty&quot;],
		large: [&quot;huge&quot;],
		huge: [&quot;massive&quot;],
		adjectives: {
		}
	},
	horns: {
		small: [&quot;bulky&quot;],
		medium: [&quot;heavy&quot;, &quot;dangerous&quot;],
		large: [&quot;massive&quot;, &quot;incredibly heavy&quot;, &quot;bulldozing&quot;],
		huge: [&quot;colossal&quot;, &quot;earth gouging&quot;],
		adjectives: {
			corrupt: [&quot;cracked&quot;, &quot;purple runed&quot;, &quot;glowing&quot;]
		}
	},
	wings: {
		small: [&quot;magnificent&quot;],
		medium: [&quot;monumental&quot;],
		large: [&quot;massive&quot;],
		huge: [&quot;titanic&quot;, &quot;land eclipsing&quot;],
		adjectives: {
		}
	},
	tongues: {
		small: [&quot;normal sized&quot;],
		medium: [&quot;long&quot;],
		large: [&quot;elongated&quot;],
		huge: [&quot;extensive&quot;, &quot;huge&quot;],
		adjectives: {
			corrupt: [&quot;slobbering&quot;, &quot;dripping&quot;, &quot;slimy&quot;]
		}
	},
	arms: {
		small: [&quot;athletic&quot;, &quot;chiselled&quot;, &quot;defined&quot;],
		medium: [&quot;large&quot;, &quot;bulky&quot;, &quot;brawny&quot;],
		large: [&quot;sizeable&quot;, &quot;huge&quot;, &quot;boulder-like&quot;, &quot;skin-straining&quot;, &quot;heavily muscled&quot;],
		huge: [&quot;colossal&quot;, &quot;titanic&quot;, &quot;world ending&quot;, &quot;building sized&quot;, &quot;impossibly huge&quot;, &quot;huge&quot;, &quot;movement limiting&quot;],
		adjectives: {
			pure: [&quot;vein-riddled&quot;, &quot;strong&quot;, &quot;beefy&quot;, &quot;pumped&quot;],
			corrupt: [&quot;pulsating&quot;, &quot;vein-riddled&quot;, &quot;ever growing&quot;, &quot;strong&quot;, &quot;beefy&quot;, &quot;mutated&quot;]
		}
	},
	pecs: {
		small: [&quot;athletic&quot;, &quot;chiselled&quot;, &quot;defined&quot;, &quot;square&quot;],
		medium: [&quot;large&quot;, &quot;bulky&quot;, &quot;brawny&quot;, &quot;well-built&quot;],
		large: [&quot;sizeable&quot;, &quot;shelf-like&quot;, &quot;boulder sized&quot;, &quot;vision limiting&quot;, &quot;huge&quot;, &quot;massive&quot;],
		huge: [&quot;chin scraping&quot;, &quot;mountain-like&quot;, &quot;titanic&quot;, &quot;heavily muscled&quot;],
		adjectives: {
			pure: [&quot;vein-riddled&quot;, &quot;strong&quot;, &quot;beefy&quot;, &quot;pumped&quot;],
			corrupt: [&quot;pulsating&quot;, &quot;vein-riddled&quot;, &quot;ever growing&quot;, &quot;strong&quot;, &quot;beefy&quot;]
		}
	},
	abdominals: {
		small: [&quot;pack&quot;, &quot;chiselled&quot;, &quot;defined&quot;, &quot;washboard&quot;],
		medium: [&quot;pack&quot;, &quot;rock-hard&quot;, &quot;strong&quot;, &quot;rippling&quot;],
		large: [&quot;pack&quot;, &quot;brick-like&quot;, &quot;huge&quot;, &quot;wall of&quot;, &quot;cinderblock&quot;],
		huge: [&quot;pack&quot;, &quot;impossibly huge&quot;, &quot;colossal&quot;, &quot;titanic&quot;, &quot;vehicle sized&quot;],
		adjectives: {
			pure: [&quot;veiny&quot;],
			corrupt: [&quot;pulsating&quot;, &quot;veiny&quot;]
		}
	},
	cocks: {
		small: [&quot;fair&quot;, &quot;impressive&quot;],
		medium: [&quot;horse-sized&quot;, &quot;arm-sized&quot;, &quot;awe-inspiring&quot;, &quot;incredibly big&quot;],
		large: [&quot;huge&quot;, &quot;hyper&quot;, &quot;bloated&quot;, &quot;vehicle sized&quot;, &quot;wall breaking&quot;, &quot;impossibly huge&quot;, &quot;mammoth&quot;, &quot;floor dragging&quot;, &quot;cannon&quot;],
		huge: [&quot;massive&quot;, &quot;huge&quot;, &quot;mountain sized&quot;, &quot;world breaking&quot;, &quot;ground-carving&quot;, &quot;earth shaking&quot;, &quot;god like&quot;, &quot;village sized&quot;],
		adjectives: {
			pure: [&quot;vein-riddled&quot;, &quot;rigid&quot;, &quot;leaking&quot;],
			corrupt: [&quot;pulsating&quot;, &quot;vein-riddled&quot;, &quot;glowing&quot;, &quot;leaking&quot;]
		}
	},
	balls: {
		medium: [&quot;large&quot;, &quot;thigh-knocking&quot;, &quot;grapefruit sized&quot;],
		large: [&quot;floor dragging&quot;, &quot;bloated&quot;],
		huge: [&quot;massive&quot;, &quot;huge&quot;, &quot;building sized&quot;, &quot;mountainous&quot;],
		adjectives: {
			pure: [&quot;virile&quot;, &quot;sloshing&quot;, &quot;bloated&quot;],
			corrupt: [&quot;pulsating&quot;, &quot;vein-riddled&quot;, &quot;over full&quot;, &quot;egregious&quot;, &quot;rumbling&quot;, &quot;powerful&quot;, &quot;corrupt&quot;]
		}
	},
	legs: {
		small: [&quot;athletic&quot;, &quot;chiselled&quot;, &quot;defined&quot;],
		medium: [&quot;large&quot;, &quot;bulky&quot;, &quot;brawny&quot;],
		large: [&quot;sizeable&quot;, &quot;huge&quot;, &quot;thick&quot;, &quot;skin-straining&quot;, &quot;heavily muscled&quot;],
		huge: [&quot;colossal&quot;, &quot;titanic&quot;, &quot;world ending&quot;, &quot;building sized&quot;, &quot;impossibly huge&quot;, &quot;huge&quot;],
		adjectives: {
			pure: [&quot;vein-riddled&quot;, &quot;strong&quot;, &quot;beefy&quot;],
			corrupt: [&quot;pulsating&quot;, &quot;vein-riddled&quot;]
		}
	},
	tails: {
		medium: [&quot;large&quot;],
		large: [&quot;sizeable&quot;, &quot;sizable&quot;],
		huge: [&quot;massive&quot;, &quot;huge&quot;],
		adjectives: {
			corrupt: [&quot;vein-riddled&quot;]
		}
	},
	breasts: {
		small: [&quot;average&quot;, &quot;soft&quot;],
		medium: [&quot;large&quot;, &quot;pillow-like&quot;],
		large: [&quot;sizeable&quot;, &quot;shelf-like&quot;, &quot;boulder sized&quot;, &quot;vision limiting&quot;, &quot;huge&quot;, &quot;massive&quot;],
		huge: [&quot;chin scraping&quot;, &quot;mountain-like&quot;, &quot;titanic&quot;],
		adjectives: {
			pure: [&quot;milk-filled&quot;, &quot;voluminous&quot;],
			corrupt: [&quot;leaking&quot;, &quot;ever growing&quot;, &quot;corruption-filled&quot;]
		}
	},
	vaginas: {
		small: [&quot;average&quot;, &quot;fair&quot;, &quot;impressive&quot;],
		medium: [&quot;large&quot;, &quot;wide&quot;, &quot;incredibly big&quot;],
		large: [&quot;sizeable&quot;, &quot;cavernous&quot;, &quot;enormous&quot;, &quot;capacious&quot;, &quot;huge&quot;, &quot;massive&quot;],
		huge: [&quot;world-devouring&quot;, &quot;chasm-sized&quot;, &quot;yawning&quot;, &quot;immense&quot;],
		adjectives: {
			pure: [&quot;soft&quot;, &quot;warm&quot;, &quot;welcoming&quot;],
			corrupt: [&quot;dripping&quot;, &quot;undulating&quot;, &quot;leaking&quot;]
		}
	}
}
&gt;&gt;

&lt;&lt;set $RacePool = 
{
    DEFAULT: {
		name: &quot;Human&quot;,
		namePlural: &quot;Humans&quot;,
		description: &quot;A common species, making up a bulk of nearly all population centers. Highly social and adaptable.&quot;,
		heads: {
			defaultNumber: 1
		},
		eyes: {
			defaultNumber: 2
		},
		jaws: {
			defaultNumber: 1
		},
		teeths: {
			defaultNumber: 1
		},
		hands: {
			defaultNumber: 2
		},
		tongues: {
			defaultNumber: 1
		},
		arms: {
			defaultNumber: 2
		},
		pecs: {
			defaultNumber: 2
		},
		abdominals: {
			defaultNumber: 8
		},
		cocks: {
			defaultNumber: 1
		},
		balls: {
			defaultNumber: 2
		},
		legs: {
			defaultNumber: 2
		},
		breasts: {
			defaultNumber: 2
		},
		vaginas: {
			defaultNumber: 1
		}
	},
	WOLF: {
		name: &quot;Werewolf&quot;,
		namePlural: &quot;Werewolves&quot;,
		description: &quot;Appears to be a combination of both human and wolf, though they trace their lineage to neither. Despite common legends, does not shift forms in the light of the moon.&quot;,
		heads: {
			defaultNumber: 1,
			raceTexture: [&quot;furry&quot;, &quot;wolfish&quot;, &quot;muzzled&quot;]
		},
		eyes: {
			defaultNumber: 2,
			raceTexture: [&quot;predatory&quot;, &quot;wolfish&quot;, &quot;lupine&quot;]
		},
		jaws: {
			defaultNumber: 1,
			raceTexture: [&quot;furry&quot;, &quot;wolven&quot;, &quot;wolfish&quot;, &quot;lupine&quot;, &quot;canid&quot;]
		},
		teeths: {
			defaultNumber: 1,
			raceTexture: [&quot;sharp&quot;]
		},
		hands: {
			defaultNumber: 2,
			raceTexture: [&quot;clawed&quot;, &quot;padded&quot;]
		},
		tongues: {
			defaultNumber: 1
		},
		arms: {
			defaultNumber: 2,
			raceTexture: [&quot;furry&quot;, &quot;wolven&quot;, &quot;wolfish&quot;, &quot;lupine&quot;, &quot;canid&quot;]
		},
		pecs: {
			defaultNumber: 2,
			raceTexture: [&quot;furry&quot;, &quot;wolven&quot;, &quot;wolfish&quot;, &quot;lupine&quot;, &quot;canid&quot;]
		},
		abdominals: {
			defaultNumber: 8,
			raceTexture: [&quot;furry&quot;, &quot;wolven&quot;, &quot;wolfish&quot;, &quot;lupine&quot;, &quot;canid&quot;]
		},
		cocks: {
			defaultNumber: 1,
			raceTexture: [&quot;knotted&quot;, &quot;rocket-shaped&quot;, &quot;wolven&quot;, &quot;lupine&quot;]
		},
		balls: {
			defaultNumber: 2,
			raceTexture: [&quot;furry&quot;]
		},
		legs: {
			defaultNumber: 2,
			raceTexture: [&quot;furry&quot;, &quot;wolven&quot;, &quot;wolfish&quot;, &quot;lupine&quot;, &quot;canid&quot;]
		},
		tails: {
			defaultNumber: 1,
			raceTexture: [&quot;fluffy&quot;, &quot;long&quot;]
		},
		breasts: {
			defaultNumber: 2
		},
		vaginas: {
			defaultNumber: 1
		}
	},
	MINOTAUR: {
		name: &quot;Minotaur&quot;,
		namePlural: &quot;Minotaurs&quot;,
		description: &quot;Bipedal, hooved bovines. Their torsos and arms are remarkably light on fur, but make up for it with their shaggy backs and legs.&quot;,
		heads: {
			defaultNumber: 1,
			raceTexture: [&quot;bovine&quot;, &quot;bull shaped&quot;]
		},
		eyes: {
			defaultNumber: 2,
			raceTexture: [&quot;determined&quot;]
		},
		jaws: {
			defaultNumber: 1,
			raceTexture: [&quot;furry&quot;],
		},
		teeths: {
			defaultNumber: 1
		},
		hands: {
			defaultNumber: 2,
			raceTexture: [&quot;human shaped&quot;]
		},
		horns: {
			defaultNumber: 2,
			raceTexture: [&quot;forward-facing&quot;]
		},
		tongues: {
			defaultNumber: 1,
			raceTexture: [&quot;flat tipped&quot;]
		},
		arms: {
			defaultNumber: 2,
			raceTexture: [&quot;furry&quot;, &quot;thick&quot;, &quot;bovine&quot;]
		},
		pecs: {
			defaultNumber: 2,
			raceTexture: [&quot;furry&quot;, &quot;thick&quot;, &quot;bovine&quot;]
		},
		abdominals: {
			defaultNumber: 8,
			raceTexture: [&quot;furry&quot;, &quot;thick&quot;, &quot;bovine&quot;]
		},
		cocks: {
			defaultNumber: 1,
			raceTexture: [&quot;flaring&quot;, &quot;flat-tipped&quot;, &quot;mottled&quot;]
		},
		balls: {
			defaultNumber: 2,
			raceTexture: [&quot;furry&quot;]
		},
		legs: {
			defaultNumber: 2,
			raceTexture: [&quot;hoofed&quot;]
		},
		tails: {
			defaultNumber: 1,
			raceTexture: [&quot;tuft-bearing&quot;]
		},
		breasts: {
			defaultNumber: 2
		},
		vaginas: {
			defaultNumber: 1
		}
	},
	BEHEMOTH: {
		name: &quot;Behemoth&quot;,
		namePlural: &quot;Behemoths&quot;,
		description: &quot;beasts of ancient lore.&quot;,
		heads: {
			defaultNumber: 1,
			raceTexture: [&quot;maned&quot;, &quot;fierce&quot;, &quot;canine-like&quot;, &quot;feral&quot;]
		},
		eyes: {
			defaultNumber: 2,
			raceTexture: [&quot;predatory&quot;, &quot;piercing&quot;]
		},
		jaws: {
			defaultNumber: 1,
			raceTexture: [&quot;imposing&quot;, &quot;fanged&quot;]
		},
		teeths: {
			defaultNumber: 1,
			raceTexture: [&quot;sharp&quot;]
		},
		hands: {
			defaultNumber: 2,
			raceTexture: [&quot;clawed&quot;, &quot;padded&quot;]
		},
		horns: {
			defaultNumber: 2,
			raceTexture: [&quot;forward-facing&quot;]
		},
		tongues: {
			defaultNumber: 1,
			raceTexture: [&quot;barbed&quot;]
		},
		arms: {
			defaultNumber: 2
		},
		pecs: {
			defaultNumber: 2,
			raceTexture: [&quot;barrelled&quot;]
		},
		abdominals: {
			defaultNumber: 8
		},
		cocks: {
			defaultNumber: 2,
			raceTexture: [&quot;barbed&quot;, &quot;knotted&quot;]
		},
		balls: {
			defaultNumber: 4,
			raceTexture: [&quot;churning&quot;]
		},
		legs: {
			defaultNumber: 2,
			raceTexture: [&quot;digitigrade&quot;]
		},
		tails: {
			defaultNumber: 1,
			raceTexture: [&quot;webbing-tipped&quot;, &quot;spined&quot;]
		},
		breasts: {
			defaultNumber: 2
		},
		vaginas: {
			defaultNumber: 1
		}
	},
	DRAGONBORN: {
		name: &quot;Dragonborn&quot;,
		namePlural: &quot;Dragonborn&quot;,
		description: &quot;Descendants of ancient winged creatures that used to claim dominion over this land, something that is oft-repeated in this scaled biped&#39;s religion.&quot;,
		heads: {
			defaultNumber: 1,
			raceTexture: [&quot;draconic&quot;]
		},
		eyes: {
			defaultNumber: 2,
			raceTexture: [&quot;draconic&quot;, &quot;slitted&quot;]
		},
		jaws: {
			defaultNumber: 1,
			raceTexture: [&quot;serpentine&quot;, &quot;draconic&quot;]
		},
		teeths: {
			defaultNumber: 1,
			raceTexture: [&quot;sharp&quot;]
		},
		hands: {
			defaultNumber: 2,
			raceTexture: [&quot;clawed&quot;, &quot;scaled&quot;]
		},
		horns: {
			defaultNumber: 4,
			raceTexture: [&quot;backward-bending&quot;]
		},
		wings: {
			defaultNumber: 2,
			raceTexture: [&quot;webbed&quot;]
		},
		tongues: {
			defaultNumber: 1,
			raceTexture: [&quot;forked&quot;, &quot;prehensile&quot;]
		},
		arms: {
			defaultNumber: 2,
			raceTexture: [&quot;scaled&quot;]
		},
		pecs: {
			defaultNumber: 2,
			raceTexture: [&quot;scaled&quot;]
		},
		abdominals: {
			defaultNumber: 8,
			raceTexture: [&quot;scaled&quot;]
		},
		cocks: {
			defaultNumber: 2,
			raceTexture: [&quot;tapered&quot;, &quot;oily&quot;]
		},
		balls: {
			defaultNumber: 4,
			raceTexture: [&quot;scaly&quot;]
		},
		legs: {
			defaultNumber: 2
		},
		tails: {
			defaultNumber: 1,
			raceTexture: [&quot;whip-like&quot;, &quot;draconic&quot;, &quot;serpentine&quot;]
		},
		breasts: {
			defaultNumber: 2,
			raceTexture: [&quot;scaled&quot;]
		},
		vaginas: {
			defaultNumber: 1
		}
	},
	INCUBUS: {
		name: &quot;Demon&quot;,
		namePlural: &quot;Demons&quot;,
		heads: {
			defaultNumber: 1,
			raceTexture: [&quot;demonic&quot;]
		},
		eyes: {
			defaultNumber: 2,
			raceTexture: [&quot;demonic&quot;, &quot;slitted&quot;]
		},
		jaws: {
			defaultNumber: 1,
			raceTexture: [&quot;sharp&quot;, &quot;demonic&quot;]
		},
		teeths: {
			defaultNumber: 1,
			raceTexture: [&quot;sharp&quot;]
		},
		hands: {
			defaultNumber: 2,
			raceTexture: [&quot;clawed&quot;, &quot;scaled&quot;]
		},
		horns: {
			defaultNumber: 2,
			raceTexture: [&quot;straight&quot;]
		},
		tongues: {
			defaultNumber: 1,
			raceTexture: [&quot;flexible&quot;, &quot;forked&quot;]
		},
		arms: {
			defaultNumber: 2,
			raceTexture: [&quot;scaled&quot;]
		},
		pecs: {
			defaultNumber: 2,
			raceTexture: [&quot;scaled&quot;]
		},
		abdominals: {
			defaultNumber: 6,
			raceTexture: [&quot;scaled&quot;]
		},
		cocks: {
			defaultNumber: 1,
			raceTexture: [&quot;slick&quot;, &quot;oily&quot;]
		},
		balls: {
			defaultNumber: 2,
			raceTexture: [&quot;churning&quot;]
		},
		legs: {
			defaultNumber: 2,
			raceTexture: [&quot;scaled&quot;]
		},
		tails: {
			defaultNumber: 1,
			raceTexture: [&quot;forked&quot;, &quot;demonic&quot;]
		},
		breasts: {
			defaultNumber: 2
		},
		vaginas: {
			defaultNumber: 1
		}
	},
	LORD_OF_LUST: {
		name: &quot;Lord of Lust&quot;,
		namePlural: &quot;Lords of Lust&quot;,
		heads: {
			defaultNumber: 1,
			raceTexture: [&quot;demonic&quot;]
		},
		eyes: {
			defaultNumber: 2,
			raceTexture: [&quot;demonic&quot;, &quot;slitted&quot;]
		},
		jaws: {
			defaultNumber: 1,
			raceTexture: [&quot;sharp&quot;, &quot;demonic&quot;, &quot;devilish&quot;]
		},
		teeths: {
			defaultNumber: 1,
			raceTexture: [&quot;razor sharp&quot;, &quot;monstrous&quot;]
		},
		hands: {
			defaultNumber: 2,
			raceTexture: [&quot;clawed&quot;, &quot;scaled&quot;]
		},
		horns: {
			defaultNumber: 4,
			raceTexture: [&quot;straight&quot;, &quot;demonic&quot;]
		},
		tongues: {
			defaultNumber: 1,
			raceTexture: [&quot;flexible&quot;, &quot;forked&quot;]
		},
		arms: {
			defaultNumber: 2,
			raceTexture: [&quot;scaled&quot;]
		},
		pecs: {
			defaultNumber: 2,
			raceTexture: [&quot;scaled&quot;]
		},
		abdominals: {
			defaultNumber: 6,
			raceTexture: [&quot;scaled&quot;]
		},
		cocks: {
			defaultNumber: 1,
			raceTexture: [&quot;slick&quot;, &quot;oily&quot;]
		},
		balls: {
			defaultNumber: 2,
			raceTexture: [&quot;churning&quot;]
		},
		legs: {
			defaultNumber: 2,
			raceTexture: [&quot;scaled&quot;]
		},
		tails: {
			defaultNumber: 1,
			raceTexture: [&quot;forked&quot;, &quot;demonic&quot;]
		},
		breasts: {
			defaultNumber: 2
		},
		vaginas: {
			defaultNumber: 1
		}
	},
	NAGA: {
		name: &quot;Naga&quot;,
		namePlural: &quot;Naga&quot;,
		heads: {
			defaultNumber: 1,
			raceTexture: [&quot;serpentine&quot;]
		},
		eyes: {
			defaultNumber: 2,
			raceTexture: [&quot;slitted&quot;]
		},
		jaws: {
			defaultNumber: 1,
			raceTexture: [&quot;serpentine&quot;]
		},
		teeths: {
			defaultNumber: 1,
			raceTexture: [&quot;sharp&quot;]
		},
		hands: {
			defaultNumber: 2,
			raceTexture: [&quot;clawed&quot;, &quot;scaled&quot;]
		},
		tongues: {
			defaultNumber: 1,
			raceTexture: [&quot;forked&quot;]
		},
		arms: {
			defaultNumber: 2,
			raceTexture: [&quot;scaled&quot;]
		},
		pecs: {
			defaultNumber: 2,
			raceTexture: [&quot;scaled&quot;]
		},
		abdominals: {
			defaultNumber: 8,
			raceTexture: [&quot;scaled&quot;]
		},
		cocks: {
			defaultNumber: 2,
			raceTexture: [&quot;tapered&quot;, &quot;oily&quot;]
		},
		balls: {
			defaultNumber: 4,
			raceTexture: [&quot;scaly&quot;]
		},
		tails: {
			defaultNumber: 1,
			raceTexture: [&quot;sprawling&quot;, &quot;serpentine&quot;]
		},
		breasts: {
			defaultNumber: 2
		},
		vaginas: {
			defaultNumber: 1
		}
	},
	SYMBIOTE: {
		name: &quot;Symbiote&quot;,
		namePlural: &quot;Symbiotes&quot;,
		heads: {
			defaultNumber: 1,
			raceTexture: [&quot;sinister&quot;]
		},
		eyes: {
			defaultNumber: 2,
			raceTexture: [&quot;glowing&quot;]
		},
		jaws: {
			defaultNumber: 1,
			raceTexture: [&quot;wide&quot;]
		},
		teeths: {
			defaultNumber: 1,
			raceTexture: [&quot;sharp&quot;]
		},
		hands: {
			defaultNumber: 2,
			raceTexture: [&quot;clawed&quot;]
		},
		horns: {
			defaultNumber: 0
		},
		wings: {
			defaultNumber: 0
		},
		tongues: {
			defaultNumber: 1,
			raceTexture: [&quot;prehensile&quot;, &quot;slimy&quot;]
		},
		arms: {
			defaultNumber: 2
		},
		pecs: {
			defaultNumber: 2
		},
		abdominals: {
			defaultNumber: 8
		},
		cocks: {
			defaultNumber: 1,
			raceTexture: [&quot;goo-dripping&quot;]
		},
		balls: {
			defaultNumber: 2
		},
		legs: {
			defaultNumber: 2
		},
		tails: {
			defaultNumber: 0
		},
		breasts: {
			defaultNumber: 2
		},
		vaginas: {
			defaultNumber: 1
		}
	},
	CUSTOM: {
		name: undefined,
		namePlural: undefined,
		heads: {
			defaultNumber: 0,
			raceTexture: undefined
		},
		eyes: {
			defaultNumber: 0,
			raceTexture: undefined
		},
		jaws: {
			defaultNumber: 0,
			raceTexture: undefined
		},
		teeths: {
			defaultNumber: 0,
			raceTexture: undefined
		},
		hands: {
			defaultNumber: 0,
			raceTexture: undefined
		},
		horns: {
			defaultNumber: 0,
			raceTexture: undefined
		},
		wings: {
			defaultNumber: 0,
			raceTexture: undefined
		},
		tongues: {
			defaultNumber: 0,
			raceTexture: undefined
		},
		arms: {
			defaultNumber: 0,
			raceTexture: undefined
		},
		pecs: {
			defaultNumber: 0,
			raceTexture: undefined
		},
		abdominals: {
			defaultNumber: 0,
			raceTexture: undefined
		},
		cocks: {
			defaultNumber: 0,
			raceTexture: undefined
		},
		balls: {
			defaultNumber: 0,
			raceTexture: undefined
		},
		legs: {
			defaultNumber: 0,
			raceTexture: undefined
		},
		tails: {
			defaultNumber: 0,
			raceTexture: undefined
		},
		breasts: {
			defaultNumber: 2,
			raceTexture: undefined
		},
		vaginas: {
			defaultNumber: 1,
			raceTexture: undefined
		}
	}
}&gt;&gt;

&lt;&lt;run setup.fillDestinationArray()&gt;&gt;</tw-passagedata><tw-passagedata pid="8" name="StoryInit_FightMoves" tags="" position="975,100" size="100,100">&lt;&lt;include FightMove_BasicAttack&gt;&gt;
&lt;&lt;include FightMove_Lunge&gt;&gt;
&lt;&lt;include FightMove_Infest&gt;&gt;
&lt;&lt;include FightMove_Inspect&gt;&gt;
&lt;&lt;include FightMove_Goo_Stun&gt;&gt;
&lt;&lt;include FightMove_Masturbate&gt;&gt;
&lt;&lt;include FightMove_IncubusStrike&gt;&gt;
&lt;&lt;include FightMove_IncubusCall&gt;&gt;
&lt;&lt;include FightMove_Hypnotize&gt;&gt;
&lt;&lt;include FightMove_Worship&gt;&gt;
&lt;&lt;include FightMove_DoNothing&gt;&gt;
&lt;&lt;include FightMove_Sigil_Vitality&gt;&gt;
&lt;&lt;include FightMove_Sigil_Pain&gt;&gt;
&lt;&lt;include FightMove_Sigil_Perception&gt;&gt;
&lt;&lt;include FightMove_Sigil_Growth&gt;&gt;
&lt;&lt;include FightMove_ChargedStrike&gt;&gt;
&lt;&lt;include FightMove_Stomp&gt;&gt;
&lt;&lt;include FightMove_WitheringVenom&gt;&gt;
&lt;&lt;include FightMove_Parry&gt;&gt;
&lt;&lt;include FightMove_DragonStrike&gt;&gt;
&lt;&lt;include FightMove_ParasiteLunge&gt;&gt;
&lt;&lt;include FightMove_SummonParasite&gt;&gt;
&lt;&lt;include FightMove_ConsumeLost&gt;&gt;
&lt;&lt;include FightMove_SeedOfRuin&gt;&gt;
&lt;&lt;include FightMove_SlimeLunge&gt;&gt;
&lt;&lt;include FightMove_Slash&gt;&gt;
&lt;&lt;include FightMove_Bash&gt;&gt;
&lt;&lt;include FightMove_Focus&gt;&gt;

&lt;&lt;include StoryInit_SpecialMoves&gt;&gt;

&lt;&lt;set $FightMoves = [$FightMove_Basic_Attack, 
                    $FightMove_Do_Nothing,
                    $FightMove_Submit_Completely,
                    $FightMove_Goo_Stun,
                    $FightMove_IncubusCall,
                    $FightMove_IncubusStrike,
                    $FightMove_Lunge,
                    $FightMove_Infest,
                    $FightMove_Inspect,
                    $FightMove_Masturbate,
                    $FightMove_Sigil_Vitality,
                    $FightMove_Sigil_Pain,
                    $FightMove_Sigil_Perception,
                    $FightMove_Sigil_Growth,
                    $FightMove_ChargedStrike,
                    $FightMove_Stomp,
                    $FightMove_Hypnotize,
                    $FightMove_Worship,
                    $FightMove_WitheringVenom,
                    $FightMove_Parry,
                    $FightMove_DragonStrike,
                    $FightMove_ParasiteLunge,
                    $FightMove_SummonParasite,
                    $FightMove_ConsumeLost,
                    $FightMove_SeedOfRuin,
                    $FightMove_SlimeLunge,
                    $FightMove_Slash,
                    $FightMove_Bash,
                    $FightMove_Focus,
                    ]&gt;&gt;</tw-passagedata><tw-passagedata pid="9" name="StoryInit_FightVariables" tags="" position="1100,100" size="100,100">&lt;&lt;set $FightVariables = 
{
	currentHP: undefined,
	currentStamina: undefined,
    currentArousal: undefined,
	currentFightMove: undefined,
	stunnedDuration: undefined,
	hypnotizedMoveList: [],
	cooldowns: [],
	surrender: false,
	fightModifiers: [],
	currentFightMoveOutcome: undefined,
	persistentEffects: []
}&gt;&gt;</tw-passagedata><tw-passagedata pid="10" name="StoryInit_Music" tags="" position="1225,100" size="100,100">&lt;&lt;cacheaudio &quot;village&quot; &quot;https://sombreve.github.io/Dawn-of-Corruption-Site/Music/village_theme.mp3&quot;&gt;&gt;
&lt;&lt;cacheaudio &quot;manor&quot; &quot;https://sombreve.github.io/Dawn-of-Corruption-Site/Music/manor_theme.mp3&quot;&gt;&gt;

&lt;&lt;createaudiogroup &quot;:ui&quot;&gt;&gt;
	&lt;&lt;track &quot;village&quot;&gt;&gt;
    &lt;&lt;track &quot;manor&quot;&gt;&gt;
&lt;&lt;/createaudiogroup&gt;&gt;</tw-passagedata><tw-passagedata pid="11" name="StoryInit_QuestVariables" tags="" position="100,225" size="100,100">/*debug*/
/*&lt;&lt;set $Quest_CanExplore = true&gt;&gt;*/
&lt;&lt;set $Quest_CanExplore = true&gt;&gt;

/*debug*/
/*&lt;&lt;set $Quest_InProgress = [$Quest_MQ002]&gt;&gt;*/
&lt;&lt;set $Quest_InProgress = []&gt;&gt;</tw-passagedata><tw-passagedata pid="12" name="StoryInit_RandomEncounters" tags="" position="225,225" size="100,100">&lt;&lt;set $EasyRandomEncounters = [&quot;CharacterSheet_Imp&quot;, &quot;CharacterSheet_Tok&quot;, &quot;CharacterSheet_Slime&quot;]&gt;&gt;
&lt;&lt;set $MediumRandomEncounters = [&quot;CharacterSheet_Lakkos&quot;, &quot;CharacterSheet_Lost_Entity&quot;, &quot;CharacterSheet_Lost_Naga&quot;]&gt;&gt;</tw-passagedata><tw-passagedata pid="13" name="StoryInit_SpecialMoves" tags="" position="350,225" size="100,100">&lt;&lt;set $Special_Move_Stunned =
{
	name: &quot;Stunned&quot;,
	preparation: function(character, target)
	{
		return character.info.name + &quot; is stunned and cannot move!&quot;
	},
	attackAttemptDesc: function(character, target)
	{
		if(character.fight.variables.stunnedDuration &gt; 0)
		{
			return character.info.name + &quot; tries to snap out of it.&quot;
		}
		else
		{
			return character.info.name + &quot; came back to their senses and is readying their next attack!&quot;
		}
		
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: 0,
	staminaCost: 0,
	critMod: 100,
	skillType: &quot;special&quot;,
	skillStatsToDescriptionSpacing: 1,
	skillDescription: &quot;Try to regain your senses.&quot;,
	additionalEffects: []
}&gt;&gt;</tw-passagedata><tw-passagedata pid="14" name="StoryInit_StateDrivenModifiers" tags="" position="475,225" size="100,100">&lt;&lt;set $FightStateDrivenModifiers = [$Bigger_Than_Target_1, $Bigger_Than_Target_2, $Bigger_Than_Target_3]&gt;&gt;</tw-passagedata><tw-passagedata pid="15" name="StoryInit_UI" tags="" position="600,225" size="100,100">&lt;&lt;run setup.updateStaticCorruptionUI(State.variables.CharacterSheet_Player)&gt;&gt;</tw-passagedata><tw-passagedata pid="16" name="StoryInit_UniversalFlavour" tags="" position="725,225" size="100,100">&lt;&lt;set $UniversalFlavour =
{
	basicAttackAttemptFlavour: {
		heightFlavour: {
			small:[
				&quot;The enemy rushes in and attacks.&quot;
			],
			medium:[
				&quot;The enemy barrels forward toward you, throwing his weight behind his attack.&quot;
			],
			large:[
				&quot;The enemy stomps forward and swings a massive fist.&quot;
			],
			huge:[
				&quot;The enemy&#39;s @[all|huge|arms|noverb] hurtle down toward you.&quot;
			],
		},
		corruptionFlavour: {
			corrupt75: [
				&quot;A trail of purple energy flows from his knuckles.&quot;
			],
			corrupt100: [
				&quot;Each vein in his hand and arm burns with a tainted purple hue, energy rolls off of his skin as tendrils of dark power.&quot;
			],
		},
	},
	basicAttackPrepFlavour :{
		heightFlavour: 
		{
			small: [
				&quot;hops between each foot, ready to feint and strike at any moment.&quot;,
				&quot;braces himself for the battle.&quot;
			],
			medium: [
				&quot;rolls his boulder like shoulders, ready to strike.&quot;,
				&quot;is stretching his limbs, ready to wrestle.&quot;
			],
			large: [
				&quot;rakes his large feet across the ground, ready to charge.&quot;,
				&quot;tenses his muscles. His bulky form creaks with strength, with the anticipation of battle.&quot;
			],
			huge: [
				&quot;flexes gargantuan muscles, ready to put each rolling mountain to use.&quot;,
				&quot;stomps his massive feet as he readies himself for combat. The earth quivers.&quot;,
				&quot;cracks his massive knuckles, they sound like thunder across the battlefield.&quot;
			],
		},
		corruptionFlavour: {
			corrupt50: [
				&quot;The air feels wrong around this creature.&quot;
			],
			corrupt75: [
				&quot;A terrible darkness spreads across the ground from this creature&#39;s feet.&quot;
			],
			corrupt100: [
				&quot;Purple and black tendrils of energy are breaking out from the ground around this creature&#39;s feet.&quot;
			],
		},
		
	},
	sizeDescriptionFlavour :{
		heightFlavour: {
			small: [
				&quot;tiny&quot;,
				&quot;small&quot;,
				&quot;minute&quot;,
				&quot;little&quot;
			],
			medium: [
				&quot;large&quot;,
				&quot;sizeable&quot;,
				&quot;hefty&quot;,
				&quot;burly&quot;
			],
			large: [
				&quot;huge&quot;,
				&quot;massive&quot;,
				&quot;towering&quot;,
				&quot;humongous&quot;
			],
			huge: [
				&quot;immense&quot;,
				&quot;titanic&quot;,
				&quot;colossal&quot;,
				&quot;gigantic&quot;
			],
		},
	},
	MuscleGrowthFlavourText :{
		musclesFlavour: {
			small: [
				&quot;muscles harden and pulse with increasing strength. His biceps form fair peaks above well defined forearms. Veins begin peeking through his skin &quot; +
				&quot;as they spread across his growing shoulders and neck. His pecs push outwards, his nipples harden and a moan escapes his mouth as the growth tumbles downward &quot; +
				&quot;like a fresh breath of air through his six pack abs, thighs and calves.&quot;,

				&quot;athletic form hardens as each muscle contracts into picturesque beauty. Every line and crease deepens as the power flowing through him forces his body to &quot; +
				&quot;adapt. His laterals spread wider, his abdominal wall pushes outward and his upper body swells with growing, physical pride.&quot;,
				
				&quot;body convulses as a tingling feeling spreads outwards from his core and to each limb. His body freezes momentarily before a wellspring of growth overtakes him. &quot; +
				&quot;Calves bulge, quads expand and the upper body surges with strength to keep up.&quot;,
				
				&quot;expression shifts into a pleasurable smile. Looking down at his hands, he watches a bubble of growth move from his fingertips &quot; +
				&quot;across his bulging arms and into his pecs. Momentarily, it stops. A worried look overtakes his otherwise calm expression. &quot; +
				&quot;Suddenly, his cock fires an unattural amount of cum. Every pulse of white, every convulsion of his body propels his body upwards and outwards.&quot;,
			],
			medium: [
				&quot;body shudders and he doubles over. His knees hit the ground as he is assaulted by a wave of intense pleasure &quot; +
				&quot;Every burgeoning muscle flexes, each crest and trough grows into mounds that could only be crafted with years of dedication. &quot; +
				&quot;His arms become pillars of strength, his back becomes an atlas of muscles - his pecs begin pushing his growing nipples earthbound and his &quot; +
				&quot;abdominal wall starts shifting from six to eight bricks of power.&quot;,
				
				&quot;mouth spreads into a wide grin as a surreal purple glow spins across the edges of his irises as his veins swell over his body. Not moments later, his cock rises as his limbs pack on &quot; +
				&quot;weight and size. What was once ample, is now in excess. What was once well chiselled is now barelling. He flexes his bicep, watching it rise higher and higher. &quot; +
				&quot;A sinister smile spreads wide across his face - this was only the beginning.&quot;,
				
				&quot;cock jumps to full mast as a sudden growth spurt overtakes his body. He quickly wraps his arms around his chest to feel his pecs compete with his biceps. &quot; +
				&quot;Wave after wave, his arms pushes away from his chest from the sheer size being compressed into them. His legs adopt a wider stance as the war continues below &quot; +
				&quot;with his quads, expanding glutes and growing calves.&quot;,
				
				&quot;body spasms as his powerful muscles all flex at once. His bull like neck pulses larger and begins to threaten the sides of his head. His pecs swell outwards in &quot; +
				&quot;leaps and bounds over a growing and impressive set of eight abs. His hands rove across each expanding inch of flesh, feeling the skin stretch tighter against &quot; +
				&quot;chords of steel that thicken with each passing second.&quot;,
			],
			large: [
				&quot;body shudders. Every boulder contained within him rumbles with an ominous wave of incoming growth. It didn&#39;t matter who or what was watching &quot; +
				&quot;the world stood in stunned silence as his biceps exploded from raw, uncontained power. They barreled outwards until their pulsing peaks began to reach sizes that &quot; +
				&quot;were clearly unnatural. Each pectoral was large enough to be a shelf, and they bounced eagerly as they consumed more and more space in front of him. Large nipples were forced &quot; +
				&quot;further sideways and downwards as more and more space was claimed by their hosts. Thick thighs and glutes became even thicker, pillars that would easily host houses were &quot; +
				&quot;increasing in size before his very eyes.&quot; ,
				
				&quot;bones cracked audibly. Growth was upon him yet again, and this wave was even stronger than the last. With a booming thud, his muscles exploded with new size &quot; +
				&quot;- too much and too fast for his body to contend with. The growth began running rampant; each second packed on more and more until limbs began to lock &quot; +
				&quot;and grind against each other from the lack of any space at all. With a primal roar, he flexes - a beastly mountain of mass - and wills it all to compact inwards. &quot; +
				&quot;control was regained but his body had far from relented his new incredible atlassian size.&quot;,
				
				&quot;mouth opens wide as a primordial roar bellows from his growing form. Bending down, he slams his fist into the ground and a wave of size propells itself &quot; +
				&quot;upwards from the cracked earth; up his forearm, bicep and into his bullish neck. His pectorals push further outwards, forcing his center of gravity forward before &quot; +
				&quot;his waist expands into a pillar of pure power to support his new torso. Sliding outwards from the ground behind him; his legs push each other apart, massaging and &quot; +
				&quot;grinding against his immense cock. The pleasure is too much. With another ear-splitting roar, he arches his back and unleashes a torrential geyser of white.&quot;,
				
				&quot;jaw lowers into abrupt maniacal laughter as he feels the power within him erupt. Like waves from the surface of disturbed water, his entire body groans, creaks and shifts &quot; +
				&quot;as mucles begin to pack onto muscles - chords thicken and roadworks of veins the size of heavy duty pipes spiral across his expanding form. With a mighty stomp &quot; +
				&quot;his growing foot hits the ground, forcing a monstrous wave of size upwards through his calves, into his thighs and finally into his bulging muscular rear. Finally, bringing &quot; +
				&quot;both of his hands together in a mighty clap, his upper body doubles in strength and pure muscle mass.&quot;,
			],
			huge: [
				&quot;movements halt. A deadly silence overtakes the land that he towers over. A rumbling. The sound of war drums, the sound of the Earth roaring its protest against the &quot; +
				&quot;impending change. Then it happened. Mountains that were biceps doubled in size. Pectorals that quake with every minor shift billow outwards. Nipples - hard, large and sensitive &quot; +
				&quot;are exiled into the deepening valley between them and an entire canyon of ten inumanely thick abdominal muscles. Laterals that were wings, were forced wider. Back muscles that &quot; +
				&quot;rippled with pure power expanded and arms that could crush villages grew into monstrosities that the world could never contend with. His cock, large and heavy with muscle &quot; +
				&quot;slowly swings into the air, its growing mass keeping each move sensual to all who would watch. Another rumble. Another catastrophe. Rivers of white explode from its tip into a deluge &quot; +
				&quot;that coats you, the ground and every object close enough to suffer the titanic load unleashed from his apocalyptic sized balls.&quot;,
				
				&quot;gigantic arms fall limp at his side. A loud rumbling, akin to the mighty growl of a beast in heat begins to echo across the land. A dark shadow - the silhouette of &quot; +
				&quot;this monstrous behemoth begins to shudder. The village. Those around it will all bear witness as the colossal titan suddenly shivers. A crack, as loud as thunder &quot; +
				&quot;rockets through the air as the giant grows. Thunderous booms echo around the land; every one heralding the titan&#39;s bones shifting to create more space. The ground shudders as the shadow in the &quot; +
				&quot;distance grows larger. Higher. Wider. There are no human words to describe the sheer size being displayed to the world, no words that exist to describe the mass being &quot; +
				&quot;compacted into that singular point.&quot;,
				
				&quot;cock suddenly stiffens. An unfathomably large spurt of pre jettisons from his cock slit and pools in the lands far below him. The air suddenly becomes hot as a thick &quot; +
				&quot;umistakeable aura of power coats the very fabric of reality. Reality&#39;s will could never stand a chance. To the world&#39;s surprise, the giant shudders and balloons outwards &quot; +
				&quot;in every direction. His forearms are perfect spheres of unadulterad power, pushing against growing biceps and triceps that have long since dwarfed their owner&#39;s head. Their &quot; +
				&quot;towering masses flex upwards and expand outwards, packing on new muscle groups that are not known to mankind. His neck surges outward, practically ungulfing what driving force &quot; +
				&quot;exists behind such a titanic body. His laterals surge outwards, forming an incredibly powerful yet impossible Y-shape. Legs, as built as the foundations of the world, quickly &quot; +
				&quot;explode into sizes which put those natural foundations to shame.&quot;,
			],
		},
	},
	CockGrowthFlavourText :{
		cockSizeFlavour:
		{
			small: [
				&quot;His @[all|cocks|one=throbs~more=throb], harder than it ever has. He looks down, feeling each vein engorge with unnatural thickness. &quot;+
				&quot;Then it hits him, a wave of pleasure grows from the base of his loin. His shaft pulsates wildly as it expands thicker and longer. &quot;+
				&quot;His eyes widen as the growth progresses further up his @[all|cocks|noverb]. &quot; +
				&quot;It&#39;s so long, so thick. And it keeps growing, pushing his fingers wider apart.&quot;,
			],
			medium: [
				&quot;A familiar feeling rushes over him. He grins, looking down at his @[all|cocks|noverb], welcoming a wave of incoming growth. &quot; +
				&quot;It suddenly hits him, like a rush of adrenaline. His @[all|cocks|one=jolts~more=jolt] forward, hard enough to make him lose his balance. &quot; +
				&quot;Suddenly, it comes. He screams in pleasure as his loin grows thicker and longer. Every beat of his heart, &quot;+
				&quot;every flex of his muscles and every breath feed it with more heavy, throbbing flesh. He tries to grasp at his @[all|cocks|noverb] with both hands, &quot;+
				&quot;failing to fully handle his monster as it grows uncontrollably. He throws his head back, moaning deeply enough to cut his breath short. &quot;,
			],
			large: [
				&quot;Suddenly, his @[all|cocks|one=throbs~more=throb]. The sheer need for attention of his monster overwhelms him. &quot; +
				&quot;He tries to grasp the base; he can only tremble in anticipation. &quot; +
				&quot;His @[all|cocks|one=is~more=are] so hot, so full and thick. He shivers at the thought of growing even bigger. &quot; +
				&quot;Jolts of pleasure pulsates from his @[all|cocks|noverb] as it starts growing. He desperately tries to grasp and pleasure the throbbing flesh, but it is too massive for his hands to contain. &quot; +
				&quot;He pushes down and thrust his hips along the ground. The sheer mass of his @[all|cocks|noverb] is still incredibly sensitive; he moans in pleasure as it pushes outward, bigger and bigger. &quot; +
				&quot;He slides his fingers along his slit and moans passionately. Bolts of pleasure pierce him with every contact, &quot;+
				&quot;precum leaks out of his monstrous cock like a damaged dam. His @[all|cocks|one=grows~more=grow] bigger than he thought possible. &quot;+
				&quot;His loin is gigantic, monstrous even; finding anything that can handle him will be a challenge.&quot; ,
			],
			huge: [
				&quot;He feels something coming, something tremendous... A familiar warmth rushes over him; his loin burns with anticipation. &quot; +
				&quot;It keeps building, tingles of pleasure spread from his @[all|cocks|noverb]. This wave of incoming growth is greater than a roaring sea, &quot;+
				&quot;and it keeps building, threatening to swallow him in its eternal pleasure. &quot; +
				&quot;But he welcomes it... He grins madly at his monstrous @[all|cocks|noverb] with an unatural eagerness. And then it happens. &quot;+
				&quot;His @[all|cocks|one=explodes~more=explode] in size, mountains of sensitive flesh burst upwards along his pecs. He rubs it passionately, each touch bringing him close to the edge. &quot; +
				&quot;His veins grow massive, feeding his @[all|cocks|noverb] with untold power. A roar of triumph bursts out of his as his @[all|cocks|noverb] takes over the scenery. &quot;+
				&quot;Everything and everyone gets exposed to the glorious beast he&#39;s packing. They can only stare in awe as the ground rumbles; &quot;+
				&quot;his @[all|cocks|one=strains~more=strain], the land braces. His roars resound throughout the land as an ocean of potent cum rains down on this world once again.&quot;,
			]
		},
	}
}&gt;&gt;</tw-passagedata><tw-passagedata pid="17" name="StoryInit_Widgets" tags="" position="850,225" size="100,100">&lt;&lt;widget &quot;PlayerHeight&quot;&gt;&gt;&lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Player, &quot;height&quot;))&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;PlayerCock&quot;&gt;&gt;&lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Player, &quot;cock&quot;))&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;PlayerRace&quot;&gt;&gt;&lt;&lt;print setup.getRace(State.variables.CharacterSheet_Player.info.anatomy)&gt;&gt;&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget &quot;SymbioteRace&quot;&gt;&gt;&lt;&lt;print setup.getRace(State.variables.CharacterSheet_Player.symbiote.anatomy)&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;SymbioteColor&quot;&gt;&gt;&lt;&lt;print State.variables.CharacterSheet_Player.symbiote.color&gt;&gt;&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget &quot;SymbioteName&quot;&gt;&gt;&lt;&lt;print State.variables.CharacterSheet_Player.symbiote.name&gt;&gt;&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="18" name="StoryInit_WorldState" tags="" position="975,225" size="100,100">&lt;&lt;set $WorldState =
{
    cultManor:
    {
        mainHall:
        {
            isBroken: false,
        },
        eastWing:
        {
            isBroken: false,
        },
        westWingHallway:
        {
            isBroken: false,
        },
        dragonRoom:
        {
            isBroken: false,
        },
        monolithBroken: false,
    },
    apothusChosen:
    {
        essenceLevel: 0,
    },
    apothusTransformed: false,
}&gt;&gt;</tw-passagedata><tw-passagedata pid="19" name="_apothus_fight_sheet" tags="" position="1100,225" size="100,100">&lt;&lt;set $FighterSheet_Apothus =
{
	hp: 320,
	stamina: 15,
	strength: 100,
	critChance: 40,
    critDamage: 1.75,
	arousalGain: 60,
	minArousal: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 12,
	variables: $FightVariables,
	fightMoves: [$FightMove_Basic_Attack, $FightMove_SummonParasite],
	fightReward: $RewardTier.VERY_HIGH,
	encounterIntroText: &quot;&lt;&lt;include Quest_MQ002_ApothusEncounter_FightIntro&gt;&gt;&quot;,
	encounterStartText: &quot;&lt;&lt;include Quest_MQ002_ApothusEncounter_FightStart&gt;&gt;&quot;,
	outcomePlayerWins: &quot;&lt;&lt;include Quest_MQ002_ApothusEncounter_PlayerWins&gt;&gt;&quot;,
	outcomePlayerLoses: &quot;&lt;&lt;include Quest_MQ002_ApothusEncounter_PlayerLoses&gt;&gt;&quot;
}&gt;&gt;</tw-passagedata><tw-passagedata pid="20" name="_apothus_info_sheet" tags="" position="1225,225" size="100,100">&lt;&lt;set $InfoSheet_Apothus =
{
	name: &quot;Apothus&quot;,
	gender: &quot;male&quot;,
	picture:  &quot;https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/aphotus_1st_form.png&quot;,
	corruption: 70,
	muscles: 80,
	height: 156,
	cock: 19,
	balls: 7,
	anatomy: {
		heads: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.PURPLE
		},
		jaws: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		hands: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		horns: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		wings: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.RED
		},
		arms: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		abdominals: {
			number: 6,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		cocks: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		tails: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		}
	},
	alive: true
}&gt;&gt;</tw-passagedata><tw-passagedata pid="21" name="Sheets_Apothus" tags="" position="100,350" size="100,100">&lt;&lt;include &quot;_apothus_text_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_apothus_fight_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_apothus_info_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_apothus_quest_sheet&quot;&gt;&gt;

&lt;&lt;set $CharacterSheet_Apothus = setup.CharacterFactory.createCharacter({id: &quot;CharacterSheet_Apothus&quot;, 
                                                              info: $InfoSheet_Apothus, 
                                                              fight: $FighterSheet_Apothus, 
                                                              quest: $QuestSheet_Apothus, 
                                                              text: $TextSheet_Apothus})&gt;&gt;

&lt;&lt;run $CharacterSheet_Apothus.applyAbilityRuntimeData($Ability_Masochism)&gt;&gt;
&lt;&lt;run $CharacterSheet_Apothus.applyAbilityRuntimeData($Ability_AppetiteForGrowth_2)&gt;&gt;
&lt;&lt;run $CharacterSheet_Apothus.applyAbilityRuntimeData($Ability_BrinkOfMadness)&gt;&gt;</tw-passagedata><tw-passagedata pid="22" name="_apothus_quest_sheet" tags="" position="225,350" size="100,100">&lt;&lt;set $QuestSheet_Apothus =
{
    met: false,
    askedAboutHim: false,
}&gt;&gt;</tw-passagedata><tw-passagedata pid="23" name="_apothus_text_sheet" tags="" position="350,350" size="100,100">&lt;&lt;set $TextSheet_Apothus =
{	
}&gt;&gt;</tw-passagedata><tw-passagedata pid="24" name="_apothus_2nd_form_fight_sheet" tags="" position="475,350" size="100,100">&lt;&lt;set $FighterSheet_Apothus_2nd_Form =
{
	hp: 400,
	stamina: 30,
	strength: 90,
	critChance: 40,
    critDamage: 1.75,
	arousalGain: 60,
	minArousal: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 30,
	variables: $FightVariables,
	fightMoves: [$FightMove_Infest, $FightMove_ConsumeLost, $FightMove_SeedOfRuin],
	fightReward: $RewardTier.VERY_HIGH,
	encounterIntroText: &quot;&lt;&lt;include Quest_MQ002_Apothus_2nd_Form_Encounter_FightIntro&gt;&gt;&quot;,
	encounterStartText: &quot;&lt;&lt;include Quest_MQ002_Apothus_2nd_Form_Encounter_FightStart&gt;&gt;&quot;,
	outcomePlayerWins: &quot;&lt;&lt;include Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins&gt;&gt;&quot;,
	outcomePlayerLoses: &quot;&lt;&lt;include Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses&gt;&gt;&quot;
}&gt;&gt;</tw-passagedata><tw-passagedata pid="25" name="_apothus_2nd_form_info_sheet" tags="" position="600,350" size="100,100">&lt;&lt;set $InfoSheet_Apothus_2nd_Form =
{
	name: &quot;Apothus&quot;,
	gender: &quot;male&quot;,
	corruption: 120,
	muscles: 80,
	height: 156,
	cock: 19,
	balls: 7,
	anatomy: {
		heads: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.PURPLE
		},
		jaws: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		hands: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		horns: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		wings: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.RED
		},
		arms: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		abdominals: {
			number: 6,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		cocks: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		tails: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		}
	},
	alive: true
}&gt;&gt;</tw-passagedata><tw-passagedata pid="26" name="Sheets_Apothus_2nd_Form" tags="" position="725,350" size="100,100">&lt;&lt;include &quot;_apothus_2nd_form_text_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_apothus_2nd_form_fight_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_apothus_2nd_form_info_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_apothus_2nd_form_quest_sheet&quot;&gt;&gt;

&lt;&lt;set $CharacterSheet_Apothus_2nd_Form = setup.CharacterFactory.createCharacter({id: &quot;CharacterSheet_Apothus_2nd_Form&quot;, 
                                                              info: $InfoSheet_Apothus_2nd_Form, 
                                                              fight: $FighterSheet_Apothus_2nd_Form, 
                                                              quest: $QuestSheet_Apothus_2nd_Form, 
                                                              text: $TextSheet_Apothus_2nd_Form})&gt;&gt;

&lt;&lt;run $CharacterSheet_Apothus_2nd_Form.applyAbilityRuntimeData($Ability_AppetiteForGrowth_2)&gt;&gt;
&lt;&lt;run $CharacterSheet_Apothus_2nd_Form.applyAbilityRuntimeData($Ability_HerculeanBuild)&gt;&gt;
&lt;&lt;run $CharacterSheet_Apothus_2nd_Form.applyAbilityRuntimeData($Ability_NeverendingGrowth)&gt;&gt;
&lt;&lt;run $CharacterSheet_Apothus_2nd_Form.applyAbilityRuntimeData($Ability_VigorOfTheEndowed_2)&gt;&gt;
&lt;&lt;run $CharacterSheet_Apothus_2nd_Form.applyAbilityRuntimeData($Ability_KalethsFervour)&gt;&gt;
&lt;&lt;run $CharacterSheet_Apothus_2nd_Form.applyAbilityRuntimeData($Ability_LastStand)&gt;&gt;
&lt;&lt;run $CharacterSheet_Apothus_2nd_Form.applyAbilityRuntimeData($Ability_SombrevesWhisper)&gt;&gt;
&lt;&lt;run $CharacterSheet_Apothus_2nd_Form.applyAbilityRuntimeData($Ability_Masochism)&gt;&gt;
&lt;&lt;run $CharacterSheet_Apothus_2nd_Form.applyAbilityRuntimeData($Ability_UnstoppableExpansion)&gt;&gt;</tw-passagedata><tw-passagedata pid="27" name="_apothus_2nd_form_quest_sheet" tags="" position="850,350" size="100,100">&lt;&lt;set $QuestSheet_Apothus_2nd_Form =
{
    met: false,
    askedAboutHim: false,
}&gt;&gt;</tw-passagedata><tw-passagedata pid="28" name="_apothus_2nd_form_text_sheet" tags="" position="975,350" size="100,100">&lt;&lt;set $TextSheet_Apothus_2nd_Form =
{	
}&gt;&gt;</tw-passagedata><tw-passagedata pid="29" name="_dragon_monk_fight_sheet" tags="" position="1100,350" size="100,100">&lt;&lt;set $FighterSheet_MQ002_DragonMonk =
{
	hp: 280,
	stamina: 17,
	strength: 70,
	critChance: 30,
    critDamage: 1.75,
	arousalGain: 60,
	minArousal: 20,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 12,
	variables: $FightVariables,
	fightMoves: [$FightMove_Basic_Attack, $FightMove_Parry, $FightMove_DragonStrike],
	fightReward: $RewardTier.VERY_HIGH,
	encounterIntroText: &quot;&lt;&lt;include Quest_MQ002_DragonMonkEncounter_FightIntro&gt;&gt;&quot;,
	encounterStartText: &quot;&lt;&lt;include Quest_MQ002_DragonMonkEncounter_FightStart&gt;&gt;&quot;,
	outcomePlayerWins: &quot;&lt;&lt;include Quest_MQ002_DragonMonkEncounter_PlayerWins&gt;&gt;&quot;,
	outcomePlayerLoses: &quot;&lt;&lt;include Quest_MQ002_DragonMonkEncounter_PlayerLoses&gt;&gt;&quot;
}&gt;&gt;</tw-passagedata><tw-passagedata pid="30" name="_dragon_monk_info_sheet" tags="" position="1225,350" size="100,100">&lt;&lt;set $InfoSheet_MQ002_DragonMonk =
{
	name: &quot;Drenth&quot;,
	gender: &quot;male&quot;,
	picture: &quot;https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/drenth.png&quot;,
	pictureCorrupt: &quot;https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/drenth_corrupt.png&quot;,
	pictureFriend: &quot;https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/drenth_friend.png&quot;,
	corruption: 30,
	muscles: 60,
	height: 96,
	cock: 13,
	balls: 5,
	anatomy: {
		heads: {
			number: 1,
			race: State.variables.RacePool.DRAGONBORN,
			colour: State.variables.ColourPool.BLUE
		},
		eyes: {
			number: 2,
			race: State.variables.RacePool.DRAGONBORN,
			colour: State.variables.ColourPool.GREEN
		},
		jaws: {
			number: 1,
			race: State.variables.RacePool.DRAGONBORN,
			colour: State.variables.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: State.variables.RacePool.DRAGONBORN,
			colour: State.variables.ColourPool.DEFAULT
		},
		hands: {
			number: 1,
			race: State.variables.RacePool.DRAGONBORN,
			colour: State.variables.ColourPool.BLUE
		},
		horns: {
			number: 2,
			race: State.variables.RacePool.DRAGONBORN,
			colour: State.variables.ColourPool.DEFAULT
		},
		wings: {
			number: 2,
			race: State.variables.RacePool.DRAGONBORN,
			colour: State.variables.ColourPool.BLUE
		},
		tongues:{
			number: 1,
			race: State.variables.RacePool.DRAGONBORN,
			colour: State.variables.ColourPool.RED
		},
		arms: {
			number: 2,
			race: State.variables.RacePool.DRAGONBORN,
			colour: State.variables.ColourPool.BLUE
		},
		pecs: {
			number: 2,
			race: State.variables.RacePool.DRAGONBORN,
			colour: State.variables.ColourPool.BLUE
		},
		abdominals: {
			number: 6,
			race: State.variables.RacePool.DRAGONBORN,
			colour: State.variables.ColourPool.BLUE
		},
		cocks: {
			number: 1,
			race: State.variables.RacePool.DRAGONBORN,
			colour: State.variables.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: State.variables.RacePool.DRAGONBORN,
			colour: State.variables.ColourPool.BLUE
		},
		legs: {
			number: 2,
			race: State.variables.RacePool.DRAGONBORN,
			colour: State.variables.ColourPool.BLUE
		},
		tails: {
			number: 1,
			race: State.variables.RacePool.DRAGONBORN,
			colour: State.variables.ColourPool.BLUE
		},
		breasts: {
			number: 0,
			race: State.variables.RacePool.DRAGONBORN,
			colour: State.variables.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: State.variables.RacePool.DRAGONBORN,
			colour: State.variables.ColourPool.DEFAULT
		}
	},
	alive: true
}&gt;&gt;</tw-passagedata><tw-passagedata pid="31" name="Sheets_MQ002_DragonMonk" tags="" position="100,475" size="100,100">&lt;&lt;include &quot;_dragon_monk_text_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_dragon_monk_fight_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_dragon_monk_info_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_dragon_monk_quest_sheet&quot;&gt;&gt;

&lt;&lt;set $CharacterSheet_MQ002_DragonMonk = setup.CharacterFactory.createCharacter({id: &quot;CharacterSheet_MQ002_DragonMonk&quot;, 
                                                              info: $InfoSheet_MQ002_DragonMonk, 
                                                              fight: $FighterSheet_MQ002_DragonMonk, 
                                                              quest: $QuestSheet_MQ002_DragonMonk, 
                                                              text: $TextSheet_MQ002_DragonMonk})&gt;&gt;</tw-passagedata><tw-passagedata pid="32" name="_dragon_monk_quest_sheet" tags="" position="225,475" size="100,100">&lt;&lt;set $QuestSheet_MQ002_DragonMonk =
{
    met: false,
    threatened: false,
    askedWhoAreYou: false,
    askedWhyAreYouHere: false,
	askedLookingForSomeone: false,
	infected: false,
	beaten: false,
	beatenCycle: 0,
}&gt;&gt;</tw-passagedata><tw-passagedata pid="33" name="_dragon_monk_text_sheet" tags="" position="350,475" size="100,100">&lt;&lt;set $TextSheet_MQ002_DragonMonk =
{	
}&gt;&gt;</tw-passagedata><tw-passagedata pid="34" name="_elder_fight_sheet" tags="" position="475,475" size="100,100">&lt;&lt;set $FightMove_Elder_Attack =
{
	name: &quot;Attack&quot;,
	preparation: function(character, target)
	{
		return character.info.name + &quot; is crouching with his weapon held firmly.&quot;
	},
	attackAttemptDesc: function(character, target)
	{
		return character.info.name + &quot; rushes in and attacks.&quot;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: 3,
	staminaCost: 0,
	critMod: 0,
	skillDescription: &quot;A basic attack.&quot;,
	additionalEffects: []
}&gt;&gt;

&lt;&lt;set $FightMove_Elder_Do_Nothing =
{
	name: &quot;Do Nothing&quot;,
	preparation: function(character, target)
	{
		var he = setup.getPronoun(character,&quot;pronoun&quot;);

		return character.info.name + &quot; gazes at your monstrous form...&quot;;
	},
	attackAttemptDesc: function(character, target)
	{
		return character.info.name +&quot; strikes your massive form, it does nothing.&quot;;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	doesNothing: true,
	dmg: 0,
	staminaCost: 0,
	critMod: 100,
	skillDescription: &quot;Lets your opponent attack freely.&quot;,
	additionalEffects: []
}&gt;&gt;

&lt;&lt;set $FighterSheet_Elder =
{
	hp: 58,
	stamina: 25,
	strength: 0,
	critChance: 0,
    critDamage: 1.75,
	arousalGain: 0,
	minArousal: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 4,
	variables: $FightVariables,
	fightMoves: [$FightMove_Elder_Attack, $FightMove_Elder_Do_Nothing],
	aiFightStart: function()
	{
		State.variables.CharacterSheet_Player.fight.variables.currentArousal = 70;
		State.variables.CharacterSheet_Player.fight.variables.cantSubmit = true;
	},
	postAttacksAIUpdate: function()
	{
		if(State.variables.HasSymbiote)
		{
			this.variables.sawTransformation = true;
		}
	},
	getNextFightMove: function()
	{
		if(this.variables.sawTransformation)
		{
			return this.fightMoves[1];
		}
		else
		{
			return this.fightMoves[0];
		}
	},
	fightReward: $RewardTier.VERY_LOW,
	encounterIntroText: &quot;intro&quot;,
	encounterStartText: &quot;&lt;&lt;include Quest_MQ001_VisitElder_FightStart&gt;&gt;&quot;,
	outcomePlayerWins: &quot;&lt;&lt;include Quest_MQ001_VisitElder_FightEnd&gt;&gt;&quot;,
	outcomePlayerLoses: &quot;&lt;&lt;include Quest_MQ001_VisitElder_FightEnd&gt;&gt;&quot;
}&gt;&gt;</tw-passagedata><tw-passagedata pid="35" name="_elder_info_sheet" tags="" position="600,475" size="100,100">&lt;&lt;set $InfoSheet_Elder =
{
	name: &quot;The Eldest&quot;,
	gender: &quot;male&quot;,
    corruption: 0,
	muscles: 0,
	height: 73,
	cock: 7,
	balls: 2,
	alive: true
}&gt;&gt;</tw-passagedata><tw-passagedata pid="36" name="Sheets_Elder" tags="" position="725,475" size="100,100">&lt;&lt;include &quot;_elder_fight_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_elder_info_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_elder_quest_sheet&quot;&gt;&gt;


&lt;&lt;set $CharacterSheet_Elder = setup.CharacterFactory.createCharacter({id: &quot;CharacterSheet_Elder&quot;, 
                                                   info: $InfoSheet_Elder, 
                                                   fight: $FighterSheet_Elder, 
                                                   quest: $QuestSheet_Elder, 
                                                   text: undefined})&gt;&gt;</tw-passagedata><tw-passagedata pid="37" name="_elder_quest_sheet" tags="" position="850,475" size="100,100">&lt;&lt;set $QuestSheet_Elder =
{
    met: true
}&gt;&gt;</tw-passagedata><tw-passagedata pid="38" name="_imp_fight_sheet" tags="" position="975,475" size="100,100">&lt;&lt;set $FighterSheet_Imp =
{
	hp: 64,
	stamina: 8,
	strength: 20,
	critChance: 20,
    critDamage: 1.75,
	arousalGain: 20,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	minArousal: 0,
	staminaRecovery: 4,
	variables: $FightVariables,
	fightMoves: [$FightMove_Basic_Attack],
	fightReward: $RewardTier.VERY_LOW,
	encounterIntroText: &quot;&lt;&lt;include Encounter_Intro_Imp&gt;&gt;&quot;,
	encounterStartText: &quot;&lt;&lt;include Encounter_Start_Imp&gt;&gt;&quot;,
	outcomePlayerWins: &quot;&lt;&lt;include Encounter_Win_Imp&gt;&gt;&quot;,
	outcomePlayerLoses: &quot;&lt;&lt;include Encounter_Loss_Imp&gt;&gt;&quot;
}&gt;&gt;</tw-passagedata><tw-passagedata pid="39" name="_imp_info_sheet" tags="" position="1100,475" size="100,100">&lt;&lt;set $InfoSheet_Imp =
{
	name: &quot;Imp&quot;,
	gender: &quot;male&quot;,
	corruption: 50,
	muscles: 0,
	height: 60,
	cock: 10,
	balls: 3,
	alive: true,
	anatomy: {
		heads: {
			number: 1,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		jaws: {
			number: 1,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		hands: {
			number: 2,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		horns: {
			number: 2,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		wings: {
			number: 2,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		arms: {
			number: 2,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		abdominals: {
			number: 6,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		cocks: {
			number: 1,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		tails: {
			number: 1,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		}
	}
}&gt;&gt;</tw-passagedata><tw-passagedata pid="40" name="Sheets_Imp" tags="" position="1225,475" size="100,100">&lt;&lt;include &quot;_imp_text_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_imp_fight_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_imp_info_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_imp_quest_sheet&quot;&gt;&gt;


&lt;&lt;set $CharacterSheet_Imp = setup.CharacterFactory.createCharacter({id: &quot;CharacterSheet_Imp&quot;, 
                                                 info: $InfoSheet_Imp, 
                                                 fight: $FighterSheet_Imp, 
                                                 quest: $QuestSheet_Imp, 
                                                 text: $TextSheet_Imp})&gt;&gt;

&lt;&lt;run $CharacterSheet_Imp.applyAbilityRuntimeData($Ability_AppetiteForGrowth_2)&gt;&gt;
&lt;&lt;run $CharacterSheet_Imp.applyAbilityRuntimeData($Ability_UnstoppableExpansion)&gt;&gt;</tw-passagedata><tw-passagedata pid="41" name="_imp_quest_sheet" tags="" position="100,600" size="100,100">&lt;&lt;set $QuestSheet_Imp =
{
    met: false
}&gt;&gt;</tw-passagedata><tw-passagedata pid="42" name="_imp_text_sheet" tags="" position="225,600" size="100,100">&lt;&lt;set $TextSheet_Imp =
{	
	basicAttackPrepFlavour :{
		heightFlavour: {
			small: [
				&quot;is grining mischieviously, looking for an opportunity to attack.&quot;,
				&quot;flutters about in the air, waiting to strike.&quot;,
				&quot;is licking its lips, staring at you like you&#39;re his next meal.&quot;,
				&quot;runs a finger down his chest, taunting you.&quot;
			],
			medium: [
				&quot;rolls his boulder like shoulders, ready to strike.&quot;,
				&quot;is stretching his limbs, ready to wrestle with you.&quot;,
				&quot;lets his tongue slither over his pecs as he stares you down.&quot;
			],
			large: [
				&quot;growls with powerful brassy tones. He is itching to tussle with you.&quot;,
				&quot;slurps up cascading rivulets of drool. His powerful form bends in anticipation of your next move.&quot;,
				&quot;rakes his large feet across the ground, ready to charge.&quot;
			],
			huge: [
				&quot;flexes gargantuan muscles, letting you know exactly where you stand.&quot;,
				&quot;stomps his massive feet as he readies himself for combat. The earth quivers.&quot;,
				&quot;cracks his massive knuckles, they sound like thunder across the battlefield.&quot;
			],
		},
	},
	encounterStartFlavour :{
		heightFlavour: {
			small: [
				&quot;The small wily imp seems to have a trick or two planned for you.&quot;,
				&quot;The small demon looks at your body, hungrily.&quot;,
				&quot;The tiny demon looks you up and down, sizing you up.&quot;,
				&quot;The small imp zips around in wild loops, clearly excited for its next meal.&quot;
			],
			medium: [
				&quot;rolls his boulder like shoulders, ready to strike.&quot;,
				&quot;is stretching his limbs, ready to wrestle with you.&quot;,
				&quot;lets his tongue slither over his pecs as he stares you down.&quot;
			],
			large: [
				&quot;growls with powerful brassy tones. He is itching to tussle with you.&quot;,
				&quot;slurps up cascading rivulets of drool. His powerful form bends in anticipation of your next move.&quot;,
				&quot;rakes his large feet across the ground, ready to charge.&quot;
			],
			huge: [
				&quot;flexes gargantuan muscles, letting you know exactly where you stand.&quot;,
				&quot;stomps his massive feet as he readies himself for combat. The earth quivers.&quot;,
				&quot;cracks his massive knuckles, they sound like thunder across the battlefield.&quot;
			],
		},
	}
}&gt;&gt;</tw-passagedata><tw-passagedata pid="43" name="_lakkos_fight_sheet" tags="" position="350,600" size="100,100">&lt;&lt;set $FighterSheet_Lakkos =
{
	hp: 100,
	stamina: 25,
	strength: 35,
	critChance: 20,
    critDamage: 1.75,
	arousalGain: 20,
	minArousal: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 14,
	variables: $FightVariables,
	fightMoves: [$FightMove_Basic_Attack, $FightMove_IncubusCall, $FightMove_IncubusStrike],
	fightReward: $RewardTier.MEDIUM,
	encounterIntroText: &quot;&lt;&lt;include Encounter_Intro_Lakkos&gt;&gt;&quot;,
	encounterStartText: &quot;&lt;&lt;include Encounter_Start_Lakkos&gt;&gt;&quot;,
	outcomePlayerWins: &quot;&lt;&lt;include Encounter_Win_Lakkos&gt;&gt;&quot;,
	outcomePlayerLoses: &quot;&lt;&lt;include Encounter_Loss_Lakkos_0&gt;&gt;&quot;
}&gt;&gt;</tw-passagedata><tw-passagedata pid="44" name="_lakkos_info_sheet" tags="" position="475,600" size="100,100">&lt;&lt;set $InfoSheet_Lakkos =
{
	name: &quot;Lakkos&quot;,
	gender: &quot;male&quot;,
    corruption: 40,
	muscles: 0,
	height: 68,
	cock: 9,
	balls: 4,
	alive: true,
    anatomy: {
		heads: {
			number: 1,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		jaws: {
			number: 1,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		hands: {
			number: 2,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		horns: {
			number: 2,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		wings: {
			number: 2,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		arms: {
			number: 2,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		abdominals: {
			number: 6,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		cocks: {
			number: 1,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		tails: {
			number: 1,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: State.variables.RacePool.INCUBUS,
			colour: State.variables.ColourPool.DEFAULT
		}
	}
}&gt;&gt;</tw-passagedata><tw-passagedata pid="45" name="Sheets_Lakkos" tags="" position="600,600" size="100,100">&lt;&lt;include &quot;_lakkos_fight_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_lakkos_info_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_lakkos_quest_sheet&quot;&gt;&gt;

&lt;&lt;set $CharacterSheet_Lakkos = setup.CharacterFactory.createCharacter({id: &quot;CharacterSheet_Lakkos&quot;, 
                                                    info: $InfoSheet_Lakkos, 
                                                    fight:$FighterSheet_Lakkos, 
                                                    quest:$QuestSheet_Lakkos, 
                                                    text: undefined})&gt;&gt;
                                        
&lt;&lt;run $CharacterSheet_Lakkos.applyAbilityRuntimeData($Ability_VigorOfTheEndowed_2)&gt;&gt;</tw-passagedata><tw-passagedata pid="46" name="_lakkos_quest_sheet" tags="" position="725,600" size="100,100">&lt;&lt;set $QuestSheet_Lakkos =
{
	met: false,
	beatenOnce: false
}&gt;&gt;</tw-passagedata><tw-passagedata pid="47" name="_lost_entity_fight_sheet" tags="" position="850,600" size="100,100">&lt;&lt;set $FighterSheet_Lost_Entity =
{
	hp: 164,
	stamina: 16,
	strength: 35,
	critChance: 20,
    critDamage: 1.75,
	arousalGain: 20,
	minArousal: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 8,
	variables: $FightVariables,
	fightMoves: [$FightMove_Basic_Attack, $FightMove_Infest],
	fightReward: $RewardTier.HIGH,
	encounterIntroText: &quot;&lt;&lt;include Encounter_Intro_Lost_Entity&gt;&gt;&quot;,
	encounterStartText: &quot;&lt;&lt;include Encounter_Start_Lost_Entity&gt;&gt;&quot;,
	outcomePlayerWins: &quot;&lt;&lt;include Encounter_Win_Lost_Entity&gt;&gt;&quot;,
	outcomePlayerLoses: &quot;&lt;&lt;include Encounter_Loss_Lost_Entity&gt;&gt;&quot;
}&gt;&gt;</tw-passagedata><tw-passagedata pid="48" name="_lost_entity_info_sheet" tags="" position="975,600" size="100,100">&lt;&lt;set $InfoSheet_Lost_Entity =
{
	name: &quot;Lost Entity&quot;,
	gender: &quot;male&quot;,
    corruption: 70,
	muscles: 30,
	height: 90,
	cock: 23,
	balls: 8,
	alive: true,
	anatomy: {
		heads: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		jaws: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		hands: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		horns: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		wings: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.VIOLET
		},
		arms: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		abdominals: {
			number: 6,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		cocks: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		tails: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		}
	}
}&gt;&gt;</tw-passagedata><tw-passagedata pid="49" name="Sheets_Lost_Entity" tags="" position="1100,600" size="100,100">&lt;&lt;include &quot;_lost_entity_text_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_lost_entity_fight_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_lost_entity_info_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_lost_entity_quest_sheet&quot;&gt;&gt;

&lt;&lt;set $CharacterSheet_Lost_Entity = setup.CharacterFactory.createCharacter({id: &quot;CharacterSheet_Lost_Entity&quot;, 
                                                         info: $InfoSheet_Lost_Entity, 
                                                         fight:$FighterSheet_Lost_Entity, 
                                                         quest:$QuestSheet_Lost_Entity, 
                                                         text: $TextSheet_Lost_Entity})&gt;&gt;

&lt;&lt;run $CharacterSheet_Lost_Entity.applyAbilityRuntimeData($Ability_HerculeanBuild)&gt;&gt;
&lt;&lt;run $CharacterSheet_Lost_Entity.applyAbilityRuntimeData($Ability_NeverendingGrowth)&gt;&gt;</tw-passagedata><tw-passagedata pid="50" name="_lost_entity_quest_sheet" tags="" position="1225,600" size="100,100">&lt;&lt;set $QuestSheet_Lost_Entity =
{
	met: false,
	beatenOnce: false
}&gt;&gt;</tw-passagedata><tw-passagedata pid="51" name="_lost_entity_text_sheet" tags="" position="100,725" size="100,100">&lt;&lt;set $TextSheet_Lost_Entity =
{	
}&gt;&gt;</tw-passagedata><tw-passagedata pid="52" name="_lost_harbinger_fight_sheet" tags="" position="225,725" size="100,100">&lt;&lt;set $FightSheet_Lost_Harbinger =
{
	hp: 80,
	stamina: 20,
	strength: 10,
	critChance: 30,
    critDamage: 1.75,
	arousalGain: 10,
	minArousal: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 2,
	variables: $FightVariables,
	fightMoves: [$FightMove_Basic_Attack, $FightMove_Infest],
	encounterIntroText: &quot;&lt;&lt;include Encounter_Intro_Harbinger&gt;&gt;&quot;
}&gt;&gt;</tw-passagedata><tw-passagedata pid="53" name="_lost_harbinger_info_sheet" tags="" position="350,725" size="100,100">&lt;&lt;set $InfoSheet_Lost_Harbinger =
{
	name: &quot;Lost Harbinger&quot;,
	gender: &quot;male&quot;,
	corruption: 100,
	muscles: 30,
	height: 90,
	cock: 23,
	alive: false,
	anatomy: {
		heads: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		tongues:{
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.VIOLET
		},
		arms: {
			number: 4,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		pecs: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		abdominals: {
			number: 10,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		cocks: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		balls: {
			number: 4,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		tails: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		}
	}
}&gt;&gt;</tw-passagedata><tw-passagedata pid="54" name="Sheets_Lost_Harbinger" tags="" position="475,725" size="100,100">&lt;&lt;include &quot;_lost_harbinger_fight_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_lost_harbinger_text_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_lost_harbinger_info_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_lost_harbinger_quest_sheet&quot;&gt;&gt;

&lt;&lt;set $CharacterSheet_Lost_Harbinger = setup.CharacterFactory.createCharacter({id: &quot;CharacterSheet_Lost_Harbinger&quot;, 
                                                            info: $InfoSheet_Lost_Harbinger, 
                                                            fight:$FightSheet_Lost_Harbinger, 
                                                            quest:$QuestSheet_Lost_Harbinger, 
                                                            text: $TextSheet_Lost_Harbinger})&gt;&gt;</tw-passagedata><tw-passagedata pid="55" name="_lost_harbinger_quest_sheet" tags="" position="600,725" size="100,100">&lt;&lt;set $QuestSheet_Lost_Harbinger =
{
	met: false,
	harbingerName: undefined,
	harbingerRace: undefined
}&gt;&gt;</tw-passagedata><tw-passagedata pid="56" name="_lost_harbinger_text_sheet" tags="" position="725,725" size="100,100">&lt;&lt;set $TextSheet_Lost_Harbinger =
{	
}&gt;&gt;</tw-passagedata><tw-passagedata pid="57" name="_lost_naga_fight_sheet" tags="" position="850,725" size="100,100">&lt;&lt;set $FighterSheet_Lost_Naga =
{
	hp: 180,
	stamina: 22,
	strength: 45,
	critChance: 20,
    critDamage: 1.75,
	arousalGain: 20,
	minArousal: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 14,
	variables: $FightVariables,
	fightMoves: [$FightMove_Basic_Attack, $FightMove_Infest, $FightMove_Hypnotize],
	fightReward: $RewardTier.HIGH,
	encounterIntroText: &quot;&lt;&lt;include Encounter_Intro_Lost_Naga&gt;&gt;&quot;,
	encounterStartText: &quot;&lt;&lt;include Encounter_Start_Lost_Naga&gt;&gt;&quot;,
	outcomePlayerWins: &quot;&lt;&lt;include Encounter_Win_Lost_Naga&gt;&gt;&quot;,
	outcomePlayerLoses: &quot;&lt;&lt;include Encounter_Loss_Lost_Naga_1&gt;&gt;&quot;
}&gt;&gt;</tw-passagedata><tw-passagedata pid="58" name="_lost_naga_info_sheet" tags="" position="975,725" size="100,100">&lt;&lt;set $InfoSheet_Lost_Naga =
{
	name: &quot;Lost Naga&quot;,
	gender: &quot;male&quot;,
    picture: &quot;https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/lost_naga.png&quot;,
    corruption: 80,
	muscles: 30,
	height: 126,
	cock: 30,
	balls: 10,
	anatomy: {
		heads: {
			number: 1,
			race: State.variables.RacePool.NAGA,
			colour: State.variables.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: State.variables.RacePool.NAGA,
			colour: State.variables.ColourPool.DEFAULT
		},
		jaws: {
			number: 1,
			race: State.variables.RacePool.NAGA,
			colour: State.variables.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: State.variables.RacePool.NAGA,
			colour: State.variables.ColourPool.DEFAULT
		},
		hands: {
			number: 2,
			race: State.variables.RacePool.NAGA,
			colour: State.variables.ColourPool.DEFAULT
		},
		horns: {
			number: 0,
			race: State.variables.RacePool.NAGA,
			colour: State.variables.ColourPool.DEFAULT
		},
		wings: {
			number: 0,
			race: State.variables.RacePool.NAGA,
			colour: State.variables.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: State.variables.RacePool.NAGA,
			colour: State.variables.ColourPool.DEFAULT
		},
		arms: {
			number: 2,
			race: State.variables.RacePool.NAGA,
			colour: State.variables.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: State.variables.RacePool.NAGA,
			colour: State.variables.ColourPool.DEFAULT
		},
		abdominals: {
			number: 8,
			race: State.variables.RacePool.NAGA,
			colour: State.variables.ColourPool.DEFAULT
		},
		cocks: {
			number: 2,
			race: State.variables.RacePool.NAGA,
			colour: State.variables.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: State.variables.RacePool.NAGA,
			colour: State.variables.ColourPool.DEFAULT
		},
		legs: {
			number: 0,
			race: State.variables.RacePool.NAGA,
			colour: State.variables.ColourPool.DEFAULT
		},
		tails: {
			number: 1,
			race: State.variables.RacePool.NAGA,
			colour: State.variables.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		}
	},
	alive: true
}&gt;&gt;</tw-passagedata><tw-passagedata pid="59" name="Sheets_Lost_Naga" tags="" position="1100,725" size="100,100">&lt;&lt;include &quot;_lost_naga_fight_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_lost_naga_info_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_lost_naga_quest_sheet&quot;&gt;&gt;

&lt;&lt;set $CharacterSheet_Lost_Naga = setup.CharacterFactory.createCharacter({id: &quot;CharacterSheet_Lost_Naga&quot;, 
                                                       info:  $InfoSheet_Lost_Naga, 
                                                       fight: $FighterSheet_Lost_Naga, 
                                                       quest: $QuestSheet_Lost_Naga, 
                                                       text:  undefined})&gt;&gt;

&lt;&lt;run $CharacterSheet_Lost_Naga.applyAbilityRuntimeData($Ability_AppetiteForGrowth)&gt;&gt;</tw-passagedata><tw-passagedata pid="60" name="_lost_naga_quest_sheet" tags="" position="1225,725" size="100,100">&lt;&lt;set $QuestSheet_Lost_Naga =
{
	met: false,
	beatenOnce: false,
}&gt;&gt;</tw-passagedata><tw-passagedata pid="61" name="_lost_swarm_fight_sheet" tags="" position="100,850" size="100,100">&lt;&lt;set $FightSheet_Swarm =
{
	hp: 80,
	stamina: 20,
	strength: 10,
	critChance: 30,
    critDamage: 1.75,
	arousalGain: 10,
	minArousal: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 2,
	variables: $FightVariables,
	fightMoves: [$FightMove_Basic_Attack, $FightMove_Infest],
	encounterIntroText: &quot;&lt;&lt;include Encounter_Intro_Swarm&gt;&gt;&quot;
}&gt;&gt;</tw-passagedata><tw-passagedata pid="62" name="_lost_swarm_info_sheet" tags="" position="225,850" size="100,100">&lt;&lt;set $InfoSheet_Swarm =
{
	name: &quot;Lost Swarm&quot;,
	gender: &quot;male&quot;,
	numberInSwarm: undefined,
	corruption: 100,
	muscles: 30,
	height: 90,
	cock: 23,
	balls: 8,
	alive: false,
	anatomy: {
		heads: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		tongues:{
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.VIOLET
		},
		arms: {
			number: 4,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		pecs: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		abdominals: {
			number: 10,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		cocks: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		balls: {
			number: 4,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		tails: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		}
	}
}&gt;&gt;</tw-passagedata><tw-passagedata pid="63" name="Sheets_Swarm" tags="" position="350,850" size="100,100">&lt;&lt;include &quot;_lost_swarm_fight_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_lost_swarm_text_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_lost_swarm_info_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_lost_swarm_quest_sheet&quot;&gt;&gt;

&lt;&lt;set $CharacterSheet_Swarm = setup.CharacterFactory.createCharacter({id: &quot;CharacterSheet_Swarm&quot;, 
                                                   info:  $InfoSheet_Swarm, 
                                                   fight: $FightSheet_Swarm, 
                                                   quest: $QuestSheet_Swarm, 
                                                   text:  $TextSheet_Swarm})&gt;&gt;</tw-passagedata><tw-passagedata pid="64" name="_lost_swarm_quest_sheet" tags="" position="475,850" size="100,100">&lt;&lt;set $QuestSheet_Swarm =
{
	met: false,
	firstSwarm: true
}&gt;&gt;</tw-passagedata><tw-passagedata pid="65" name="_lost_swarm_text_sheet" tags="" position="600,850" size="100,100">&lt;&lt;set $TextSheet_Swarm =
{	
}&gt;&gt;</tw-passagedata><tw-passagedata pid="66" name="_minotaur_guard_fight_sheet" tags="" position="725,850" size="100,100">&lt;&lt;set $FighterSheet_MQ002_Guard =
{
	hp: 180,
	stamina: 35,
	strength: 70,
	critChance: 0,
    critDamage: 1.75,
	arousalGain: 10,
	minArousal: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 8,
	variables: $FightVariables,
	fightMoves: [$FightMove_Basic_Attack, $FightMove_ChargedStrike],
	fightReward: $RewardTier.HIGH,
	encounterIntroText: &quot;&quot;,
	encounterStartText: &quot;Minotaur Guard readies his weapon&quot;,
	outcomePlayerWins: &quot;&lt;&lt;include Quest_MQ002_Entrance_PlayerWins&gt;&gt;&quot;,
	outcomePlayerLoses: &quot;&lt;&lt;include Quest_MQ002_Entrance_PlayerLoses&gt;&gt;&quot;
}&gt;&gt;</tw-passagedata><tw-passagedata pid="67" name="_minotaur_guard_info_sheet" tags="" position="850,850" size="100,100">&lt;&lt;set $InfoSheet_MQ002_Guard =
{
	name: &quot;Minotaur Guard&quot;,
	gender: &quot;male&quot;,
	corruption: 0,
	muscles: 80,
	height: 164,
	cock: 18,
	balls: 6,
	anatomy: {
		heads: {
			number: 1,
			race: State.variables.RacePool.MINOTAUR,
			colour: State.variables.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: State.variables.RacePool.MINOTAUR,
			colour: State.variables.ColourPool.DEFAULT
		},
		jaws: {
			number: 1,
			race: State.variables.RacePool.MINOTAUR,
			colour: State.variables.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: State.variables.RacePool.MINOTAUR,
			colour: State.variables.ColourPool.DEFAULT
		},
		hands: {
			number: 2,
			race: State.variables.RacePool.MINOTAUR,
			colour: State.variables.ColourPool.DEFAULT
		},
		horns: {
			number: 2,
			race: State.variables.RacePool.MINOTAUR,
			colour: State.variables.ColourPool.DEFAULT
		},
		wings: {
			number: 0,
			race: State.variables.RacePool.MINOTAUR,
			colour: State.variables.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: State.variables.RacePool.MINOTAUR,
			colour: State.variables.ColourPool.DEFAULT
		},
		arms: {
			number: 2,
			race: State.variables.RacePool.MINOTAUR,
			colour: State.variables.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: State.variables.RacePool.MINOTAUR,
			colour: State.variables.ColourPool.DEFAULT
		},
		abdominals: {
			number: 8,
			race: State.variables.RacePool.MINOTAUR,
			colour: State.variables.ColourPool.DEFAULT
		},
		cocks: {
			number: 1,
			race: State.variables.RacePool.MINOTAUR,
			colour: State.variables.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: State.variables.RacePool.MINOTAUR,
			colour: State.variables.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: State.variables.RacePool.MINOTAUR,
			colour: State.variables.ColourPool.DEFAULT
		},
		tails: {
			number: 1,
			race: State.variables.RacePool.MINOTAUR,
			colour: State.variables.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		}
	},
	alive: true,
}&gt;&gt;</tw-passagedata><tw-passagedata pid="68" name="Sheets_MQ002_Guard" tags="" position="975,850" size="100,100">&lt;&lt;include &quot;_minotaur_guard_fight_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_minotaur_guard_info_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_minotaur_guard_quest_sheet&quot;&gt;&gt;

&lt;&lt;set $CharacterSheet_MQ002_Guard = setup.CharacterFactory.createCharacter({id: &quot;CharacterSheet_MQ002_Guard&quot;, 
                                                         info: $InfoSheet_MQ002_Guard, 
                                                         fight:$FighterSheet_MQ002_Guard, 
                                                         quest:$QuestSheet_MQ002_Guard, 
                                                         text: undefined})&gt;&gt;
                                                
&lt;&lt;run $CharacterSheet_MQ002_Guard.applyAbilityRuntimeData($Ability_Masochism)&gt;&gt;
&lt;&lt;run $CharacterSheet_MQ002_Guard.applyAbilityRuntimeData($Ability_Masochism)&gt;&gt;
&lt;&lt;run $CharacterSheet_MQ002_Guard.applyAbilityRuntimeData($Ability_Masochism)&gt;&gt;</tw-passagedata><tw-passagedata pid="69" name="_minotaur_guard_quest_sheet" tags="" position="1100,850" size="100,100">&lt;&lt;set $QuestSheet_MQ002_Guard =
{
	met: false,
    beaten: false
}&gt;&gt;</tw-passagedata><tw-passagedata pid="70" name="_nyx_parasite_fight_sheet" tags="" position="1225,850" size="100,100">&lt;&lt;set $FighterSheet_MQ002_NyxParasite =
{
	hp: 210,
	stamina: 35,
	strength: 85,
	critChance: 30,
    critDamage: 1.75,
	arousalGain: 10,
	minArousal: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 12,
	variables: $FightVariables,
	fightMoves: [$FightMove_WitheringVenom],
	fightReward: $RewardTier.HIGH,
	encounterIntroText: &quot;&lt;&lt;include Quest_MQ002_NyxParasiteEncounter_FightIntro&gt;&gt;&quot;,
	encounterStartText: &quot;The Nyx Parasite crawls silently towards you.&quot;,
	outcomePlayerWins: &quot;&lt;&lt;include Quest_MQ002_NyxParasiteEncounter_PlayerWins&gt;&gt;&quot;,
	outcomePlayerLoses: &quot;&lt;&lt;include Quest_MQ002_NyxParasiteEncounter_PlayerLoses&gt;&gt;&quot;
}&gt;&gt;</tw-passagedata><tw-passagedata pid="71" name="_nyx_parasite_info_sheet" tags="" position="100,975" size="100,100">&lt;&lt;set $InfoSheet_MQ002_NyxParasite =
{
	name: &quot;Nyx Parasite&quot;,
	gender: &quot;male&quot;,
    picture: &quot;https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/nyx_parasite.png&quot;,
	corruption: 90,
	muscles: 10,
	height: 80,
	cock: 2,
	balls: 1,
	alive: true,
}&gt;&gt;</tw-passagedata><tw-passagedata pid="72" name="Sheets_MQ002_NyxParasite" tags="" position="225,975" size="100,100">&lt;&lt;include &quot;_nyx_parasite_fight_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_nyx_parasite_info_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_nyx_parasite_quest_sheet&quot;&gt;&gt;

&lt;&lt;set $CharacterSheet_MQ002_NyxParasite = setup.CharacterFactory.createCharacter({id: &quot;CharacterSheet_MQ002_NyxParasite&quot;, 
                                                               info:  $InfoSheet_MQ002_NyxParasite, 
                                                               fight: $FighterSheet_MQ002_NyxParasite, 
                                                               quest: $QuestSheet_MQ002_NyxParasite, 
                                                               text:  undefined})&gt;&gt;</tw-passagedata><tw-passagedata pid="73" name="_nyx_parasite_quest_sheet" tags="" position="350,975" size="100,100">&lt;&lt;set $QuestSheet_MQ002_NyxParasite =
{
	met: false
}&gt;&gt;</tw-passagedata><tw-passagedata pid="74" name="_ortha_fight_sheet" tags="" position="475,975" size="100,100">&lt;&lt;set $FighterSheet_Ortha =
{
	hp: 50000,
	stamina: 420,
	strength: 34000,
	critChance: 69,
    critDamage: 3,
	arousalGain: 40,
	minArousal: 50,
    growthMultiplier: 99,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 80,
	variables: $FightVariables,
	fightMoves: [$FightMove_Basic_Attack, $FightMove_DragonStrike],
	fightReward: $RewardTier.VERY_HIGH,
	encounterIntroText: &quot;&lt;&lt;include Encounter_Intro_Ortha&gt;&gt;&quot;,
	encounterStartText: &quot;&lt;&lt;include Encounter_Start_Ortha&gt;&gt;&quot;,
	outcomePlayerWins: &quot;&lt;&lt;include Encounter_Win_Ortha&gt;&gt;&quot;,
	outcomePlayerLoses: &quot;&lt;&lt;include Encounter_Loss_Ortha&gt;&gt;&quot;
}&gt;&gt;</tw-passagedata><tw-passagedata pid="75" name="_ortha_info_sheet" tags="" position="600,975" size="100,100">&lt;&lt;set $InfoSheet_Ortha =
{
	name: &quot;Ortha&quot;,
	gender: &quot;male&quot;,
    corruption: 0,
	muscles: 35000,
	height: 680000000,
	cock: 90000000,
	balls: 40000000,
	alive: true,
    anatomy: {
		heads: {
			number: 1,
			race: State.variables.RacePool.BEHEMOTH,
			colour: State.variables.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: State.variables.RacePool.BEHEMOTH,
			colour: State.variables.ColourPool.DEFAULT
		},
		jaws: {
			number: 1,
			race: State.variables.RacePool.BEHEMOTH,
			colour: State.variables.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: State.variables.RacePool.BEHEMOTH,
			colour: State.variables.ColourPool.DEFAULT
		},
		hands: {
			number: 4,
			race: State.variables.RacePool.BEHEMOTH,
			colour: State.variables.ColourPool.DEFAULT
		},
		horns: {
			number: 4,
			race: State.variables.RacePool.BEHEMOTH,
			colour: State.variables.ColourPool.DEFAULT
		},
		wings: {
			number: 0,
			race: State.variables.RacePool.BEHEMOTH,
			colour: State.variables.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: State.variables.RacePool.BEHEMOTH,
			colour: State.variables.ColourPool.DEFAULT
		},
		arms: {
			number: 4,
			race: State.variables.RacePool.BEHEMOTH,
			colour: State.variables.ColourPool.DEFAULT
		},
		pecs: {
			number: 4,
			race: State.variables.RacePool.BEHEMOTH,
			colour: State.variables.ColourPool.DEFAULT
		},
		abdominals: {
			number: 6,
			race: State.variables.RacePool.BEHEMOTH,
			colour: State.variables.ColourPool.DEFAULT
		},
		cocks: {
			number: 3,
			race: State.variables.RacePool.BEHEMOTH,
			colour: State.variables.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: State.variables.RacePool.BEHEMOTH,
			colour: State.variables.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: State.variables.RacePool.BEHEMOTH,
			colour: State.variables.ColourPool.DEFAULT
		},
		tails: {
			number: 1,
			race: State.variables.RacePool.BEHEMOTH,
			colour: State.variables.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: State.variables.RacePool.BEHEMOTH,
			colour: State.variables.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: State.variables.RacePool.BEHEMOTH,
			colour: State.variables.ColourPool.DEFAULT
		}
	}
}&gt;&gt;</tw-passagedata><tw-passagedata pid="76" name="Sheets_Ortha" tags="" position="725,975" size="100,100">&lt;&lt;include &quot;_ortha_fight_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_ortha_info_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_ortha_quest_sheet&quot;&gt;&gt;

&lt;&lt;set $CharacterSheet_Ortha = setup.CharacterFactory.createCharacter({id: &quot;CharacterSheet_Ortha&quot;, 
                                                    info: $InfoSheet_Ortha, 
                                                    fight:$FighterSheet_Ortha, 
                                                    quest:$QuestSheet_Ortha, 
                                                    text: undefined})&gt;&gt;
                                        
&lt;&lt;run $CharacterSheet_Ortha.applyAbilityRuntimeData($Ability_VigorOfTheEndowed_2)&gt;&gt;
&lt;&lt;run $CharacterSheet_Ortha.applyAbilityRuntimeData($Ability_AppetiteForGrowth_2)&gt;&gt;
&lt;&lt;run $CharacterSheet_Ortha.applyAbilityRuntimeData($Ability_CodexPassion)&gt;&gt;
&lt;&lt;run $CharacterSheet_Ortha.applyAbilityRuntimeData($Ability_UnstoppableExpansion)&gt;&gt;
&lt;&lt;run $CharacterSheet_Ortha.applyAbilityRuntimeData($Ability_UnderTheEyeOfOrtha)&gt;&gt;
&lt;&lt;run $CharacterSheet_Ortha.applyAbilityRuntimeData($Ability_OrgasmicGrowth)&gt;&gt;
&lt;&lt;run $CharacterSheet_Ortha.applyAbilityRuntimeData($Ability_Oath_Containment)&gt;&gt;
&lt;&lt;run $CharacterSheet_Ortha.applyAbilityRuntimeData($Ability_NeverendingGrowth)&gt;&gt;
&lt;&lt;run $CharacterSheet_Ortha.applyAbilityRuntimeData($Ability_LastStand)&gt;&gt;
&lt;&lt;run $CharacterSheet_Ortha.applyAbilityRuntimeData($Ability_HerculeanBuild)&gt;&gt;</tw-passagedata><tw-passagedata pid="77" name="_ortha_quest_sheet" tags="" position="850,975" size="100,100">&lt;&lt;set $QuestSheet_Ortha =
{
	beatenOnce: false,
}&gt;&gt;</tw-passagedata><tw-passagedata pid="78" name="_player_fight_sheet" tags="" position="975,975" size="100,100">&lt;&lt;set $FighterSheet_Player =
{
	hp: 40,
	stamina: 20,
	strength: 5,
	critChance: 10,
	critDamage: 1.75,
	arousalGain: 20,
	actionSlots: 3,
	comboMovesPerTurn: 4,
    essenceModifierToAdd: 0,
	growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	minArousal: 0,
	staminaRecovery: 2,
	variables: $FightVariables,
	fightMoves: [$FightMove_Basic_Attack, $FightMove_Slash, $FightMove_Bash, $FightMove_Sigil_Perception, $FightMove_Focus, $FightMove_Do_Nothing, $FightMove_Submit_Completely],
	abilities: [],
	outcomePlayerWins: &quot;&quot;,
	outcomePlayerLoses: &quot;&quot;
}&gt;&gt;</tw-passagedata><tw-passagedata pid="79" name="_player_info_sheet" tags="" position="1100,975" size="100,100">&lt;&lt;set $InfoSheet_Player =
{
	name: &quot;Player&quot;,
	gender: &quot;male&quot;,
	corruption: 0,
	muscles: 0,
	height: 68,
	cock: 6,
	balls: 2,
	anatomy: {
		heads: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		jaws: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		hands: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		horns: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		wings: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		arms: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		abdominals: {
			number: 6,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		cocks: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		tails: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		}
	}
}&gt;&gt;</tw-passagedata><tw-passagedata pid="80" name="Sheets_Player" tags="" position="1225,975" size="100,100">&lt;&lt;include &quot;_player_text_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_player_fight_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_player_info_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_symbiote_info_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_player_quest_sheet&quot;&gt;&gt;

&lt;&lt;set $CharacterSheet_Player = setup.CharacterFactory.createCharacter({id: &quot;CharacterSheet_Player&quot;,
                                                    info: $InfoSheet_Player,
                                                    symbiote: $InfoSheet_Symbiote,  
                                                    fight:$FighterSheet_Player, 
                                                    quest:$QuestSheet_Player, 
                                                    text: $TextSheet_Player}
)&gt;&gt;

&lt;&lt;script&gt;&gt;
console.log(State.variables.CharacterSheet_Player.symbiote.anatomy)
&lt;&lt;/script&gt;&gt;
&lt;&lt;run setup.setRace($CharacterSheet_Player.symbiote.anatomy, &quot;symbiote&quot;)&gt;&gt;
&lt;&lt;set $CharacterSheet_Player.symbiote.color = $ColourPool.WHITE&gt;&gt;
&lt;&lt;set $CharacterSheet_Player.symbiote.name = &quot;Echo&quot;&gt;&gt;

&lt;&lt;set $CharacterSheet_Player.fight.fightMoves[0].equipped = true&gt;&gt;
&lt;&lt;set $CharacterSheet_Player.fight.fightMoves[1].equipped = true&gt;&gt;
&lt;&lt;set $CharacterSheet_Player.fight.fightMoves[2].equipped = true&gt;&gt;
&lt;&lt;set $CharacterSheet_Player.fight.fightMoves[3].equipped = true&gt;&gt;
&lt;&lt;set $CharacterSheet_Player.fight.fightMoves[4].equipped = true&gt;&gt;</tw-passagedata><tw-passagedata pid="81" name="_player_quest_sheet" tags="" position="100,1100" size="100,100">&lt;&lt;set $QuestSheet_Player = 
{
	met: true,
	curseOfTheNagaStatDrain:
	{
		muscles: 0,
		height: 0,
		cock: 0,
		balls: 0,
	},
	nyxParasiteInfections: 0,
	oaths:
	{
		drenth: $Oath.NONE,
        apothus: $Oath.NONE,
	},
	exploration:
	{
		easternFirstTime: false,
		apothusRealmFirstTime: true,
	}
}&gt;&gt;</tw-passagedata><tw-passagedata pid="82" name="_player_text_sheet" tags="" position="225,1100" size="100,100">&lt;&lt;set $TextSheet_Player = 
{
	mergeLost1 :{
		heightFlavour: {
			small: [
				&quot;So could you – the power that this corrupting essence could bring. You move toward him, and straddle his monstrous abs. &quot;+
				&quot;You slide a hand down the length of one of your @[1|cocks|noverb] and push it into the sea of black.&quot;+
				&quot;\n\nA surge of fluid takes you by surprise as the corruption rushes into your enlarged cum pipe.&quot;+
				&#39;\n\n&quot;Mrhhh! Mooooore....&quot; you rumble, lustfully.&#39;+
				&quot;\n\nYou smile at your victim, arch your back and plant your lips back onto his. Another rush of black blasts its way into your throat. &quot;+
				&quot;The ooze coils around your @[all|tongues|noverb] and floods into body with reckless abandon.&quot;+
				&#39;\n\n&quot;GRAAAAHHHHH!&quot;&#39;+
				&quot;\n\nYour muscles throb with power. A muffled roar escapes your throat as you push your @[all|tongues|noverb] deeper into the Lost’s mouth.&quot;+
				&quot;\n\nYou sit there, pumping your @[all|cocks|noverb] over his chest, locked in an endless kiss as his size begins to recede underneath you. &quot;
			],
			medium: [
				&quot;So could you – the power that this corrupting essence could bring. You move toward him, and straddle his monstrous abs. &quot;+
				&quot;You slide a hand down the length of one of your @[1|cocks|noverb] and push it into the sea of black.&quot;+
				&quot;\n\nA surge of fluid takes you by surprise as the corruption rushes into your enlarged urethra.&quot;+
				&#39;\n\n&quot;Mrhhh! Mooooore....&quot; you rumble, lustfully.&#39;+
				&quot;\n\nYou smile at your victim, arch your back and plant your lips back onto his. Another rush of black blasts its way into your throat. &quot;+
				&quot;The ooze coils around your @[all|tongues|noverb] and floods into body with reckless abandon.&quot;+
				&#39;\n\n&quot;GRAAAAHHHHH!&quot;&#39;+
				&quot;\n\nYour muscles throb with power. A muffled roar escapes your throat as you push your @[all|tongues|noverb] deeper into the Lost’s mouth.&quot;+
				&quot;\n\nYou sit there, pumping your @[all|cocks|noverb] over his chest, locked in an endless kiss as his size begins to recede underneath you. &quot;
			],
			large: [
				&quot;So could you – the power that this corrupting essence could bring. You move toward him and stand over his monstrous form. &quot;+
				&quot;You slide a hand down the length of one of your @[1|cocks|noverb] and push the tip so that its massive head hovers over his face. &quot;+
				&quot;Your cum pipe widens as your @[1|cocks|noverb] swallows his features. &quot;+
				&quot;\n\nA barrage of fluid takes you by surprise as the corruption rushes into your enlarged urethra.&quot;+
				&#39;\n\n&quot;Mrhhh! Mooooore....&quot; you rumble, lustfully.&#39;+
				&quot;\n\nYou smile at your victim, arch your back and flex your impeccably strong pelvic muscles. With a resounding gulp, your victim is pulled &quot;+
				&quot;into your cock. You feel it writhe against your inner walls, feel him slowly travel down the length until his massive body lodges itself right above the base of your nutsack.&quot;+
				&#39;\n\n&quot;GRAAAAHHHHH!&quot;&#39;+
				&quot;\n\nYour muscles throb with power. You stifle a moan as you flex harder and send the helpless creature into your eager @[all|balls|noverb]&quot;+
				&quot;\n\nFrantic with rampant desire you pump your @[all|cocks|noverb] as you feel his essence filter into you.&quot;+
				&quot;\n\nWith a final show of absolute dominance, your @[all|balls|noverb] rumble ominously and fire a monstrous load, the Lost riding within the massive stream &quot;+
				&quot;of white. He lands on the floor unceremoniously in front of you.&quot;
			],
			huge: [
				&quot;So could you – the power that this corrupting essence could bring. You place your gigantic feet on either side of his body. &quot;+
				&quot;Hefting up @[1|cocks|a~an] in one hand, you pluck the weak creature up between your fingers. &quot;+
				&quot;You flash your teeth with a snarl and plunge him into the abyss of your urethra.&quot;+
				&quot;\n\nHe was a gnat in the presence of a titan, a small morsel to an insatiable beast. Yet, although a tiny speck, you could feel every one of his movements down your cavernous length. &quot;+
				&quot;What seems to be minutes later, he lands in the unending ocean of seed within your sack and like a volcano ready to erupt, it shudders!&quot;+
				&quot;\n\nA surge of power and lust takes you as the corruption bleeds into your endless reserves. With an earth shattering roar, you grab on to your @[all|cocks|noverb] and &quot;+
				&quot;slide your hands across them with reckless abandon. Your legs shudder as your approach climax - holding on for dear life as an absolutely monstrous orgasm rocks you. Arc after arc after arc blasts upwards into the air, landing far beyond the eye can see on some unsuspecting land.&quot;+
				&#39;\n\n&quot;Mrhhh! Mooooore....&quot; you rumble, lustfully.&#39;+
				&quot;\n\nYou feel him coming up your cum pip, his minuscule form surfing the rapids inside of your spire of flesh. &quot;+
				&quot;With an absolutely amazing show of dexterity for someone of your size, you swing your hand through the mighty stream and catch the creature, the pressure against your hand backlashes onto you and coats you in a layer of alabaster.&quot;+
				&#39;\n\n&quot;GRAAAAHHHHH!&quot;&#39;+
				&quot;\n\nThe heat of your own powerful seed sends you into overdrive and you truly let yourself go! Your @[all|cocks|one=rises~more=rises] with incredible pressure and they slam into your &quot;+
				&quot;chest. An unholy amount of semen blasts into the air, your own ivory stairway to the heavens. &quot;+
				&quot;\n\nYou grin; looks like rainfall could be expected later today. &quot;+
				&quot;\n\nWith a final show of absolute dominance, you unceremoniously dump the creature back onto the floor.&quot;
			],
		}
	},
	lostKiss :{
		heightFlavour: {
			small: [
				&quot;You slide your gooey body over his and he moans from your touch alone. You rub one of your @[2|hands|noverb] across his bulging abs and up to his hard nipple.&quot;+
				&quot;\n\nThe entity inside of you yearns for the darkened soul of the Lost in your thrall. You feel your @[all|tongues|noverb] slip from the confines &quot;+
				&quot;of your mouth and into his open, hot maw. You can taste his thick corruption. You feel your @[all|cocks|noverb] harden again.&quot;
			],
			medium: [
				&quot;You slide your gooey body over his and he moans from your touch alone. You rub one of your @[2|hands|noverb] across his bulging abs and up to his hard nipple.&quot;+
				&quot;\n\nThe entity inside of you yearns for the darkened soul of the Lost in your thrall. You feel your @[all|tongues|noverb] slip from the confines &quot;+
				&quot;of your mouth and into his open, hot maw. You can taste his thick corruption. You feel your @[all|cocks|noverb] harden again.&quot;
			],
			large: [
				&quot;Your gooey body towers over his and he moans from your presence alone. You rub one of your @[1|cocks|noverb] across his bulging abs, pinning him with the weight of it.&quot;+
				&quot;\n\nThe entity inside of you yearns for the darkened soul of the Lost in your thrall. You feel your @[all|tongues|noverb] slip from the confines &quot;+
				&quot;of your mouth, sliding down your @[all|pecs|noverb] and twisting lower until it enters his hot maw. You can taste his thick corruption.&quot;
			],
			huge: [
				&quot;You fall to your massive knees. The Lost&#39;s mouth opens wide in awe at the immensity of your body. You let your @[all|cocks|noverb] fall to the side of him with an earth pounding shudder.&quot;+
				&quot;\n\nThe entity inside of you yearns for the darkened soul of the Lost in your thrall. You feel your @[all|tongues|noverb] slip from the confines &quot;+
				&quot;of your mouth, sliding down your @[all|pecs|noverb] and twisting lower until it enters his hot maw. You can taste his thick corruption.&quot;
			],
		}
	},
	lostFuck2 :{
		heightFlavour: {
			small: [
				&quot;You feel the corruption take root within you. You embrace it, letting its warmth run its proverbial tongues over every inch of you and into your brain. &quot;+
				&quot;Dark whispers fill your mind.&quot;+
				&quot;\n\nYou need to spread.&quot;+
				&quot;\n\nYou need to fuck.&quot;+
				&quot;\n\nMore. More! MORE!&quot;+
				&quot;\n\nYour body flushes with an unnaturally high level of arousal. Your nutsack rumbles and streams of pre launches out of your @[all|cocks|noverb] like a fire-hose. &quot;+
				&quot;\n\nYou growl bestially as you realise your precious sperm is being wasted. Digging your fingers into the Lost’s flesh, you ram your dick into &quot;+
				&quot;his ass until your @[all|balls|noverb] slap hard against his glutes. He snarls with the sudden intrusion.&quot;+
				&quot;\n\nYou piston hard. Relentless. Back. Forward. Back. Forward.&quot;+
				&#39;\n\n&quot;Ah! Fuck!&quot; You feel a mind-shattering orgasm building.&#39;+
				&quot;\n\nThe corrupt creature howls as your @[all|balls|noverb] push out an incredible deluge of ivory into his body. &quot;+
				&quot;His stomach rises beneath you as you keep thrusting and pounding into his sex.&quot;+
				&#39;\n\n&quot;MOOOOOOORE!&quot; You roar as your orgasm intensifies.&#39;+
				&quot;\n\nThe rapture rocks through  your @[all|cocks|noverb] and into every tense fibre underneath your skin.&quot;+
				&quot;\n\nFeeling you grow on top of him and within him – feeling his own stomach dome upwards and push you ever higher sets off the creature’s own orgasm. &quot;+
				&quot;He releases an all-powerful howl and shoots his thick corrupting seed over your chest. The ebon, tar-like sperm showers you from below, coating your entire chest in its inky shade.&quot;
			],
			medium: [
				&quot;You feel the corruption take root within you. You embrace it, letting its warmth run its proverbial tongues over every inch of you and into your brain. &quot;+
				&quot;Dark whispers fill your mind.&quot;+
				&quot;\n\nYou need to spread.&quot;+
				&quot;\n\nYou need to fuck.&quot;+
				&quot;\n\nMore. More! MORE!&quot;+
				&quot;\n\nYour body flushes with an unnaturally high level of arousal. Your nutsack rumbles and streams of pre launches out of your @[all|cocks|noverb] like a firehose. &quot;+
				&quot;\n\nYou growl bestially as you realise your precious sperm is being wasted. Digging your fingers into the Lost’s flesh, you ram your dick into &quot;+
				&quot;his ass until your @[all|balls|noverb] slap hard against his glutes. He snarls with the sudden intrusion.&quot;+
				&quot;\n\nYou piston hard. Relentless. Back. Forward. Back. Forward.&quot;+
				&#39;\n\n&quot;Ah! Fuck!&quot; You feel a mind-shattering orgasm building.&#39;+
				&quot;\n\nThe corrupt creature howls as your @[all|balls|noverb] push out an incredible deluge of ivory into his body. &quot;+
				&quot;His stomach rises beneath you as you keep thrusting and pounding into his sex.&quot;+
				&#39;\n\n&quot;MOOOOOOORE!&quot; You roar as your orgasm intensifies.&#39;+
				&quot;\n\nThe rapture rocks through @[all|cocks|noverb] and into every tense fibre underneath your skin.&quot;+
				&quot;\n\nFeeling you grow on top of him and within him – feeling his own stomach dome upwards and push you ever higher sets off the creature’s own orgasm. &quot;+
				&quot;He releases an all-powerful howl and shoots his thick corrupting seed over your chest. The ebon, tar-like sperm showers you from below, coating your entire chest in its inky shade.&quot;
			],
			large: [
				&quot;You feel the corruption take root within you. You embrace it, letting its warmth run its proverbial tongues over every inch of you and into your brain. Dark whispers fill your mind.&quot;+
				&quot;\n\nYou need to spread.&quot;+
				&quot;\n\nYou need to fuck.&quot;+
				&quot;\n\nMore. More! MORE!&quot;+
				&quot;\n\nYour body flushes with an unnaturally high level of arousal. Your nutsack rumbles and a tidal wave of pre launches out of your &quot;+
				&quot;@[all|cocks|noverb], washing over the Lost in front of you. &quot;+
				&quot;\n\nYou growl bestially as you realise your precious sperm is being wasted. Grabbing the Lost’s torso, you ram your dick &quot;+
				&quot;into his ass until your @[all|balls|noverb] slap hard against his glutes. He snarls with the sudden intrusion, but it quickly turns to a gurgle as your length almost reaches his neck from within.&quot;+
				&quot;\n\nYou piston hard. Relentless. Back. Forward. Back. Forward.&quot;+
				&#39;\n\n&quot;Ah! Fuck!&quot; You feel a mind-shattering orgasm building.&#39;+
				&quot;\n\nThe corrupt creature howls as your balls audibly rumble, shift and unleash a mind blowing torrent of ivory that arcs into the air and &quot;+
				&quot;splatters on the ground. You thrust erratically before falling to the floor. The pleasure is too intense! White pours over everything in sight. &quot;+
				&quot;The Lost is covered. You are covered. An ankle deep pools form around you as you roll in your own steaming virility.&quot;+
				&#39;\n\n&quot;MOOOOOOORE!&quot; You roar as your orgasm intensifies! Your vision is overtaken with alabaster cream.&#39;+
				&quot;\n\nFeeling you grow within him – feeling your hot seed cover every inch of his being sets off the creature’s own orgasm. He gurgles &quot;+
				&quot;beneath the waves and shoots his thick corrupting seed over your chest, the black streaks quickly wash away by the excessive amount of seed around the both of you. &quot;+
				&quot;\n\nYour shoulders slump as you get back to your feet. You still see stars. The creature slowly slurps off of your cock and thuds into the pool &quot;+
				&quot;below with an emphatic splash.&quot;+
				&quot;\n\nThe beast rolls onto his back with a heavy thud; his massive chest heaving up and down with ragged breaths of satisfaction.&quot;
			],
			huge: [
				&quot;\n\nYou feel the corruption take root within you. You embrace it, letting its warmth run its proverbial tongues over every inch of you and into your brain. Dark whispers fill your mind.&quot;+
				&quot;\n\nYou need to spread.&quot;+
				&quot;\n\nYou need to fuck.&quot;+
				&quot;\n\nMore. More! MORE!&quot;+
				&quot;\n\nYour body flushes with an unnaturally high level of arousal. Your @[all|balls|noverb] quake behind you and a flood of thick &quot;+
				&quot;pre launches out of your @[all|cocks|noverb] and cascades over the land. What little trees are around you struggle &quot;+
				&quot;against the sudden onslaught of the teeming river. &quot;+
				&quot;\n\nYou growl bestially as you realise your precious sperm is being wasted. You grab the Lost before his body &quot;+
				&quot;gets swept away with your produce and slam your dick into his ass until his rump slaps hard against your midriff. His snarls are suddenly cut off as &quot;+
				&quot;your @[1|cocks|one=erupts~more=erupts] out of him, his body once again morphing into your oily cocksleeve.&quot;+
				&quot;\n\nGrabbing him, you piston him up and down across your veined length. Relentless. Back. Forward. Back. Forward.&quot;+
				&#39;\n\n&quot;Ah! Fuck!&quot; You feel a mind-shattering orgasm building.&#39;+
				&quot;\n\nThe corrupt creature gurgles as your balls shift, unleashing a mind blowing torrent of white that arcs into the air and splatters onto the ground with incredible &quot;+
				&quot;force. You thrust erratically before falling backwards onto your @[all|balls|noverb]. The pleasure is too intense! White pours over everything in sight.  &quot;+
				&quot;Megaliters of cum pools around you! The land itself begins to cave in under your incredible weight! \n\nLower and lower you sink. Higher and higher the sea rises.&quot;+
				&#39;\n\n&quot;MOOOOOOORE!&quot; You roar as your orgasm intensifies! Your vision is overtaken with alabaster as you submerge yourself into your own lake of seed. &#39;+
				&quot;\n\nFeeling you grow within him – feeling your steaming fluids cover every inch of his being sets off the creature’s own orgasm. He gurgles and shoots his thick corrupting seed into the surrounding waters. &quot;+
				&quot;\n\nThere&#39;s just too much. No matter what you do, you can&#39;t stop! The lake has already overflowed and you keep on at it for hours on end.&quot;+
				&quot;\n\nYou are not sure how much time has passed since your orgasm ended, but you rise out of the lake larger and hornier than ever before. &quot;+
				&quot;You smile as you watch waves of white drip off of you and into your own macro sized cum bath.&quot;+
				&quot;\n\nWith a wet schlorp, you pull the beast off of your @[1|cocks|noverb] once more.&quot;+
				&quot;\n\nThe beast collapses onto his back with a heavy thud; his massive chest heaving up and down as his lungs relieve themselves of your incredible virility.&quot;
			]
		}
	},
	lostFuck1 :{
		heightFlavour: {
			small: [
				&quot;You grasp the monster&#39;s cock. Although dripping with black oil, the skin is rock hard and slowly spreads your fingers wider with every beat of growth. &quot;+
				&quot;He shudders. With a slow, sensual movement, you tighten your digits and squeeze a thick rope of pre out of the tip.&quot;+
				&quot;\n\nAt the same time, you bend your hips backwards and line up your @[2|cocks|one=with%his%tight%anus~more=with%his%anus%and%another%positioned%to%slide%across%his%midriff].&quot;+
				&quot;\n\nYou tease his him, generating lewd moans and gasps as you slide your tip around the rim of his sphincter. He pushes his body against yours, forcing you inside of him.&quot;+
				&quot;\n\nHis ass feels tight, yet the black goo makes the entry as smooth as it can be.&quot;+
				&#39;\n\n&quot;Oh... Hmmm...&quot;&#39;+
				&quot;\n\nYou moan as the corrupt creature clenches his anus around your flesh. His moans turn into desperate grunts and growls as you ease yourself deeper inside of him.&quot;+
				&quot;\n\nThe feeling of his tight virgin ass combined with the goo covering your cock from inside of him, is like nothing you&#39;ve felt before.&quot;+
				&quot;\n\nHis body grows warmer beneath you, almost burning with arousal. You thrust inside him, bring your @[all| arms|noverb] around him and lock lips. &quot;+
				&quot;His tongue darts inside of your mouth as he grabs you, running his meaty hands over your back. One of his legs wrap around you and you both spin in place as he &quot;+
				&quot;grinds his muscular body against yours. As you lay on your back and wrap yourself within his mighty embrace, you feel warmth rush inside of you.&quot;+
				&#39;\n\n&quot;Ah... FUCK... GRAHHHH!&quot;&#39;+
				&quot;\n\nYou flip the beast onto his back with a mighty crash as your orgasm rocks your body into euphoria. His black cock erupts in a fountain of corrupted fluid over you.&quot;+
				&quot;\n\nA small amount of his corrupting essence enters you.&quot;+
				&quot;\n\nYou feel your muscles throb with power.&quot;+
				&quot;\nThe feeling rushes up your legs and into the core of your being.&quot;+
				&quot;\n\nYou pinch your large nipples and groan.&quot;+
				&#39;\n\n&quot;Moooooore...&quot; You growl monstrously.&#39;
			],
			medium: [
				&quot;You grasp the monster&#39;s cock. Although dripping with black oil, the skin is rock hard and slowly spreads your fingers wider with every beat of growth. &quot;+
				&quot;He shudders. With a slow, sensual movement, you tighten your digits and squeeze a thick rope of pre out of the tip.&quot;+
				&quot;\n\nAt the same time, you bend your hips backwards and line up your @[2|cocks|one=with%his%tight%anus~more=with%his%anus%and%another%positioned%to%slide%across%his%midriff].&quot;+
				&quot;\n\nYou tease his him, generating lewd moans and gasps as you slide your tip around the rim of his sphincter. He pushes his body against yours, forcing you inside of him.&quot;+
				&quot;\n\nHis ass feels tight, yet the black goo makes the entry as smooth as it can be.&quot;+
				&#39;\n\n&quot;Oh... Hmmm...&quot;&#39;+
				&quot;\n\nYou moan as the corrupt creature clenches his anus around your flesh. His growls turn into desperate grunts and moans as you ease yourself deeper inside of him.&quot;+
				&quot;\n\nThe feeling of his tight virgin ass combined with the goo covering your cock from inside of him, is like nothing you&#39;ve felt before.&quot;+
				&quot;\n\nHis body grows warmer beneath you, almost burning with arousal. You thrust inside him, bring your @[all| arms|noverb] around him and lock lips. &quot;+
				&quot;His tongue darts inside of your mouth as he grabs you, running his meaty hands over your back. One of his legs wrap around you and you both spin in place as he &quot;+
				&quot;grinds his muscular body against yours. As you lay on your back and wrap yourself within his mighty embrace, you feel warmth rush inside of you.&quot;+
				&#39;\n\n&quot;Ah... FUCK... GRAHHHH!&quot;&#39;+
				&quot;\n\nYou flip the beast onto his back with a mighty crash as your orgasm rocks your body into euphoria. His black cock erupts in a fountain of corrupted fluid over you.&quot;+
				&quot;\n\nA small amount of his corrupting essence enters you.&quot;+
				&quot;\n\nYou feel your muscles throb with power.&quot;+
				&quot;\nThe feeling rushes up your legs and into the core of your being.&quot;+
				&quot;\n\nYou pinch your large nipples and groan.&quot;+
				&#39;\n\n&quot;Moooooore...&quot; You growl monstrously.&#39;
			],
			large: [
				&quot;You grasp the monster&#39;s cock. Although dripping with black oil, the skin is rock hard and slowly spreads your fingers wider with every beat of growth. &quot;+
				&quot;He shudders. With a slow, sensual movement, you tighten your digits and squeeze a thick rope of pre out of the tip.&quot;+
				&quot;\n\nAt the same time, you bend your hips backwards and line up your @[2|cocks|one=with%his%tight%anus~more=with%his%anus%and%another%positioned%to%slide%across%his%midriff].&quot;+
				&quot;\n\nYou tease his him, generating lewd moans and gasps as you slide your tip around the rim of his sphincter. He pushes his body against yours, forcing you inside of him.&quot;+
				&quot;\n\nIt’s an incredibly tight fit. You look down and grin as you see his stomach bulge outward from the sheer size of your tool. Yet, the black goo simply morphs around him to accommodate the size difference. &quot;+
				&#39;\n\n&quot;Oh... Hmmm...&quot;&#39;+
				&quot;\n\nYou moan as the corrupt creature clenches his anus around your flesh. His growls turn into desperate grunts and moans as you push yourself in further. &quot;+
				&quot;Your cock expands with lust, and the creature’s torso distends with a combination of the pre you are leaking within him and the size of your battering ram.&quot;+
				&quot;\n\nThe feeling is like nothing you&#39;ve felt before.&quot;+
				&quot;\n\nHis body grows warmer beneath your weight, almost burning with arousal. You thrust inside him, the tip of your cock peeking out from his throat. &quot;+
				&#39;\n\n&quot;Ah... FUCK... GRAHHHH!&quot;&#39;+
				&quot;\n\nYou slam your @[1|hands|noverb] into the ground, arch your back and unleash a terrifying orgasm that rockets out of the creature’s ass and mouth. &quot;+
				&quot;The Lost&#39;s tools erupts in a fountain of corrupted fluid underneath you, coating your midriff and seeping into your pores.&quot;+
				&quot;\n\nA small amount of his corrupting essence enters you.&quot;+
				&quot;\n\nYou feel your muscles throb with power. &quot;+
				&quot;\n\nThe feeling rushes up your legs and into the core of your being.&quot;+
				&quot;\n\nYou pinch your large nipples and groan. &quot;+
				&#39;\n\n&quot;Moooooore...&quot; You growl monstrously as you pull the creature off of your @[1|cocks|noverb] and throw him to the ground.&#39;
			],
			huge: [
				&quot;You grasp the monster&#39;s cock. Although dripping with black oil, the skin is rock hard and slowly spreads your fingers wider with every beat of growth. &quot;+
				&#39;Impressive, considering how small he is compared to you. He shudders, looking up at your monstrously huge form. With a slow, sensual movement, &#39;+
				&#39;you tighten your digits and squeeze a thick rope of pre out of the tip of his cock.&#39;+
				&#39;\n\nWith a single @[1|hands|noverb], you pick him up off of the ground and line him up with your @[all|pre-leaking|cocks| noverb].&#39;+
				&#39;\n\nYou tease his him, placing his tiny form on its massive swollen head. You smile as his eyes widen at your turgid length. &#39;+
				&#39;\n\nWinner takes all.&#39;+
				&#39;\n\nYou start pressing his anus down and watch as his legs spread wider and wider to accommodate the massive tower. &#39;+
				&#39;If there is anything you have learned from this world, it is that the corruption caters for any size. &#39;+
				&#39;The creature distends further and further, until you wrap his form around your tool like a cocksleeve.&#39;+
				&#39;\n\n&quot;Oh... Hmmm...&quot;&#39;+
				&#39;\n\nYou moan as the corrupt creature’s body clenches around your flesh. &#39;+
				&#39;His growls turn into desperate grunts and moans as you begin to piston your spire of flesh through him. &#39;+
				&#39;Your cock expands with lust, and the creature’s torso distends even further. Fountains of pre fire from your tip with each thrust, pooling below you in lake sized bodies of fluid.&#39;+
				&quot;\n\nThe feeling is like nothing you&#39;ve felt before.&quot;+
				&#39;\n\nHis body grows warmer around your cock, almost burning with arousal. You thrust even harder, your pre turning into waterfalls of white.&#39;+
				&#39;\n\n&quot;Ah... FUCK... GRAHHHH!&quot;&#39;+
				&#39;\n\nYou slam one of your feet into the ground, arch your back and unleash a terrifying orgasm that rockets out of your @[all|cocks|noverb] and coats the land with blankets of ultra fertile sperm. &#39;+
				&quot;The Lost&#39;s tools erupts alongside you in a poor display compared to your own, yet the corruption still coats a portion of your cock.&quot;+
				&#39;\n\nA small amount of his corrupting essence enters you.&#39;+
				&#39;\n\nYou feel your muscles throb with even more power. &#39;+
				&#39;\n\nThe feeling rushes up your legs and into the core of your being.&#39;+
				&#39;\n\nYou pinch your large nipples and groan as your cocksleeve is stretched to its limit.&#39;+
				&#39;\n\n&quot;Moooooore...&quot; You growl monstrously as you pull the creature off of your cock and drop his body to the ground far below you.&#39;
			]
		}
	},
	lostWin1 :{
		heightFlavour: {
			small: [
				&quot;Your hands meet, and your bodies clash for dominance. You struggle as the beast pulls you closer to him. &quot;+
				&quot;Your hard members are close enough to press and rub along each other. The black liquid that coats him smears and spreads across your @[all|cocks|noverb]. &quot;+
				&quot;Suddenly, an immense feeling of arousal shakes you to your core as the beast&#39;s corrupting goo quickly slithers into your slit. &quot;+
				&quot;\n\nYour eyes open wide with renewed vigour and you shove the beast down to the ground. You land on top of its meaty chest, the tip of its pulsating head peeking up from your pecs.&quot;
			],
			medium: [
				&quot;Your @[1|hands|noverb] engulfs his. With a show of strength and size, you pull his captured arm to the side and send him hurtling to the ground. He leaps back up and bear hugs you &quot;+
				&quot; with incredible strength, grinding his cock against your own. The black liquid that coats him smears and spreads across your @[all|cocks|noverb]. &quot;+
				&quot;Suddenly, an immense feeling of arousal shakes you to your core as the beast&#39;s corrupting goo quickly slithers into your slit. &quot;+
				&quot;\n\nYour eyes open wide with renewed vigour and you shove the beast down to the ground. You land on top of its meaty chest, your cocks sandwiched between your bulks.&quot;
			],
			large: [
				&quot;Your @[1|hands|noverb] hurtles toward the Lost, but he dives and angles for your mighty @[all|cocks|noverb]. Although injured, he grabs onto his target&quot;+
				&quot; and shoves his dick into your urethra. Black cum erupts into your shaft and spreads across the insides of it. &quot;+
				&quot;Suddenly, an immense feeling of arousal shakes you to your core as the beast&#39;s corrupting goo quickly slithers into your ballsack. &quot;+
				&quot;\n\nYour eyes open wide with renewed vigour and you shove the beast down to the ground. You press his body into the sand with one @[1|hands|noverb].&quot;
			],
			huge: [
				&quot;Your @[1|hands|noverb] hurtle toward the Lost, but he dives and angles for your @[all|cocks|noverb]. Although injured, he grabs onto his target&quot;+
				&quot; and shoves his entire arm into your urethra. Black goo climbs into your shaft and spreads across the insides of it. &quot;+
				&quot;Suddenly, an immense feeling of arousal shakes you to your core as the beast&#39;s corrupting goo quickly slithers into your ballsack. &quot;+
				&quot;\n\nYour eyes open wide with renewed vigour and you shove the beast down to the ground with earth-breaking fury. You press his entire body into the sand with only three fingers, nearly crushing him.&quot;
			],
		},
	},
	mirror_player_CrotchFlavour: {
		heightFlavour: {
			small: 
			[
				&quot;Running a hand down your body and ever lower, you gently caress your @[all| cocks| noverb]. Each inch of flesh that your fingers &quot; +
				&quot;brush over sends heated waves of pleasure throughout your body. Your efforts reward you with a few spurts of pre. Eager to explore more of yourself, &quot;+
				&quot;you reach down below to feel the weight of your @[all| balls| noverb]. You roll each orb in your hand, gently squeezing them.&quot;
			],
			medium: 
			[
				&quot;Running a hand down your body and ever lower, you gently caress your @[all| cocks| noverb]. Each inch of flesh that your fingers &quot; +
				&quot;brush over sends heated waves of pleasure throughout your body. You marvel at how much flesh extends from your waist. The fact that this &quot;+
				&quot;entire package belongs to you is enough for you to shiver in delight and jettison an average man&#39;s worth of cum as pre.&quot;+
				&quot; Eager to explore more of yourself, you reach down below to feel the weight of your @[all| balls| noverb]. They are heavy in your hands - virile factories ready to be put to work.&quot;
			],
			large: 
			[
				&quot;Running a hand down your body and ever lower, you gently caress your @[all| cocks| noverb]. It&#39;s become impossible to hold your package with a single hand! &quot; +
				&quot;You brush your palms across as much flesh as they can reach, sending spears of blazing pleasure throughout your body. Your sheer size has far exceeded the normal, and you feel proud.&quot; +
				&quot;There is no other feeling like this - the feeling that your own toolset could easily skewer trenches if you so wished it!\n\nThe thought of another good fuck sets your cum factories into motion. &quot;+
				&quot; The unmistakable feeling of pleasure crescendos, gathering until you roar and blast out&quot;+
				&quot; an unfathomable amount of cum, - a deluge of hot sticky liquid that quickly pools on the ground around you. &quot;+
				&quot;As your orgasm rocks you, you grope down below to feel the weight of your @[all| balls| noverb]. Merely touching them sends them into overdrive, each testicle vibrating as they push even more fluid out into the open.&quot;
			],
			huge: 
			[
				&quot;Running a hand down your body and ever lower, you gently caress your @[all| cocks| noverb]. You grin widely as you realise the devastation you could cause by simply letting their weight drop onto the ground! &quot; +
				&quot;You brush your hands across a vast expanse of flesh that rumbles with its own pulsing heartbeat. The pleasure is rampant. With a mighty roar, your tool explodes with fountains of thick cum, megaliters upon megaliters that quickly&quot; +
				&quot; paint the surroundings with your taint. There is no other feeling like this - you are the alpha of this world, and it was yours to fuck. The mere thought of your virility pushes you even further over the edge; &quot;+
				&quot;your entire package rumbles and triples its output! You are causing a veritable flood from simply thinking about your own sex! You fall onto your rear, only to be cushioned by your &quot;+
				&quot; @[all| balls| noverb]. They bounce beneath you, working in overdrive to coat everything as far as the eye can see.&quot;
			]
		},
		corruptionFlavour:
		{
			corrupt50:
			[
				&quot; Something catches your eye. You swab some of your fluid onto your finger and raise an eyebrow as you watch it turn black. Corruption seems to be taking hold of your body.&quot;
			],
			corrupt75:
			[
				&quot; Your @[all|cocks|noverb] refuse to stop leaking. You watch your cum turn dark and seep into the ground with morbid fascination. \n\nThe land wants you to become a monster.&quot;
			],
			corrupt100:
			[
				&quot; Your @[all|cocks|noverb] refuse to stop leaking, the fluids turning obsidian as they linger in the open air. The stuff is thick like tar, yet still, the soil drains it eagerly. You grin as you realise you are just about ready to accept the monster you have become. &quot;+
				&quot;You finish off your self-appreciation with one last firm squeeze of your nutsack. There is no more time to waste - you need to satiate your thirst.&quot;
			]
		}
	},
	mirror_symbiote_CrotchFlavour: {
		heightFlavour: {
			small:
			[
				&quot;Your hands wander down past your slick, gooey, &lt;&lt;SymbioteColor&gt;&gt;-covered flesh to find your @[all| cocks| noverb], still throbbing at your recent orgasm. However, a renewed thrill runs through your body at the delicate, giving &quot; +
				&quot;flesh your hands find. Soon, dollops of altered, thick pre starts to well up from your reserves--already replenished due to your new companion. Your hands, somewhat reluctantly, turn from your @[all| cocks| noverb], only to turn &quot; +
				&quot;their attention to your @[all| balls| noverb]. Each orb spends a time being held and admired, gently feeling them and their heft.&quot;
			],
			medium:
			[
				&quot;Eagerly, your goo-dripping hands feel lower and lower, your @[all| cocks| noverb] already twitching as they anticipate the slick warmth your hands provide. Never before finding &lt;&lt;SymbioteName&gt;&gt; could you have imagined owning &quot; +
				&quot;such heft. The thought of your own size--and the sudden thoughts of it getting even larger--makes your @[all| cocks| noverb] seemingly swell all that more, the thickened pre you have in this form starting to ooze out, despite your &quot; + 
				&quot;recent orgasm. With that thought invading your mind, your hands wander down below to your @[all| balls| noverb], which are constantly full and heavy--always ready to pour out &lt;&lt;SymbioteName&gt;&gt;&#39;s fluid.&quot;
			],
			large:
			[
				&quot;There is little need to explore your @[all| cocks| noverb]--you became intimately familiar during your orgasm to bring out &lt;&lt;SymbioteName&gt;&gt;. Yet you still find your hands wandering against your hefty weight, feeling &quot; +
				&quot;the overfull mass drape across your hands. Already, your slick gooey cockflesh throbs with new liquid, pouring into your flesh, ready to be released. Your stretchy, slick flesh expands slightly at the pressure forced &quot; +
				&quot;into it, throbbing your gigantic cock out of your hand. It pulses and throbs, awaiting more attention that your hands cannot possibly give it. As though to torment and prolong the awaiting release, you feel your hands &quot; +
				&quot;stroking across your goo-dripping, @[all| balls| noverb]. One orb is raised up, then released. You can simply feel the weight of the orb as it smashes into the ground, causing a grand rivet in the floor. &quot; 
			],
			huge:
			[
				&quot;Your slick hands are no stranger to your @[all| cocks| noverb]. Still erect from releasing &lt;&lt;SymbioteName&gt;&gt;, you can&#39;t even reach the tip even more. You can barely discern where it all ends. Yet you still feel these gigantic &quot; +
				&quot;goo-dripping members as a part of you. As part of &lt;&lt;SymbioteName&gt;&gt;. Your companion&#39;s slick form simply enhances the pleasure you feel--no rough spots can be felt, all is smooth, and all belongs to this form.  Quickly your hands &quot; +
				&quot;strike onto, and then partially into the erogenous flesh, causing intense white-hot pleasure to sear through you--a pleasure that soon comes erupting from you in physical form, a deluge drenching across all that you can see. &quot; +
				&quot;With no stop in sight, you feel your @[all| balls| noverb] tense and pump under you, their gooey form seemingly summoning an endless river from the ether to fuel your ecstasy. Your form seems to almost fall apart from the pleasure, &quot; +
				&quot;Leaving you nearly collapsed into a puddle mentally and physically.&quot;
			]
		},
		corruptionFlavour:
		{
			corrupt50:
			[
				&quot; You watch as a dark black-purple stream runs through your goo form, almost imperceptable. Whatever corruption taints this land seems to have entered into your body.&quot;
			],
			corrupt75:
			[
				&quot; Your @[all|cocks|noverb] are streamed with small streams of black-purple corruption throb in concert with your heart, visible in your semi-transluscent flesh.&quot;
			],
			corrupt100:
			[
				&quot; Black ooze, nearly indistinguishable from your body, drips out of your @[all|cocks|noverb]--both directly out of the tip, yet also seemingly to ooze out of your very pours, dripping and darkening the very soil that you walk on.&quot;
			]
		}
	},
	mirror_player_TailFlavour: {
		heightFlavour: {
			small: 
			[
				&quot;Sprouting from your glutes, your @[all| tails| one=whips~more=whip] from side to side. Your eyes travel down its length, and fixate on each feature before you smirk, &quot;+
				&quot;grab it with your hand and playfully swing it around.&quot;
			],
			medium: 
			[
				&quot;Sprouting from your glutes, your @[all| tails| one=whips~more=whip] from side to side with whooshing noises. Your eyes travel down its length, and fixate on each feature before you smirk, &quot;+
				&quot;grab it with your hand and playfully swing it around. The weight of it has become rather dangerous. A crash resounds behind you as you accidentally knock over your table. Case in point.&quot;
			],
			large: 
			[
				&quot;Sprouting from your glutes, your @[all| tails| one=whips~more=whip] from side to side. Every movement of it now carries a hefty momentum that only someone with your size can control. &quot;+
				&quot;Now too large for your hand, and not to mention to hard to reach with your massive muscles - you thump it on the ground, heavily. The ground booms with its weight and large puffs of dirt explode into the air. &quot;+
				&quot;Just like the rest of you, your tail screams of power.&quot;
			],
			huge: 
			[
				&quot;Sprouting from your glutes, your @[all| tails| one=whips~more=whip] from side to side. Every twitch, flick and swaying motion creates heavy gusts of wind that tear at the plant-speckled dunes and structures below you. &quot;+
				&quot;Its weight is heavy enough that, should you crash it into the ground, it would not be difficult to create canyons or quakes. Your teeth flicker from behind your smug expression. &quot;+
				&quot;You mischieviously turn around and slap your tail into the lake. An absolute geyser of water shoots up over you, coating your stunning figure with a light watery sheen. You spend a few more moments playing with it, dragging it across the ground to create ravines whilst the water settles once more.&quot;
			]
		},
		corruptionFlavour:
		{
			corrupt50:
			[
				&quot; A few specks of black on the tip of your tail is enough to make you aware that the land is affecting you.&quot;
			],
			corrupt75:
			[
				&quot; A trail of black ooze occassionally forms from the tip of your tail. You reach for some with your fingers and taste the salty substance. A shudder of erotic pleasure courses through you.&quot;
			],
			corrupt100:
			[
				&quot; Lines of thick black goo stream from the tip of your tail, coating the ground in corruption. Your arousal is constantly sitting above dangerous levels thanks to the addictive and oh-so pleasurable substance. You smirk. &quot;+
				&quot;It is the mark of a beast, and you love it.&quot;
			]
		}
	},
	mirror_symbiote_TailFlavour: {
		heightFlavour: {
			small:
			[
				&quot;Your gooey glutes transition into @[all| tails| noverb]. The size is perfectly manageable, the gentle swaying assists in keeping your balance in check.&quot;
			],
			medium:
			[
				&quot;Your @[all| tails| noverb] wave back and forth, accenting your gooey glutes as they strike against whatever is in their path with surprising force. If you weren&#39;t more careful, you could knock over a wall with the flesh.&quot;
			],
			large:
			[
				&quot;Your @[all| tails| one=smashes~more=smash] into the wall of your old house, temporarily gluing itself to the structure before releasing for another pass to add to the indentations. If you wanted, you could bring the building crashing down with an accidental whip of a tail.&quot;
			],
			huge:
			[
				&quot;The ground is rushed away as your @[all| tails| one=whips~more=whip] through it, cascading a deep divot. When occupying this new channel, your &lt;&lt;SymbioteColor&gt;&gt; semi-transparent tail looks similar to that of a river, roiling and filled with the almost fluid flesh.&quot;
			]
		},
		corruptionFlavour:
		{
			corrupt25:
			[
				&quot; Your tail is very well intact, even with flicks and sways, &lt;&lt;SymbioteName&gt;&gt; maintains perfect form and structure. &lt;&lt;SymbioteName&gt;&gt; seems to enjoy the thought of having a clean cut through anything.&quot;
			],
			corrupt50:
			[
				&quot; Speckles of black spatter the patterning of your @[none| tails| noverb]. Each flick of your tail causes dense clumps to fling off of the goo. &lt;&lt;SymbioteName&gt;&gt; seems to be losing interest in the idea of keeping its form tightly bound to its body.&quot;
			],
			corrupt75:
			[
				&quot; The thin lines of purple and back swimming through your goo form drip out of the tips of your @[none| tails| noverb]. You hardly even need to move your tail as even with stillness, droplets stream away from the gooey tail. &lt;&lt;SymbioteName&gt;&gt; revels in the idea of using its tail as a brush, painting the earth around it with &lt;&lt;SymbioteColor&gt;&gt; goo.&quot;
			],
			corrupt100:
			[
				&quot; Black and purple goo mix freely with your @[none| tails| noverb] goo, erupting from the tips in a constant stream that drags across the floor behind you, marking the entire land with the addictive substance. &lt;&lt;SymbioteName&gt;&gt; enjoys every moment of painting the land in &lt;&lt;SymbioteColor&gt;&gt; goo.&quot;
			]
		}
	},
	mirror_symbiote_TailFlavour_LiveForEcho: {
		heightFlavour: {
			small:
			[
				&quot;&lt;&lt;SymbioteName&gt;&gt; wrings its tail around itself and brings a hand down to stroke the tail in self admiration.&quot;
			],
			medium:
			[
				&quot;&lt;&lt;SymbioteName&gt;&gt; seems more than delighted in the thought of toying around with its tail as it coils around itself.&quot;
			],
			large:
			[
				&quot;&lt;&lt;SymbioteName&gt;&gt; seems delighted at that idea, it coils its tail around its torso, giving it gentle strokes in self admiration.&quot;
			],
			huge:
			[
				&quot;&lt;&lt;SymbioteName&gt;&gt; flaps its tail within the basin, enjoying the thought of being massive enough to occupy the earth itself.&quot;
			]
		}
	},
	mirror_player_WingsFlavour: {
		heightFlavour: {
			small: 
			[
				&quot;Resting on your back and spreading wide are @[all| wings|noverb] that could easily support your weight in flight. You take turns flexing each of their inner limbs, stretching the membranes taught.&quot; +
				&quot; Playfully, you give them a good push and launch yourself backwards and onto your bed. You return to the mirror after a minute of smugness.&quot;
			],
			medium: 
			[
				&quot;Resting on your back and spreading wide are @[all| wings|noverb] that could easily support your weight in flight. Their tips are now large enough that it has become quite difficult to move inside of buildings - &quot; +
				&quot;like your own home! Like that mattered. They were beautiful and nothing screams power than unfolding them widely to touch the opposite walls of your room. You notice that each wing flexor is packing on a fair bit of muscle! &quot;+
				&quot;Striking a powerful pose, you flex them resulting in a rising display of bicep and tricep shaped muscles.&quot;
			],
			large: 
			[
				&quot;Resting on your back and spreading wide are @[all| wings|noverb] that could easily support your heavy weight in flight. Out in the open, you have the freedom of stretching them to their massive wingspan. &quot; +
				&quot;Nothing in your life could have made you feel as proud as you do now as you marvel at the huge shadow they cast. You flap them gently and even with such a subtle movement, the size and power in each of those membranes &quot;+
				&quot;create monstrous waves across the lake&#39;s surface&quot;
			],
			huge: 
			[
				&quot;Resting on your back and spreading wide are @[all| wings|noverb] that could easily support your heavy weight in flight. If any creature had somehow missed your gigantic body, then they certainly could not miss your eclipsing wingspan. &quot; +
				&quot; Their flexors have grown so heavy with muscle that they could function as extra pairs of arms. With a mighty flex, and a powerful and prideful roar, you spread them out wide, their tips reaching past the edges of the lake and further, still.&quot;+
				&quot; You remain there - a deity amongst deities, a power among powers. If you had to flap them, that would be the end of the land around you. You smile as you retract them. Perhaps that would not be the best of ideas, for now.&quot;
			]
			
		},
		corruptionFlavour:
		{
			corrupt50:
			[
				&quot; A few bolts of purple and black run across your inner membrane as you continue to examine your wings. You raise an eyebrow. It would seem no body part is unsafe from the taint of this world.&quot;,
			],
			corrupt75:
			[
				&quot; bright glowing streaks of purple and black run across your membranes like spiderwork. Your wings shimmer with corruption, with power people should fear. Perhaps that would be a lesson for either yourself, or those who cross you.&quot;,
			],
			corrupt100:
			[
				&quot; The edges of your wings are torn and occasionally drip black oil. Bolts of black lightning arc off of the tips of each wings&#39; limbs, heralding the presence of monstrous corruption.&quot;,
			]
		}
	},
	mirror_symbiote_WingsFlavour: {
		heightFlavour: {
			small:
			[
				&quot;Your back gently transitions into @[all| wings|noverb] that look as though they could carry you in flight. The ribs of the wings are joined not by fleshy membranes, but rather pliable goo. You watch as a colored spec of your goo is cycled through the slow waterfall that is your membranes. &quot;
			],
			medium:
			[
				&quot;Your hefty back supports @[all| wings| noverb] that are filled with a constant movement of that gooey flesh of &lt;&lt;SymbioteName&gt;&gt; that could support your weight during flight. The goo can hide completely within your back or take form a shake similar to that of a cloak one may wear to conceal themself. When extended, they reach from wall to wall of your room--even pressing up and causing your flexible form to bend ever so slightly from the pressure of the semi-sturdy walls.  That would not do: you chuckle as the gooey flesh rushes into the edges of your bent wings, filling them with strength and form as they expand, forcing divots into the walls. Your adaptive body is so strong that even the wingtips can puncture walls on command.&quot;
			],
			large:
			[
				&quot;Your massive wingspan of @[all| wings| noverb] casts a shadow across nearly all you can see, the slowly circulating goo that forms the wings giving a somewhat ethereal, undulating quality to the shadows.  The massive size of your semi-transparent, dripping membranes alone could blot out an entire farm.  Your wing dips into the lake, and you can feel it cup the water, a small pond in itself.&quot;
			],
			huge:
			[
				&quot;You cannot see the tips of your @[all| wings| noverb] anymore. A simple flap of the gooey form is enough to cause cascading waves to roll across the lake and the vegetation beyond. The thinnest of the bulk in the wings are more powerful and massive than your thigh was just a short time ago. The slick goo that drips and moves across your membranes tenses and forms a strong barrier as you gently flap one of your wings, almost knocking over a tree.&quot;
			]
		},
		corruptionFlavour:
		{
			corrupt25:
			[
				&quot; The texture of the gooey wings is soft and pliable with no imperfections. &lt;&lt;SymbioteName&gt;&gt; has kept the wings in pristine condition and maintains structure by remaining closely intact.&quot;
			],
			corrupt50:
			[
				&quot; The texture of your gooey wings is like thick, melting wax. &lt;&lt;SymbioteName&gt;&gt; is slightly restless and the wings feeling like they’re beginning to lose a stable form.&quot;
			],
			corrupt75:
			[
				&quot; Spots of purple and black erupt from the edges of your goo wings, criss-crossing all across your membranes, a visible mark of your corruption. Your wings drip constantly, each flap causes wicks of goop to fly in all directions.&quot;
			],
			corrupt100:
			[
				&quot; Dark corrupt black ooze drips out of your gooey membranes, coating the ground in your monstrous corruption. When folded in, your back gives off the appearance of wearing a cape made of flowing water. When spread out, your wings constantly seep out in all directions. Each flap of your wings practically coats the entire area beneath you within the runny texture of goo.&quot;
			]
		}
	},
	mirror_symbiote_WingsFlavour_LiveForEcho: {
		heightFlavour: {
			small:
			[
				&quot;&lt;&lt;SymbioteName&gt;&gt; brings an arm up to fondle the massive wings in self admiration.&quot;
			],
			medium:
			[
				&quot;&lt;&lt;SymbioteName&gt;&gt; brings an arm up to fondle the massive wings in self admiration.&quot;
			],
			large:
			[
				&quot;&lt;&lt;SymbioteName&gt;&gt; brings an arm up to fondle the massive wings in self admiration, almost enthralled by the size of itself.&quot;
			],
			huge:
			[
				&quot;&lt;&lt;SymbioteName&gt;&gt; brings an arm up to fondle the massive wings in self admiration, almost enthralled by the size of itself.&quot;
			]
		}
	},
	mirror_player_HornsFlavour: {
		heightFlavour: {
			small: 
			[
				&quot;Moving from side to side, you proudly examine the @[all| horns| noverb] that crown your fearsome visage. Their weight is pleasant on your neck and their points sharp enough to cause &quot;+
				&quot;some serious damage. You run a hand across one of them, relishing in the feeling of power and protection it gives you.&quot;
			],
			medium: 
			[
				&quot;Moving from side to side, you proudly examine the @[all| horns| noverb] that crown your fearsome visage. Their weight is heavy, but your thick neck can easily support it. &quot;+
				&quot; You pick up a nearby piece of metal and run it across the points. It splits like butter. These could cause some serious damage. You run a hand across one of them, relishing in the feeling of power and protection it gives you.&quot;
			],
			large: 
			[
				&quot;Moving from side to side, you proudly examine the @[all| horns| noverb] that crown your fearsome visage. Their weight is incredible, it feels as if their momentum would be enough to even knock you off balance if you aren&#39;t careful!&quot;+
				&quot; You bend down and test your horn&#39;s strength on the ground. The earth quakes as you rip out a clean hole. These are horns that you can be proud of. You run a hand across one of them, relishing in the feeling of power and protection it gives you.&quot;
			],
			huge: 
			[
				&quot;Moving from side to side, you proudly examine the @[all| horns| noverb] that crown your fearsome visage. Each time you move your head, the air parts as if a mountain had suddenly flung itself across a distance. They are the only weight on this planet that challenges your massive neck and you love the feeling.&quot;+
				&quot; It is far too dangerous to test your horns out, the amount of earth that they would penetrate would easily split the ground for a fair distance. You run a hand across one of them, relishing in the feeling of power and protection it gives you.&quot;
			]
		},
		corruptionFlavour:
		{
			corrupt50:
			[
				&quot; As your finger runs across the surface, you feel small indentations that were never there before. They don&#39;t feel randomly shaped either! If you trace your fingers across them, they feel runic. You wonder if it&#39;s the corruption&#39;s influence.&quot;
			],
			corrupt75:
			[
				&quot; Your finger gently passes over faintly glowing runes of purple. Every crevice cracks with small arcs of corruption which fire miniature bolts of arousal into your very core.&quot;
			],
			corrupt100:
			[
				&quot; You find yourself repeating this motion for a while. In fact, it has become daily practice. Every purple rune now drips with aphrodesiac and its touch is as pleasurable as tongues worshipping your glorious package. Why stop when you could reach an orgasm from touching your horns alone?&quot;
			]
		}
	},
	mirror_symbiote_HornsFlavour: {
		heightFlavour: {
			small: 
			[
				&quot;&lt;&lt;SymbioteName&gt;&gt; is crowned with @[all| horns| noverb]. Due to its gooey nature, they are slightly pliable when relaxed. However, as your head rubs up against a wall, the semi-fluid of its flesh shifts around, forcing them into sharp, dense spires. Acting similarly to a non-newtonian fluid, They could do quite a bit of damage when needed.&quot;
			],
			medium: 
			[
				&quot;&lt;&lt;SymbioteName&gt;&gt;&#39;s slightly malleable @[all| horns| noverb] weigh upon its head, slowly dripping with its essence. But in a sudden impulse, you decide to thrust them against some metal, where they instantly harden and pierce through. Acting like a non-newtonian, the raw power even in just one horn leaves you smiling.&quot;
			],
			large: 
			[
				&quot;The weight of &lt;&lt;SymbioteName&gt;&gt;&#39;s dripping @[all| horns| noverb] would crush those with a weaker neck. Fortunately, that does not apply to you. A chuckle escapes your lips as you lean down and push your horns deep into the ground, gouging out a trench in the lakeside. The sturdiness of the fluid keeps it intact whenever pressure is applied.&quot;
			],
			huge: 
			[
				&quot;&lt;&lt;SymbioteName&gt;&gt;&#39;s gooey visage is framed by towering spires of @[all| horns| noverb]. They raise up into the sky, mighty towers befitting a master of the world that the two of you have become. You have the weight of the world on your shoulders, along with its dangerous power. One single horn could pierce through an entire tower, used as a siege breaker.&quot;
			]
		},
		corruptionFlavour:
		{
			corrupt25:
			[
				&quot; The glistening horns are perfectly unblemished and well intact.&quot;
			],
			corrupt50:
			[
				&quot; Reflected in the outer layer of your slightly-transluscent horns lies certain geometric shapes that you cannot identify.&quot;
			],
			corrupt75:
			[
				&quot; The horns constantly drip, steady droplets escape from any point of contact. Glowing in the middle of the horns are faint, purple runes.&quot;
			],
			corrupt100:
			[
				&quot; The horns constantly drip with a downpour of goo as if there were a waterfall before your eyes. The corrupt purple runes from inside your horns glow out in a constant stream, radiating from your head like a halo of pure corruption.&quot;
			]
		}
	},
	mirror_player_HeadFlavour: {
		heightFlavour: {
			small: 
			[
				&quot;You find yourself admiring your @[all| heads| noverb]. You try out a few expressions showing off your jawline - both open and clenched, how your cheeks &quot;+
				&quot;are shaped beneath your eyes and the way they lead to your mouth. There, your @[all|eyes|noverb] linger before you open your @[all| jaws | noverb] wide &quot; +
				&quot;and let your @[all| tongues| noverb] slip out over your @[all| teeths| noverb].&quot;
			],
			medium: 
			[
				&quot;You find yourself admiring your @[all| heads| noverb]. You try out a few expressions showing off your jawline - both open and clenched, how your cheeks &quot;+
				&quot;are shaped beneath your eyes and the way they lead to your mouth. There, your @[all|eyes|noverb] linger before you open your @[all| jaws | noverb] wide &quot; +
				&quot;and let your @[all| tongues| noverb] slip out over your @[all| teeths| noverb].&quot;
			],
			large: 
			[
				&quot;You find yourself admiring your @[all| heads| noverb]. You try out a few expressions showing off your jawline - both open and clenched, how your cheeks &quot;+
				&quot;are shaped beneath your eyes and the way they lead to your mouth. There, your let your @[all|eyes|noverb] linger before you open your @[all| jaws | noverb] wide &quot; +
				&quot;and let your @[all| tongues| noverb] slip out over your @[all| teeths| noverb].&quot;
			],
			huge: 
			[
				&quot;You find yourself admiring your @[all| heads| noverb]. You try out a few expressions showing off your jawline - both open and clenched, how your cheeks &quot;+
				&quot;are shaped beneath your eyes and the way they lead to your mouth. There, your let your @[all|eyes|noverb] linger before you open your @[all| jaws | noverb] wide &quot; +
				&quot;and let your @[all| tongues| noverb] slip out over your @[all| teeths| noverb].&quot;
			]
		},
		corruptionFlavour:
		{
			corrupt25:
			[
				&quot; After thoroughly inspecting your pearly whites for dirt, cavities or any other unwelcome sights, you snap your @[2|jaws|noverb] shut and continue your visual tour.&quot;
			],
			corrupt50:
			[
				&quot; Looking closer, your tongue seemes to be unnaturally long for your mouth. Testing it out, you manage to unroll the fleshy tube until the tip touches the underside of your chin. &quot;+
				&quot;There are small black dots at the base. It reminds you of the Lost. You slip your tongue back into your mouth and wipe the spittle off of your chin.&quot;
			],
			corrupt75:
			[
				&quot; You let your tongue roll lower and lower until a fair portion slides across your meaty chest. Your taste is phenominal - the flavour of a dominant male. Black streaked saliva spreads across your body &quot;+
				&quot;as your tongue slabbers over it. Your spittle drips from its fleshy surface in small rivulets. Before things get too messy, you retract the limb.&quot;
			],
			corrupt100:
			[
				&quot; You let your tongue slide lower until a thick layer of black saliva coats your chest. You let it run even lower, the tip reaching down for your treasure trail and tasting every musky ravine it finds on the way. &quot;+
				&quot;It extends even further, until it is able to travel up toward a leaking and waiting cockslit and plunges itself into the shaft. The taste is sublime and the feeling - the feeling fires explosive bursts of euphoria &quot;+ 
				&quot;right into the core of your very being. You could do this for hours, as you have before, until you came all over the black fleshy surface of your tongue. Yet, you hold back. There is far more of you to explore before. Playtime would come soon. You roll your tongue back into your mouth.&quot;
			]
		}
	},
	mirror_symbiote_HeadFlavour: {
		corruptionFlavour: {
			corrupt25: 
			[
				&quot;&lt;&lt;SymbioteName&gt;&gt; is in perfectly pristine condition, flawless, thoroughly viscous and well intact. &lt;&lt;SymbioteName&gt;&gt; remains closely wound to your body, seemingly contented with remaining in its place. Satisfied with its standings, your eyes wander down to inspect the rest of it.&quot;
			],
			corrupt50: 
			[
				&quot;Looking closer, &lt;&lt;SymbioteName&gt;&gt; drips slightly like thick, melting wax. Droplets of goo drip from your face in small, but dense clumps. You are increasingly aware of the slick feeling of running goop all over you. Wiping some excess goo off of your face, it sloughs off in clumps as you shake your arm free of the goop. &lt;&lt;SymbioteName&gt;&gt; almost seems like it’s trying to escape from you, as if it wanted more from the world that lies past the bounds of your body.&quot;
			],
			corrupt75: 
			[
				&quot;&lt;&lt;SymbioteName&gt;&gt; is extremely runny, slick and slimy. Gentle streams of goo run down your face and all over your body as you try to shake it off reflexively. To no avail, there’s a notable puddle of goo forming at the base of your stance, but the volume of &lt;&lt;SymbioteName&gt;&gt; seemingly remains unchanged. &lt;&lt;SymbioteName&gt;&gt; trembles with need, filled with carnal desire, longing for release.&quot;
			],
			corrupt100: 
			[
				&quot;Cascades of goo stream across your face in a constant downpour. &lt;&lt;SymbioteName&gt;&gt; has become a writhing mass of permeable fluid, barely intact as it drips everywhere. An incessant trail of slime lingers in your wake, which seemingly has no effect on &lt;&lt;SymbioteName&gt;&gt; volume. &lt;&lt;SymbioteName&gt;&gt; demands satisfaction, desperate for another toy to play with. Who would you be to not give into the thought?&quot;
			]
		},
	},
	mirror_player_LowerBodyFlavour: {
		heightFlavour: {
			small: 
			[
				&quot;Below the waist, you sport @[all| legs| noverb]. You raise one, proudly, before bringing your foot back to the ground with a heavy stomp. The sound of heavy weight compacting sand is quite satisfactory. &quot;+
				&quot;You admire the contour of each teardrop of your thighs and the diamond shape of each calf. It doesn&#39;t take long before you find yourself worshipping your body, running your hand over each mound. &quot; +
				&quot;You flex and feel the ravines of your body consume your fingers and how each crest pushes against your palm.&quot;
			],
			medium: 
			[
				&quot;Below the waist, you sport @[all| legs| noverb]. You raise a proud knee before bringing your foot back to the ground with a heavy stomp. The sound is heavy, and far more powerful than it was before. &quot;+
				&quot;You admire the contour of each teardrop of your thighs and the diamond shape of each of your calves. It doesn&#39;t take long before you find yourself worshipping your body, running your hand over each mound. &quot; +
				&quot;You flex each and feel the ravines of your body consume your fingers and how each crest pushes against your palm. Your muscles have grown large enough that you could trap your own finger between two muscles if you weren&#39;t careful.&quot;
			],
			large: 
			[
				&quot;Below the waist, you sport @[all| legs| noverb]. You raise one, proudly, before bringing your foot back to the ground with a heavy stomp. A resounding boom echoes across the land as the earth beneath your foot splinters and cracks. &quot;+
				&quot;You enjoy being a giant and the feeling of power it gives you. You admire the contour of each teardrop of your thighs and the diamond shape of each of your calves. It doesn&#39;t take long before you find yourself worshipping your body, running your hand over each mound. &quot; +
				&quot;It takes longer for your hand to fully caress the entirety of every muscle. There is so much to explore and even more than that when &quot; +
				&quot;you flex! Your legs feel like granite and in fact, could probably bend titanium with ease.&quot;
			],
			huge: 
			[
				&quot;Below the waist, you sport @[all| legs| noverb]. You raise one, proudly, but hesitate before bringing your foot back to the ground, softly. A resounding boom echoes across the land as the earth beneath your foot splinters and cracks. It seems you have compacted so much mass into each pillar-like leg that the&quot;+
				&quot; ground can barely hold its own agains you, even when you were being gentle! You are a titan supported by the massive foundations. You admire the contour of each teardrop and the diamond shape of each of your calves. It doesn&#39;t take long before you find yourself worshipping your body, running your hand over each mound. &quot; +
				&quot;It&#39;s difficult to reach every muscle, they&#39;re simply too gargantuan! Every one of your limbs are limited by the sheer amount of muscle on them as it is, but the awkward angle you would need to feel the underside of your leg was now virtually impossible. That&#39;s just fine for you, because when you flex your legs, you can feel the very air quiver in fear of what they can do.&quot;
			]
		}
	},
	mirror_symbiote_LowerBodyFlavour: {
		heightFlavour: {
			small:
			[
				&quot;Below the waist &lt;&lt;SymbioteName&gt;&gt; sports @[all| legs| noverb]. You raise a leg, proudly before bringing your foot back to the ground with a heavy stomp. The gooey texture of your body holds its form well enough. You admire the contour of each teardrop of the thighs and the diamond shape of each calf. It doesn&#39;t take long before you find yourself worshipping &lt;&lt;SymbioteName&gt;&gt;&#39;s body, running your hand over each mound. You flex and feel the ravines of &lt;&lt;SymbioteName&gt;&gt; body consume your fingers and how each crest pushes against your palm.&quot;
			],
			medium:
			[
				&quot;Below the waist &lt;&lt;SymbioteName&gt;&gt; sports @[all| legs| noverb]. You raise a proud knee before bringing your foot back to the ground with a heavy stomp. The gooey texture of your body holds its form well enough despite the bulk of its body. You admire the contour of each teardrop of your thighs and the diamond shape of each of your calves. It doesn&#39;t take long before you find yourself worshipping &lt;&lt;SymbioteName&gt;&gt;&#39;s body, running your hand over each mound. You flex each and feel the ravines of your body consume your fingers and how each crest pushes against your palm. The pseudo muscles have grown large enough that you could easily trap your own finger within the creases of the musculature.&quot;
			],
			large:
			[
				&quot;Below the waist &lt;&lt;SymbioteName&gt;&gt; sports @[all| legs| noverb]. You raise a leg proudly before bringing your foot back to the ground with a heavy stomp. The gooey texture of your body quivers before the quake and thundering crash of your efforts. Once the quaking of your gooey form subsides, you admire the contour of each teardrop of your thighs and the diamond shape of each of your calves. It doesn&#39;t take long before you find yourself worshipping &lt;&lt;SymbioteName&gt;&gt;&#39;s body, running your hand over each mound. It takes longer for your hand to fully caress the entirety of every muscle. There is so much to explore and even more than that when you flex! &lt;&lt;SymbioteName&gt;&gt; is definitely more than sturdy enough to match the sheer volume of its size.&quot;
			],
			huge:
			[
				&quot;Below the waist &lt;&lt;SymbioteName&gt;&gt; sports @[all| legs| noverb]. You raise one, proudly, but hesitate before bringing your foot back to the ground, softly. A resounding boom echoes across the land as the earth beneath your foot splinters and cracks. The sheer volume of &lt;&lt;SymbioteName&gt;&gt;&#39;s mass feels endless. Truly a gargantuan, you can’t help but enjoy the size of the gooey form. You admire the contour of each teardrop and the diamond shape of each of its calves. It doesn&#39;t take long before you find yourself worshipping &lt;&lt;SymbioteName&gt;&gt;&#39;s body, running your hand over each mound. It&#39;s difficult to reach every muscle, &lt;&lt;SymbioteName&gt;&gt; is simply too gargantuan! Every one of your limbs are limited by the sheer amount of bulk on them as it is, but the awkward angle you would need to feel the underside of your leg was now virtually impossible. All is not lost, for even the very world seems to quiver before &lt;&lt;SymbioteName&gt;&gt;&#39;s gargantuan size.&quot;
			]
		},
		corruptionFlavour:
		{
			corrupt25:
			[
				&quot;The legs themself are very well compacted. &lt;&lt;SymbioteName&gt;&gt; has molded its body closely together and is free of imperfections, content with clutching onto itself tightly.&quot;
			],
			corrupt50:
			[
				&quot;The legs themself have a clumpy texture, like thick, melty wax. &lt;&lt;SymbioteName&gt;&gt; seems interested in exploring the bounds outside of its own body as dense clumps of goo slough off of the legs with each step.&quot;
			],
			corrupt75:
			[
				&quot;The legs themself are very runny, gentle streams of goo run down your form, merging into the puddle that forms beneath you when you stay in one place too long. Despite this, &lt;&lt;SymbioteName&gt;&gt; doesn’t lose any volume. It would seem almost as if they were trying to escape from you with each droplet, as if it was eager to escape the bounds of your body and spread its influence across the land.&quot;
			],
			corrupt100:
			[
				&quot;The legs themself constantly cascade with a downpour of goo from every pore. Even with only mere moments of stillness, a noticeable puddle of goo has formed within your wake. Despite this, &lt;&lt;SymbioteName&gt;&gt; doesn’t lose any volume, displaying the sheer force of will and control over its mentality. &lt;&lt;SymbioteName&gt;&gt; craves release with every moment, desperate to spread its presence and find new toys to play with.&quot;
			]
		}
	},
	mirror_symbiote_LowerBodyFlavour_LiveForEcho: {
		heightFlavour: {
			small: 
			[
				&quot;Below the waist &lt;&lt;SymbioteName&gt;&gt; sports @[all| legs| noverb]. With eagerness, it raises a leg proudly before bringing its foot back to the ground with a heavy stomp, admiring the crash of its body against the ground. The gooey texture of your body holds its form well enough. &lt;&lt;SymbioteName&gt;&gt; admires the contour of each teardrop of the thighs and the diamond shape of each calf. It doesn&#39;t take long before &lt;&lt;SymbioteName&gt;&gt; is simply worshipping its body, running its hand over each mound of flesh. It flexes and fondles the ravines of its own body, enthralled by self admiration.&quot;
			],
			medium: 
			[
				&quot;Below the waist &lt;&lt;SymbioteName&gt;&gt; sports @[all| legs| noverb]. With eagerness, It raises a proud knee before bringing your foot back to the ground with a heavy stomp, admiring the crash of its body against the ground. The gooey texture of your body holds its form well enough despite the bulk of its body. &lt;&lt;SymbioteName&gt;&gt; admires the contour of each teardrop of its thighs and the diamond shape of each of its calves. It doesn&#39;t take long before you find yourself worshipping &lt;&lt;SymbioteName&gt;&gt; body, running your hand over each mound. It flexes each muscle to feel the ravines of its body consume its fingers and the way each crest presses against its palm. The pseudo muscles have grown large enough for &lt;&lt;SymbioteName&gt;&gt; to worship contentedly, captivated by self admiration&quot;
			],
			large: 
			[
				&quot;Below the waist &lt;&lt;SymbioteName&gt;&gt; sports @[all| legs| noverb]. With eagerness, It raises a leg proudly before bringing its foot back to the ground with a heavy stomp. The gooey texture of your body trembles before the quake and thundering crash of your efforts. Once the quivering of your gooey form subsides, &lt;&lt;SymbioteName&gt;&gt; admires the contour of each teardrop of its thighs and the diamond shape of each of its calves. It doesn&#39;t take long before &lt;&lt;SymbioteName&gt;&gt; is simply worshipping its body, running its hand over each mound. It takes longer for its hand to fully caress the entirety of the massive bulk. There is so much to explore and even more than that when it flexes. &lt;&lt;SymbioteName&gt;&gt; is admiring the efforts of its bulk and enjoying the shifting of its body with each flex. It continues the self admiration grope fest, enraptured by its own body.&quot;
			],
			huge: 
			[
				&quot;Below the waist &lt;&lt;SymbioteName&gt;&gt; sports @[all| legs| noverb]. With eagerness, it raises one, proudly before bringing its foot back to the ground. A resounding boom echoes across the land as the earth beneath your foot quakes. The sheer volume of &lt;&lt;SymbioteName&gt;&gt;&#39;s mass feels endless. Truly a gargantuan, &lt;&lt;SymbioteName&gt;&gt; can’t help but enjoy the size of its form. It admires the contour of each teardrop and the diamond shape of each of its calves. It doesn&#39;t take long before &lt;&lt;SymbioteName&gt;&gt; is simply worshipping its body, running its hand over each mound. It&#39;s difficult to reach every muscle, &lt;&lt;SymbioteName&gt;&gt; is simply too gargantuan. Every one of its limbs are limited by the sheer amount of bulk on them as it is, but the awkward angle &lt;&lt;SymbioteName&gt;&gt; would need to feel the underside of your leg was now virtually impossible. &lt;&lt;SymbioteName&gt;&gt; makes an attempt to continue its self admiration nonetheless with constant groping, completely enraptured by its own body.&quot;
			]
		}
	},
	mirror_player_UpperBodyFlavour: {
		heightFlavour: {
			small: 
			[
				&quot;Your eyes follow every curve of your neck down toward your body, proper. You push your shoulders backwards and push out your @[all| pecs| noverb], bouncing each muscle with impressive &quot;+
				&quot;control.\n\nYou raise your @[all| arms| noverb] into a powerful flex, curling your @[2| hands| noverb] inwards to truly make each bicep rise. You then bring them forward to touch your sensitive nipples, &quot;+
				&quot;running your fingers across the edge of the circular nubs.\n\nMoaning from the pleasure, you let your hands glide down to your lower torso and feel each curve of your @[all| abdominals| noverb]. Your every movement causes them to shift and bulge.&quot;
			],
			medium: 
			[
				&quot;Your eyes follow every curve of your neck down toward your body, proper. You push your shoulders backwards and push out your @[all| pecs| noverb], bouncing each muscle with impressive &quot;+
				&quot;control. You can feel their weight as they rise and fall - you can even get a small ripple of muscle to run from the top of each pec to the bottom!\n\nYou raise your @[all| arms| noverb] into a powerful flex, curling your @[2| hands| noverb] inwards to truly make each bicep rise.&quot;+
				&quot; You can hear audible creaks from your bones and flesh as your muscles&#39; size puts strain on them. You then bring them forward to touch your hard and sensitive, nipples, &quot;+
				&quot;running your fingers across the fairly sized nubs - nubs large enough to grip and squeeze. You moan from the pleasure.\n\nAfter a minute of fondling, you let your hands glide down to your lower torso and feel each curve of your @[all| abdominals| noverb]. Your every movement causes them to shift and bulge. &quot;+
				&quot;Your laterals are now large enough to push your arms upwards and outwards giving you an imposing and brawny stance.&quot;
			],
			large: 
			[
				&quot;Your eyes follow every curve of your neck down toward your body, proper. You push your shoulders backwards and push out your @[all| pecs| noverb], bouncing each muscle with impressive &quot;+
				&quot;control. You can feel their heavy weight as they rise and fall with loud shudders. Each vein and chord is incredibly visible with the sheer amount of mass focused into each pec!\n\nYou raise your @[all| arms| noverb] into a monstrous flex, curling your @[2| hands| noverb] inwards to truly make each bicep rise like hills.&quot;+
				&quot; You can hear audible creaks from your bones and flesh as your muscles strain your skin enough that each vein becomes clearly visible. They are thick firehoses that sprawl all across your form - juicy highways providing the huge amount of &quot;+
				&quot;fuel your body now needs. Lowering your arms, you bring them forward to touch your hard and sensitive, nipples, &quot;+
				&quot;running your fingers across the large protroding nubs. They take up a fair portion of the space within your hand. You moan.\n\nAfter a minute of fondling, you let your hands glide down to your lower torso and feel each curve of your @[all| abdominals| noverb]. Your every movement causes them to shift and bulge. &quot;+
				&quot;Your laterals now force your arms up to the point that your shoulders are encroaching on your neck&#39;s territory. Your figure forms an almost perfect Y-shape, the pinnacle of form.&quot;
			],
			huge: 
			[
				&quot;Your eyes follow every curve of your neck down toward your body, proper. You push your shoulders backwards and push out your @[all| pecs| noverb], bouncing each muscle with impressive &quot;+
				&quot;control. The very air thunders as each muscle creates small shockwaves of force. Every vein and chord is incredibly visible with the impossible amount of mass focused into each pec!\n\nYou raise your @[all| arms| noverb] into a mind-shattering and monstrous flex, curling your @[2| hands| noverb] inwards. Muscles that shouldn&#39;t exist rise alongside your mountainous bicep and conduct an &quot;+
				&quot;orchestra of creaking flesh - the sound a metal bunker would make if it had to bend and teeter. Thick firehose veins sprawl all across your form and visibly pulsate with the huge amount of &quot;+
				&quot;fuel your body now needs.\n\nLowering your arms, you bring them forward to touch your hard and sensitive nipples, &quot;+
				&quot;running your fingers across massive protroding nubs. You grab a handful of nipple and squeeze, your body instantly tensing into a cluster of bulging muscle. You moan as your head is all but swallowed.\n\nAfter a minute of fondling, you let your hands glide down to your lower torso and feel each curve of your @[all| abdominals| noverb]. With a mischievious booming laugh, you flex them &quot;+
				&quot;and create a thundering clap that rivals thunder itself. Finally, you bring each arm down into a most-muscular pose and feel your back and laterals flare out so widely that your vision is completely engulfed by your own body!&quot;
			]
		}
	},
	mirror_symbiote_UpperBodyFlavour: {
		heightFlavour: {
			small: 
			[
				&quot;Your eyes follow every curve of &lt;&lt;SymbioteName&gt;&gt;&#39;s neck down toward its body. You bring your shoulders backwards and push out &lt;&lt;SymbioteName&gt;&gt;&#39;s @[all| pecs| noverb], as the glistening muscles bounce with control. You raise your @[all| arms| noverb] into a powerful flex, curling your @[2| hands| noverb] inwards to make the biceps rise. You then bring them forward to touch your pliable nipples, running your fingers across the edge of the gooey, circular nubs. Moaning from the pleasure, you let your hands glide down to your lower torso and feel each curve of your @[all| abdominals| noverb]. Your every movement causes them to shift and bulge.&quot;
			],
			medium: 
			[
				&quot;Your eyes follow every curve of &lt;&lt;SymbioteName&gt;&gt;&#39;s neck down toward its body, proper. You bring your shoulders backwards and push out &lt;&lt;SymbioteName&gt;&gt;&#39;s @[all| pecs| noverb], bouncing each muscle with impressive control. You can feel the weight as it rises and falls. Even with the gooey texture, you can even get a small ripple of muscle to run from the top of each pec to the bottom. You raise your @[all| arms| noverb] into a powerful flex, curling your @[2| hands| noverb] inwards to truly make each bicep rise. You can hear audible sloshing from the movement of the faux musculature as its size fights against itself. You then bring them forward to touch &lt;&lt;SymbioteName&gt;&gt; soft and pliable, nipples, running your fingers along the areola. You moan from the pleasure. After a minute of fondling, you let your hands glide down to your lower torso and feel each curve of your @[all| abdominals| noverb]. Your every movement causes them to shift and bulge. The laterals are large enough to push your arms upwards and outwards giving you an imposing and brawny stance.&quot;
			],
			large: 
			[
				&quot;Your eyes follow every curve of &lt;&lt;SymbioteName&gt;&gt;&#39;s neck down toward its body. You push your shoulders backwards and push out your @[all| pecs| noverb], bouncing each muscle with impressive control. You can feel their heavy weight of the perfectly chiseled pectorals as they rise and ripple with each fall. You raise your @[all| arms| noverb] into a monstrous flex, curling the @[2| hands| noverb] inwards to truly make each bicep rise like hills. You can hear audible sloshing from the movement of the needlessly enormous musculature as its size fights against itself. These arms are truly a glorious, massive, perfectly built masterpiece. Lowering your arms, you bring them forward to touch your hard and sensitive, nipples, running your fingers across the large protroding nubs. They take up a fair portion of the space within your hand. You moan. After a minute of fondling, you let your hands glide down to your lower torso and feel each curve of your gooey @[all| abdominals| noverb]. Your every movement causes them to shift and bulge. Your laterals now force your arms up to the point that your shoulders are encroaching on your neck&#39;s territory. &lt;&lt;SymbioteName&gt;&gt; figure forms an almost perfect Y-shape, the pinnacle of form.&quot;
			],
			huge: 
			[
				&quot;Your eyes follow every curve of &lt;&lt;SymbioteName&gt;&gt;&#39;s neck down toward its body. You push your shoulders backwards and push out your @[all| pecs| noverb], bouncing each muscle with impressive control. The very air thunders as each muscle creates small shockwaves of force. The enormous pecs are gloriously dense and sculpted with the precision that’d make the finest craftsmanship seem like fodder before them. You raise your @[all| arms| noverb] into a mind-shattering and monstrous flex, curling your @[2| hands| noverb] inwards. Muscles that shouldn&#39;t exist rise alongside the mountainous bicep, the goo holds firmly in place, nearly warping the light around it by its sheer volume. The faux musculature is admirable nonetheless, inspiring awe to any onlooker. Lowering your arms, you bring them forward to touch your hard and sensitive nipples, running your fingers across massive protroding nubs. You grab a handful of nipple and squeeze, the gooey body instantly tensing into a cluster of bulging muscle. You moan as your head is all but swallowed. After a minute of fondling, you let your hands glide down to your lower torso and feel each curve of your @[all| abdominals| noverb]. With a mischievous booming laugh, you flex them and create a thundering clap that rivals thunder itself. Finally, you bring each arm down into a most-muscular pose and feel your back and laterals flare out so widely that your vision is completely engulfed by the size of the goo.&quot;
			]
		},
		corruptionFlavour:
		{
			corrupt25:
			[
				&quot; Your eyes meander around the goo covering your torso, it is perfectly intact, clean and unblemished. &lt;&lt;SymbioteName&gt;&gt; seems content on keeping the shape of its upper body clean and stable.&quot;
			],
			corrupt50:
			[
				&quot; Your eyes meander around the goo covering your torso, it drips slightly, like a wax candle that has just begun to melt. The clumps of goo slough whenever you bring a hand to wipe it off. &lt;&lt;SymbioteName&gt;&gt; seems restless, almost as if it wanted to escape but didn’t care enough to make a full attempt.&quot;
			],
			corrupt75:
			[
				&quot; Your eyes meander to the running goo across your torso. It flows in constant, but gentle streams. It almost gives the sensation of sweat constantly pouring down your chest. &lt;&lt;SymbioteName&gt;&gt; is  trembling softly, it’s form becoming increasingly more amorphous and unstable.&quot;
			],
			corrupt100:
			[
				&quot; Your eyes meander to the constant dripping of goo from your torso. &lt;&lt;SymbioteName&gt;&gt; has become reckless, its form is unstable and trembles with need. A constant downpour of goo leaks from its pores, making the body feel slick and slimy. &lt;&lt;SymbioteName&gt;&gt; is restless, needy, desperate for attention or a new toy to mess with.&quot;
			]
		}
	},
	mirror_symbiote_UpperBodyFlavour_LiveForEcho: {
		heightFlavour: {
			small: 
			[
				&quot;Your eyes follow every curve of &lt;&lt;SymbioteName&gt;&gt; neck down toward its body. &lt;&lt;SymbioteName&gt;&gt; springs into action as it continues to admire itself. It brings your shoulders backwards and puffs out its @[all| pecs| noverb] as the glistening muscles bounce with control. &lt;&lt;SymbioteName&gt;&gt; raises your @[all| arms| noverb] into a powerful flex, curling your @[2| hands| noverb] inwards to make the biceps rise. &lt;&lt;SymbioteName&gt;&gt; is positively loving every moment of its self admiration. Soon enough, &lt;&lt;SymbioteName&gt;&gt; then brings its hand forward to touch its pliable nipples, running its fingers across the edge of the gooey, circular nubs. After forcing a moan of pleasure from you, it glides its hands down to your lower torso to feel each curve of its @[all| abdominals| noverb]. Your every movement causes them to shift and bulge.&quot;
			],
			medium: 
			[
				&quot;Your eyes follow every curve of &lt;&lt;SymbioteName&gt;&gt; neck down toward its body. &lt;&lt;SymbioteName&gt;&gt; springs into action as it continues to admire itself. &lt;&lt;SymbioteName&gt;&gt; brings your shoulders backwards and puffs out its @[all| pecs| noverb], bouncing each muscle with impressive control. You can feel the weight as it rises and falls. Even with the gooey texture, you can even get a small ripple of muscle to run from the top of each pec to the bottom. &lt;&lt;SymbioteName&gt;&gt; raises your @[all| arms| noverb] into a powerful flex, curling your @[2| hands| noverb] inwards to truly make each bicep rise. You can hear audible sloshing from the movement of the faux musculature as its size fights against itself. &lt;&lt;SymbioteName&gt;&gt; is positively loving every moment of its self admiration. Soon enough, it brings its arms forward to touch its soft and pliable, nipples, running your fingers along the areola. After forcing a moan of pleasure from you, &lt;&lt;SymbioteName&gt;&gt; lets its hands glide down to your lower torso and feel each curve of your @[all| abdominals| noverb]. Your every movement causes them to shift and bulge. The laterals are large enough to push your arms upwards and outwards giving &lt;&lt;SymbioteName&gt;&gt; a large and very muscular stance.&quot;
			],
			large: 
			[
				&quot;Your eyes follow every curve of &lt;&lt;SymbioteName&gt;&gt; neck down toward its body. &lt;&lt;SymbioteName&gt;&gt; springs into action as it continues to admire itself. It pushes your shoulders backwards and puffs out its @[all| pecs| noverb], bouncing each muscle with impressive control. You can feel their heavy weight of the perfectly chiseled pectorals as they rise and ripple with each fall. &lt;&lt;SymbioteName&gt;&gt; raises your @[all| arms| noverb] into a monstrous flex, curling the @[2| hands| noverb] inwards to truly make each bicep rise like hills. You can hear audible sloshing from the movement of the needlessly enormous musculature as its size fights against itself. These arms are truly a glorious, massive, perfectly built masterpiece. &lt;&lt;SymbioteName&gt;&gt; is positively loving every moment of its self admiration. Lowering your arms, &lt;&lt;SymbioteName&gt;&gt; brings them forward to touch its hard and sensitive, nipples, running your fingers across the large protroding nubs. They take up a fair portion of the space within your hand. After forcing a moan of pleasure from you, it lets your hands glide down to your lower torso to get a feel for each curve of your gooey @[all| abdominals| noverb]. Your every movement causes them to shift and bulge. Your laterals now force your arms up to the point that your shoulders are encroaching on your neck&#39;s territory. &lt;&lt;SymbioteName&gt;&gt; figure forms an almost perfect Y-shape, a perfect display of peak form.&quot;
			],
			huge: 
			[
				&quot;Your eyes follow every curve of &lt;&lt;SymbioteName&gt;&gt; neck down toward its body. &lt;&lt;SymbioteName&gt;&gt; springs into action as it continues to admire itself. It pushes your shoulders backwards and puffs out its @[all| pecs| noverb], bouncing each muscle with impressive control. The very air thunders as each muscle creates small shockwaves of force. The enormous pecs are gloriously dense and sculpted with the precision that’d make the finest craftsmanship seem like fodder before them. &lt;&lt;SymbioteName&gt;&gt; raises your @[all| arms| noverb] into a monstrous flex, curling your @[2| hands| noverb] inwards. Muscles that shouldn&#39;t exist rise alongside the mountainous bicep, the goo holds firmly in place, nearly warping the light around it by its sheer volume. The faux musculature is admirable nonetheless, inspiring awe to any onlooker. &lt;&lt;SymbioteName&gt;&gt; is positively loving every moment of its self admiration.  Lowering your arms, it brings them forward to touch your hard and sensitive nipples, running its fingers across the massive protroding nubs. &lt;&lt;SymbioteName&gt;&gt; grabs a handful of its pectoral and squeezes, the gooey body instantly tensing into a cluster of bulging muscle. Your head is all but swallowed beneath its tremendous form. After forcing a moan of pleasure from you, &lt;&lt;SymbioteName&gt;&gt; lets your hands glide down to your lower torso and feel each curve of your @[all| abdominals| noverb]. &lt;&lt;SymbioteName&gt;&gt; flexes them and creates a thundering clap with volume that’d cause anyone within its presence to tremble. Finally, &lt;&lt;SymbioteName&gt;&gt; brings each arm down into a most-muscular pose as its back and laterals flare out so widely that your vision is completely engulfed by the size of the goo.&quot;
			]
		},
		corruptionFlavour:
		{
			corrupt25:
			[
				&quot; &lt;&lt;SymbioteName&gt;&gt; seems to be enjoying all of the attention it’s getting.&quot;
			],
			corrupt50:
			[
				&quot; &lt;&lt;SymbioteName&gt;&gt; is loving all of the attention you’re feeding them.&quot;
			],
			corrupt75:
			[
				&quot; &lt;&lt;SymbioteName&gt;&gt; idly strokes its body teasingly, as if to entice you.&quot;
			],
			corrupt100:
			[
				&quot; &lt;&lt;SymbioteName&gt;&gt; constantly fondles its own body in admiration, positively starved for attention.&quot;
			]
		}
	},
	mirror_player_Flavour: {
		heightFlavour: {
			small: 
			[
				&quot;You gaze into the polished surface.&quot;
			],
			medium: 
			[
				&quot;You shift backwards and forwards, gazing at what parts of your body fit within the image on the polished slate.&quot;
			],
			large: 
			[
				&quot;You step over the wall. Soon, you find yourself gazing at your form in the lake&#39;s reflection.&quot;
			],
			huge: 
			[
				&quot;You step over the wall. Soon, you find yourself gazing at the parts of your form that fit in the lake&#39;s reflection.&quot;
			]
		}
	},
	mirror_symbiote_Flavour: {
		heightFlavour: {
			small:
			[
				&quot;The goo form that covers your body is reflected in the polished surface of the slate.&quot;
			],
			medium:
			[
				&quot;The slick and gooey body reflected that barely fits in the polished surface.&quot;
			],
			large:
			[
				&quot;The lake holds your gooey form in its reflection.&quot;
			],
			huge:
			[
				&quot;What little you can see in the lake shows off your gargantun gooey form.&quot;
			]
		}
	},
	homeFlavour: {
		heightFlavour: {
			small: 
			[
				&quot;You travel to your house a few streets down. The one story house is not much, but you&#39;re proud of it. Every metal wall&quot; +
				&quot; was made with your own blood sweat and tears.\n\n You slide in through the dusty corrugated door and into the house proper. &quot;+
				&quot;\n\nInside is a few pieces of furniture you&#39;ve managed to cobble together. In the one corner, your bed rests under a small dirt speckled window.\n\n&quot;+
				&quot;In the middle, resting on a bearskin rug is a small table made from scrap wood and rubber. Your journal rests on it, its pages yellow with age.\n\n&quot;+
				&quot;Finally, no room is complete without a mirror. Or, at least, a highly polished metal slate that was good enough to act as one.&quot; 
			],
			medium: 
			[
				&quot;You travel to your house a few streets down. The one story house is not much, but you&#39;re proud of it. Every metal wall&quot; +
				&quot; was made with your own blood sweat and tears.\n\n You slide in through the dusty corrugated door and into the house proper. You smile as you realise how much of the doorway your body occupies and how you have to bend to keep your head from scraping against the roof. &quot;+
				&quot;\n\nInside is a few pieces of furniture you&#39;ve managed to cobble together. In the one corner, your bed rests under a small dirt speckled window. It&#39;s looking a bit small compared to you.\n\n&quot;+
				&quot;In the center of the room, resting on a bearskin rug, is a small table made from scrap wood and rubber. Your journal rests on it, its pages yellow with age. Looking at your @[all|hands|noverb], you realise that it might be difficult to use some day.\n\n&quot;+
				&quot;Finally, no room is complete without a mirror. Or, at least, a highly polished metal slate that was good enough to act as one.&quot;
			],
			large: 
			[
				&quot;You travel to your house a few streets down. How are you meant to fit anymore? One story is not nearly enough for you!&quot; +
				&quot;\n\n You grab the metal you had once lovingly crafted into a roof and rip it off with a loud screech. At least now, you could step inside if you wanted.&quot;+
				&quot;\n\nInside is a few pieces of furniture you&#39;ve managed to cobble together. In the one corner, your bed rests under a small window cut out of the sheet metal. Now, it would only serve as a dishrag for you.\n\n&quot;+
				&quot;In the middle, resting on a bearskin rug is a small table made from scrap wood and rubber. Your journal, rests on it. There&#39;s no point in even trying to pick it up with your meaty @[1|hands|noverb].\n\n&quot;+
				&quot;Finally, no room is complete without a mirror. Yet this would do little for you. Perhaps you could step over the walls of the village and use the reflective surface of the nearby lake, instead?&quot;
			],
			huge: 
			[
				&quot;No house can contain your size. The building that you had once called home doesn&#39;t hold a candle to you anymore.&quot; +
				&quot;\n\n You can only rely on your memories, your journal is nothing more than a speck far below you.&quot;+
				&quot;\n\nLuckily, you could easily step over the walls of the village and use the reflective surface of the nearby lake as a mirror, but even that hardly suffices for your sheer bulk.&quot;
			]
		}
	},
	basicAttackAttemptFlavour: {
		heightFlavour:
		{
			small: 
			[
				&quot;You rush in and attack.&quot;
			],
			medium: 
			[
				&quot;You charge in and swing your fist.&quot;
			],
			large: 
			[
				&quot;You stomp forward and swing a massive fist.&quot;
			],
			huge: 
			[
				&quot;Your @[all| arms| one=hurtles~more=hurtle] down toward the enemy.&quot;
			]
		},
		corruptionFlavour:
		{
			corrupt75:
			[
				&quot; A trail of purple energy flows from your knuckles.&quot;,
			],
			corrupt100:
			[
				&quot; Each vein in your hand and arm burns with a dark purple hue. Tainted energy rolls off of your skin as tendrils of corrupt light.&quot;,
			]
		}
	},
    bashAttackAttemptFlavour: {
		heightFlavour:
		{
			small: 
			[
				&quot;You quickly bash with your weapon&#39;s hilt.&quot;
			],
			medium: 
			[
				&quot;You charge in and quickly bash with your weapon&#39;s hilt.&quot;
			],
			large: 
			[
				&quot;You stomp forward, fully extending your arm from the side of your torso.&quot;
			],
			huge: 
			[
				&quot;Your @[1| arms| one=hurtles~more=hurtle] down toward the enemy, bashing wildly with your weapon&#39;s hilt.&quot;
			]
		},
		corruptionFlavour:
		{
			corrupt75:
			[
				&quot; A trail of purple energy flows from your knuckles.&quot;,
			],
			corrupt100:
			[
				&quot; Each vein in your hand and arm burns with a dark purple hue. Tainted energy rolls off of your skin as tendrils of corrupt light.&quot;,
			]
		}
	},
    slashAttackAttemptFlavour: {
		heightFlavour:
		{
			small: 
			[
				&quot;You swing your weapon with full force.&quot;
			],
			medium: 
			[
				&quot;You charge in and swing your weapon with full force.&quot;
			],
			large: 
			[
				&quot;You stomp forward, twisting your waist and shoulders round before turning back unleasing a mighty swing of your weapon.&quot;
			],
			huge: 
			[
				&quot;Your @[all| arms| one=hurtles~more=hurtle] down toward the enemy, unleasing a mighty swing of your weapon.&quot;
			]
		},
		corruptionFlavour:
		{
			corrupt75:
			[
				&quot; A trail of purple energy flows from your weapon.&quot;,
			],
			corrupt100:
			[
				&quot; Each vein in your hand and arm burns with a dark purple hue. Tainted energy rolls off of your weapon as tendrils of corrupt light.&quot;,
			]
		}
	},
	MuscleGrowthFlavourText :{
		musclesFlavour: {
			small: [
				&quot;muscles harden and pulse with increasing strength. Your biceps form impressive peaks above well defined forearms. Veins begin peeking through your skin &quot; +
				&quot;as they spread across your growing shoulders and neck. Your @[all|pecs|noverb] push outwards, your nipples harden and a moan escapes your mouth as the growth tumbles downward &quot; +
				&quot;like a fresh breath of air through your @[all|abdominals|noverb], thighs and calves.&quot;,
				
				&quot;athletic form hardens as every muscle contracts into picturesque beauty. Every line and crease deepens as the power flowing through you forces your body to &quot; +
				&quot;adapt. Your laterals spread wider, your abdominal wall pushes outwards and your upper body swells with growing, physical pride.&quot;,
				
				&quot;body convulses as an internal fire spreads outwards from your core and to each limb. Your body freezes, momentarily before a wellspring of growth overtakes you. &quot; +
				&quot;Calves bulge, quads expand and your upper body surges with strength to keep up.&quot;,

				&quot;expression shifts into a pleasurable smile. Looking down at your hands, you watch a bubble of growth move from your fingertips, &quot; +
				&quot;across your @[all|arms|noverb] and into your @[all|pecs|noverb]. &quot; +
				&quot;Your nutsack rumbles and your @[all|cocks|one=fire~more=fires] an unattural amount of cum. Every jet of white, every convulsion, propels your body upwards and outwards.&quot;,
			],
			medium: [
				&quot;body shudders and you double over. Your knees hit the ground as you are assaulted by a wave of intense pleasure. &quot; +
				&quot;Every burgeoning muscle flexes, each crest and trough grows into mounds that could only be crafted with years of dedication. &quot; +
				&quot;Your @[all|arms|noverb] push out larger with more strength, your back becomes an atlas of muscle - your @[all|pecs|noverb] begin pushing your growing nipples earthbound and your &quot; +
				&quot;@[all|abdominals|noverb] bulge with increased size.&quot;,
				
				&quot;mouth spreads into a wide grin as a surreal purple glow spins across the edges of your @[2|eyes|noverb]. Veins swell all over your body. Not moments later, your cock rises as your limbs pack on &quot; +
				&quot;weight and size. What was once ample, is now in excess. What was once well defined, is now barelling. You flex your bicep, watching it rise higher and higher. &quot; +
				&quot;A sinister smile spreads wide across your face - this is only the beginning.&quot;,
				
				&quot;cock hardens to full mast as a sudden growth spurt overtakes your body. You quickly wrap your @[all|arms|noverb] around your chest to feel your @[all|pecs|noverb] compete with your biceps. &quot; +
				&quot;Wave after wave, your arms push away from your chest - the sheer size being compressed into each muscle group is unfathomable! Your @[all|legs|noverb] adopt a wider stance as the war continues below &quot; +
				&quot;with your quads, expanding glutes and growing calves.&quot;,
				
				&quot;body spasms as your powerful muscles all flex at once. Your bull like neck pulses larger and begins to threaten the sides of your @[all|heads|noverb]. Your @[all|pecs|noverb] swell outwards in &quot; +
				&quot;leaps and bounds over a growing and impressive set of @[all|abdominals|noverb]. Your hands rove across each expanding inch of flesh, feeling your skin stretch tighter against &quot; +
				&quot;chords of steel that thicken with every passing second.&quot;,
			],
			large: [
				&quot;body shudders. Every boulder contained within you rumbles with an ominous wave of incoming growth. &quot; +
				&quot;Your biceps explode from raw, uncontained power. They barrel outwards until their pulsing peaks began to reach sizes that &quot; +
				&quot;are clearly unnatural. Each pectoral grows large enough to be a shelf, and they bounce eagerly as they consume more and more space in front of you. Your large nipples are forced &quot; +
				&quot;further sideways and downwards as their hosts pulsate larger and larget still! Thick thighs and glutes become even thicker, pillars that would easily support houses are &quot; +
				&quot;increasing in size before your very eyes!&quot; ,
				
				&quot;bones crack audibly. Growth is upon you yet again, and this wave was even stronger than your last! With a booming thud, your muscles explode with new size &quot; +
				&quot;- too much and too fast for your body to keep up with! The growth begins running rampant; each second packs on more and more until limbs begin to lock &quot; +
				&quot;and grind against each other from the lack of free space. With a primal roar, you flex, a beastly mountain of mass, and will it all to compact inwards. &quot; +
				&quot;Control was regained but your body has far from relented your new incredible atlassian size.&quot;,
				
				&quot;mouth opens wide as a primordial roar bellows from your growing maw. Bending down, you slam your fist into the ground and a wave of size propells itself &quot; +
				&quot;upwards from the cracked earth; up your forearm, bicep and into your bullish neck. Your @[all|pecs|noverb] push further outwards, forcing your center of gravity forward before &quot; +
				&quot;your waist expands into a pillar of power to support your new torso. Sliding outwards from the ground behind you; your @[all|legs|noverb] push each other apart, massaging and &quot; +
				&quot;grinding against your @[all|cocks|noverb]. The pleasure is too much! With another ear-splitting roar, you arch your back and unleash a torrential geyser of white.&quot;,
				
				&quot;jaw bobs in maniacal laughter as you feel the power within yourself erupt. Like waves from the surface of disturbed water, your entire body groans, creaks and shifts &quot; +
				&quot;as mucles begin to pack onto muscles. Chords thicken and roadworks of veins the size of heavy duty pipes spiral across your pulsating flesh. With a mighty stomp &quot; +
				&quot;your growing foot hits the ground; forcing a monstrous wave of size upwards through your calves, into your thighs and finally into your bulging muscular rear. Finally, bringing &quot; +
				&quot;your @[all|hands|noverb] together in a mighty clap, your upper body explodes to double its size!&quot;,
			],
			huge: [
				&quot;movements halt. A deadly silence overtakes the land that you tower over. A rumbling. The sound of war drums - the sound of the planet roaring its protest against your &quot; +
				&quot;impending change. Then it happens. Mountains that are biceps double in size. Pectorals that quake with every minor shift billow outwards. Nipples - hard, large and sensitive &quot; +
				&quot;are exiled into the deepening valley between them and an entire canyon of @[all|abdominals|noverb]. Laterals that were wings, were forced wider. Back muscles that &quot; +
				&quot;ripple with pure power, expand. Arms that could crush villages grow into monstrosities that the world could never contend with. Your @[all|cocks|noverb], large and heavy with muscle &quot; +
				&quot;slowly swings into the air; its growing mass forces your stance even wider. Another rumble. Another catastrophy. Rivers of white explode from its tip into a deluge &quot; +
				&quot;that coats you, the ground and every object close enough to suffer the titanic load unleashed from your @[all|balls|noverb].&quot;,
				
				&quot;@[all|arms|noverb] fall limp at your side. A loud rumbling, akin to the mighty growl of a beast in heat, begins to echo across the land. A dark shadow - the silhouette of &quot; +
				&quot;your monstrous form begins to shudder. The village, those around it, will all bear witness as you suddenly shiver. A crack, as loud as thunder &quot; +
				&quot;rockets through the air as you grow. Thunderous booms echo around you; every explosive sound heralds your titanic bones reshaping themselves to create more space. Your shadow grows with every shudder and  &quot; +
				&quot;covers more and more of the land. Higher. Wider. There are no human words to describe your size, no words that exist to describe the mass within your being - &quot; +
				&quot;no measurement of how much weight sits within your collosal and expanding form.&quot;,
				
				&quot;@[all|cocks|one=stiffens~more=stiffens]. An unfathomably large spurt of pre jettisons from your @[all|cocks|one=slit~more=slits] and pools in the lands far below you. The air becomes hot as a thick &quot; +
				&quot;umistakeable aura of power coats the insides of your nostrils. To the world&#39;s surprise, you shudder and balloon outwards &quot; +
				&quot;in every direction. Your forearms are a perfect pair of spheres of unadulterad power, pushing against growing biceps and triceps that have long since dwarfed your @[all|heads|noverb]. Your &quot; +
				&quot;towering masses flex upwards and expand outwards, packing on new muscle groups that have never been known to mankind. Your neck surges outward, practically engulfing the sides of your vision. &quot; + 
				&quot;Impressive laterals surge outwards, forming an incredibly powerful, yet impossible, Y-shape. @[all|legs|noverb], as built as the foundations of the world,  &quot; +
				&quot;explode into sizes of which no words can describe.&quot;,
				
				&quot;body shivers as another wave of growth approaches. More size. Bigger. You have to be bigger! You crave so much more! Your body surges even larger, responding to your will. &quot; +
				&quot;A prideful smile stretches your lips wide; you will become all consuming, ever-growing! Only the gods could try to stop you, but by then - you will be unstoppable. You will be more. A building is an insufficient measurement compared to the muscles you now support &quot; +
				&quot;, at least they are now after they split into even more muscle groups of absolute mind blowing size and power. Adjectives - words to help mortals describe concepts will never capture &quot; +
				&quot;the immensity each of your biceps peak at. Each proud muscle, expanding with every passing second, escalates from weapon of mass destruction, to world ending. You still need more. You will have more!&quot;,
			]
		}
	},
	CockGrowthFlavourText :{
		cockSizeFlavour:
		{
			small: [
				&quot;Your @[all|cocks|one=throbs~more=throb], harder than it ever has. You look down, feeling each vein engorge with unnatural thickness. &quot;+
				&quot;Then it hits you, a wave of pleasure grows from the base of your loin. Your shaft pulsates wildly as it expands thicker and longer. &quot;+
				&quot;Your eyes widen as the growth progresses further up your @[all|cocks|noverb]. &quot; +
				&quot;It&#39;s so long, so thick. And it keeps growing, pushing your fingers wider apart.&quot;,
			],
			medium: [
				&quot;A familiar feeling rushes over you. You grin, looking down at your @[all|cocks|noverb], welcoming a wave of incoming growth. &quot; +
				&quot;It suddenly hits you, like a rush of adrenaline. Your @[all|cocks|one=jolts~more=jolt] forward, hard enough to make you lose your balance. &quot; +
				&quot;Suddenly, it comes. You scream in pleasure as your loin grows thicker and longer. Every beat of your heart, &quot;+
				&quot;every flex of your muscles and every breath feed it with more heavy, throbbing flesh. You try to grasp at your @[all|cocks|noverb] with both hands, &quot;+
				&quot;failing to fully handle your monster as it grows uncontrollably. You throw your head back, moaning deeply enough to cut your breath short. &quot;,
			],
			large: [
				&quot;Suddenly, your @[all|cocks|one=throbs~more=throb]. The sheer need for attention of your monster overwhelms you. &quot; +
				&quot;You try to grasp the base; you can only tremble in anticipation. &quot; +
				&quot;Your @[all|cocks|one=is~more=are] so hot, so full and thick. You shiver at the thought of growing even bigger. &quot; +
				&quot;Jolts of pleasure pulsate from your @[all|cocks|noverb] as it starts growing. You desperately try to grasp and pleasure the throbbing flesh, but it is too massive for your hands to contain. &quot; +
				&quot;You push down and thrust your hips along the ground. The sheer mass of your @[all|cocks|noverb] is still incredibly sensitive; you moan in pleasure as it pushes outward, bigger and bigger. &quot; +
				&quot;You slide your fingers along your slit and moan passionately. Bolts of pleasure pierces you with every contact, &quot;+
				&quot;precum leaks out of your monstrous cock like a damaged dam. Your @[all|cocks|one=grows~more=grow] bigger than you thought possible. &quot;+
				&quot;Your loin is gigantic, monstrous even; finding anything that can handle you will be a challenge.&quot; ,
			],
			huge: [
				&quot;You feel something coming, something tremendous... A familiar warmth rushes over you; your loin burns with anticipation. &quot; +
				&quot;It keeps building, tingles of pleasure spread from your @[all|cocks|noverb]. This wave of incoming growth is greater than a roaring sea, &quot;+
				&quot;and it keeps building, threatening to swallow you in its eternal pleasure. &quot; +
				&quot;But you welcome it... You grin madly at your monstrous @[all|cocks|noverb] with an unatural eagerness. And then it happens. &quot;+
				&quot;Your @[all|cocks|one=explodes~more=explode] in size, mountains of sensitive flesh burst upwards along your pecs. You rub it passionately, each touch bringing you close to the edge. &quot; +
				&quot;Your veins grow massive, feeding your @[all|cocks|noverb] with untold power. A roar of triumph bursts out of you as your @[all|cocks|noverb] takes over the scenery. &quot;+
				&quot;Everything and everyone gets exposed to the glorious beast you&#39;re packing. They can only stare in awe as the ground rumbles; &quot;+
				&quot;your @[all|cocks|one=strains~more=strain], the land braces. Your roars resound throughout the land as an ocean of potent $CharacterSheet_Player.symbiote.color cum comes raining down on this world once again.&quot;,
			]
		},
	}
	
}&gt;&gt;</tw-passagedata><tw-passagedata pid="83" name="_symbiote_info_sheet" tags="" position="350,1100" size="100,100">&lt;&lt;set $InfoSheet_Symbiote =
{
	name: &quot;Echo&quot;,
	gender: &quot;male&quot;,
    boost: &quot;height&quot;,
    color: &quot;Blue&quot;,
	anatomy: {
		heads: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		jaws: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		hands: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		horns: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		wings: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		arms: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		abdominals: {
			number: 6,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		cocks: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		tails: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		}
	}
}&gt;&gt;</tw-passagedata><tw-passagedata pid="84" name="_slime_fight_sheet" tags="" position="475,1100" size="100,100">&lt;&lt;set $FighterSheet_Slime =
{
	hp: 80,
	stamina: 35,
	strength: 20,
	critChance: 10,
    critDamage: 1.75,
	arousalGain: 10,
	minArousal: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 12,
	variables: $FightVariables,
	fightMoves: [$FightMove_SlimeLunge],
	fightReward: $RewardTier.VERY_LOW,
	encounterIntroText: &quot;&lt;&lt;include Encounter_Intro_Slime&gt;&gt;&quot;,
	encounterStartText: &quot;&lt;&lt;include Encounter_Start_Slime&gt;&gt;&quot;,
	outcomePlayerWins: &quot;&lt;&lt;include Encounter_Win_Slime&gt;&gt;&quot;,
	outcomePlayerLoses: &quot;&lt;&lt;include Encounter_Loss_Slime&gt;&gt;&quot;
}&gt;&gt;</tw-passagedata><tw-passagedata pid="85" name="_slime_info_sheet" tags="" position="600,1100" size="100,100">&lt;&lt;set $InfoSheet_Slime =
{
	name: &quot;Slime&quot;,
	gender: &quot;other&quot;,
	corruption: 0,
	muscles: 0,
	height: 76,
	cock: 0,
	balls: 0,
	alive: true,
    anatomy:
    {
        heads: {
			number: 1,
			race: State.variables.RacePool.SYMBIOTE,
			colour: State.variables.ColourPool.DEFAULT
		},
		eyes: {
			number: 0,
			race: State.variables.RacePool.SYMBIOTE,
			colour: State.variables.ColourPool.DEFAULT
		},
		jaws: {
			number: 0,
			race: State.variables.RacePool.SYMBIOTE,
			colour: State.variables.ColourPool.DEFAULT
		},
		teeths: {
			number: 0,
			race: State.variables.RacePool.SYMBIOTE,
			colour: State.variables.ColourPool.DEFAULT
		},
		hands: {
			number: 2,
			race: State.variables.RacePool.SYMBIOTE,
			colour: State.variables.ColourPool.DEFAULT
		},
		horns: {
			number: 0,
			race: State.variables.RacePool.SYMBIOTE,
			colour: State.variables.ColourPool.DEFAULT
		},
		wings: {
			number: 0,
			race: State.variables.RacePool.SYMBIOTE,
			colour: State.variables.ColourPool.DEFAULT
		},
		tongues:{
			number: 0,
			race: State.variables.RacePool.SYMBIOTE,
			colour: State.variables.ColourPool.DEFAULT
		},
		arms: {
			number: 2,
			race: State.variables.RacePool.SYMBIOTE,
			colour: State.variables.ColourPool.DEFAULT
		},
		pecs: {
			number: 0,
			race: State.variables.RacePool.SYMBIOTE,
			colour: State.variables.ColourPool.DEFAULT
		},
		abdominals: {
			number: 0,
			race: State.variables.RacePool.SYMBIOTE,
			colour: State.variables.ColourPool.DEFAULT
		},
		cocks: {
			number: 0,
			race: State.variables.RacePool.SYMBIOTE,
			colour: State.variables.ColourPool.DEFAULT
		},
		balls: {
			number: 0,
			race: State.variables.RacePool.SYMBIOTE,
			colour: State.variables.ColourPool.DEFAULT
		},
		legs: {
			number: 0,
			race: State.variables.RacePool.SYMBIOTE,
			colour: State.variables.ColourPool.DEFAULT
		},
		tails: {
			number: 0,
			race: State.variables.RacePool.SYMBIOTE,
			colour: State.variables.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: State.variables.RacePool.SYMBIOTE,
			colour: State.variables.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: State.variables.RacePool.SYMBIOTE,
			colour: State.variables.ColourPool.DEFAULT
		}
    }
}&gt;&gt;</tw-passagedata><tw-passagedata pid="86" name="Sheets_Slime" tags="" position="725,1100" size="100,100">&lt;&lt;include &quot;_slime_fight_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_slime_info_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_slime_quest_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_slime_text_sheet&quot;&gt;&gt;

&lt;&lt;set $CharacterSheet_Slime = setup.CharacterFactory.createCharacter({id: &quot;CharacterSheet_Slime&quot;, 
                                                               info:  $InfoSheet_Slime, 
                                                               fight: $FighterSheet_Slime, 
                                                               quest: $QuestSheet_Slime, 
                                                               text:  $TextSheet_Slime})&gt;&gt;</tw-passagedata><tw-passagedata pid="87" name="_slime_quest_sheet" tags="" position="850,1100" size="100,100">&lt;&lt;set $QuestSheet_Slime =
{
	met: false
}&gt;&gt;</tw-passagedata><tw-passagedata pid="88" name="_slime_text_sheet" tags="" position="975,1100" size="100,100">&lt;&lt;set $TextSheet_Slime =
{
}&gt;&gt;</tw-passagedata><tw-passagedata pid="89" name="_tok_fight_sheet" tags="" position="1100,1100" size="100,100">&lt;&lt;set $FighterSheet_Tok =
{
	hp: 86,
	stamina: 20,
	strength: 25,
	critChance: 20,
    critDamage: 1.75,
	arousalGain: 20,
    growthMultiplier: 1,
    bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	minArousal: 0,
	staminaRecovery: 8,
	variables: $FightVariables,
	fightMoves: [$FightMove_Basic_Attack,$FightMove_Goo_Stun],
    abilities: [],
    fightReward: $RewardTier.MEDIUM,
    encounterIntroText: &quot;&lt;&lt;include Tok_Fight_Intro&gt;&gt;&quot;,
    encounterStartText: &quot;His immense stature is intimidating, he looks powerful enough to break you in half. Yet you feel an alien instinct warp your reason. The sight of his massive muscles and cock nearly drives you mad with excitement. Your own cock throbs as you ready your weapon.&quot;
    + &quot;\n The fear is all gone, all you think of is to make this beast yours.&quot;,
	outcomePlayerWins: 
		&quot;&lt;&lt;include Tok_Fight_Won&gt;&gt;&quot;,
	outcomePlayerLoses: 
		&quot;Tok brings you down to your knees. \n \n[[Continue-&gt;Tok Fight Lost]]&quot;
}&gt;&gt;</tw-passagedata><tw-passagedata pid="90" name="_tok_info_sheet" tags="" position="1225,1100" size="100,100">&lt;&lt;set $InfoSheet_Tok =
{
	name: &quot;Tok&quot;,
	gender: &quot;male&quot;,
	picture: &quot;https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/tok.png&quot;,
	corruption: 36,
	muscles: 40,
	height: 160,
	cock: 6,
	balls: 2,
	anatomy: {
		heads: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		jaws: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		hands: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		horns: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		wings: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		arms: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		abdominals: {
			number: 6,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		cocks: {
			number: 1,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		tails: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: State.variables.RacePool.DEFAULT,
			colour: State.variables.ColourPool.DEFAULT
		}
		
	}
}&gt;&gt;</tw-passagedata><tw-passagedata pid="91" name="Sheets_Tok" tags="" position="100,1225" size="100,100">&lt;&lt;include &quot;_tok_fight_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_tok_info_sheet&quot;&gt;&gt;
&lt;&lt;include &quot;_tok_quest_sheet&quot;&gt;&gt;

&lt;&lt;set $CharacterSheet_Tok = setup.CharacterFactory.createCharacter({id: &quot;CharacterSheet_Tok&quot;, 
                                                 info: $InfoSheet_Tok, 
                                                 fight: $FighterSheet_Tok, 
                                                 quest: $QuestSheet_Tok, 
                                                 text: undefined})&gt;&gt;</tw-passagedata><tw-passagedata pid="92" name="_tok_quest_sheet" tags="" position="225,1225" size="100,100">&lt;&lt;set $QuestSheet_Tok =
{
	met: false,
	beatenOnce: false
}&gt;&gt;</tw-passagedata><tw-passagedata pid="93" name="Ability_ActiveParry" tags="" position="350,1225" size="100,100">&lt;&lt;set $Ability_ActiveParry = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_ActiveParry&quot;,
    name:       &quot;Active Parry&quot;, 
    description:function(character)
    {
        return character.info.name + &quot; uses a parry stance.&quot;; 
    },
    maxRank: 1
})&gt;&gt;

&lt;&lt;run $Ability_ActiveParry.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams){
        abilityRuntimeData.blackboard.parryTurnCount = 0;
    },
)&gt;&gt;

&lt;&lt;run $Ability_ActiveParry.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_FIGHT_PRE_RECEIVE_DAMAGE,
    function(abilityRuntimeData, abilityParams){
        var displayString = &quot;&quot;;

        if(abilityParams.attackDamage != 0)
        {
            var blackboard = 
            {
                attackDamage: abilityParams.attackDamage,
            };
            
            abilityParams.attackDamage = 0;
            abilityParams.ignoreAdditionalEffects = true;

            abilityParams.target.applyAbilityRuntimeData(State.variables.Ability_ParryEnergy, blackboard)

            displayString += abilityParams.target.info.name + &quot; gazes at the incoming hit, letting it reach him.\n&quot;
            displayString += &quot;The attack feels like it connects, but something different happens. It is like it hit a invisible wall of energy instead.\n&quot;;
            displayString += &quot;The energy of the attack explodes into a thick white mist.\n&quot;;
            displayString += abilityParams.target.info.name + &quot; grins as the it rushes into his chest, filling him with the energy of the attack.&quot;;

        }
        else
        {
            displayString += abilityParams.target.info.name + &quot; is ready to parry, but nothing comes.&quot;;
        }

        return displayString;
    }
)&gt;&gt;

&lt;&lt;run $Ability_ActiveParry.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_FIGHT_TURN_START,
    function(abilityRuntimeData, abilityParams){
        var displayString = &quot;&quot;;

        abilityRuntimeData.blackboard.parryTurnCount++

        if(abilityRuntimeData.blackboard.parryTurnCount &gt;= 2)
        {
            abilityRuntimeData.isScheduledForRemoval = true;
        }

        return displayString;
    }
)&gt;&gt;</tw-passagedata><tw-passagedata pid="94" name="Ability_AppetiteForGrowth" tags="" position="475,1225" size="100,100">&lt;&lt;set $Ability_AppetiteForGrowth = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_AppetiteForGrowth&quot;,
    name:       &quot;Appetite for Growth&quot;,
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return &quot;Whenever you gain any amount of growth, you instead gain 25% more of that amount.&quot;; 
        }
        else
        {
            return &quot;Whenever you gain any amount of growth, you instead gain &quot;+ (Math.ceil((0.25 + abilityRuntimeData.getRankGrowth(&quot;log&quot;, 10)).toFixed(2) * 100)) +&quot;% more of that amount.&quot;; 
        }
    },
    maxRank: 5
})&gt;&gt;

&lt;&lt;run $Ability_AppetiteForGrowth.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;

&lt;&lt;run $Ability_AppetiteForGrowth.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_ACQUIRE,
        function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.growthMods = {
            mod: setup.mod.ADD, value: (0.25 + abilityRuntimeData.getRankGrowth(&quot;log&quot;, 10)) //This value is not a - I KNOOOOOOOOOOOOOOOOW I JUST FOUND IT
        }
    }
)&gt;&gt;

&lt;&lt;run $Ability_AppetiteForGrowth.setUpgrade(
    function(abilityRuntimeData, character){
        return (abilityRuntimeData.canRank() == false) &amp;&amp; (setup.getStatValue(character, &quot;corruption&quot;) &gt;= 50)
    },
    $Ability_AppetiteForGrowth_2,
    function(character){
        var displayString = &quot;&quot;
        displayString += &quot;You must be at least level 3: (&quot; + State.variables.Level  + &quot;)\n&quot;
        return displayString
    }
)&gt;&gt;

&lt;&lt;run $Ability_AppetiteForGrowth.setUnlockableFromLevelScreen(true)&gt;&gt;

&lt;&lt;run $Ability_AppetiteForGrowth.setUnlockCondition(
    function(character){
        return (State.variables.Level &gt;= 3)
    }
)&gt;&gt;

&lt;&lt;set $Ability_AppetiteForGrowth.setCategory($AbilityCategory.GROWTH)&gt;&gt;
&lt;&lt;set $Ability_AppetiteForGrowth.setGrade($AbilityGrade.LOW)&gt;&gt;</tw-passagedata><tw-passagedata pid="95" name="Ability_AppetiteForGrowth_2" tags="" position="600,1225" size="100,100">&lt;&lt;set $Ability_AppetiteForGrowth_2 = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_AppetiteForGrowth_2&quot;,
    name:       &quot;Demonic Appetite&quot;,
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return &quot;Whenever you gain any amount of growth, you instead gain 75% more of that amount.&quot;; 
        }
        else
        {
            return &quot;Whenever you gain any amount of growth, you instead gain &quot;+ (Math.ceil((0.75 + abilityRuntimeData.getRankGrowth(&quot;exp&quot;, 3) / 100).toFixed(2) * 100)) +&quot;% more of that amount.\n Gain &quot; + (10 + abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 5))+&quot; corruption.&quot; ; 
        }
    },
    maxRank: 5
})&gt;&gt;

&lt;&lt;run $Ability_AppetiteForGrowth_2.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;

&lt;&lt;run $Ability_AppetiteForGrowth_2.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.growthMods = {
                mod: setup.mod.ADD, value: (0.75 + abilityRuntimeData.getRankGrowth(&quot;exp&quot;, 3) / 100)
        }
        abilityRuntimeData.modifier.setCorruptionMods({mod: setup.mod.ADD, value: 10 + abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 5)});
    }
)&gt;&gt;

&lt;&lt;set $Ability_AppetiteForGrowth_2.setCategory($AbilityCategory.SOMBREVE)&gt;&gt;
&lt;&lt;set $Ability_AppetiteForGrowth_2.setGrade($AbilityGrade.HIGH)&gt;&gt;</tw-passagedata><tw-passagedata pid="96" name="Ability_Berserking" tags="" position="725,1225" size="100,100">&lt;&lt;set $Ability_Berserking = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_Berserking&quot;,
    name:       &quot;Berserking&quot;,
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            let displayString = &quot;You fight with reckless abandon. Your strength is increased by 20%&quot;;
            displayString += &quot; and your max HP is decreased by 5%&quot;
            return displayString
        }
        else
        {
            let displayString = &quot;You fight with reckless abandon. Your strength is increased by &quot;;
            displayString += abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 20) + &quot;%&quot;;
            displayString += &quot; and your max HP is decreased by &quot;;
            displayString += abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 5) + &quot;%&quot;;
            return displayString
        }
    },
    maxRank: 5
})&gt;&gt;

&lt;&lt;run $Ability_Berserking.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined
)&gt;&gt;

&lt;&lt;run $Ability_Berserking.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_ACQUIRE  + $AbilityTrigger.ON_STAT_CHANGE,
    function(abilityRuntimeData, abilityParams)
    {   
        //remove previous iteration of the buff from current stats before multiplying
        abilityRuntimeData.modifier.strengthMods = {};
        abilityRuntimeData.modifier.maxHPMods = {};

        var maxHpMultiplier = (abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 5)) / 100
        var strengthMultiplier = (abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 20)) / 100
        var maxHp =  setup.getStatValue(abilityParams.self, &quot;hp&quot;);
        var strength = setup.getStatValue(abilityParams.self, &quot;strength&quot;);

        abilityRuntimeData.modifier.strengthMods = {
            mod: setup.mod.ADD,
            value: Math.ceil(strengthMultiplier * strength)
        }

        abilityRuntimeData.modifier.maxHPMods = {
                mod: setup.mod.REMOVE,
                value: Math.ceil(maxHpMultiplier * maxHp)
            }
    }
)&gt;&gt;

&lt;&lt;run $Ability_Berserking.setUnlockableFromLevelScreen(true)&gt;&gt;

&lt;&lt;run $Ability_Berserking.setUnlockCondition(
    function(character){
        return (State.variables.Level &gt;= 1)
    }
)&gt;&gt;

&lt;&lt;set $Ability_Berserking.setCategory($AbilityCategory.WARRIOR)&gt;&gt;
&lt;&lt;set $Ability_Berserking.setGrade($AbilityGrade.VERYLOW)&gt;&gt;</tw-passagedata><tw-passagedata pid="97" name="Ability_BrinkOfMadness" tags="" position="850,1225" size="100,100">&lt;&lt;set $Ability_BrinkOfMadness = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_BrinkOfMadness&quot;,
    name:       &quot;Brink of Madness&quot;,
    description:function(character, abilityRuntimeData)
    {
        return &quot;Your mind cracks under the weight of corruption upon reaching low health.&quot;;
        
    },
    maxRank: 1
})&gt;&gt;

&lt;&lt;run $Ability_BrinkOfMadness.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;

&lt;&lt;run $Ability_BrinkOfMadness.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_ENTER_MID_HEALTH,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = true
        abilityParams.target.fight.variables.currentArousal = Math.min(100, abilityParams.target.fight.variables.currentArousal + abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 40))
        abilityRuntimeData.modifier.critChanceMods = {mod: setup.mod.ADD, value: abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 30)}
        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 20)}
        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 120)};
        abilityParams.target.fight.variables.currentStamina += 120;
        abilityRuntimeData.modifier.fightMovesMods = {mod: setup.mod.ADD, value: [State.variables.FightMove_Hypnotize]}
        
        var displayString = abilityParams.target.info.name + &quot; pants in exhaustion. A terrible, oppressive thought enters your mind, that you are going to win this battle. \n&quot;;
        displayString += &quot;His heart is racing, he feels corruption seeping in his mind, feeding on his doubts. \n&quot;
        displayString += &quot;A dark purple aura builds around his frame as he wishes he had reveled in the power of corruption to crush like the bug you are.\n&quot;

        return displayString;
    },
)&gt;&gt;

&lt;&lt;run $Ability_BrinkOfMadness.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_EXIT_MID_HEALTH + $AbilityTrigger.ON_FIGHT_END,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false
        abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
        {
            abilityID: abilityRuntimeData.abilityData.id
        });
        return &quot;&quot;
    }
)&gt;&gt;

&lt;&lt;run $Ability_BrinkOfMadness.setUnlockableFromLevelScreen(true)&gt;&gt;

&lt;&lt;run $Ability_BrinkOfMadness.setUnlockCondition(
    function(character){
        return (State.variables.Level &gt;= 20 &amp;&amp; setup.getStatValue(character, &quot;corruption&quot;) &gt;= 100);
    }
)&gt;&gt;

&lt;&lt;set $Ability_BrinkOfMadness.setCategory($AbilityCategory.SOMBREVE)&gt;&gt;
&lt;&lt;set $Ability_BrinkOfMadness.setGrade($AbilityGrade.VERYHIGH)&gt;&gt;</tw-passagedata><tw-passagedata pid="98" name="Ability_ChannelTheAstralSoul" tags="" position="975,1225" size="100,100">&lt;&lt;set $Ability_ChannelTheAstralSoul = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_ChannelTheAstralSoul&quot;,
    name:       &quot;Channel the Astral Soul&quot;, 
    description:function(character)
    {
        var displayString = &quot;&quot;
        var corruptionTier = Math.floor(setup.getStatValue(character, &quot;corruption&quot;) / 20);
        switch(corruptionTier)
        {
            case 0:
                displayString += &quot;Increases Essence gain. Its effect weakens the more corrupt you are.&quot;;
                break;
            case 1:
                displayString += &quot;Your corruption weakens your connection to the astral soul preventing you from gaining much extra essence.&quot;;
                break;
            case 2:
                displayString += &quot;Your corruption significantly weakens your connection to the astral soul almost preventing you from gaining extra essence.&quot;;
                break;
            case 3:
                displayString += &quot;Your corruption almost completely disrupts your connection to the astral soul. You barely gain any extra essence.&quot;;
                break;
            case 4:
                displayString += &quot;The corruption actively seeks to disrupt your connection to the astral soul, you gain almost nothing from the extraction.&quot;;
                break;
            default:
                displayString += &quot;The corruption actively seeks to disrupt your connection to the astral soul, you gain almost nothing from the extraction.&quot;
                break;
        }
        return displayString; 
    },
    maxRank: 5
})&gt;&gt;

&lt;&lt;run $Ability_ChannelTheAstralSoul.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;

&lt;&lt;run $Ability_ChannelTheAstralSoul.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_ACQUIRE + $AbilityTrigger.ON_GAIN_CORRUPTION,
    function(abilityRuntimeData, abilityParams)
    {
        var corruptionTier = Math.floor(setup.getStatValue(abilityParams.self, &quot;corruption&quot;) / 20);
        switch(corruptionTier)
        {
            case 0:
                abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 0.20)};
                break;
            case 1:
                abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 0.15)};
                break;
            case 2:
                abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 0.10)};
                break;
            case 3:
                abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 0.05)};
                break;
            case 4:
                abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 0.01)};
                break;
            default:
                abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 0.01)};
                break;
        }
    }
)&gt;&gt;

&lt;&lt;run $Ability_ChannelTheAstralSoul.setUnlockCondition(
    function(character){
        return State.variables.Level &gt;= 3
    }
)&gt;&gt;

&lt;&lt;run $Ability_ChannelTheAstralSoul.setUnlockableFromLevelScreen(true)&gt;&gt;

&lt;&lt;set $Ability_ChannelTheAstralSoul.setCategory($AbilityCategory.ORTHA)&gt;&gt;
&lt;&lt;set $Ability_ChannelTheAstralSoul.setGrade($AbilityGrade.LOW)&gt;&gt;</tw-passagedata><tw-passagedata pid="99" name="Ability_CodexPassion" tags="" position="1100,1225" size="100,100">&lt;&lt;set $Ability_CodexPassion = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_CodexPassion&quot;,
    name:       &quot;Codex&#39;s Passion&quot;,
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return &quot;Using a Fight Skill that does no damage heals you for 2 health&quot;;  
        }
        else
        {
            return &quot;Using a Fight Skill that does no damage heals you for &quot;+abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 2)+&quot; health&quot;; 
        }
    },
    maxRank: 5
})&gt;&gt;

&lt;&lt;run $Ability_CodexPassion.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;

&lt;&lt;run $Ability_CodexPassion.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_FIGHT_DO_DAMAGELESS_ATTACK,
    function(abilityRuntimeData, abilityParams)
    {   
        let heal = abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 2);

        abilityParams.self.fight.variables.currentHP += heal;

        if(heal != 0)
        {
            return &quot;Your soul resonates within you, healing you for &lt;span style=&#39;color:#46c546;&#39;&gt;&quot;+ heal + &quot;&lt;/span&gt; health.&quot;;
        }
    },
)&gt;&gt;

&lt;&lt;run $Ability_CodexPassion.setUnlockCondition(
    function(character){
        return (State.variables.Level &gt;= 4) &amp; ((setup.getStatValue(character, &quot;corruption&quot;) &lt;= 25))
    }
)&gt;&gt;

&lt;&lt;run $Ability_CodexPassion.setUnlockableFromLevelScreen(true)&gt;&gt;

&lt;&lt;set $Ability_CodexPassion.setCategory($AbilityCategory.ORTHA)&gt;&gt;
&lt;&lt;set $Ability_CodexPassion.setGrade($AbilityGrade.LOW)&gt;&gt;</tw-passagedata><tw-passagedata pid="100" name="Ability_NinthVerse" tags="" position="1225,1225" size="100,100">&lt;&lt;set $Ability_NinthVerse = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_NinthVerse&quot;,
    name:       &quot;Ferocity of the Ninth Verse&quot;,
    description:function(character, abilityRuntimeData)
    {
        let displayString = &quot;The Antikythera has given the land increased ferocity. \n&quot;;
        displayString += &quot; Your crit chance is increased by 20%&quot;
        return displayString
    },
    maxRank: 1
})&gt;&gt;

&lt;&lt;run $Ability_NinthVerse.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)&gt;&gt;

&lt;&lt;run $Ability_NinthVerse.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_DAY_CHANGE + $AbilityTrigger.ON_STAT_CHANGE + $AbilityTrigger.ON_FIGHT_START,
    function(abilityRuntimeData, abilityParams)
    {   
        var crit = setup.getStatValue(abilityParams.self, &quot;critChance&quot;);

        if(setup.getVerseFromCycle($Day, $DaysPerCycle) == &quot;The Ninth Verse&quot;)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.critChanceMods = {
                mod: setup.mod.ADD,
                value: Math.ceil(crit * 0.2)
            }
        }
        else
        {
            abilityRuntimeData.isActive = false;
        }

    }
)&gt;&gt;

&lt;&lt;run $Ability_NinthVerse.setAsGlobalAbility()&gt;&gt;</tw-passagedata><tw-passagedata pid="101" name="Ability_SixthVerse" tags="" position="100,1350" size="100,100">&lt;&lt;set $Ability_SixthVerse = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_SixthVerse&quot;,
    name:       &quot;Strength of the Sixth Verse&quot;,
    description:function(character, abilityRuntimeData)
    {
        let displayString = &quot;The Antikythera has given the land increased strength. \n&quot;;
        displayString += &quot; Your strength is increased by 20%&quot;
        return displayString
    },
    maxRank: 1
})&gt;&gt;

&lt;&lt;run $Ability_SixthVerse.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)&gt;&gt;

&lt;&lt;run $Ability_SixthVerse.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_DAY_CHANGE + $AbilityTrigger.ON_STAT_CHANGE + $AbilityTrigger.ON_FIGHT_START,
    function(abilityRuntimeData, abilityParams)
    {   
        var Strength = setup.getStatValue(abilityParams.self, &quot;strength&quot;);

        if(setup.getVerseFromCycle($Day, $DaysPerCycle) == &quot;The Sixth Verse&quot;)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.strengthMods = {
                mod: setup.mod.ADD,
                value: Math.ceil(Strength * 0.2)
            }
        }
        else
        {
            abilityRuntimeData.isActive = false;
        }

    }
)&gt;&gt;

&lt;&lt;run $Ability_SixthVerse.setAsGlobalAbility()&gt;&gt;</tw-passagedata><tw-passagedata pid="102" name="Ability_ThirdVerse" tags="" position="225,1350" size="100,100">&lt;&lt;set $Ability_ThirdVerse = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_ThirdVerse&quot;,
    name:       &quot;Energy of the Third Verse&quot;,
    description:function(character, abilityRuntimeData)
    {
        let displayString = &quot;The Antikythera has given the land increased stamina. \n&quot;;
        displayString += &quot; Your stamina is increased by 20%&quot;
        return displayString
    },
    maxRank: 1
})&gt;&gt;

&lt;&lt;run $Ability_ThirdVerse.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = true;
    }
)&gt;&gt;

&lt;&lt;run $Ability_ThirdVerse.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_DAY_CHANGE + $AbilityTrigger.ON_STAT_CHANGE + $AbilityTrigger.ON_FIGHT_START,
    function(abilityRuntimeData, abilityParams)
    {   
        var stamina = setup.getStatValue(abilityParams.self, &quot;stamina&quot;);

        if(setup.getVerseFromCycle($Day, $DaysPerCycle) == &quot;The Third Verse&quot;)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.maxStaminaMods = {
                mod: setup.mod.ADD,
                value: Math.ceil(stamina * 0.2)
            }
        }
        else
        {
            abilityRuntimeData.isActive = false;
        }
    }
)&gt;&gt;

&lt;&lt;run $Ability_ThirdVerse.setAsGlobalAbility()&gt;&gt;</tw-passagedata><tw-passagedata pid="103" name="Ability_TwelfthVerse" tags="" position="350,1350" size="100,100">&lt;&lt;set $Ability_TwelfthVerse = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_TwelfthVerse&quot;,
    name:       &quot;Adaptation of the Twelfth Verse&quot;,
    description:function(character, abilityRuntimeData)
    {
        let displayString = &quot;The Antikythera is forcing evolution across the land. \n&quot;;
        displayString += &quot;20% more size gained. \n&quot;
        displayString += &quot;Grants Incubus Strike.&quot;
        return displayString
    },
    maxRank: 1
})&gt;&gt;

&lt;&lt;run $Ability_TwelfthVerse.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)&gt;&gt;

&lt;&lt;run $Ability_TwelfthVerse.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_DAY_CHANGE + $AbilityTrigger.ON_STAT_CHANGE + $AbilityTrigger.ON_FIGHT_START,
    function(abilityRuntimeData, abilityParams)
    {   
        var growth =  setup.getStatValue(abilityParams.self, &quot;growthMultiplier&quot;);

        if(setup.getVerseFromCycle($Day, $DaysPerCycle) == &quot;The Twelfth Verse&quot;)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.growthMods = {
                mod: setup.mod.ADD,
                value: Math.ceil(growth * 0.2)
            }
        }
        else
        {
            abilityRuntimeData.isActive = false;
        }

    }
)&gt;&gt;

&lt;&lt;run $Ability_TwelfthVerse.setAsGlobalAbility()&gt;&gt;</tw-passagedata><tw-passagedata pid="104" name="Ability_DeadlyAim" tags="" position="475,1350" size="100,100">&lt;&lt;set $Ability_DeadlyAim = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_DeadlyAim&quot;,
    name:       &quot;Deadly Aim&quot;,
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            let displayString = &quot;When you strike, you make sure it counts. Your crit chance is increased by 20%&quot;;
            displayString += &quot; and your stamina is decreased by 5%&quot;
            return displayString
        }
        else
        {
            let displayString = &quot;When you strike, you make sure it counts. Your crit chance is increased by &quot;;
            displayString += abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 20) + &quot;%&quot;;
            displayString += &quot; and your stamina is decreased by &quot;;
            displayString += abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 5) + &quot;%&quot;;
            return displayString
        }
    },
    maxRank: 5
})&gt;&gt;

&lt;&lt;run $Ability_DeadlyAim.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined
)&gt;&gt;

&lt;&lt;run $Ability_DeadlyAim.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_ACQUIRE + $AbilityTrigger.ON_STAT_CHANGE,
    function(abilityRuntimeData, abilityParams)
    {   
        //remove previous iteration of the buff from current stats before multiplying
        abilityRuntimeData.modifier.critChanceMods = {};
        abilityRuntimeData.modifier.maxStaminaMods = {};

        var critMultiplier = (abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 20)) / 100
        var staminaMultiplier = (abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 5)) / 100
        var crit =  setup.getStatValue(abilityParams.self, &quot;critChance&quot;);
        var stamina = setup.getStatValue(abilityParams.self, &quot;stamina&quot;);

        abilityRuntimeData.modifier.critChanceMods = {
            mod: setup.mod.ADD,
            value: Math.ceil(critMultiplier * crit)
        }

        abilityRuntimeData.modifier.maxStaminaMods = {
                mod: setup.mod.REMOVE,
                value: Math.ceil(staminaMultiplier * stamina)
            }
    }
)&gt;&gt;

&lt;&lt;run $Ability_DeadlyAim.setUnlockableFromLevelScreen(true)&gt;&gt;

&lt;&lt;run $Ability_DeadlyAim.setUnlockCondition(
    function(character){
        return (State.variables.Level &gt;= 1)
    }
)&gt;&gt;

&lt;&lt;set $Ability_DeadlyAim.setCategory($AbilityCategory.WARRIOR)&gt;&gt;
&lt;&lt;set $Ability_DeadlyAim.setGrade($AbilityGrade.VERYLOW)&gt;&gt;</tw-passagedata><tw-passagedata pid="105" name="Ability_DemonicCorruption" tags="" position="600,1350" size="100,100">&lt;&lt;set $Ability_DemonicCorruption = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_DemonicCorruption&quot;,
    name:       &quot;Minor Demon&quot;,
    description:function(character)
    {
        return &quot;Demonic powers flickers within you.&quot;; 
    },
    maxRank: 1
})&gt;&gt;


&lt;&lt;run $Ability_DemonicCorruption.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 3}
        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 4}
        abilityRuntimeData.modifier.setCorruptionMods({mod: setup.mod.ADD, value: 30})
        abilityRuntimeData.modifier.musclesMods = {mod: setup.mod.ADD, value: 10}
        abilityRuntimeData.modifier.heightMods = {mod: setup.mod.ADD, value: 6}
        abilityRuntimeData.modifier.cockMods = {mod: setup.mod.ADD, value: 5}
        abilityRuntimeData.modifier.ballsMods = {mod: setup.mod.ADD, value: 2}
    }
)&gt;&gt;

&lt;&lt;run $Ability_DemonicCorruption.setUpgrade(
    function(abilityRuntimeData, character){
        return true;
    },
    $Ability_DemonicCorruption_2
)&gt;&gt;

&lt;&lt;run $Ability_DemonicCorruption.setUnlockCondition(
    function(character){
        return (State.variables.Level &gt;= 1)
    }
)&gt;&gt;</tw-passagedata><tw-passagedata pid="106" name="Ability_DemonicCorruption_2" tags="" position="725,1350" size="100,100">&lt;&lt;set $Ability_DemonicCorruption_2 = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_DemonicCorruption_2&quot;,
    name:       &quot;Major Demon&quot;,
    description:function(character)
    {
        return &quot;Can use Incubus&#39;s Call\n&quot; +
                &quot;Demonic powers flow through you.&quot;
    },
    maxRank: 1
})&gt;&gt;

&lt;&lt;run $Ability_DemonicCorruption_2.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 9}
        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 10}
        abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: 5}

        abilityRuntimeData.modifier.setCorruptionMods({mod: setup.mod.ADD, value: 45});
        abilityRuntimeData.modifier.musclesMods = {mod: setup.mod.ADD, value: 15}
        abilityRuntimeData.modifier.heightMods = {mod: setup.mod.ADD, value: 16}
        abilityRuntimeData.modifier.cockMods = {mod: setup.mod.ADD, value: 12}
        abilityRuntimeData.modifier.ballsMods = {mod: setup.mod.ADD, value: 4}
        abilityRuntimeData.modifier.fightMovesMods = {mod: setup.mod.ADD, value: [State.variables.FightMove_IncubusCall]}
    }
)&gt;&gt;

&lt;&lt;run $Ability_DemonicCorruption_2.setUpgrade(
    function(abilityRuntimeData, character){
        return true;
    },
    $Ability_DemonicCorruption_3
)&gt;&gt;</tw-passagedata><tw-passagedata pid="107" name="Ability_DemonicCorruption_3" tags="" position="850,1350" size="100,100">&lt;&lt;set $Ability_DemonicCorruption_3 = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_DemonicCorruption_3&quot;,
    name:       &quot;Lord of Lust&quot;,
    description:function(character)
    {
        return &quot;Can use Incubus&#39;s Call\n&quot; +
                &quot;Can use Incubus&#39;s Strike\n&quot; +
                &quot;You are one with your demonic powers.&quot;
    },
    maxRank: 1
})&gt;&gt;

&lt;&lt;run $Ability_DemonicCorruption_3.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 15}
        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 15}
        abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: 10}
        abilityRuntimeData.modifier.setCorruptionMods({mod: setup.mod.ADD, value: 60})
        abilityRuntimeData.modifier.musclesMods = {mod: setup.mod.ADD, value: 30}
        abilityRuntimeData.modifier.heightMods = {mod: setup.mod.ADD, value: 32}
        abilityRuntimeData.modifier.cockMods = {mod: setup.mod.ADD, value: 18}
        abilityRuntimeData.modifier.ballsMods = {mod: setup.mod.ADD, value: 6}
        abilityRuntimeData.modifier.fightMovesMods = {mod: setup.mod.ADD, value: [State.variables.FightMove_IncubusCall, State.variables.FightMove_IncubusStrike]}
    }
)&gt;&gt;</tw-passagedata><tw-passagedata pid="108" name="Ability_EchoForm" tags="" position="975,1350" size="100,100">&lt;&lt;set $Ability_EchoForm = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_EchoForm&quot;,
    name:       &quot;Symbiote Form&quot;,
    description:function(character){
        return character.symbiote.name + &quot;&#39;s power flows through your body.&quot;;
    },
    maxRank: 5
})&gt;&gt;

&lt;&lt;run $Ability_EchoForm.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_MAX_LUST,
    function(abilityRuntimeData, abilityParams)
    {   
        if(State.variables.HasSymbiote == false || State.variables.HasSymbiote == undefined)
        {
            abilityRuntimeData.isActive = true;
            State.variables.HasSymbiote = true;

            let hpMod = 25;
            let stamMod = 5;
            abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: hpMod}
            abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: stamMod}
            abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 10}
            abilityRuntimeData.modifier.critChanceMods = {mod: setup.mod.ADD, value: 10}
            abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.REPLACE, value: -17}
            abilityRuntimeData.modifier.staminaRecoveryMods = {mod: setup.mod.ADD, value: 2}
            abilityRuntimeData.modifier.fightMovesMods = {mod: setup.mod.ADD, value: [$FightMove_Goo_Stun]}
            abilityRuntimeData.modifier.actionSlotsMods = {mod: setup.mod.ADD, value: 1}
            abilityRuntimeData.modifier.comboMovesPerTurnMods = {mod: setup.mod.ADD, value: 2}

			abilityParams.self.fight.variables.currentHP = Math.min(abilityParams.self.fight.variables.currentHP + hpMod, setup.getMaxHP(abilityParams.self));
			abilityParams.self.fight.variables.currentStamina = Math.min(abilityParams.self.fight.variables.currentStamina + stamMod, setup.getMaxStamina(abilityParams.self));

            return &quot;Arousal overtakes you. \n A thick &quot;+$CharacterSheet_Player.symbiote.color+&quot; goo emerges from your pores. \n You turn into a massive muscular &quot;+$CharacterSheet_Player.symbiote.color+&quot; &quot;+setup.getRace($CharacterSheet_Player.symbiote.anatomy)+&quot;.&quot;;
        }
    }
)&gt;&gt;

&lt;&lt;run $Ability_EchoForm.addBehaviour(
    &quot;end&quot;,
    $AbilityTrigger.ON_MIN_LUST + $AbilityTrigger.ON_FIGHT_END,
    function(abilityRuntimeData, abilityParams)
    {   
        if(State.variables.HasSymbiote == true)
        {
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityID: abilityRuntimeData.abilityData.id
            });
            
            State.variables.HasSymbiote = false;
            abilityRuntimeData.isActive = false;

            return &quot;You revert back to your &quot;+setup.getRace(abilityParams.self.info.anatomy)+&quot; form&quot;;
        }
    }
)&gt;&gt;</tw-passagedata><tw-passagedata pid="109" name="Ability_EssenceHoarder" tags="" position="1100,1350" size="100,100">&lt;&lt;set $Ability_EssenceHoarder = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_EssenceHoarder&quot;,
    name:       &quot;Essence Hoarder&quot;,
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return &quot;Every 200 Essense within you grants you 1 Strength. (up to 30)&quot;; 
        }
        else
        {
            return &quot;Every 200 Essense within you grants you &quot;+abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 1)+&quot; Strength. (up to &quot;+abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 30)+&quot;)&quot;; 
        }
    },
    maxRank: 5
})&gt;&gt;

&lt;&lt;run $Ability_EssenceHoarder.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;

&lt;&lt;run $Ability_EssenceHoarder.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_GAIN_ESSENCE + $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var mod = Math.min(Math.floor(State.variables.Essence / 200) * abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 1), abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 30));
        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: mod}
    },
)&gt;&gt;

&lt;&lt;run $Ability_EssenceHoarder.setUnlockCondition(
    function(character){
        return (State.variables.Level &gt;= 5)
    }
)&gt;&gt;

&lt;&lt;run $Ability_EssenceHoarder.setUnlockableFromLevelScreen(true)&gt;&gt;

&lt;&lt;set $Ability_EssenceHoarder.setCategory($AbilityCategory.WARRIOR)&gt;&gt;
&lt;&lt;set $Ability_EssenceHoarder.setGrade($AbilityGrade.MEDIUM)&gt;&gt;</tw-passagedata><tw-passagedata pid="110" name="Ability_HerculeanBuild" tags="" position="1225,1350" size="100,100">&lt;&lt;set $Ability_HerculeanBuild = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_HerculeanBuild&quot;,
    name:       &quot;Herculean Build&quot;,
    description:function(abilityData, abilityRuntimeData){
        if(abilityRuntimeData == undefined)
        {
            return &quot;Gain Strength equal to your half your Muscles stat (up to 15). Your Muscles grow by 5 upon acquiring this Ability&quot;
        }
        else
        {
            return &quot;Gain Strength equal to your half your Muscles stat (up to &quot;+abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 15)+&quot;). Your Muscles grow by 5 upon acquiring this Ability&quot;
        }
    },
    maxRank: 5
})&gt;&gt;

&lt;&lt;run $Ability_HerculeanBuild.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined
)&gt;&gt;

&lt;&lt;run $Ability_HerculeanBuild.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_APPLY_GROWTH,
    function(abilityRuntimeData, abilityParams){
        var boost = Math.min(~~(setup.getStatValue(abilityParams.self, &quot;muscles&quot;) / 2), abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 15));
        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: boost}
    }
)&gt;&gt;

&lt;&lt;run $Ability_HerculeanBuild.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams){
        setup.applyGrowth(abilityParams.self, &quot;muscles&quot;, 5);
    }
)&gt;&gt;

&lt;&lt;run $Ability_HerculeanBuild.setUnlockableFromLevelScreen(true)&gt;&gt;

&lt;&lt;run $Ability_HerculeanBuild.setUnlockCondition(
    function(character){
        return (State.variables.Level &gt;= 1)
    }
)&gt;&gt;

&lt;&lt;set $Ability_HerculeanBuild.setCategory($AbilityCategory.WARRIOR)&gt;&gt;
&lt;&lt;set $Ability_HerculeanBuild.setGrade($AbilityGrade.VERYLOW)&gt;&gt;</tw-passagedata><tw-passagedata pid="111" name="Ability_HostOfEcho" tags="" position="100,1475" size="100,100">&lt;&lt;set $Ability_HostOfEcho = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_HostOfEcho&quot;,
    name:       &quot;Host of &lt;&lt;SymbioteName&gt;&gt;&quot;,
    description:function(character)
    {
        return &quot;You are now the host of a mysterious being...\n-Unlocks Arousal bar\n-Can equip Pleasure Self fight move.\n-Reaching Maximum Arousal transforms you into something more...&quot;; 
    },
    maxRank: 1
})&gt;&gt;

&lt;&lt;run $Ability_HostOfEcho.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        this.name = &quot;Host of &lt;&lt;SymbioteName&gt;&gt;&quot;;
        
        abilityRuntimeData.modifier.fightMovesMods = {mod: setup.mod.ADD, value: [$FightMove_Masturbate]}
    }
)&gt;&gt;</tw-passagedata><tw-passagedata pid="112" name="Ability_KalethsFervour" tags="" position="225,1475" size="100,100">&lt;&lt;set $Ability_KalethsFervour = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_KalethsFervour&quot;,
    name:       &quot;Kaleth&#39;s Fervour&quot;,
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return &quot;You gain 3% more growth for every point of corruption within you.&quot;; 
        }
        else
        {
            return &quot;You gain &quot;+abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 3)+&quot;%  more growth for every point of corruption within you.&quot;;
        }
    },
    maxRank: 10
})&gt;&gt;

&lt;&lt;run $Ability_KalethsFervour.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;

&lt;&lt;run $Ability_KalethsFervour.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_GAIN_CORRUPTION + $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {   
        abilityRuntimeData.modifier.growthMods = {mod: setup.mod.ADD, value: abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 1) / 100 * setup.getStatValue(abilityParams.self, &quot;corruption&quot;)};
    },
)&gt;&gt;

&lt;&lt;run $Ability_KalethsFervour.setUnlockableFromLevelScreen(true)&gt;&gt;

&lt;&lt;run $Ability_KalethsFervour.setUnlockCondition(
    function(character){
        return (State.variables.Level &gt;= 7) &amp; (setup.getStatValue(character, &quot;corruption&quot;) &gt;= 50);
    }
)&gt;&gt;

&lt;&lt;set $Ability_KalethsFervour.setCategory($AbilityCategory.SOMBREVE)&gt;&gt;
&lt;&lt;set $Ability_KalethsFervour.setGrade($AbilityGrade.HIGH)&gt;&gt;</tw-passagedata><tw-passagedata pid="113" name="Ability_LastStand" tags="" position="350,1475" size="100,100">&lt;&lt;set $Ability_LastStand = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_LastStand&quot;,
    name:       &quot;Last Stand&quot;,
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return &quot;Whenever you fall below 25% health, you gain 20 arousal, 30% critical chance and 15 strength.&quot;; 
        }
        else
        {
            return &quot;Whenever you fall below 25% health, you gain &quot;+abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 20)+&quot; arousal, &quot;+abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 30)+&quot;% critical chance and &quot;+abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 15)+&quot; strength.&quot;; 
        }
        
    },
    maxRank: 3
})&gt;&gt;

&lt;&lt;run $Ability_LastStand.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;

&lt;&lt;run $Ability_LastStand.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_ENTER_LOW_HEALTH,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = true
        abilityParams.self.fight.variables.currentArousal += Math.min(100, abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 20))
        abilityRuntimeData.modifier.critChanceMods = {mod: setup.mod.ADD, value: abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 30)}
        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 15)}
        return &quot;The adrenaline of battle pumps through your veins!&quot;
    },
)&gt;&gt;

&lt;&lt;run $Ability_LastStand.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_EXIT_LOW_HEALTH + $AbilityTrigger.ON_FIGHT_END,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false
        abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
        {
            abilityID: abilityRuntimeData.abilityData.id
        });
        return &quot;You inhale deeply, regaining your composure.&quot;
    }
)&gt;&gt;

&lt;&lt;run $Ability_LastStand.setUnlockableFromLevelScreen(true)&gt;&gt;

&lt;&lt;run $Ability_LastStand.setUnlockCondition(
    function(character){
        return (State.variables.Level &gt;= 3);
    }
)&gt;&gt;

&lt;&lt;set $Ability_LastStand.setCategory($AbilityCategory.WARRIOR)&gt;&gt;
&lt;&lt;set $Ability_LastStand.setGrade($AbilityGrade.LOW)&gt;&gt;</tw-passagedata><tw-passagedata pid="114" name="Ability_Masochism" tags="" position="475,1475" size="100,100">&lt;&lt;set $Ability_Masochism = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_Masochism&quot;,
    name:       &quot;Masochism&quot;,
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return &quot;Whenever you receive damage, you gain that much Arousal. (up to 3 per rank)&quot;; 
        }
        else
        {
            return &quot;Whenever you receive damage, you gain that much Arousal. (up to &quot;+ abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 3) +&quot;)&quot;; 
        }
    },
    maxRank: 5
})&gt;&gt;

&lt;&lt;run $Ability_Masochism.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;

&lt;&lt;run $Ability_Masochism.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_FIGHT_POST_RECEIVE_DAMAGE,
    function(abilityRuntimeData, abilityParams)
    {
        var He = setup.getPronoun(abilityParams.target,&quot;pronounCap&quot;);

        var arousalGain = Math.min(abilityParams.attackDamage, abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 3));
        
        var displayString = abilityParams.target.info.name + &quot; relishes the pain. &quot;+He+&quot; gains &lt;span style=&#39;color:#ac46c5;&#39;&gt;&quot; + arousalGain + &quot;&lt;/span&gt; Arousal\n&quot;;

        abilityParams.target.fight.variables.currentArousal += arousalGain;

        return displayString;
    },
)&gt;&gt;

&lt;&lt;run $Ability_Masochism.setUnlockableFromLevelScreen(true)&gt;&gt;

&lt;&lt;run $Ability_Masochism.setUnlockCondition(
    function(character){
        return (State.variables.Level &gt;= 1);
    }
)&gt;&gt;

&lt;&lt;set $Ability_Masochism.setCategory($AbilityCategory.LUST)&gt;&gt;
&lt;&lt;set $Ability_Masochism.setGrade($AbilityGrade.VERYLOW)&gt;&gt;</tw-passagedata><tw-passagedata pid="115" name="Ability_MemoriesOfApothus" tags="" position="600,1475" size="100,100">&lt;&lt;set $Ability_MemoriesOfApothus = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_MemoriesOfApothus&quot;,
    name:       &quot;Memories of Apothus&quot;,
    description:function(character)
    {
        return &quot;Distant words of unrestrained madness echo within your soul.&quot;; 
    },
    maxRank: 1
})&gt;&gt;

&lt;&lt;run $Ability_MemoriesOfApothus.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.corruptionMods = {mod: setup.mod.ADD, value: 20};
        abilityRuntimeData.modifier.minArousalMods = {mod: setup.mod.ADD, value: 10};
        abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: 10};
        abilityRuntimeData.modifier.critMod = {mod: setup.mod.REMOVE, value: 20};
    }
)&gt;&gt;</tw-passagedata><tw-passagedata pid="116" name="Ability_MemoriesOfTheChosen" tags="" position="725,1475" size="100,100">&lt;&lt;set $Ability_MemoriesOfTheChosen = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_MemoriesOfTheChosen&quot;,
    name:       &quot;Memories of the Chosen&quot;,
    description:function(character)
    {
        return &quot;Distant words of cataclysmic ambitions echo within your soul.&quot;; 
    },
    maxRank: 1
})&gt;&gt;

&lt;&lt;run $Ability_MemoriesOfTheChosen.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: 25};
        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 25}
        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 10}
        abilityRuntimeData.modifier.staminaRecoveryMods = {mod: setup.mod.ADD, value: 5}
    }
)&gt;&gt;</tw-passagedata><tw-passagedata pid="117" name="Ability_Mutant" tags="" position="850,1475" size="100,100">&lt;&lt;set $Ability_Mutant = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_Mutant&quot;,
    name:       &quot;Mutant&quot;,
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return &quot;The corruption within you seeks to drastically alter your form! When you take damage, you have a 1/10 chance of growing additional limbs.&quot;
        }
        else
        {
            return &quot;The corruption within you seeks to drastically alter your form! When you take damage, you have a 1/&quot; + (11 - abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 1)) + &quot; chance of growing additional limbs.&quot;
        }
    },
    maxRank: 5
})&gt;&gt;

&lt;&lt;run $Ability_Mutant.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined
)&gt;&gt;

&lt;&lt;run $Ability_Mutant.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_FIGHT_POST_RECEIVE_DAMAGE,
    function(abilityRuntimeData, abilityParams)
    {
        var denominator = 12 - abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 1);
        if(Math.floor(Math.random() * denominator) == (denominator - 1)){
            var randomLimb = setup.getRandomLimb(abilityParams.target.info.anatomy)
            var defaultNumber = randomLimb.defaultNumber;
            var limb = randomLimb.limb;
            var displayString = &quot;You feel the corruption run rampant within you! You hunch over, euphoria blinding you as your body changes!&quot;

            if (defaultNumber % 2 == 0){
                setup.changeLimbNumber(abilityParams.target.info.anatomy, limb, 2, &quot;add&quot;) 
                displayString += setup.processFlavours(abilityParams.target, &quot; You have grown another pair of &quot; + &quot;@[2|&quot; + limb + &quot;|noverb]!&quot;)
            }else{
                setup.changeLimbNumber(abilityParams.target.info.anatomy, limb, 1, &quot;add&quot;)
                displayString += setup.processFlavours(abilityParams.target, &quot; You have grown another &quot; + &quot;@[1|&quot; + limb + &quot;|noverb]!&quot;)
            }
            return displayString;
        }else{
            return &quot;&quot;;
        }  
    }
)&gt;&gt;

&lt;&lt;run $Ability_Mutant.setUpgrade(
    function(abilityRuntimeData, character){
        return (setup.getStatValue(character, &quot;corruption&quot;) &gt;= 100) &amp;&amp; (abilityRuntimeData.canRank() == false)
    },
    $Ability_Mutant_2,
    function(character){
        var displayString = &quot;&quot;
        displayString += &quot;You must have at least 100 corruption: (&quot; + setup.displayStatValue(character, &quot;corruption&quot;) + &quot;)\n&quot;
        return displayString
    }
)&gt;&gt;


&lt;&lt;run $Ability_Mutant.setUnlockableFromLevelScreen(true)&gt;&gt;

&lt;&lt;run $Ability_Mutant.setUnlockCondition(
    function(character){
        return (State.variables.Level &gt;= 1) &amp;&amp; (setup.getStatValue(character, &quot;corruption&quot;) &gt;= 75)
    }
)&gt;&gt;

&lt;&lt;set $Ability_Mutant.setCategory($AbilityCategory.SOMBREVE)&gt;&gt;
&lt;&lt;set $Ability_Mutant.setGrade($AbilityGrade.HIGH)&gt;&gt;</tw-passagedata><tw-passagedata pid="118" name="Ability_Mutant_2" tags="" position="975,1475" size="100,100">&lt;&lt;set $Ability_Mutant_2 = setup.AbilityDataFactory.createAbilityData({
id:         &quot;Ability_Mutant_2&quot;,
name:       &quot;Abomination&quot;,
description:function(character, abilityRuntimeData)
{
    return &quot;Your body has become twisted by the corruption rampant within you! When you take damage, you have a 1/5 chance of doubling certain limbs.&quot;
},
maxRank: 1
})&gt;&gt;

&lt;&lt;run $Ability_Mutant_2.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined
)&gt;&gt;

&lt;&lt;run $Ability_Mutant_2.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_FIGHT_POST_RECEIVE_DAMAGE,
    function(abilityRuntimeData, abilityParams)
    {
        if(Math.floor(Math.random() * 6) == 5){
            var randomLimb = setup.getRandomLimb(abilityParams.target.info.anatomy);
            var defaultNumber = randomLimb.defaultNumber;
            var limb = randomLimb.limb;

            setup.changeLimbNumber(abilityParams.target.info.anatomy, limb, 2, &quot;multiply&quot;);
            var displayString = &quot;Your body pulses, the corruption within you bubbles to the surface. Your muscles shift and your bones crack as you grow twice the amount of &quot;;
            var limbNumber = setup.getLimbNumber(&quot;all&quot;, abilityParams.target.info.anatomy[limb], true);

            if(limbNumber == 2){
                displayString +=  setup.processFlavours(abilityParams.target, limb + &quot; you have! You now have two @[all|&quot; + limb + &quot;|noverb].\n&quot;);
            }else{
                displayString +=  setup.processFlavours(abilityParams.target, limb + &quot; you have! You now have @[all|&quot; + limb + &quot;|noverb].\n&quot;);
            }
              
            return displayString;
        }else{
            return &quot;&quot;;
        }
    }
)&gt;&gt;

&lt;&lt;set $Ability_Mutant_2.setCategory($AbilityCategory.SOMBREVE)&gt;&gt;
&lt;&lt;set $Ability_Mutant_2.setGrade($AbilityGrade.VERYHIGH)&gt;&gt;</tw-passagedata><tw-passagedata pid="119" name="Ability_CurseOfTheNaga" tags="" position="1100,1475" size="100,100">&lt;&lt;set $Ability_CurseOfTheNaga = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_CurseOfTheNaga&quot;,
    name:       &quot;Curse of the Naga&quot;, 
    description:function(character)
    {
        return &quot;A part of you was stolen by the Lost Naga.\n Only by defeating him can you get your strength back.&quot;; 
    },
    maxRank: 1
})&gt;&gt;

&lt;&lt;run $Ability_CurseOfTheNaga.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams){
        abilityRuntimeData.modifier.musclesMods = {mod: setup.mod.REMOVE, value: State.variables.CharacterSheet_Player.quest.curseOfTheNagaStatDrain.muscles};
        abilityRuntimeData.modifier.heightMods = {mod: setup.mod.REMOVE, value: State.variables.CharacterSheet_Player.quest.curseOfTheNagaStatDrain.height};
        abilityRuntimeData.modifier.cockMods = {mod: setup.mod.REMOVE, value: State.variables.CharacterSheet_Player.quest.curseOfTheNagaStatDrain.cock};
        abilityRuntimeData.modifier.ballsMods = {mod: setup.mod.REMOVE, value: State.variables.CharacterSheet_Player.quest.curseOfTheNagaStatDrain.balls};
    }
)&gt;&gt;</tw-passagedata><tw-passagedata pid="120" name="Ability_StolenMass" tags="" position="1225,1475" size="100,100">&lt;&lt;set $Ability_StolenMass = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_StolenMass&quot;,
    name:       &quot;Stolen Mass&quot;,
    description:function(character)
    {
        return &quot;You have stolen mass from another creature.&quot;; 
    },
    maxRank: 1
})&gt;&gt;

&lt;&lt;run $Ability_StolenMass.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams){
        abilityRuntimeData.modifier.musclesMods = {mod: setup.mod.ADD, value: State.variables.CharacterSheet_Player.quest.curseOfTheNagaStatDrain.muscles};
        abilityRuntimeData.modifier.heightMods = {mod: setup.mod.ADD, value: State.variables.CharacterSheet_Player.quest.curseOfTheNagaStatDrain.height};
        abilityRuntimeData.modifier.cockMods = {mod: setup.mod.ADD, value: State.variables.CharacterSheet_Player.quest.curseOfTheNagaStatDrain.cock};
        abilityRuntimeData.modifier.ballsMods = {mod: setup.mod.ADD, value: State.variables.CharacterSheet_Player.quest.curseOfTheNagaStatDrain.balls};
    }
)&gt;&gt;</tw-passagedata><tw-passagedata pid="121" name="Ability_NeverendingGrowth" tags="" position="100,1600" size="100,100">&lt;&lt;set $Ability_NeverendingGrowth = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_NeverendingGrowth&quot;,
    name:       &quot;Never-ending Growth&quot;, 
    description:function(character, abilityRuntimeData){
        return &quot;Your body continuously grows larger while in combat. The more corrupt you are, the more effective this growth is.&quot; 
    },
    maxRank: 1
})&gt;&gt;

&lt;&lt;run $Ability_NeverendingGrowth.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined
)&gt;&gt;

&lt;&lt;run $Ability_NeverendingGrowth.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_FIGHT_TURN_START,
    function(abilityRuntimeData, abilityParams)
    {
        var self = abilityParams.self;
        var level = abilityRuntimeData.abilityData.level;
        var corruption = setup.getStatValue(self, &quot;corruption&quot;);
        var multiplier = Math.ceil(corruption / 20);

        var displayString = &quot;&quot;;

        var cockSize = setup.getStatValue(self, &quot;cock&quot;)
        var muscleSize = setup.getStatValue(self, &quot;muscles&quot;)
        var ballSize = setup.getStatValue(self, &quot;balls&quot;)
        var height = setup.getStatValue(self, &quot;height&quot;)

        setup.applyGrowth(self, &quot;cock&quot;, Math.round(3 * multiplier));
        setup.applyGrowth(self, &quot;balls&quot;, Math.round(1 * multiplier));
        setup.applyGrowth(self, &quot;muscles&quot;, Math.round(2 * multiplier));
        setup.applyGrowth(self, &quot;height&quot;, Math.round(9 * multiplier));

        if (setup.getStatValue(self, &quot;corruption&quot;) &gt; 0){
            if(self.id == &quot;CharacterSheet_Player&quot;){
                displayString += &quot;Your muscles flex but do not recede in size when they relax.&quot;
                displayString += &quot; A wash of pleasure takes you as your @[all|cocks|noverb] and @[all|balls|noverb] lurch with added size.\n&quot;
                return setup.processFlavours(self, displayString);
            }else{
                displayString += &quot;His muscles flex but do not recede in size when they relax.&quot;
                displayString += &quot; Howling from growth induced euphoria, its @[all|cocks|noverb] and @[all|balls|noverb] lurch with added size.\n&quot;
                return setup.processFlavours(self, displayString);
            }
        }else{
            return undefined
        }
        
    }
)&gt;&gt;

&lt;&lt;run $Ability_NeverendingGrowth.setUnlockableFromLevelScreen(true)&gt;&gt;

&lt;&lt;run $Ability_NeverendingGrowth.setUnlockCondition(
    function(character){
        return (State.variables.Level &gt;= 10) &amp;&amp; (setup.getStatValue(character, &quot;corruption&quot;) &gt;= 50)
    }
)&gt;&gt;

&lt;&lt;set $Ability_NeverendingGrowth.setCategory($AbilityCategory.GROWTH)&gt;&gt;
&lt;&lt;set $Ability_NeverendingGrowth.setGrade($AbilityGrade.HIGH)&gt;&gt;</tw-passagedata><tw-passagedata pid="122" name="Ability_NyxParasiteInfection" tags="" position="225,1600" size="100,100">&lt;&lt;set $Ability_NyxParasiteInfection = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_NyxParasiteInfection&quot;,
    name:       &quot;Nyx Parasite Infection&quot;, 
    description:function(character){
        return &quot;Creatures of Nyx live within your body.\n You must protect the parasites...&quot;
    },
    maxRank: 10
})&gt;&gt;

&lt;&lt;run $Ability_NyxParasiteInfection.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined
)&gt;&gt;

&lt;&lt;run $Ability_NyxParasiteInfection.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.minArousalMods = {mod: setup.mod.ADD, value: 20};
        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 2)};
        abilityRuntimeData.modifier.cockMods = {mod: setup.mod.ADD, value: abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 4)};
        abilityRuntimeData.modifier.ballsMods = {mod: setup.mod.ADD, value: abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 3)};
        abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.REMOVE, value: 0.1};
    }
)&gt;&gt;

&lt;&lt;run $Ability_NyxParasiteInfection.setUpgrade(
    function(abilityRuntimeData, character){
        return abilityRuntimeData.canRank() == false
    },
    $Ability_NyxParasiteInfection_2,
    function(character){
        return &quot;&quot;
    }
)&gt;&gt;</tw-passagedata><tw-passagedata pid="123" name="Ability_NyxParasiteInfection_2" tags="" position="350,1600" size="100,100">&lt;&lt;set $Ability_NyxParasiteInfection_2 = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_NyxParasiteInfection_2&quot;,
    name:       &quot;Nyx Parasite Lord&quot;, 
    description:function(character){
        return &quot;You host countless nyx parasites within you.\n You gain 1 min arousal per parasite within your body.\n You must spread.\nYou must fuck.\nYou must grow.&quot;
    },
    maxRank: 15
})&gt;&gt;

&lt;&lt;run $Ability_NyxParasiteInfection_2.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined
)&gt;&gt;

&lt;&lt;run $Ability_NyxParasiteInfection_2.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.minArousalMods = {mod: setup.mod.ADD, value: 20 + abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 1)};
        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 20 + abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 3)};
        abilityRuntimeData.modifier.cockMods = {mod: setup.mod.ADD, value: 40 + abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 10)};
        abilityRuntimeData.modifier.ballsMods = {mod: setup.mod.ADD, value: 30 + abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 8)};
        abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.REMOVE, value: 0.2};
        abilityRuntimeData.modifier.fightMovesMods = {mod: setup.mod.ADD, value: [State.variables.FightMove_SummonParasite]}
    }
)&gt;&gt;</tw-passagedata><tw-passagedata pid="124" name="Ability_Oath_Containment" tags="" position="475,1600" size="100,100">&lt;&lt;set $Ability_Oath_Containment = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_Oath_Containment&quot;,
    name:       &quot;Oath of Containment&quot;,
    description:function(character)
    {
        return &quot;Chain shaped tattoos race up your arms.\nThis oath lasts for as long as the cultists of Nyx remain sealed.&quot;; 
    },
    maxRank: 1
})&gt;&gt;

&lt;&lt;run $Ability_Oath_Containment.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.REMOVE, value: 5};
        abilityRuntimeData.modifier.critChanceMods = {mod: setup.mod.ADD, value: 10};
        abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: 10};
    }
)&gt;&gt;</tw-passagedata><tw-passagedata pid="125" name="Ability_Oath_Nyx" tags="" position="600,1600" size="100,100">&lt;&lt;set $Ability_Oath_Nyx = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_Oath_Nyx&quot;,
    name:       &quot;Oath of Nyx&quot;,
    description:function(character)
    {
        return &quot;A purple vortex shaped tattoo curls around the left side of your torso.\nThis oath lasts for as long as you strive to unleash Nyx upon the world.&quot;; 
    },
    maxRank: 1
})&gt;&gt;

&lt;&lt;run $Ability_Oath_Nyx.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.corruptionMods = {mod: setup.mod.ADD, value: 20};
        abilityRuntimeData.modifier.minArousalMods = {mod: setup.mod.ADD, value: 10};
        abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: 10};
        abilityRuntimeData.modifier.critMod = {mod: setup.mod.REMOVE, value: 20};
    }
)&gt;&gt;</tw-passagedata><tw-passagedata pid="126" name="Ability_Oathbreaker" tags="" position="725,1600" size="100,100">&lt;&lt;set $Ability_Oathbreaker = setup.AbilityDataFactory.createAbilityData({
id:         &quot;Ability_Oathbreaker&quot;,
name:       &quot;Oathbreaker&quot;,
description:function(character)
{
    return &quot;The mark of the oathbreaker burns around your arm.\nYou are branded as a traitor to all Orthani&quot;; 
},
maxRank: 1
})&gt;&gt;

&lt;&lt;run $Ability_Oathbreaker.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;</tw-passagedata><tw-passagedata pid="127" name="Ability_OrgasmicGrowth" tags="" position="850,1600" size="100,100">&lt;&lt;set $Ability_OrgasmicGrowth = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_OrgasmicGrowth&quot;,
    name:       &quot;Orgasmic Growth&quot;, 
    description:function(character, abilityRuntimeData){
        if(abilityRuntimeData == undefined)
        {
            return setup.processFlavours(
                character,
                &quot;Whenever you reach max arousal, your body grows &quot;+setup.getLength(2.5)+&quot;, your @[all|cocks|one=grows~more=grows] &quot;+setup.getLength(1)+&quot; and your @[all|balls|noverb] grow &quot;+setup.getLength(0.5)+&quot;.&quot;
            )
        }
        else
        {
            return setup.processFlavours(
                character,
                &quot;Whenever you reach max arousal, your body grows &quot;+setup.getLength(abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 2.5))+&quot;, your @[all|cocks|one=grows~more=grows] &quot;+setup.getLength(abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 1))+&quot; and your @[all|balls|noverb] grow &quot;+setup.getLength(abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 0.5))+&quot;.&quot; 
            )
        }
    },
    maxRank: 3
})&gt;&gt;

&lt;&lt;run $Ability_OrgasmicGrowth.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined
)&gt;&gt;

&lt;&lt;run $Ability_OrgasmicGrowth.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_MAX_LUST,
    function(abilityRuntimeData, abilityParams)
    {
        var self = abilityParams.self;

        setup.applyGrowth(self, &quot;cock&quot;, abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 1));
        setup.applyGrowth(self, &quot;balls&quot;, abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 0.5));
        setup.applyGrowth(self, &quot;height&quot;, abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 2.5));
        setup.applyGrowth(self, &quot;muscles&quot;, abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 0.5));

        var displayString = setup.processFlavours(self, &quot;Your arousal becomes too intense to contain! You feel your @[all|balls|noverb] swell as an incredible orgasm builds! You erupt, cum spraying out of your @[all|cocks|noverb] and coating &quot;)
        displayString += setup.processFlavours(self, &quot;your enemy with your scent and alabaster fluid. Your eyes widen as another wave takes you, an orgasm so intense that your body adapts to cater for its next impressive release!&quot;)
        displayString += setup.processFlavours(self, &quot; Your body, @[all|cocks|noverb] and @[all|balls|noverb] have all grown in size!&quot;)

        return displayString //not sure if you want the actual numbers in the string above.
    }
)&gt;&gt;

&lt;&lt;run $Ability_OrgasmicGrowth.setUnlockableFromLevelScreen(true)&gt;&gt;

&lt;&lt;run $Ability_OrgasmicGrowth.setUnlockCondition(
    function(character){
        return (State.variables.Level &gt;= 7)
    }
)&gt;&gt;

&lt;&lt;set $Ability_OrgasmicGrowth.setCategory($AbilityCategory.GROWTH)&gt;&gt;
&lt;&lt;set $Ability_OrgasmicGrowth.setGrade($AbilityGrade.HIGH)&gt;&gt;</tw-passagedata><tw-passagedata pid="128" name="Ability_ParryEnergy" tags="" position="975,1600" size="100,100">&lt;&lt;set $Ability_ParryEnergy = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_ParryEnergy&quot;,
    name:       &quot;Parry Energy&quot;, 
    description:function(character)
    {
        return &quot;Your body is filled with the power of your last parried attack.&quot;; 
    },
    maxRank: 1
})&gt;&gt;

&lt;&lt;run $Ability_ParryEnergy.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;

&lt;&lt;run $Ability_ParryEnergy.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams){
        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: abilityRuntimeData.blackboard.attackDamage};
        abilityParams.self.fight.variables.currentStamina += abilityRuntimeData.blackboard.attackDamage;
    }
)&gt;&gt;</tw-passagedata><tw-passagedata pid="129" name="Ability_PiercingPrecision" tags="" position="1100,1600" size="100,100">&lt;&lt;set $Ability_PiercingPrecision = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_PiercingPrecision&quot;,
    name:       &quot;Piercing Precision&quot;, 
    description:function(character)
    {
        return &quot;Your strikes always land true. Increases critical hits damage.&quot;; 
    },
    maxRank: 5
})&gt;&gt;

&lt;&lt;run $Ability_PiercingPrecision.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;

&lt;&lt;run $Ability_PiercingPrecision.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams){
        abilityRuntimeData.modifier.critDamageMods = {mod: setup.mod.ADD, value: abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 0.25)};
    }
)&gt;&gt;

&lt;&lt;run $Ability_PiercingPrecision.setUnlockCondition(
    function(character){
        return (State.variables.Level &gt;= 5)
    }
)&gt;&gt;

&lt;&lt;run $Ability_PiercingPrecision.setUnlockableFromLevelScreen(true)&gt;&gt;

&lt;&lt;set $Ability_PiercingPrecision.setCategory($AbilityCategory.WARRIOR)&gt;&gt;
&lt;&lt;set $Ability_PiercingPrecision.setGrade($AbilityGrade.MEDIUM)&gt;&gt;</tw-passagedata><tw-passagedata pid="130" name="Ability_SigilOfPerception" tags="" position="1225,1600" size="100,100">&lt;&lt;set $Ability_SigilOfPerception = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_SigilOfPerception&quot;,
    name:       &quot;Sigil of Perception&quot;,
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return &quot;Improves critical chance of next attack by 30%&quot;;
        }
        else
        {
            return &quot;Improves critical chance of next attack by &quot;+abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 30) + &quot;%&quot;;
        }
        
    },
    maxRank: 99
})&gt;&gt;

&lt;&lt;run $Ability_SigilOfPerception.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;

&lt;&lt;run $Ability_SigilOfPerception.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.critChanceMods = {mod: setup.mod.ADD, value: abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 30)}
        return &quot;&quot;
    },
)&gt;&gt;</tw-passagedata><tw-passagedata pid="131" name="Ability_Global_Bigger_Than_Target_1" tags="" position="100,1725" size="100,100">&lt;&lt;set $Ability_Bigger_Than_Target = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_Bigger_Than_Target&quot;,
    name:       &quot;Looming Over Them&quot;,
    description:function(character)
    {
        return &quot;A shadow is cast over your opponent.&quot;; 
    },
    maxRank: 1
})&gt;&gt;

&lt;&lt;run $Ability_Bigger_Than_Target.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_FIGHT_START,
    undefined
)&gt;&gt;

&lt;&lt;run $Ability_Bigger_Than_Target.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_FIGHT_TURN_START,
    function(abilityRuntimeData, abilityParams)
    {
        if(setup.sizeCharactercomparison(abilityParams.self, abilityParams.target) &gt;= $Comparators.BIGGER &amp;&amp;
         setup.sizeCharactercomparison(abilityParams.self, abilityParams.target) &lt; $Comparators.REACHES_WAIST)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.critChanceMods = {mod: setup.mod.ADD, value: 10};
	        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 10};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityID: abilityRuntimeData.abilityData.id
            });
        }
    }
)&gt;&gt;

&lt;&lt;run $Ability_Bigger_Than_Target.addBehaviour(
    &quot;end&quot;,
    $AbilityTrigger.ON_FIGHT_END,
    undefined
)&gt;&gt;

&lt;&lt;run $Ability_Bigger_Than_Target.setAsGlobalAbility()&gt;&gt;</tw-passagedata><tw-passagedata pid="132" name="Ability_Global_Bigger_Than_Target_2" tags="" position="225,1725" size="100,100">&lt;&lt;set $Ability_Looming_Over_Target = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_Looming_Over_Target&quot;,
    name:       &quot;Towering Over Them&quot;,
    description:function(character)
    {
        return &quot;The size difference between you two is significant.&quot;; 
    },
    maxRank: 1
})&gt;&gt;

&lt;&lt;run $Ability_Looming_Over_Target.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_FIGHT_START,
    undefined
)&gt;&gt;

&lt;&lt;run $Ability_Looming_Over_Target.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_FIGHT_TURN_START,
    function(abilityRuntimeData, abilityParams)
    {
		if(setup.sizeCharactercomparison(abilityParams.self, abilityParams.target) &gt;= $Comparators.REACHES_WAIST &amp;&amp; 
            setup.sizeCharactercomparison(abilityParams.self, abilityParams.target) &lt; $Comparators.FITS_ON_HAND)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.critChanceMods = {mod: setup.mod.ADD, value: 20};
	        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 10};
	        abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 5};
	        abilityRuntimeData.modifier.fightMovesMods = {mod: setup.mod.ADD, value: [State.variables.FightMove_Stomp]};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityID: abilityRuntimeData.abilityData.id
            });
        }
    }
)&gt;&gt;

&lt;&lt;run $Ability_Looming_Over_Target.addBehaviour(
    &quot;end&quot;,
    $AbilityTrigger.ON_FIGHT_END,
    undefined
)&gt;&gt;

&lt;&lt;run $Ability_Looming_Over_Target.setAsGlobalAbility()&gt;&gt;</tw-passagedata><tw-passagedata pid="133" name="Ability_Global_Bigger_Than_Target_3" tags="" position="350,1725" size="100,100">&lt;&lt;set $Ability_Overwhelming_Target = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_Overwhelming_Target&quot;,
    name:       &quot;Overwhelming Presence&quot;,
    description:function(character)
    {
        return &quot;Mass and power overtakes the scenery.&quot;; 
    },
    maxRank: 1
})&gt;&gt;

&lt;&lt;run $Ability_Overwhelming_Target.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_FIGHT_START,
    undefined
)&gt;&gt;

&lt;&lt;run $Ability_Overwhelming_Target.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_FIGHT_TURN_START,
    function(abilityRuntimeData, abilityParams)
    {
		if(setup.sizeCharactercomparison(abilityParams.self, abilityParams.target) &gt;= $Comparators.FITS_ON_HAND)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.critChanceMods = {mod: setup.mod.ADD, value: 60};
	        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 40};
	        abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 15};
	        abilityRuntimeData.modifier.fightMovesMods = {mod: setup.mod.ADD, value: [State.variables.FightMove_Stomp]};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityID: abilityRuntimeData.abilityData.id
            });
        }
    }
)&gt;&gt;

&lt;&lt;run $Ability_Overwhelming_Target.addBehaviour(
    &quot;end&quot;,
    $AbilityTrigger.ON_FIGHT_END,
    undefined
)&gt;&gt;

&lt;&lt;run $Ability_Overwhelming_Target.setAsGlobalAbility()&gt;&gt;</tw-passagedata><tw-passagedata pid="134" name="Ability_SombrevesWhisper" tags="" position="475,1725" size="100,100">&lt;&lt;set $Ability_SombrevesWhisper = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_SombrevesWhisper&quot;,
    name:       &quot;Sombreve&#39;s Whisper&quot;,
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return &quot;Temporarily accumulate 3 arousal and 5% of your corruption for every turn you are in combat&quot; 
        }
        else
        {
            return &quot;Temporarily accumulate &quot;+ (2 + abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 1)) +&quot; arousal and &quot;+ abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 5) +&quot;% of your corruption for every turn you are in combat&quot; 
        }
    },
    maxRank: 5
})&gt;&gt;

&lt;&lt;run $Ability_SombrevesWhisper.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;

&lt;&lt;run $Ability_SombrevesWhisper.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_FIGHT_TURN_START + $AbilityTrigger.ON_STAT_CHANGE + $AbilityTrigger.ON_FIGHT_END,
    function(abilityRuntimeData, abilityParams)
    {
        if(State.variables.FightTurn != 0)
        {
            abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: (2 + abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 2)) * State.variables.FightTurn}
            abilityRuntimeData.modifier.corruptionMods = {mod: setup.mod.ADD, value: Math.ceil(abilityParams.self.info.corruption * abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 5) / 100 * State.variables.FightTurn)}

            var params = 
            {
                trigger: State.variables.AbilityTrigger.ON_GAIN_CORRUPTION,
                self: abilityParams.self,
            }
            abilityParams.self.broadcastAbilityTrigger(params);
        }
        else
        {
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityID: abilityRuntimeData.abilityData.id
            });
        }
    },
)&gt;&gt;

&lt;&lt;run $Ability_SombrevesWhisper.setUnlockableFromLevelScreen(true)&gt;&gt;

&lt;&lt;run $Ability_SombrevesWhisper.setUnlockCondition(
    function(character){
        return (State.variables.Level &gt;= 15) &amp; (setup.getStatValue(character, &quot;corruption&quot;) &gt;= 75)
    }
)&gt;&gt;

&lt;&lt;set $Ability_SombrevesWhisper.setCategory($AbilityCategory.SOMBREVE)&gt;&gt;
&lt;&lt;set $Ability_SombrevesWhisper.setGrade($AbilityGrade.VERYHIGH)&gt;&gt;</tw-passagedata><tw-passagedata pid="135" name="Ability_SurvivorOfTheFirstEclipse" tags="" position="600,1725" size="100,100">&lt;&lt;set $Ability_SurvivorOfTheFirstEclipse = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_SurvivorOfTheFirstEclipse&quot;,
    name:       &quot;Survivor of the First Eclipse&quot;,
    description:function(character)
    {
        return &quot;Your body and soul were untainted by the first eclipse.&quot;; 
    },
    maxRank: 1
})&gt;&gt;

&lt;&lt;run $Ability_SurvivorOfTheFirstEclipse.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: 5};
        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 5}
        abilityRuntimeData.modifier.staminaRecoveryMods = {mod: setup.mod.ADD, value: 3}
    }
)&gt;&gt;</tw-passagedata><tw-passagedata pid="136" name="Ability_TaintedByTheLost" tags="" position="725,1725" size="100,100">&lt;&lt;set $Ability_TaintedByTheLost = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_TaintedByTheLost&quot;,
    name:       &quot;Tainted by the Lost&quot;,
    description:function(character)
    {
        return &quot;The seed of Corruption is sown...&quot;; 
    },
    maxRank: 1
})&gt;&gt;

&lt;&lt;run $Ability_TaintedByTheLost.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.corruptionMods = {mod: setup.mod.ADD, value: 5};
        abilityRuntimeData.modifier.minArousalMods = {mod: setup.mod.ADD, value: 5};
        abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 5}
    }
)&gt;&gt;</tw-passagedata><tw-passagedata pid="137" name="Ability_Tank" tags="" position="850,1725" size="100,100">&lt;&lt;set $Ability_Tank = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_Tank&quot;,
    name:       &quot;Tank&quot;,
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            let displayString = &quot;You have a sturdy and resilient body. Your Max HP is increased by 20%&quot;;
            displayString += &quot; and your stamina is decreased by 5%&quot;
            return displayString
        }
        else
        {
            let displayString = &quot;You have a sturdy and resilient body. Your Max HP is increased by &quot;;
            displayString += abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 20) + &quot;%&quot;;
            displayString += &quot; and your Stamina is decreased by &quot;;
            displayString += abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 5) + &quot;%&quot;;
            return displayString
        }
    },
    maxRank: 5
})&gt;&gt;

&lt;&lt;run $Ability_Tank.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined
)&gt;&gt;

&lt;&lt;run $Ability_Tank.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_ACQUIRE + $AbilityTrigger.ON_STAT_CHANGE,
    function(abilityRuntimeData, abilityParams)
    {   
        //remove previous iteration of the buff from current stats before multiplying
        abilityRuntimeData.modifier.maxHPMods = {};
        abilityRuntimeData.modifier.maxStaminaMods = {};

        var hpMultiplier = (abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 20)) / 100
        var stamMultiplier = (abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 5)) / 100
        var maxHp =  setup.getStatValue(abilityParams.self, &quot;hp&quot;);
        var stamina = setup.getStatValue(abilityParams.self, &quot;stamina&quot;);

        abilityRuntimeData.modifier.maxHPMods = {
            mod: setup.mod.ADD,
            value: Math.ceil(maxHp * hpMultiplier)
        }

        abilityRuntimeData.modifier.maxStaminaMods = {
                mod: setup.mod.REMOVE,
                value: Math.ceil(stamina * stamMultiplier)
            }
    }
)&gt;&gt;

&lt;&lt;run $Ability_Tank.setUnlockableFromLevelScreen(true)&gt;&gt;

&lt;&lt;run $Ability_Tank.setUnlockCondition(
    function(character){
        return (State.variables.Level &gt;= 1)
    }
)&gt;&gt;

&lt;&lt;set $Ability_Tank.setCategory($AbilityCategory.WARRIOR)&gt;&gt;
&lt;&lt;set $Ability_Tank.setGrade($AbilityGrade.VERYLOW)&gt;&gt;</tw-passagedata><tw-passagedata pid="138" name="Ability_ToLiveForEcho" tags="" position="975,1725" size="100,100">&lt;&lt;set $Ability_ToLiveForEcho = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_ToLiveForEcho&quot;,
    name:       &quot;To Live For &lt;&lt;SymbioteName&gt;&gt;&quot;,
    description: function(character, abilityRuntimeData)
                {
                    return &quot;You can only use pleasure self in human form, your stats in &lt;&lt;SymbioteName&gt;&gt; greatly increased.&quot;; 
                },
    maxRank:    1
})&gt;&gt;

&lt;&lt;run $Ability_ToLiveForEcho.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;

&lt;&lt;run $Ability_ToLiveForEcho.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_MAX_LUST,
    function(abilityRuntimeData, abilityParams)
    {   
        abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: 35}
        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 20}
        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 20}
        abilityRuntimeData.modifier.critChanceMods = {mod: setup.mod.ADD, value: 20}
        abilityRuntimeData.modifier.staminaRecoveryMods = {mod: setup.mod.ADD, value: 10}
        abilityRuntimeData.modifier.fightMovesMods = {mod: setup.mod.ADD, value: []}

        var displayString = &quot;You feel the presence of &lt;&lt;SymbioteName&gt;&gt; press against your mind. You embrace it, feeling yourself become one with the being that resides within you.&quot;;
        displayString += &quot;The familiar sensation of &lt;&lt;SymbioteName&gt;&gt; seeping through your pores is suddenly amplified as more and more ooze piles onto your flesh, expanding and taking shape as a&quot;
        displayString += &quot;terrifyingly powerful and monstrous&quot; + setup.getRace($CharacterSheet_Player.symbiote.anatomy)  + &quot;!&quot;
        return 
    }
)&gt;&gt;

&lt;&lt;run $Ability_ToLiveForEcho.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_MIN_LUST + $AbilityTrigger.ON_FIGHT_END + $AbilityTrigger.ON_FIGHT_START,
    function(abilityRuntimeData, abilityParams)
    {   
        abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
        {
            abilityID: abilityRuntimeData.abilityData.id
        });
        
        abilityRuntimeData.modifier.fightMovesMods = {mod: setup.mod.REPLACE, value: [$FightMove_Masturbate]}

        return &quot;You feel &lt;&lt;SymbioteName&gt;&gt; recede back within you. You can almost feel his smile pulling wide.&quot;;
    }
)&gt;&gt;

/*This breaks in 0.4.0*/
/*&lt;&lt;run $Ability_ToLiveForEcho.setUnlockableFromLevelScreen(true)&gt;&gt;*/

&lt;&lt;run $Ability_ToLiveForEcho.setUnlockCondition(
    function(character){
        return State.variables.Level &gt;= 7
    }
)&gt;&gt;

&lt;&lt;set $Ability_ToLiveForEcho.setCategory($AbilityCategory.LUST)&gt;&gt;
&lt;&lt;set $Ability_ToLiveForEcho.setGrade($AbilityGrade.HIGH)&gt;&gt;</tw-passagedata><tw-passagedata pid="139" name="Ability_EmbracedByNyxsLight" tags="" position="1100,1725" size="100,100">&lt;&lt;set $Ability_EmbracedByNyxsLight = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_EmbracedByNyxsLight&quot;,
    name:       &quot;Embraced By Nyx&#39;s Light&quot;,
    description:function(character)
                {
                    return &quot;Your body is absorbing Nyx&#39;s light while in this realm. You gain arousal 40% faster.&quot;; 
                },
    maxRank:    1
})&gt;&gt;

&lt;&lt;run $Ability_EmbracedByNyxsLight.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;

&lt;&lt;run $Ability_EmbracedByNyxsLight.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_ACQUIRE + $AbilityTrigger.ON_STAT_CHANGE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: Math.ceil(setup.getStatValue(abilityParams.self, &quot;arousalGain&quot;) * 0.4, 0)};
    },
)&gt;&gt;</tw-passagedata><tw-passagedata pid="140" name="Ability_TouchedByNyxsLight" tags="" position="1225,1725" size="100,100">&lt;&lt;set $Ability_TouchedByNyxsLight = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_TouchedByNyxsLight&quot;,
    name:       &quot;Touched By Nyx&#39;s Light&quot;,
    description:function(character)
                {
                    return &quot;Your body is absorbing Nyx&#39;s light while in this realm. You gain arousal 15% faster.&quot;; 
                },
    maxRank:    1
})&gt;&gt;

&lt;&lt;run $Ability_TouchedByNyxsLight.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;

&lt;&lt;run $Ability_TouchedByNyxsLight.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_ACQUIRE + $AbilityTrigger.ON_STAT_CHANGE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: Math.ceil(setup.getStatValue(abilityParams.self, &quot;arousalGain&quot;) * 0.15, 0)};
    },
)&gt;&gt;

&lt;&lt;run $Ability_TouchedByNyxsLight.addBehaviour(
    &quot;end&quot;,
    $AbilityTrigger.ON_FIGHT_BATTLE_LOST,
    undefined,
)&gt;&gt;</tw-passagedata><tw-passagedata pid="141" name="Ability_UnderTheEyeOfOrtha" tags="" position="100,1850" size="100,100">&lt;&lt;set $Ability_UnderTheEyeOfOrtha = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_UnderTheEyeOfOrtha&quot;,
    name:       &quot;Under The Eye Of Ortha&quot;,
    description:function(character, abilityRuntimeData)
                {
                    return &quot;You gain 1 health and 1 stamina whenever you win a battle. \n You lose 2 strength every time you gain corruption.&quot;; //only 1 hp and 1 stam *cries in ortha* - life is about the journey, not the destination
                },
    maxRank:    1
})&gt;&gt;

&lt;&lt;run $Ability_UnderTheEyeOfOrtha.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;

&lt;&lt;run $Ability_UnderTheEyeOfOrtha.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_FIGHT_BATTLE_WON,
    function(abilityRuntimeData, abilityParams)
    {   
        if(abilityRuntimeData.modifier.maxHPMods == undefined || abilityRuntimeData.modifier.maxStaminaMods == undefined){
            abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: 1}
            abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 1}
        }else{
            let previousHPModifier = abilityRuntimeData.modifier.maxHPMods.value;
            let previousStamModifier = abilityRuntimeData.modifier.maxStaminaMods.value;
            abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: previousHPModifier + 1}
            abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: previousStamModifier + 1}
        }

        return &quot;You feel the presence of something far greater approve of your victory. Strength and vigour wells up within you.\n\n&quot;
    },
)&gt;&gt;

&lt;&lt;run $Ability_UnderTheEyeOfOrtha.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_GAIN_CORRUPTION,
    function(abilityRuntimeData, abilityParams)
    {   

        var baseStrength = setup.getStatValue(abilityParams.self, &quot;strength&quot;) - 2;

        if (baseStrength &gt;=2){
           if(abilityRuntimeData.modifier.strengthMods == undefined){
                abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.REMOVE, value: 2}
            }else{
                let previousStrength = abilityRuntimeData.modifier.strengthMods.value;
                abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.REMOVE, value: previousStrength + 2}
            }
            return &quot;A shiver runs down your spine and saps away your strength. You feel as if your actions have been judged.\n&quot;
        }else{
            return &quot;You feel tired. Emaciated. Famished. You have no more strength to offer as punishment for your sins.\n&quot;
        }
    }
)&gt;&gt;

&lt;&lt;run $Ability_UnderTheEyeOfOrtha.setUnlockableFromLevelScreen(true)&gt;&gt;

&lt;&lt;run $Ability_UnderTheEyeOfOrtha.setUnlockCondition(
    function(character){
        return (State.variables.Level &gt;= 7) &amp; (setup.getStatValue(character, &quot;corruption&quot;) &lt;= 25)
    }
)&gt;&gt;

&lt;&lt;set $Ability_UnderTheEyeOfOrtha.setCategory($AbilityCategory.ORTHA)&gt;&gt;
&lt;&lt;set $Ability_UnderTheEyeOfOrtha.setGrade($AbilityGrade.HIGH)&gt;&gt;</tw-passagedata><tw-passagedata pid="142" name="Ability_UnstoppableExpansion" tags="" position="225,1850" size="100,100">&lt;&lt;set $Ability_UnstoppableExpansion = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_UnstoppableExpansion&quot;,
    name:       &quot;Unstoppable Expansion&quot;,
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return &quot;Whenever you gain any amount of growth, add 0.1% of your current size to that amount.&quot;; 
        }
        else
        {
            return &quot;Whenever you gain any amount of growth, add &quot;+ abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 0.1) +&quot;% of your current size to that amount.&quot;; 
        }
        
    },
    maxRank: 10
})&gt;&gt;  

&lt;&lt;run $Ability_UnstoppableExpansion.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;

&lt;&lt;run $Ability_UnstoppableExpansion.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_APPLY_GROWTH + $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.bonusGrowthCock = {mod: setup.mod.ADD, value: setup.getStatValue(abilityParams.self, &quot;cock&quot;) * abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 1) / 1000}
        abilityRuntimeData.modifier.bonusGrowthHeight = {mod: setup.mod.ADD, value: setup.getStatValue(abilityParams.self, &quot;height&quot;) * abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 1) / 1000}
        abilityRuntimeData.modifier.bonusGrowthMuscles = {mod: setup.mod.ADD, value: setup.getStatValue(abilityParams.self, &quot;muscles&quot;) * abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 1) / 1000}
        abilityRuntimeData.modifier.bonusGrowthBalls = {mod: setup.mod.ADD, value: setup.getStatValue(abilityParams.self, &quot;balls&quot;) * abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 1) / 1000}
    },
)&gt;&gt;

&lt;&lt;run $Ability_UnstoppableExpansion.setUnlockableFromLevelScreen(true)&gt;&gt;

&lt;&lt;run $Ability_UnstoppableExpansion.setUnlockCondition(
    function(character){
        return (State.variables.Level &gt;= 15)
    }
)&gt;&gt;

&lt;&lt;set $Ability_UnstoppableExpansion.setCategory($AbilityCategory.GROWTH)&gt;&gt;
&lt;&lt;set $Ability_UnstoppableExpansion.setGrade($AbilityGrade.VERYHIGH)&gt;&gt;</tw-passagedata><tw-passagedata pid="143" name="Ability_ValiantRush" tags="" position="350,1850" size="100,100">&lt;&lt;set $Ability_ValiantRush = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_ValiantRush&quot;,
    name:       &quot;Valiant Rush&quot;,
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return &quot;Increases your Action Slots and Combo Moves per turn by 1.&quot;;  
        }
        else
        {
            return &quot;Increases your Action Slots and Combo Moves per turn by &quot;+abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 1)+&quot;.&quot;; 
        }
    },
    maxRank: 5
})&gt;&gt;

&lt;&lt;run $Ability_ValiantRush.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;

&lt;&lt;run $Ability_ValiantRush.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {   
        abilityRuntimeData.modifier.actionSlotsMods = {mod: setup.mod.ADD, value: abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 1)};
        abilityRuntimeData.modifier.comboMovesPerTurnMods = {mod: setup.mod.ADD, value: abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 1)};
    },
)&gt;&gt;

&lt;&lt;run $Ability_ValiantRush.setUnlockCondition(
    function(character){
        return State.variables.Level &gt;= 5
    }
)&gt;&gt;

&lt;&lt;run $Ability_ValiantRush.setUnlockableFromLevelScreen(true)&gt;&gt;

&lt;&lt;set $Ability_ValiantRush.setCategory($AbilityCategory.WARRIOR)&gt;&gt;
&lt;&lt;set $Ability_ValiantRush.setGrade($AbilityGrade.MEDIUM)&gt;&gt;</tw-passagedata><tw-passagedata pid="144" name="Ability_VampiricLust" tags="" position="475,1850" size="100,100">&lt;&lt;set $Ability_VampiricLust = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_VampiricLust&quot;,
    name:       &quot;Vampiric Lust&quot;,
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return &quot;Regain 5 health whenever you reach max arousal.&quot;;
        }
        else
        {
            return &quot;Regain &quot;+ (2 + abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 3))+&quot; health whenever you reach max arousal.&quot;;
        }
    },
    maxRank: 5
})&gt;&gt;

&lt;&lt;run $Ability_VampiricLust.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;

&lt;&lt;run $Ability_VampiricLust.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_MAX_LUST,
    function(abilityRuntimeData, abilityParams)
    {
        abilityParams.self.fight.variables.currentHP += Math.min(setup.getStatValue(abilityParams.self, &quot;hp&quot;), 2 + abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 3));
        return &quot;Lust courses through your system, your need to fuck drives you ever onwards!&quot;
    },
)&gt;&gt;

&lt;&lt;run $Ability_VampiricLust.setUnlockableFromLevelScreen(true)&gt;&gt;

&lt;&lt;run $Ability_VampiricLust.setUnlockCondition(
    function(character){
        return (State.variables.Level &gt;= 4) &amp; (setup.getStatValue(character, &quot;corruption&quot;) &gt; 25)
    }
)&gt;&gt;

&lt;&lt;set $Ability_VampiricLust.setCategory($AbilityCategory.LUST)&gt;&gt;
&lt;&lt;set $Ability_VampiricLust.setGrade($AbilityGrade.LOW)&gt;&gt;</tw-passagedata><tw-passagedata pid="145" name="Ability_VigorOfTheEndowed" tags="" position="600,1850" size="100,100">&lt;&lt;set $Ability_VigorOfTheEndowed = setup.AbilityDataFactory.createAbilityData({
id:         &quot;Ability_VigorOfTheEndowed&quot;,
name:       &quot;Vigor of the Endowed&quot;,
description:function(character, abilityRuntimeData)
{
    if(abilityRuntimeData == undefined)
    {
        return &quot;You gain Stamina for each &quot;+setup.getLength(4)+&quot; in cock length (up to 15).\n Your cock grows &quot;+setup.getLength(2)+&quot; and your balls grow &quot;+setup.getLength(1)+&quot; upon acquiring this Ability&quot;; 
    }
    else
    {
        return &quot;You gain Stamina for each &quot;+setup.getLength(4)+&quot; in cock length (up to &quot;+(5 + abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 10))+&quot;).\n Your cock grows &quot;+setup.getLength(abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 2))+&quot; and your balls grow &quot;+setup.getLength(abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 1))+&quot; upon acquiring this Ability&quot;; 
    }
},
maxRank: 4
})&gt;&gt;

&lt;&lt;run $Ability_VigorOfTheEndowed.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;

&lt;&lt;run $Ability_VigorOfTheEndowed.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        setup.applyGrowth(abilityParams.self, &quot;cock&quot;, abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 2));
        setup.applyGrowth(abilityParams.self, &quot;balls&quot;, abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 1));
    },
)&gt;&gt;

&lt;&lt;run $Ability_VigorOfTheEndowed.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_APPLY_GROWTH + $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var boost = Math.min(~~(setup.getStatValue(abilityParams.self, &quot;cock&quot;) / 4), (15 + abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 10)));
        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: boost};
    },
)&gt;&gt;

&lt;&lt;run $Ability_VigorOfTheEndowed.setUpgrade(
    function(abilityRuntimeData, character){
        return (State.variables.Level &gt;= 7) &amp;&amp; (abilityRuntimeData.canRank() == false)
    },
    $Ability_VigorOfTheEndowed_2,
    function(character){
        var displayString = &quot;&quot;
        displayString += &quot;You must be at least level 7: (&quot; + State.variables.Level + &quot;)\n&quot;
        return displayString
    }
)&gt;&gt;

&lt;&lt;run $Ability_VigorOfTheEndowed.setUnlockableFromLevelScreen(true)&gt;&gt;

&lt;&lt;run $Ability_VigorOfTheEndowed.setUnlockCondition(
    function(character){
        return true
    }
)&gt;&gt;

&lt;&lt;set $Ability_VigorOfTheEndowed.setCategory($AbilityCategory.WARRIOR)&gt;&gt;
&lt;&lt;set $Ability_VigorOfTheEndowed.setGrade($AbilityGrade.VERYLOW)&gt;&gt;</tw-passagedata><tw-passagedata pid="146" name="Ability_VigorOfTheEndowed_2" tags="" position="725,1850" size="100,100">&lt;&lt;set $Ability_VigorOfTheEndowed_2 = setup.AbilityDataFactory.createAbilityData({
id:         &quot;Ability_VigorOfTheEndowed_2&quot;,
name:       &quot;Vigor of the Hyper Endowed&quot;,
description:function(character, abilityRuntimeData)
{
    if(abilityRuntimeData == undefined)
    {
        return &quot;You gain Stamina and Health for each &quot;+setup.getLength(4)+&quot; in cock length (up to 45).\n Your cock grows &quot;+setup.getLength(5)+&quot; and your balls grow &quot;+setup.getLength(2)+&quot; upon acquiring this Ability&quot;;
    }
    else
    {
        return &quot;You gain Stamina and Health for each &quot;+setup.getLength(4)+&quot; in cock length (up to &quot;+(35 + abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 10))+&quot;).\n Your cock grows &quot;+setup.getLength(abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 5))+&quot; and your balls grow &quot;+setup.getLength(abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 2))+&quot; upon acquiring this Ability&quot;;
    }
},
maxRank: 5
})&gt;&gt;

&lt;&lt;run $Ability_VigorOfTheEndowed_2.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;

&lt;&lt;run $Ability_VigorOfTheEndowed_2.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        setup.applyGrowth(abilityParams.self, &quot;cock&quot;, abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 5));
        setup.applyGrowth(abilityParams.self, &quot;balls&quot;, abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 2));
    },
)&gt;&gt;

&lt;&lt;run $Ability_VigorOfTheEndowed_2.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_APPLY_GROWTH + $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var boost = Math.min(~~(setup.getStatValue(abilityParams.self, &quot;cock&quot;) / 4), (35 + abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 10)));
        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: boost};
        abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: boost};
    },
)&gt;&gt;

&lt;&lt;set $Ability_VigorOfTheEndowed_2.setCategory($AbilityCategory.WARRIOR)&gt;&gt;
&lt;&lt;set $Ability_VigorOfTheEndowed_2.setGrade($AbilityGrade.HIGH)&gt;&gt;</tw-passagedata><tw-passagedata pid="147" name="Ability_WarriorOfDuality" tags="" position="850,1850" size="100,100">&lt;&lt;set $Ability_WarriorOfDuality = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_WarriorOfDuality&quot;,
    name:       &quot;Warrior of Duality&quot;,
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return &quot;Gain 1 health on level up if corruption lower than 50.\n Gain 1 arousal per turn on level up if your corruption is greater than or equal to 50.&quot;; 
        }
        else
        {
            return &quot;Gain &quot;+abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 1)+&quot; health on level up if corruption lower than 50.\n Gain &quot;+abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 1)+&quot; arousal per turn on level up if your corruption is greater than or equal to 50.&quot;; 
        }
    },
    maxRank: 5
})&gt;&gt;

&lt;&lt;run $Ability_WarriorOfDuality.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;

&lt;&lt;run $Ability_WarriorOfDuality.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_LEVEL_UP,
    function(abilityRuntimeData, abilityParams)
    {   
        if(setup.getStatValue(abilityParams.self, &quot;corruption&quot;) &lt; 50)
        {
            setup.addToBaseStatValue(abilityParams.self, &quot;hp&quot;, abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 1))
        }
        else
        {
            setup.addToBaseStatValue(abilityParams.self, &quot;arousalGain&quot;, abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 1))
        }
    },
)&gt;&gt;

&lt;&lt;run $Ability_WarriorOfDuality.setUnlockableFromLevelScreen(true)&gt;&gt;

&lt;&lt;run $Ability_WarriorOfDuality.setUnlockCondition(
    function(character){
        return (State.variables.Level &gt;= 3)
    }
)&gt;&gt;

&lt;&lt;set $Ability_WarriorOfDuality.setCategory($AbilityCategory.WARRIOR)&gt;&gt;
&lt;&lt;set $Ability_WarriorOfDuality.setGrade($AbilityGrade.LOW)&gt;&gt;</tw-passagedata><tw-passagedata pid="148" name="Ability_WitheringVenom" tags="" position="975,1850" size="100,100">&lt;&lt;set $Ability_WitheringVenom = setup.AbilityDataFactory.createAbilityData({
    id:         &quot;Ability_WitheringVenom&quot;,
    name:       &quot;Withering Venom&quot;, 
    description:function(character)
    {
        return &quot;Active until your arousal becomes &quot; + setup.getStatValue(character, &quot;minArousal&quot;) + &quot; or less.&quot;; 
    },
    maxRank: 999
})&gt;&gt;

&lt;&lt;run $Ability_WitheringVenom.addBehaviour(
    &quot;start&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    undefined,
)&gt;&gt;

&lt;&lt;run $Ability_WitheringVenom.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams){
        abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.REMOVE, value: abilityRuntimeData.getRankGrowth(&quot;linear&quot;, 10)};
    }
)&gt;&gt;

&lt;&lt;run $Ability_WitheringVenom.addBehaviour(
    &quot;update&quot;,
    $AbilityTrigger.ON_MIN_LUST,
    function(abilityRuntimeData, abilityParams){
        abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
        {
            abilityID: abilityRuntimeData.abilityData.id
        });
    }
)&gt;&gt;

&lt;&lt;run $Ability_WitheringVenom.addBehaviour(
    &quot;remove&quot;,
    $AbilityTrigger.ON_FIGHT_END,
    undefined,
)&gt;&gt;</tw-passagedata><tw-passagedata pid="149" name="FightLogic" tags="Fight" position="331,1843" size="100,100">\&lt;&lt;nobr&gt;&gt;

/*Initialization*/
&lt;&lt;if !$Encounter_Target.fight.variables.currentHP&gt;&gt;
	&lt;&lt;run setup.variableInitializer.initializeFightVariables($Encounter_Target)&gt;&gt;
  &lt;&lt;print $Encounter_Target.fight.encounterStartText &gt;&gt;

  &lt;&lt;run setup.aiFightStart()&gt;&gt;
  &lt;&lt;run setup.broadcastFightFlowTrigger($CharacterSheet_Player, $Encounter_Target, $AbilityTrigger.ON_FIGHT_START)&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;print setup.preAttacksUpdate($CharacterSheet_Player, $Encounter_Target)&gt;&gt;

/*Attack Handling*/ 
&lt;&lt;if $Encounter_Target.fight.variables.currentFightMove &amp;&amp; $CharacterSheet_Player.fight.variables.currentFightMove&gt;&gt; 

&lt;&lt;if $FightComboStackIndexes.length != 0&gt;&gt;
&lt;&lt;run setup.doComboAttack($CharacterSheet_Player, $Encounter_Target) &gt;&gt;
&lt;&lt;else&gt;&gt;
&lt;&lt;run setup.doAttack($CharacterSheet_Player, $Encounter_Target) &gt;&gt;
&lt;&lt;/if&gt;&gt;

  &lt;&lt;run setup.doAttack($Encounter_Target, $CharacterSheet_Player) &gt;&gt;
&lt;&lt;/if&gt;&gt;

/*Check Max Arousal*/
&lt;&lt;print setup.updateArousal($CharacterSheet_Player) &gt;&gt;
&lt;&lt;print setup.updateArousal($Encounter_Target) &gt;&gt;
\&lt;&lt;/nobr&gt;&gt;
\&lt;&lt;run setup.postAttacksAIUpdate($Encounter_Target)&gt;&gt;
\
\/*Display*/
\&lt;&lt;nobr&gt;&gt;
&lt;&lt;print setup.displayFightMove($CharacterSheet_Player, $Encounter_Target) &gt;&gt;
&lt;&lt;print setup.displayFightMove($Encounter_Target, $CharacterSheet_Player) &gt;&gt;
\&lt;&lt;/nobr&gt;&gt;
\&lt;&lt;print setup.updateFightStatus($CharacterSheet_Player, $Encounter_Target) &gt;&gt;</tw-passagedata><tw-passagedata pid="150" name="Fight Outcome" tags="" position="504,1844" size="100,100">\&lt;&lt;if setup.hasLostFight($Encounter_Target)&gt;&gt;
  \&lt;&lt;print setup.onFightEnd($CharacterSheet_Player, $Encounter_Target)&gt;&gt;
	\&lt;&lt;print $Encounter_Target.fight.outcomePlayerWins&gt;&gt;
\&lt;&lt;elseif setup.hasLostFight($CharacterSheet_Player)&gt;&gt;
  \&lt;&lt;print setup.onFightEnd($Encounter_Target, $CharacterSheet_Player)&gt;&gt;
	\&lt;&lt;print $Encounter_Target.fight.outcomePlayerLoses&gt;&gt;
\&lt;&lt;/if&gt;&gt;

&lt;&lt;nobr&gt;&gt;
/*Unset Fight Variables*/
&lt;&lt;set $FightTurn = 0&gt;&gt;
&lt;&lt;run setup.broadcastFightFlowTrigger($CharacterSheet_Player, $Encounter_Target, $AbilityTrigger.ON_FIGHT_END)&gt;&gt;
&lt;&lt;run setup.saveFightAttributes($Encounter_Target)&gt;&gt;
&lt;&lt;unset $Display_Player_FightMoveOutcome,
	$Encounter_Target,
	$HasSymbiote&gt;&gt;
&lt;&lt;set $CharacterSheet_Player.fight.variables = $FightVariables&gt;&gt;
		
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="151" name="FightMove_Bash" tags="" position="100,1975" size="100,100">&lt;&lt;set $FightMove_Bash =
{
	id: &quot;FightMove_Bash&quot;,
	name: &quot;Bash&quot;,
	preparation: function(character, target)
	{
		var flavourtext = setup.getFlavourBasedDescription(character, &#39;basicAttackPrepFlavour&#39;, 1)
		if(flavourtext != undefined)
		{
			return character.info.name + &quot; &quot; + flavourtext
		}
		else
		{
			return character.info.name + &quot; is getting ready to strike.&quot;
		}
	},
	attackAttemptDesc: function(character, target)
	{
		var flavourtext = setup.getFlavourBasedDescription(character, &#39;bashAttackAttemptFlavour&#39;, 1)
		return flavourtext
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: 6,
	staminaCost: 2,
	critMod: 20,
    comboCost: 1,
    skillStatsToDescriptionSpacing: 2,
	skillDescription: &quot;A quick bash of your weapon&#39;s hilt with low stamina cost.&quot;,
	skillType: &quot;slotted&quot;,
	additionalEffects: []
}&gt;&gt;</tw-passagedata><tw-passagedata pid="152" name="FightMove_BasicAttack" tags="" position="225,1975" size="100,100">&lt;&lt;set $FightMove_Basic_Attack =
{
	id: &quot;FightMove_Basic_Attack&quot;,
	name: &quot;Unarmed Strike&quot;,
	preparation: function(character, target)
	{
		var flavourtext = setup.getFlavourBasedDescription(character, &#39;basicAttackPrepFlavour&#39;, 1)
		if(flavourtext != undefined)
		{
			return character.info.name + &quot; &quot; + flavourtext
		}
		else
		{
			return character.info.name + &quot; is getting ready to strike.&quot;
		}
	},
	attackAttemptDesc: function(character, target)
	{
		var flavourtext = setup.getFlavourBasedDescription(character, &#39;basicAttackAttemptFlavour&#39;, 1)
		return flavourtext
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: 9,
	staminaCost: 4,
	critMod: 0,
    comboCost: 1,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: &quot;A basic attack based on your own body strength.&quot;,
	skillType: &quot;slotted&quot;,
	additionalEffects: []
}&gt;&gt;</tw-passagedata><tw-passagedata pid="153" name="FightMove_ChargedStrike" tags="" position="350,1975" size="100,100">&lt;&lt;set $FightMove_ChargedStrike =
{
	id: &quot;FightMove_ChargedStrike&quot;,
	name: &quot;Charged Strike&quot;,
	preparation: function(character, target)
	{
        if(this.currentStep == 0)
        {
		    return character.info.name + &quot; is channeling their strength for a powerful attack&quot;;
        }
        else
        {
            return character.info.name + &quot; is charging at you for a massive attack!&quot;;
        }
	},
	attackAttemptDesc: function(character, target)
	{
		return &quot;With their body pulsating with strength, &quot;+ character.info.name +&quot; strikes you with a bone shattering attack!&quot;;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
    currentStep: 0,
    steps: 1,
	dmg: 16,
	staminaCost: 0,
	critMod: 0,
	skillDescription: &quot;A basic attack.&quot;,
	skillType: &quot;slotted&quot;,
	additionalEffects: [],
}&gt;&gt;</tw-passagedata><tw-passagedata pid="154" name="FightMove_ConsumeLost" tags="" position="475,1975" size="100,100">&lt;&lt;set $FightMove_ConsumeLost =
{
    id: &quot;FightMove_ConsumeLost&quot;,
	name: &quot;Consume Lost&quot;,
	preparation: function(character, target)
	{
		return character.info.name + &quot; grasps a nearby Lost.&quot;
	},
	attackAttemptDesc: function(character, target)
	{
		var his = setup.getPronoun(character,&quot;pronounDepPos&quot;);
		return character.info.name + &quot; pulls the lost into his pecs.&quot;;
	},
    attackHitDesc: function(character, target)
	{
        var displayString = &quot;The Lost moans as it is completely absorbed inside of &quot;+character.info.name+&quot;. \n&quot;
        displayString += &quot;His gargantuan muscles writhe and squirm as the mass of his worshippers builds on his own.&quot;
        displayString += &quot;His cock has grown &quot;+ setup.getLength(9) + &quot;.\n&quot;;
        displayString += &quot;His balls grow by &quot;+ setup.getLength(3) + &quot;.\n&quot;;
        displayString += &quot;His muscles expand (&quot;+ setup.getLength(5) + &quot;).\n&quot;;
        displayString += &quot;His body has become &quot;+ setup.getLength(18) + &quot; taller \n&quot;;

        return displayString;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: 0,
	staminaCost: 16,
	critMod: 100,
    cooldown: 3,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: &quot;Consume a nearby Lost.&quot;,
	skillType: &quot;slotted&quot;,
    unlearnable: true,
	additionalEffects: []
}&gt;&gt;</tw-passagedata><tw-passagedata pid="155" name="FightMove_DoNothing" tags="" position="600,1975" size="100,100">&lt;&lt;set $FightMove_Do_Nothing =
{
	id: &quot;FightMove_Do_Nothing&quot;,
	name: &quot;Do Nothing&quot;,
	preparation: function(character, target)
	{
		var he = setup.getPronoun(character,&quot;pronoun&quot;);

		return character.info.name + &quot; is not readying any attack. It does not look like &quot;+he+&quot; cares about the fight.&quot;;
	},
	attackAttemptDesc: function(character, target)
	{
		return character.info.name +&quot; waits eagerly for what will come next.&quot;;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	doesNothing: true,
	dmg: 0,
	staminaCost: 0,
	critMod: 100,
	skillStatsToDescriptionSpacing: 1,
	skillDescription: &quot;Lets your opponent attack freely.&quot;,
	skillType: &quot;special&quot;,
    unlearnable: true,
	additionalEffects: []
}&gt;&gt;

&lt;&lt;set $FightMove_Submit_Completely =
{
    id: &quot;FightMove_Submit_Completely&quot;,
	name: &quot;Submit Completely&quot;,
	preparation: function(character, target)
	{
		var he = setup.getPronoun(character,&quot;pronoun&quot;);

		return character.info.name + &quot; surrenders themselves completely&quot;;
	},
	attackAttemptDesc: function(character, target)
	{
		return character.info.name + &quot; surrenders themselves completely&quot;;
	},
	activationCondition: function(character, target)
	{
		if(character.fight.variables.cantSubmit)
		{
			return false;
		}

		return true;
	},
	dmg: 0,
	staminaCost: 0,
	critMod: 100,
	skillStatsToDescriptionSpacing: 1,
	skillDescription: &quot;Surrender yourself completely.&quot;,
	skillType: &quot;special&quot;,
    unlearnable: true,
	additionalEffects: [setup.surrender]
}&gt;&gt;</tw-passagedata><tw-passagedata pid="156" name="FightMove_DragonStrike" tags="" position="725,1975" size="100,100">&lt;&lt;set $FightMove_DragonStrike =
{
	id: &quot;FightMove_DragonStrike&quot;,
	name: &quot;Dragon_Strike&quot;,
	preparation: function(character, target)
	{
		return character.info.name + &quot;&#39;s body glow in a powerful white hue.&quot;;
	},
	attackAttemptDesc: function(character, target)
	{
		return &quot;With the energy of the parried attack filling &quot; + character.info.name +&quot;&#39;s body, they charge forward with their fist glowing in a blinding white light.&quot;;
	},
	activationCondition: function(character, target)
	{
		return character.fight.variables.currentStamina &gt;= this.staminaCost;
	},
	dmg: 70,
	staminaCost: 25,
	critMod: 0,
	skillDescription: &quot;DRAGONSTRIKE SKILL DESC&quot;,
	skillType: &quot;slotted&quot;,
	additionalEffects: [setup.stunTarget],
}&gt;&gt;</tw-passagedata><tw-passagedata pid="157" name="FightMove_Focus" tags="" position="850,1975" size="100,100">&lt;&lt;set $FightMove_Focus =
{
	id: &quot;FightMove_Focus&quot;,
	name: &quot;Focus&quot;,
	preparation: function(character, target)
	{
		return character.info.name + &quot; focuses on their next move.&quot;
	},
	attackAttemptDesc: function(character, target)
	{
		return character.info.name + &quot; takes a breather.&quot;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: 0,
	staminaCost: 0,
	critMod: 100,
    comboCost: 1,
    skillStatsToDescriptionSpacing: 2,
	skillDescription: &quot;Increases your stamina gain by 100%.&quot;,
	skillType: &quot;slotted&quot;,
    unlearnable: true,
	additionalEffects: [setup.focusFightMove]
}&gt;&gt;</tw-passagedata><tw-passagedata pid="158" name="FightMove_Goo_Stun" tags="" position="975,1975" size="100,100">&lt;&lt;set $FightMove_Goo_Stun =
{
	id: &quot;FightMove_Goo_Stun&quot;,
	name: &quot;Ensnaring Goo&quot;,
	preparation: function(character, target)
	{
		return character.info.name + &quot;&#39;s goo completely surrounds &quot;+target.info.name+&quot;.&quot;
	},
	attackAttemptDesc: function(character, target)
	{
		var He = setup.getPronoun(character,&quot;pronounCap&quot;);
		
		return character.info.name + &quot;&#39;s goo completely covers &quot;+target.info.name+&quot;.&quot;;
	},
	activationCondition: function(character, target)
	{
		return character.fight.variables.currentStamina &gt;= this.staminaCost;
	},
	dmg: 2,
	staminaCost: 18,
	critMod: -15,
    cooldown: 5,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: &quot;Send your goo to immobilize your target.&quot;,
	skillType: &quot;slotted&quot;,
	additionalEffects: [setup.stunTarget]
}&gt;&gt;</tw-passagedata><tw-passagedata pid="159" name="FightMove_Hypnotize" tags="" position="1100,1975" size="100,100">&lt;&lt;set $FightMove_Hypnotize =
{
	id: &quot;FightMove_Hypnotize&quot;,
	name: &quot;Hypnotize&quot;,
	preparation: function(character, target)
	{
		return character.info.name + &quot;&#39;s body glows in an unearthly purple. Their target is drawn to gaze at their eyes.&quot;
	},
	attackAttemptDesc: function(character, target)
	{
		var He = setup.getPronoun(character,&quot;pronounCap&quot;);
		
		return character.info.name + &quot; attempts to enthrall their target with their glowing, piercing eyes.&quot;;
	},
	activationCondition: function(character, target)
	{
		return character.fight.variables.currentStamina &gt;= this.staminaCost;
	},
	dmg: 0,
	staminaCost: 18,
	critMod: -15,
	cooldown: 5,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: &quot;Influence your opponent&#39;s next attack choice.&quot;,
	skillType: &quot;slotted&quot;,
	additionalEffects: [setup.hypnotize]
}&gt;&gt;</tw-passagedata><tw-passagedata pid="160" name="FightMove_IncubusCall" tags="" position="1225,1975" size="100,100">&lt;&lt;set $FightMove_IncubusCall =
{
	id: &quot;FightMove_IncubusCall&quot;,
	name: &quot;Incubus Call&quot;,
	preparation: function(character, target)
	{
		return &quot;An ominous red glow appears around &quot;+ character.info.name + &quot;&#39;s demonic cock. It is filled with demonic energy.&quot;;
	},
	attackAttemptDesc: function(character, target)
	{
		var His = setup.getPronoun(character,&quot;pronounDepPosCap&quot;);
		var his = setup.getPronoun(character,&quot;pronounDepPos&quot;);
		var he = setup.getPronoun(character,&quot;pronoun&quot;);

        var cockSize = setup.getLength(setup.getStatValue(character, &quot;cock&quot;) + 20);
		var displayString = &quot;With every throb, &quot;+character.info.name +&quot;&#39;s cock expands in girth and length, far larger than its natural size. &quot;+His+&quot; lustful moans increase in intensity as it grows to &quot; + cockSize + &quot; in length.  &quot;;
        displayString += &quot;It only takes a few jerks before &quot;+he+&quot; roars and shoots loads of demonic seed towards &quot;+his+&quot; target before it recedes to its original length.\n&quot;;

        return displayString;
    },
	attackHitDesc: function(character, target)
	{
		var His = setup.getPronoun(character,&quot;pronounDepPosCap&quot;);
		var his = setup.getPronoun(character,&quot;pronounDepPos&quot;);
		var He = setup.getPronoun(character,&quot;pronounCap&quot;);
		var he = setup.getPronoun(character,&quot;pronoun&quot;);

		var displayString = target.info.name + &quot; is hit by the incubus&#39;s cum. Warmth courses through &quot;+his+&quot; whole body, it feels like &quot;+he+&quot;&#39;s burning with arousal.\n\n&quot;;
        displayString +=  His+&quot; heart immediately starts beating like a drum. \n&quot;;
        displayString +=  He+&quot; can&#39;t stop himself, &quot;+his+&quot; hand goes to feel &quot;+his+&quot; crotch.\n\n&quot;;
        displayString +=  &quot;It&#39;s beyond sensitive... Arousal overtakes his thoughts &quot;+his+&quot; mind, &quot;+he+&quot; gathers a handful of demonic cum a tastes it eagerly.\n\nThe effects are instantaneous.&quot;;

        return displayString;
	},
	activationCondition: function(character, target)
	{
		return character.fight.variables.currentStamina &gt;= this.staminaCost;
	},
	dmg: 6,
	staminaCost: 14,
	critMod: 0,
    comboCost: 2,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: &quot;Give them a taste of your demonic seed.&quot;,
	skillType: &quot;demon&quot;,
	additionalEffects: [setup.incubusCallEffects]
}&gt;&gt;</tw-passagedata><tw-passagedata pid="161" name="FightMove_IncubusStrike" tags="" position="100,2100" size="100,100">&lt;&lt;set $FightMove_IncubusStrike =
{
	id: &quot;FightMove_IncubusStrike&quot;,
	name: &quot;Incubus Strike&quot;,
	preparation: function(character, target)
	{
		var His = setup.getPronoun(character,&quot;pronounDepPosCap&quot;);

		return &quot;A red sigil appears under &quot;+ character.info.name + &quot;. &quot;+His+&quot; body glows with demonic energy.&quot;
	},
	attackAttemptDesc: function(character, target)
	{
		return character.info.name + &quot; runs to their target.&quot;;
	},
	attackHitDesc: function(character, target)
	{
		var his = setup.getPronoun(character,&quot;pronounDepPos&quot;);
		var His = setup.getPronoun(character,&quot;pronounDepPosCap&quot;);
		var him = setup.getPronoun(character,&quot;pronounObject&quot;);
		var He = setup.getPronoun(character,&quot;pronounCap&quot;);

		if(character.id == &quot;CharacterSheet_Player&quot;)
		{
			return &quot;You grins and presses your hand on &quot;+target.info.name+&quot;&#39;s crotch.\n &quot;+His+&quot; vitality and arousal rushes into you. &quot;
			+&quot;You can only laugh as your body grows in power.&quot;
		}
		else
		{
			return He+&quot; grins and presses &quot;+his+&quot; hand on &quot;+his+&quot; target&#39;s crotch.\n &quot;+target.info.name+&quot;&#39;s vitality and arousal rushes into &quot;+him+&quot;. &quot;
			+character.info.name+&quot; can only laugh as &quot;+his+&quot; body grows in power.\n&quot;
		}
	},
	activationCondition: function(character, target)
	{
		return character.fight.variables.currentStamina &gt;= this.staminaCost;
	},
	dmg: 22,
	staminaCost: 20,
	critMod: 30,
    comboCost: 3,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: &quot;Your need for more is never sated.&quot;,
	skillType: &quot;demon&quot;,
	additionalEffects: [setup.incubusStrikeEffects]
}&gt;&gt;</tw-passagedata><tw-passagedata pid="162" name="FightMove_Infest" tags="" position="225,2100" size="100,100">&lt;&lt;set $FightMove_Infest =
{
	id: &quot;FightMove_Infest&quot;,
	name: &quot;Infest&quot;,
	preparation: function(character, target)
	{
		var his = setup.getPronoun(character,&quot;pronounDepPos&quot;);

		return character.info.name + &quot; can&#39;t contain &quot;+his+&quot; arousal anymore...&quot;
	},
	attackAttemptDesc: function(character, target)
	{
        var his = setup.getPronoun(character,&quot;pronounDepPos&quot;);
		return character.info.name + &quot; approaches you as &quot;+his+&quot; thick tongue drips with corrupting goo.&quot;;
	},
	attackHitDesc: function(character, target)
	{
		var his = setup.getPronoun(character,&quot;pronounDepPos&quot;);
		var him = setup.getPronoun(character,&quot;pronounObject&quot;);

        var hitText = &quot;&quot;;

        if(target.fight.variables.currentArousal &gt;= 50)
        {
            hitText = &quot;As &quot;+his+&quot; seed comes in contact with your body, you feel an influence grow in your mind.\n&quot;
                        +&quot;Your already high arousal makes the influence stronger, you can barely think as visions of sex and monsters overtake your thoughts. \n&quot;
						+&quot;You are stunned!&quot;;

        }
        else
        {
            hitText = &quot;As &quot;+his+&quot; seed comes in contact with your body, you feel an influence grow in your mind.\n&quot;
                        +&quot; Visions of yourself transformed into a massive monster influence your thoughts.&quot;;
        }

		return &quot;\&quot;Spreeeeaaad...\&quot; You hear &quot;+him+&quot; moan as &quot;+his+&quot; cock drips thick black precum on your chest.\n&quot;+
                hitText;
	},
	activationCondition: function(character, target)
	{
		return character.fight.variables.currentStamina &gt;= this.staminaCost;
	},
	dmg: 6,
	staminaCost: 12,
	critMod: 5,
    cooldown: 3,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: &quot;Lost Infest&quot;,
	skillType: &quot;slotted&quot;,
	additionalEffects: [setup.infestStun]
}&gt;&gt;</tw-passagedata><tw-passagedata pid="163" name="FightMove_Inspect" tags="" position="350,2100" size="100,100">&lt;&lt;set $FightMove_Inspect =
{
    id: &quot;FightMove_Inspect&quot;,
	name: &quot;Inspect&quot;,
	preparation: function(character, target)
	{
		return character.info.name + &quot; inspects their opponent carefully.&quot;
	},
	attackAttemptDesc: function(character, target)
	{
        var displayString = &quot;&quot;;

		displayString += character.info.name  + &quot; inspects &quot;+target.info.name+&quot; carefully.\n\n&quot;;

        if(target.info.picture != undefined)
        {
		    displayString += setup.displayEncounterImage(target.info.picture) + &quot;\n\n&quot;;
        }

        displayString += &quot;HP: &quot;+target.fight.variables.currentHP+&quot;/&quot;+setup.displayStatValue(target, &quot;hp&quot;)+&quot;\n&quot;;
        displayString += &quot;Stamina: &quot;+target.fight.variables.currentStamina+&quot;/&quot;+setup.displayStatValue(target, &quot;stamina&quot;)+&quot;\n&quot;;
        displayString += &quot;Arousal: &quot;+target.fight.variables.currentArousal+&quot;\n\n&quot;;

        displayString += &quot;Strength: &quot;+setup.displayStatValue(target, &quot;strength&quot;)+&quot;\n&quot;;
        displayString += &quot;Critical Hit Chance: &quot;+setup.displayStatValue(target, &quot;critChance&quot;)+&quot;\n&quot;;
        displayString += &quot;Arousal per Turn: &quot;+setup.displayStatValue(target, &quot;arousalGain&quot;)+&quot;\n&quot;;
        displayString += &quot;Stamina per Turn: &quot;+setup.displayStatValue(target, &quot;staminaRecovery&quot;)+&quot;\n\n&quot;;

        displayString += &quot;Corruption: &quot;+setup.getStatValue(target, &quot;corruption&quot;)+&quot;\n&quot;;
        displayString += &quot;Muscles: &quot;+setup.getMusclesDescriptor(target)+&quot;(&quot;+setup.displayStatValue(target, &quot;muscles&quot;)+&quot;)\n&quot;;
        displayString += &quot;Height: &quot;+setup.displayStatValue(target, &quot;height&quot;, true)+&quot;\n&quot;;
        displayString += &quot;Cock Size: &quot;+setup.displayStatValue(target, &quot;cock&quot;, true)+&quot;\n\n&quot;;

        displayString += &quot;Passive Abilities:\n&quot;;

        if(character.abilityHandler.abilityRuntimeDatas.length &gt; 0)
        {
            for(let i = 0; i &lt; target.abilityHandler.abilityRuntimeDatas.length; ++i)
            {
                let abilityRuntimeData = target.abilityHandler.abilityRuntimeDatas[i];
                if(abilityRuntimeData.isActive == true)
                {
                    displayString += abilityRuntimeData.abilityData.name +&quot;: &quot;+ abilityRuntimeData.abilityData.description(target, abilityRuntimeData) +&quot;\n&quot;;
                }
            }
        }
        else
        {
            displayString += &quot;None\n&quot;;
        }

        return displayString;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: 0,
	staminaCost: 0,
	critMod: 100,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: &quot;Shows information about your opponent.&quot;,
	skillType: &quot;special&quot;,
    unlearnable: true,
	additionalEffects: []
}&gt;&gt;</tw-passagedata><tw-passagedata pid="164" name="FightMove_Lunge" tags="" position="475,2100" size="100,100">&lt;&lt;set $FightMove_Lunge =
{
	id: &quot;FightMove_Lunge&quot;,
	name: &quot;Lunge&quot;,
	preparation: function(character, target)
	{
		return character.info.name + &quot; is preparing to pounce.&quot;;
	},
	attackAttemptDesc: function(character, target)
	{
		return character.info.name + &quot; jumps at his target. &quot;;
	},
	attackHitDesc: function(character, target)
	{
		var He = setup.getPronoun(character,&quot;pronounCap&quot;);
		
		return character.info.name + &quot; lands on their target. &quot;+He+&quot; roars and slash them mercilessly.&quot;;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: 3,
	staminaCost: 0,
	critMod: 0,
	skillDescription: &quot;A basic attack.&quot;,
	additionalEffects: []
}&gt;&gt;</tw-passagedata><tw-passagedata pid="165" name="FightMove_Masturbate" tags="" position="600,2100" size="100,100">&lt;&lt;set $FightMove_Masturbate =
{
	id: &quot;FightMove_Masturbate&quot;,
	name: &quot;Pleasure Self&quot;,
	preparation: function(character, target)
	{
		return character.info.name + &quot;&#39;s hand reaches for their crotch&quot;
	},
	attackAttemptDesc: function(character, target)
	{
		var him = setup.getPronoun(character, &quot;pronounObject&quot;);

		return character.info.name + setup.processFlavours(character, &quot; grabs his @[all|cocks|noverb] and then pumps it passionately. Arousal flows through &quot;)+him+&quot;.&quot;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: 0,
	staminaCost: 0,
	critMod: 100,
    comboCost: 1,
    skillStatsToDescriptionSpacing: 2,
	skillDescription: &quot;Increases your arousal gain by 100%.&quot;,
	skillType: &quot;symbiote&quot;,
    unlearnable: true,
	additionalEffects: [setup.masturbate]
}&gt;&gt;</tw-passagedata><tw-passagedata pid="166" name="FightMove_ParasiteLunge" tags="" position="725,2100" size="100,100">&lt;&lt;set $FightMove_ParasiteLunge =
{
	id: &quot;FightMove_ParasiteLunge&quot;,
	name: &quot;Parasite Lunge&quot;,
	preparation: function(character, target)
	{
		return character.info.name + &quot; is preparing to pounce.&quot;;
	},
	attackAttemptDesc: function(character, target)
	{
		return character.info.name + &quot; jumps at his target. &quot;;
	},
	attackHitDesc: function(character, target)
	{
		var He = setup.getPronoun(character,&quot;pronounCap&quot;);
		
		return character.info.name + &quot; lands on their target. &quot;+He+&quot; bites them mercilessly.&quot;;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: 3,
	staminaCost: 4,
	critMod: 0,
	skillDescription: &quot;A basic attack.&quot;,
	additionalEffects: []
}&gt;&gt;</tw-passagedata><tw-passagedata pid="167" name="FightMove_Parry" tags="" position="850,2100" size="100,100">&lt;&lt;set $FightMove_Parry =
{
    id: &quot;FightMove_Parry&quot;,
	name: &quot;Parry&quot;,
	preparation: function(character, target)
	{
        return character.info.name + &quot; enters a parry stance.&quot;;
	},
	attackHitDesc: function(character, target)
	{
        var displayString = character.info.name + &quot; drops his parry stance.&quot;;

        return displayString;
	},
	activationCondition: function(character, target)
	{
        return character.fight.variables.currentStamina &gt;= this.staminaCost;
	},
	staminaCost: 12,
	critMod: 100,
    cooldown: 4,
	skillStatsToDescriptionSpacing: 3,
	skillDescription: &quot;PARRY DESC&quot;,
	skillType: &quot;slotted&quot;,
    callbackOnPreparation: setup.doParry,
	additionalEffects: []
}&gt;&gt;</tw-passagedata><tw-passagedata pid="168" name="FightMove_SeedOfRuin" tags="" position="975,2100" size="100,100">&lt;&lt;set $FightMove_SeedOfRuin =
{
    id: &quot;FightMove_SeedOfRuin&quot;,
	name: &quot;Seed of Ruin&quot;,
	preparation: function(character, target)
	{
        //lol kind of a hack but I&#39;m drunk
        var arousalDamage = Math.min(setup.getStatValue(target, &quot;arousalGain&quot;) + target.fight.variables.currentArousal, 100);
        this.dmg = arousalDamage;

		return character.info.name + &quot; grasps his monstrous cock, and roars as arousal washes over him.&quot;
	},
	attackAttemptDesc: function(character, target)
	{
		var his = setup.getPronoun(character,&quot;pronounDepPos&quot;);

		return character.info.name + &quot; cums, his infected load shooting towards you.&quot;;
	},
    attackHitDesc: function(character, target)
	{
        var displayString = character.info.name + &quot;&#39;s load overwhelms you.\n&quot; 
		displayString += &quot;His infected seed crawls into you through your pores, frying your nerves with your own unstoppable need. \n&quot; 
		displayString += &quot;You scream as pain merges with a sudden orgasm washing over you.\n&quot; 
		displayString += &quot;\n&quot; 
		displayString += &quot;Your &quot;+this.dmg+&quot; arousal makes it even stronger.&quot;

        return displayString;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: 1,
	staminaCost: 16,
	critMod: 0,
    cooldown: 3,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: &quot;Seed of Ruin&quot;,
	skillType: &quot;slotted&quot;,
    unlearnable: true,
	additionalEffects: []
}&gt;&gt;</tw-passagedata><tw-passagedata pid="169" name="FightMove_Sigil_Growth" tags="" position="1100,2100" size="100,100">&lt;&lt;set $Sigil_Growth = 
{
    id: &quot;Sigil_Growth&quot;,
    constantDesc: function(attacker, victim)
    {
        return &quot;A Sigil of Growth pulsates in tune with &quot; + attacker.info.name + &quot;&#39;s heartbeat.&quot;;
    },
    onDamagingHit: function(attacker, victim, params)
    {
        setup.removePersistentEffect(victim, this);

        var ballsGrowth = Math.ceil(params.attackDamage * 0.025);
        var cockGrowth = Math.ceil(params.attackDamage * 0.07);
        var muscleGrowth = Math.ceil(params.attackDamage * 0.07);
        var sizeGrowth = Math.ceil(params.attackDamage * 0.12);

        ballsGrowth = setup.applyGrowth(attacker, &quot;balls&quot;, ballsGrowth);
        ballsGrowth = setup.applyGrowth(attacker, &quot;cock&quot;, cockGrowth);
        muscleGrowth = setup.applyGrowth(attacker, &quot;muscles&quot;, muscleGrowth);
        sizeGrowth = setup.applyGrowth(attacker, &quot;height&quot;, sizeGrowth);

        var His = setup.getPronoun(attacker,&quot;pronounDepPosCap&quot;);
        var his = setup.getPronoun(attacker,&quot;pronounDepPos&quot;);

        var displayString = attacker.info.name +&quot;&#39;s body gets overtaken by a golden aura as the Sigil of Growth activates. \n&quot;;
        displayString += attacker.info.name + &quot;&#39;s cock grows &quot;+ setup.getLength(cockGrowth) + &quot;, &quot;;
        displayString += his+&quot; muscles grow bigger (+&quot;+ muscleGrowth + &quot;) and &quot;;
        displayString += his+&quot; body becomes &quot;+ setup.getLength(sizeGrowth) + &quot; taller\n&quot;;
        //TODO apply balls growth desc 

        return displayString;
    },
}&gt;&gt;
&lt;&lt;set $FightMove_Sigil_Growth =
{
    id: &quot;FightMove_Sigil_Growth&quot;,
	name: &quot;Sigil of Growth&quot;,
	preparation: function(character, target)
	{
        return character.info.name + &quot; feels an urge to grow...&quot;;
	},
	attackHitDesc: function(character, target)
	{
        var displayString = setup.displaySeedMoveIntro(character, target, &quot;golden&quot;);
		displayString += &quot;It enters his body,  forming a Sigil of Growth on his skin.\n&quot;;
        displayString += character.info.name+&quot; can feel the growth that&#39;s about to be unleashed on him.&quot;;

        return displayString;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	staminaCost: 0,
	critMod: 100,
    comboCost: 1,
    maxStack: 4,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: &quot;Grows your body based on the damage of the activating attack&quot;,
	skillType: &quot;symbiote&quot;,
    buyFromStore: true,
    buyPassage: &quot;Buy_Sigil_Growth&quot;,
    essenceCost: 100,
    persistentEffectOpponent: $Sigil_Growth,
	additionalEffects: []
}&gt;&gt;</tw-passagedata><tw-passagedata pid="170" name="FightMove_Sigil_Pain" tags="" position="1225,2100" size="100,100">&lt;&lt;set $Sigil_Pain = 
{
    id: &quot;Sigil_Pain&quot;,
	constantDesc: function(attacker, victim)
    {
        return &quot;A black Sigil of Pain cracks deeply along &quot; + attacker.info.name + &quot;&#39;s skin.&quot;;
    },
    onDamagingHit: function(attacker, victim, params)
    {
        setup.removePersistentEffect(victim, this);

        params.attackDamage = Math.floor(params.attackDamage * 1.25);

        return &quot;A Sigil of Pain ruptures &quot;+ victim.info.name +&quot;&#39;s flesh as they get hit. The attack is amplified to &quot;+params.attackDamage+&quot; damage.\n&quot;;
    },
}&gt;&gt;
&lt;&lt;set $FightMove_Sigil_Pain =
{
    id: &quot;FightMove_Sigil_Pain&quot;,
	name: &quot;Sigil of Pain&quot;,
	preparation: function(character, target)
	{
		return character.info.name + &quot;&#39;s body suddenly glows with a subtle black hue.&quot;;
	},
	attackHitDesc: function(character, target)
	{
		var displayString = setup.displaySeedMoveIntro(character, target, &quot;dark red&quot;);
		displayString += &quot;It enters &quot;+target.info.name+&quot;&#39;s body. It twists and cracks along &quot;+ target.info.name +&quot;&#39;s skin, turning into a Sigil of Pain.&quot;;

        return displayString;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	staminaCost: 0,
	critMod: 100,
    comboCost: 1,
    maxStack: 8,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: &quot;Increases the damage of your next attack by 25%&quot;,
	skillType: &quot;symbiote&quot;,
	buyPassage: &quot;Buy_Sigil_Pain&quot;,
	buyFromStore: true,
	essenceCost: 100,
    persistentEffectOpponent: $Sigil_Pain,
	additionalEffects: []
}&gt;&gt;</tw-passagedata><tw-passagedata pid="171" name="FightMove_Sigil_Perception" tags="" position="100,2225" size="100,100">&lt;&lt;set $Sigil_Perception = 
{
    id: &quot;Sigil_Perception&quot;,
    constantDesc: function(attacker, victim)
    {
        return &quot;A Sigil of Perception builds a strong cyan aura around &quot; + attacker.info.name + &quot;&#39;s body.&quot;;
    },
    onActivate: function(attacker, victim, params)
    {
        console.log(&quot;doin persist effect on activate&quot;)
        attacker.applyAbilityRuntimeData(State.variables.Ability_SigilOfPerception);
    },
    onDamagingHit: function(attacker, victim, params)
    {
        setup.removePersistentEffect(victim, this);
        attacker.removeAbilityRuntimeData(State.variables.Ability_SigilOfPerception);

        return &quot;The Sigil of Perception dissipates\n&quot;;
    },
}&gt;&gt;
&lt;&lt;set $FightMove_Sigil_Perception =
{
    id: &quot;FightMove_Sigil_Perception&quot;,
	name: &quot;Sigil of Perception&quot;,
	preparation: function(character, target)
	{
		return character.info.name + &quot;&#39;s body suddenly glows with a subtle cyan hue.&quot;;
	},
	attackHitDesc: function(character, target)
	{
        var displayString = &quot;&quot;;
        displayString += setup.processFlavours(State.variables.CharacterSheet_Player, &quot;You focus Essence to your @[all| hands| noverb]; it suddenly glows in a soft cyan hue.\n&quot;);
        displayString += &quot;You strike at &quot;+ target.info.name +&quot;&#39;s core, making the glow spread through their whole body.&quot;;

        return displayString;
	},
	activationCondition: function(character, target)
	{
        return true;
	},
	staminaCost: 0,
    critMod: 100,
    comboCost: 1,
    maxStack: 5,
    skillStatsToDescriptionSpacing: 2,
	skillDescription: &quot;Increases next attack&#39;s chance to criticaly hit by 30%&quot;,
	skillType: &quot;symbiote&quot;,
    persistentEffectOpponent: $Sigil_Perception,
	additionalEffects: []
}&gt;&gt;</tw-passagedata><tw-passagedata pid="172" name="FightMove_Sigil_Vitality" tags="" position="225,2225" size="100,100">&lt;&lt;set $Sigil_Vitality = 
{
    id: &quot;Sigil_Vitality&quot;,
	constantDesc: function(attacker, victim)
    {
        return &quot;A gooey turquoise Sigil of Vitality clings to &quot; + attacker.info.name + &quot;&#39;s body like thick latex.&quot;;
    },
    onDamagingHit: function(attacker, victim, params)
    {
        var lifedrain = Math.floor(params.attackDamage * 0.75);
        attacker.fight.variables.currentHP = Math.min(attacker.fight.variables.currentHP + lifedrain, setup.getMaxHP(attacker));
        setup.removePersistentEffect(victim, this);
		var displayString = &quot;&quot;;
		if (attacker.id == &quot;CharacterSheet_Player&quot;){
			displayString = &quot;Thick turquoise goo emerges from &quot;+victim.info.name+&quot;&#39;s wounds as the Sigil of Vitality activates. It rushes up to you and enters your body. You are healed for &quot;+ lifedrain + &quot;hp.\n&quot;;
		}else{
			displayString = &quot;Thick turquoise goo emerges from your wounds as the Sigil of Vitality activates. It rushes up to your enemy and enters their body. They are healed for &quot;+ lifedrain + &quot;hp.\n&quot;;
		}

        return displayString
    },
}&gt;&gt;
&lt;&lt;set $FightMove_Sigil_Vitality =
{
    id: &quot;FightMove_Sigil_Vitality&quot;,
	name: &quot;Sigil of Vitality&quot;,
	preparation: function(character, target)
	{
		return character.info.name + &quot;&#39;s body suddenly glows with a subtle turquoise hue.&quot;;
	},
	attackHitDesc: function(character, target)
	{
        var displayString = setup.displaySeedMoveIntro(character, target, &quot;turquoise&quot;);
		displayString += &quot;It enters &quot;+target.info.name+&quot;&#39;s body, forming a Sigil of Vitality on his skin.&quot;;

        return displayString;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	staminaCost: 0,
	critMod: 100,
    maxStack: 4,
    comboCost: 1,
	skillStatsToDescriptionSpacing: 3,
	skillDescription: &quot;Heals the user by 75% of the damage applied by an attack as it activates&quot;,
	skillType: &quot;symbiote&quot;,
	buyFromStore: true,
	buyPassage: &quot;Buy_Sigil_Vitality&quot;,
	essenceCost: 75,
    persistentEffectOpponent: $Sigil_Vitality,
	additionalEffects: []
}&gt;&gt;</tw-passagedata><tw-passagedata pid="173" name="FightMove_Slash" tags="" position="350,2225" size="100,100">&lt;&lt;set $FightMove_Slash =
{
	id: &quot;FightMove_Slash&quot;,
	name: &quot;Slash&quot;,
	preparation: function(character, target)
	{
		var flavourtext = setup.getFlavourBasedDescription(character, &#39;basicAttackPrepFlavour&#39;, 1)
		if(flavourtext != undefined)
		{
			return character.info.name + &quot; &quot; + flavourtext
		}
		else
		{
			return character.info.name + &quot; is getting ready to strike.&quot;
		}
	},
	attackAttemptDesc: function(character, target)
	{
		var flavourtext = setup.getFlavourBasedDescription(character, &#39;slashAttackAttemptFlavour&#39;, 1)
		return flavourtext
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: 14,
	staminaCost: 8,
	critMod: 10,
    comboCost: 2,
    skillStatsToDescriptionSpacing: 2,
	skillDescription: &quot;A potentially devastating slash of your weapon.&quot;,
	skillType: &quot;slotted&quot;,
	additionalEffects: []
}&gt;&gt;</tw-passagedata><tw-passagedata pid="174" name="FightMove_SlimeLunge" tags="" position="475,2225" size="100,100">&lt;&lt;set $FightMove_SlimeLunge =
{
	id: &quot;FightMove_SlimeLunge&quot;,
	name: &quot;Slime Lunge&quot;,
	preparation: function(character, target)
	{
		return character.info.name + &quot; sloshes around, moving at a surprisingly nimble pace, ready to respond to your next move.&quot;;
	},
	attackAttemptDesc: function(character, target)
	{
		return character.info.name + &quot; bounces slightly, every movement causes its entire being to shake and stir, but its form remains well intact, not even a trail of goo is left behind in its wake.&quot;;
	},
	attackHitDesc: function(character, target)
	{
		var He = setup.getPronoun(character,&quot;pronounCap&quot;);
		
		return character.info.name + &quot; bounces with the agility you’d never expect from such a creature. It collides against you with all its might, attempting to knock you off your feet.&quot;;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: 4,
	staminaCost: 0,
	critMod: 0,
	skillDescription: &quot;A Slime Lunge.&quot;,
	additionalEffects: [setup.slimeLungeEffects]
}&gt;&gt;</tw-passagedata><tw-passagedata pid="175" name="FightMove_Stomp" tags="" position="600,2225" size="100,100">&lt;&lt;set $FightMove_Stomp =
{
	id: &quot;FightMove_Stomp&quot;,
	name: &quot;Stomp&quot;,
	preparation: function(character, target)
	{
		return character.info.name + &quot;&#39;s massive feet loom over his opponent.&quot;;
	},
	attackAttemptDesc: function(character, target)
	{
		return &quot;The ground shakes as &quot;+character.info.name +&quot; brings his foot down on his opponent.&quot;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: 18,
	staminaCost: 20,
	critMod: 20,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: &quot;Bring your foot down on your tiny opponent.&quot;,
	skillType: &quot;slotted&quot;,
    unlearnable: true,
	additionalEffects: []
}&gt;&gt;</tw-passagedata><tw-passagedata pid="176" name="FightMove_SummonParasite" tags="" position="725,2225" size="100,100">&lt;&lt;set $FightMove_SummonParasite =
{
	id: &quot;FightMove_SummonParasite&quot;,
	name: &quot;Summon Parasite&quot;,
	preparation: function(character, target)
	{
		var his = setup.getPronoun(character,&quot;pronounDepPos&quot;);

		return &quot;A thick purple mist suddenly gathers around &quot;+character.info.name+&quot;&#39;s hands.&quot;
	},
	attackAttemptDesc: function(character, target)
	{
        var his = setup.getPronoun(character,&quot;pronounDepPos&quot;);
        var displayString = &quot;The familiar sound of a portal opening rings between the two of you.\n&quot;;
        displayString += &quot;The black, opaque skin of a &quot;+setup.getLength(Math.ceil(setup.getStatValue(character, &quot;cock&quot;) / 3))+&quot; Nyx Parasite pokes out before it jumps towards &quot;+ target.info.name;
		return displayString;
	},
	attackHitDesc: function(character, target)
	{
        var displayString = &quot;The parasite stings &quot;+target.info.name+&quot;. A sharp pain slowly spreads through their limbs.&quot;;

		return displayString;
	},
	activationCondition: function(character, target)
	{
		return character.fight.variables.currentStamina &gt;= this.staminaCost;
	},
	dmg: 5,
	staminaCost: 12,
	critMod: 0,
	skillStatsToDescriptionSpacing: 1,
	skillDescription: &quot;Bring forth spawns of Nyx.&quot;,
	skillType: &quot;demon&quot;,
	additionalEffects: [setup.witheringVenom]
}&gt;&gt;</tw-passagedata><tw-passagedata pid="177" name="FightMove_WitheringVenom" tags="" position="850,2225" size="100,100">&lt;&lt;set $FightMove_WitheringVenom =
{
	id: &quot;FightMove_WitheringVenom&quot;,
	name: &quot;Withering Venom&quot;,
	preparation: function(character, target)
	{
		var his = setup.getPronoun(character,&quot;pronounDepPos&quot;);

		return character.info.name + &quot; can&#39;t contain &quot;+his+&quot; need to spread...&quot;
	},
	attackAttemptDesc: function(character, target)
	{
        var his = setup.getPronoun(character,&quot;pronounDepPos&quot;);
		return &quot;As the &quot;+ character.info.name + &quot; crawls closer, you notice a stinger emerge from his previously featureless head.\n&quot;;
	},
	attackHitDesc: function(character, target)
	{
        var displayString = &quot;The &quot;+ character.info.name + &quot; suddenly pounces and stings you. A sharp pain slowly spreads through your limbs. You feel weaker.&quot;;

		return displayString;
	},
	activationCondition: function(character, target)
	{
		return character.fight.variables.currentStamina &gt;= this.staminaCost;
	},
	dmg: 1,
	staminaCost: 12,
	critMod: 0,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: &quot;Withering Venom&quot;,
	skillType: &quot;slotted&quot;,
	additionalEffects: [setup.witheringVenom]
}&gt;&gt;</tw-passagedata><tw-passagedata pid="178" name="FightMove_Worship" tags="" position="975,2225" size="100,100">&lt;&lt;set $FightMove_Worship =
{
	id: &quot;FightMove_Worship&quot;,
	name: &quot;Worship&quot;,
	preparation: function(character, target)
	{
		return character.info.name + &quot;&#39;s mind is entirely under your control. His mouth is watering at the sight of your cock.&quot;;
	},
	attackAttemptDesc: function(character, target)
	{
        let arousalGain = 10;
        target.fight.variables.currentArousal += arousalGain;
        target.fight.variables.currentArousal = Math.min(100, target.fight.variables.currentArousal);

        let displayString = character.info.name +&quot; is overwhelmed by am insatiable desire to worhip their master. He loses himself, kissing &quot;+target.info.name+&quot; while grinding his hard cock on his. He soon drops to suck his master&#39;s while moaning passionately.\n&quot;;
        displayString += target.info.name +&quot; graps the back of &quot;+character.info.name+&quot;&#39;s head and thrusts his cock down his throat. He gains &quot;+arousalGain+&quot; arousal.&quot;;

        return displayString;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	doesNothing: true,
	dmg: 0,
	staminaCost: 0,
	critMod: 100,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: &quot;Worhip your opponent&#39;s body.&quot;,
	skillType: &quot;slotted&quot;,
    unlearnable: true,
	additionalEffects: []
}&gt;&gt;</tw-passagedata><tw-passagedata pid="179" name="Encounter_Loss_Lost_Entity" tags="" position="1100,2225" size="100,100">You fall under the Lost &lt;&lt;print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)&gt;&gt;&#39;s might. He howls in victory and knocks you down on your knees with his tremendous bulk.

The corrupted &lt;&lt;print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)&gt;&gt; &lt;&lt;print setup.processFlavours(
    $CharacterSheet_Lost_Entity,
    &#39;&quot;Spreeeeaaad...&quot; he moans as he stands over your chest, letting his @[all|cocks|noverb] drip thick ebon precum onto your chest.&#39;
)&gt;&gt;

The black spread across you, covering your body from tip to toe in his corrupting essence. 

You feel the presence of $CharacterSheet_Player.symbiote.name being smothered by something far larger and more sinister until nothing remained but the husky voice of the Lost.
Your eyes roll into the back of your head as you experience visions of yourself transformed into a voracious black monster, shoving your massive dick into your victims. 

A bond builds between you and the &lt;&lt;print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)&gt;&gt;. He has chosen you as a mate, a mate that will spread his gift to everything in the Barrens. 

Yes. This is how it always should be. The power you truly craved. There is no point in resisting the call to your greater purpose. 

You take the monster&#39;s pulsating rod into your mouth suck it eagerly. Your soul barely clings to you as you completely give yourself away to your new mate. 

You feel the &lt;&lt;print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)&gt;&gt;&#39;s orgasm coming; you tense your jaws and hold on like your life depended on it. 

&quot;GRAAHHHHH!&quot; The monster howls madly as thick loads of corrupting seed fills your very being.

Your body bulges larger and larger, wider and wider still - more muscular and corrupted until the last of your memories fade into a pool of oily black. 

Your soul breaks under the insatiable arousal. Now no longer compatible with your body, it bursts out of you and drifts upwards.

&lt;&lt;print setup.getFightReward(undefined)&gt;&gt;

[[This body has moved on...-&gt;Death]]</tw-passagedata><tw-passagedata pid="180" name="Encounter_Start_Lost_Entity" tags="" position="1225,2225" size="100,100">&lt;&lt;print setup.processFlavours($CharacterSheet_Lost_Entity, &quot;His @[all|cocks|one=rises~more=rise] to a full&quot;)&gt;&gt; &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Lost_Entity, &quot;cock&quot;))&gt;&gt; as he sees you. It throbs with hunger.

&quot;More...&quot; It mumbles between groans.</tw-passagedata><tw-passagedata pid="181" name="Encounter_Win_Lost_Entity" tags="" position="100,2350" size="100,100">The corrupted &lt;&lt;print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)&gt;&gt; is overwhelmed by your strength. Yet, his need to spread has consumed all reason within him long ago.

While clutching his wounds, he charges at you.

&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;lostWin1&quot;, 1, $CharacterSheet_Lost_Entity)&gt;&gt;

The &lt;&lt;print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)&gt;&gt; does not try to get back up; laying himself bare. He finally sees that dominating you would be impossible. 

He ruts against your flesh. Although wounded, his arousal still had to be sated. Lustful whines reach your ears as he spreads his legs and exposes his ass to you, desperately craving your attention.

\&lt;&lt;set $CharacterSheet_Lost_Entity.quest.beatenOnce = true&gt;&gt;
&lt;&lt;print setup.getFightReward($CharacterSheet_Lost_Entity)&gt;&gt;

[[Fuck him-&gt;Encounter_Win_Lost_Entity_Fuck]]
[[Leave-&gt;Encounter_Lost_Leave_NoSex]]</tw-passagedata><tw-passagedata pid="182" name="Encounter_Intro_Lost_Entity" tags="" position="225,2350" size="100,100">\&lt;&lt;set $CharacterSheet_Lost_Entity.quest.met = true&gt;&gt;
\&lt;&lt;run $CharacterSheet_Lost_Entity.info.muscles = 30&gt;&gt;
\&lt;&lt;run $CharacterSheet_Lost_Entity.info.height = 90&gt;&gt;
\&lt;&lt;run $CharacterSheet_Lost_Entity.info.cock = 23&gt;&gt;
\&lt;&lt;run $CharacterSheet_Lost_Entity.info.balls = 8&gt;&gt;
\&lt;&lt;run setup.setRandomRace($CharacterSheet_Lost_Entity.info.anatomy)&gt;&gt; 
\&lt;&lt;run $CharacterSheet_Lost_Entity.info.name = &quot;The Lost &quot; + setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)&gt;&gt;
\&lt;&lt;run $Encounter_Target=$CharacterSheet_Lost_Entity&gt;&gt;
After an hour of travel in the harsh deserts of the Barrens, you hear a strange sound. It sounds like a fusion between a deep moan and a terrifying growl.

You recognize it as the unsettling call of the Lost. Monsters whose souls have rotten under countless cycles of losing themselves to corruption. 

The corrupted &lt;&lt;print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)&gt;&gt; &lt;&lt;print setup.processFlavours(
    $CharacterSheet_Lost_Entity,
    &quot;roars as it catches your scent. Soon, a shambling monstrosity appears from the apex of a nearby dune.&quot; + 
    &quot; Black oil drips off of its body, the corrupt colour shimmering upon @[all| heads| a~an]. A @[1| tongues| noverb] hungrily rolls from his mouth as his @[all| eyes| noverb] fixate on you.\n&quot;
)&gt;&gt;
\&lt;&lt;if $CharacterSheet_Lost_Entity.quest.beatenOnce&gt;&gt;
Its massive muscular form looks even larger than the last Lost you had encountered. 
Your cock grows hard at the thought of enaging with this one, too.
\&lt;&lt;else&gt;&gt;
\You&#39;ve never seen muscles as bloated as this. 
\&lt;&lt;/if&gt;&gt;

His body pulses and writhes with more and more size, as if every breath he takes expands his frame larger and more monstrous with no end in sight. 

&lt;&lt;print setup.getFightStartPassages($CharacterSheet_Lost_Entity)&gt;&gt;</tw-passagedata><tw-passagedata pid="183" name="Encounter_Lost_Leave_NoSex" tags="" position="350,2350" size="100,100">You leave the Lost &lt;&lt;print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)&gt;&gt; to his own devices. His hand travels to his cock to satiate his own unending needs.

Who knows what could have happened if you had to give in to your desire.

Regardless, the entire ordeal has left you in an uncomfortably aroused state.

[[Leave-&gt;Village]]</tw-passagedata><tw-passagedata pid="184" name="LeavePurified" tags="" position="475,2350" size="100,100">You assure him that you are fine as you get back onto your feet. After a few minutes of elaborate gestures of thanks, you part ways.

[[Leave-&gt;Village]]</tw-passagedata><tw-passagedata pid="185" name="Recruit" tags="" position="600,2350" size="100,100">You smile at him. $CharacterSheet_Player.symbiote.name recedes inwards as you return to your normal form.

((To be implemented at a later stage!))

[[Invite him to the village-&gt;Recruit]]
[[leave-&gt;Village]]</tw-passagedata><tw-passagedata pid="186" name="Encounter_Win_Lost_Entity_Absorb" tags="" position="725,2350" size="100,100">The &lt;&lt;print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)&gt;&gt;&#39;s corrupting essence has made you grow, but this was not nearly enough! Your need for power is now too severe for just a taste. You need more.

You bring your fingers to your mouth and taste remnants of the &lt;&lt;print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)&gt;&gt;&#39;s black seed. Its intense flavour makes you shiver.

Thick $CharacterSheet_Player.symbiote.color goo slowly oozes out from your pores. A puff of steam escapes your slavering maw.

&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;lostKiss&quot;, 1, $CharacterSheet_Lost_Entity)&gt;&gt;

&quot;We&#39;ll be unstoppable...&quot; you growl, two distinct pitches colouring your voice.

[[Merge with the black goo-&gt;Encounter_Win_Lost_Entity_Absorb_2]]</tw-passagedata><tw-passagedata pid="187" name="Encounter_Win_Lost_Entity_Absorb_2" tags="" position="850,2350" size="100,100">The air is thick with debauchery. You could feel the embers of lust, the scent of sex overpowering all else. All testaments to your superiority as a host.

The &lt;&lt;print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)&gt;&gt;’s chest heaves upwards as the black ooze seems to shiver across his form. It senses the power contained within you.

&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;mergeLost1&quot;, 1, $CharacterSheet_Lost_Entity)&gt;&gt;

The &lt;&lt;print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)&gt;&gt; gradually turns from an oily black to a soft &lt;&lt;print setup.getRandomColor()&gt;&gt;. 

It only takes a few seconds for the last flickers of corruption to seep into the ground beneath the &lt;&lt;print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)&gt;&gt;. His previously hulking form deflates. 
Once standing at &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Lost_Entity, &quot;height&quot;))&gt;&gt; has now reduced to a far less egregious state of &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Lost_Entity, &quot;height&quot;) - 14)&gt;&gt;.
His form is now back to his old thin powerless self - now free of the corruption that had plagued him for countless cycles.

He coughs and splutters as black ooze pools out of his mouth. With disgust, you see him snarl at the droplets that seep into the ground before he collapses, exhausted. Holding his stomach, he rolls over to gaze into your eyes and speaks in hoarse tones. &quot;By the Antikythera! It feels as if I was taken by the Aeon of Corruption, himself!&quot; A sudden wretch catches him off guard as remnants of your cum forcefully expels itself from his stomach. &quot;Who and what are you!?&quot;

\&lt;&lt;if setup.getStatValue($CharacterSheet_Player, &quot;corruption&quot;) &gt;= 75&gt;&gt;
How dare he adress you in such a pathetic form! Your growl hungrily, you desire a mate, a mate that can satisfy your unquenchable desire, not some pathetic weakling!
\&lt;&lt;elseif setup.getStatValue($CharacterSheet_Player, &quot;corruption&quot;) &gt;= 50&gt;&gt;
The euphoria of the corruption brings you to your knees.

You register that the uncorrupted &lt;&lt;print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)&gt;&gt; has rushed up to you, but you struggle to comprehend his words through the dark haze of lust that swirls within your mind. The corruption within you teases you with sparks of pleasure across your body.
\&lt;&lt;else&gt;&gt;
The euphoria of the corruption brings you to your knees. It&#39;s difficult to resist the call. It feels like you could easily lose your senses if you weren&#39;t cautious around these creatures.

The freed &lt;&lt;print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)&gt;&gt; wobbles to his feet and hobbles toward you. &quot;H-hey! Don&#39;t you give in, you hear me!?&quot; he yells, &quot;You can&#39;t fall! You saved me!&quot;
\&lt;&lt;/if&gt;&gt;

\&lt;&lt;if (setup.sizeNormalPersoncomparison($CharacterSheet_Player) &gt;= $Comparators.FITS_ON_FINGER) and (setup.getStatValue($CharacterSheet_Player, &quot;corruption&quot;) &gt;= 75)&gt;&gt;
&lt;span class=&quot;glitch&quot; data-text=&quot;Recruit Him&quot;&gt;[[Recruit Him-&gt;Planetary69Ending]]&lt;/span&gt;
\&lt;&lt;elseif setup.getStatValue($CharacterSheet_Player, &quot;corruption&quot;) &gt;= 75&gt;&gt;
[[Recruit Him-&gt;Encounter_Win_Lost_Entity_Corrupt]]
[[Leave him be-&gt;LeavePurified]]
\&lt;&lt;elseif setup.getStatValue($CharacterSheet_Player, &quot;corruption&quot;) &gt;= 50&gt;&gt;
\&lt;&lt;if Math.floor(Math.random() * 2) == 1&gt;&gt;
[[Recruit Him-&gt;Encounter_Win_Lost_Entity_Corrupt]]
\&lt;&lt;else&gt;&gt;
&lt;span class=&quot;inactive&quot;&gt;[[Recruit Him-&gt;Recruit]]&lt;/span&gt;
\&lt;&lt;/if&gt;&gt;
[[Leave him be-&gt;LeavePurified]]
\&lt;&lt;else&gt;&gt;
&lt;span class = &quot;inactive&quot;&gt;[[Recruit Him-&gt;Recruit]]&lt;/span&gt;
[[Leave him be-&gt;LeavePurified]]
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="188" name="Encounter_Win_Lost_Entity_Corrupt" tags="" position="975,2350" size="100,100">&lt;&lt;print setup.processFlavours(
    $CharacterSheet_Player,
    &quot;It&#39;s not enough! It can never be enough!&quot;+
    &quot; You need the Lost, you need more of them! Lost to serve you and you alone!&quot;+
    &quot;\n\nResponding to your corrupt will, your ever increasing stream of pre turns into a dark ebon shade.&quot;+
    &quot;\You grin maliciously as your grab your @[all|cocks|noverb] - you would make him yours! Yours and yours alone!&quot;
)&gt;&gt;

&quot;W-wait! What are you doing!?&quot; He yells as you frantically piston your hands along your length and grab the unsuspecting &lt;&lt;print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)&gt;&gt; by the shoulder in a vice grip. &quot;Get off me!&quot; He weakly struggles, going as far as biting your arm to escape.

Futility.

&lt;&lt;print setup.processFlavours(
    $CharacterSheet_Player,
    &quot;Thoughts of turning him are driving you over the edge. Your movements became erratic as you feel the corruption manifest as a massive bubble at the base of your @[all|cocks|noverb].&quot;
)&gt;&gt;

&quot;Take it! Take! It! All!&quot; you roar as the recently cured creature&#39;s panic stricken screams are muffled by a niagara of sticky black seed.

His struggling arms, scraping at your fingers, slowly turn into sensual carressing gestures. You feel his hands growing, bulking with power. You grin as your creation cackles with uncontrolled lust. The Lost &lt;&lt;print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)&gt;&gt; flexes his growing muscles as he expands with every liter of cum you pour onto him.

&lt;&lt;print setup.processFlavours(
    $CharacterSheet_Lost_Entity,
    &quot;Soon, he stands slightly taller than you with muscles that barely allow him any movement. They quake and groan with every desire driven shudder that takes him. &quot;+
    &quot;His @[all|cocks|noverb] have grown so massive that they drag across the ground, constantly spurting puddle sized globules of black pre. The odour is warm within your nostrils, a pleasant but strong salty musk. &quot;+
    &quot;He can barely contain himself! His eyes lock onto yours with pure adoration as he rocks his incredible form across his package. &quot;+
    &#39;\n\n&quot;Yes! Fuck! YES!&quot; He howls as he orgasms over you, his flood colliding with your own in a glorious fountain of obsidian spunk. &#39;+
    &quot;\n\nYou push against the powerful stream as it hoses you down. With passion stirring your loins, you lock your mouth with your beloved and insert yourself into him once again, relishing in the massaging pressure of the Lost&#39;s ejaculate powering into the underside of your chin. &quot;+
    &quot;His @[all|tongues| one=jets~more=jet] into your mouth and dances along yours in an untameable samba of passion, growing longer and more intrusive as his orgasm continues between your bodies. &quot;+
    &quot;\n\nYou lose yourselves into a deep mating session that lasts for hours; his form growing ever more monstrous with each successive fuck.&quot;
)&gt;&gt;

[[Hours Later-&gt;Encounter_Lost_Entity_Swarm_creation]]</tw-passagedata><tw-passagedata pid="189" name="Encounter_Lost_Entity_Swarm_creation" tags="" position="1100,2350" size="100,100">\&lt;&lt;if $CharacterSheet_Swarm.quest.firstSwarm&gt;&gt; 
\&lt;&lt;run $CharacterSheet_Lost_Harbinger.info.anatomy = $CharacterSheet_Lost_Entity.info.anatomy&gt;&gt;
\&lt;&lt;run setup.setBaseStatValue($CharacterSheet_Lost_Harbinger, &quot;corruption&quot;, setup.getStatValue($CharacterSheet_Player, &quot;corruption&quot;))&gt;&gt;
\&lt;&lt;run setup.setBaseStatValue($CharacterSheet_Lost_Harbinger, &quot;muscles&quot;, setup.getStatValue($CharacterSheet_Player, &quot;muscles&quot;))&gt;&gt;
\&lt;&lt;run setup.setBaseStatValue($CharacterSheet_Lost_Harbinger, &quot;height&quot;, setup.getStatValue($CharacterSheet_Player, &quot;height&quot;))&gt;&gt;
\&lt;&lt;run setup.setBaseStatValue($CharacterSheet_Lost_Harbinger, &quot;cock&quot;, setup.getStatValue($CharacterSheet_Player, &quot;cock&quot;))&gt;&gt;
You feel an unnaturally close bond between you and the Lost. He was your first and to him, you are his one and only true mate. He lives for you, breaths for you and exists for only you. While lying on each other&#39;s chest he gently runs a hand down your pecs and softly kisses your cheek. Reluctantly, you drag yourself away from his roving hands.

He wines, &quot;Don&#39;t go!&quot;

With a firm hand, you stroke the back of his head and kiss his forehead. &quot;I have to. I have things to do, and so do you.&quot; 
\&lt;&lt;print setup.processFlavours(
    $CharacterSheet_Lost_Harbinger,
    &quot;His mood immediately turns to excitement and his @[all|cocks|one=hardens~more=harden] from between his legs.&quot;
)&gt;&gt;

&quot;I want you to be the herald of my reign over these lands,&quot; you command, &quot;You will fuck, spread and grow larger for me.&quot;

&quot;Yes!&quot; he moans, &quot;I&#39;ll do anything for you!&quot; His excitement is too much to handle as he begins to leak rivulets of pre.

Although glorious in form, your lover needs to be set apart from the masses. A name, to mark him as the leader of your new family of Lost.

You think &lt;&lt;textbox &quot;$CharacterSheet_Lost_Harbinger.quest.harbingerName&quot; &quot;Typhon&quot;&gt;&gt; would fit him well.
&lt;&lt;run $CharacterSheet_Lost_Harbinger.quest.harbingerRace = State.variables.RacePool[setup.getRace($CharacterSheet_Lost_Entity.info.anatomy).toUpperCase()]&gt;&gt;
[[Christen him-&gt;Encounter_Lost_Entity_Swarm_Harbinger]]
\&lt;&lt;else&gt;&gt;
Another monster birthed from your loins, another empassioned lover to join your swarm.

You tell your new slave to go and find $CharacterSheet_Lost_Harbinger.quest.harbingerName and join him on his conquest in your name.

A smile curls your lips upwards. You are sure your growing family would eagerly welcome their new addition.

[[Return to the village-&gt;Village]]
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="190" name="Encounter_Lost_Entity_Swarm_Harbinger" tags="" position="1225,2350" size="100,100">You smile, &quot;Now go forth in my name, $CharacterSheet_Lost_Harbinger.quest.harbingerName !&quot;

His jaw drops in awe and his eyes widen as you give him a name. Hearing you say it is too much for him to handle. Running up to you, he smothers you in a musclebound hug. His shafts harden below you and knock against your legs.

After locking lips one more time, he turns to face the open sands and bellows out a primordial roar of raw ferocity and strength - the likes of which you have never seen before.

He was a king of monsters. Your monster.

You smile as you watch $CharacterSheet_Lost_Harbinger.quest.harbingerName hurtle into the Barrens. You are sure you will see him again, soon.

[[Return to the village-&gt;Village][$CharacterSheet_Swarm.quest.firstSwarm = false;]]</tw-passagedata><tw-passagedata pid="191" name="Encounter_Win_Lost_Entity_Fuck" tags="" position="100,2475" size="100,100">&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;lostFuck1&quot;, 1, $CharacterSheet_Lost_Entity)&gt;&gt;

\&lt;&lt;run setup.applyGrowth($CharacterSheet_Player, &quot;muscles&quot;, 1)&gt;&gt;
&lt;&lt;print setup.getMuscleGrowthSequenceText($CharacterSheet_Player)&gt;&gt;.

[[Embrace the corruption-&gt;Encounter_Win_Lost_Entity_Fuck_2]]</tw-passagedata><tw-passagedata pid="192" name="Encounter_Win_Lost_Entity_Fuck_2" tags="" position="225,2475" size="100,100">&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;lostFuck2&quot;, 1, $CharacterSheet_Lost_Entity)&gt;&gt;

Suddenly, you feel depravity sink into your soul as the corruption&#39;s claws dig further into you.
\&lt;&lt;run setup.applyGrowth($CharacterSheet_Player, &quot;muscles&quot;, 2)&gt;&gt;
&lt;&lt;print setup.getMuscleGrowthSequenceText($CharacterSheet_Player)&gt;&gt;
\&lt;&lt;run setup.applyCorruption($CharacterSheet_Player, 2)&gt;&gt;
Your soul has been corrupted (+2)

\&lt;&lt;if setup.getStatValue($CharacterSheet_Player, &quot;corruption&quot;) &gt;= 25&gt;&gt;
Your surroundings are utterly drenched in a mixture of your and the Lost &lt;&lt;print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)&gt;&gt;&#39;s cum. Yet you still crave more.

[[Push it even further-&gt;Encounter_Win_Lost_Entity_Absorb]]
[[Leave-&gt;Encounter_Lost_Leave_NoSex]]
\&lt;&lt;else&gt;&gt;
His corrupting seed is gnawing at your mind; you are sane enough to leave before you lose yourself to its influence. 

For now.

[[Leave-&gt;Encounter_Lost_Leave_NoSex]]
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="193" name="Quest_MQ002_ApothusEncounter_FightStart" tags="" position="350,2475" size="100,100"></tw-passagedata><tw-passagedata pid="194" name="Quest_MQ002_ApothusEncounter_FightIntro" tags="" position="475,2475" size="100,100">&lt;&lt;print setup.getFightStartPassages($CharacterSheet_Apothus)&gt;&gt;</tw-passagedata><tw-passagedata pid="195" name="Quest_MQ002_ApothusEncounter_PlayerWins" tags="" position="600,2475" size="100,100">&lt;&lt;print setup.getFightReward($CharacterSheet_Apothus)&gt;&gt;

Apothus clenches his chest and falls to one knee; he pants, his once alluring smile turned ferocious.

&quot;What are you? What is this thing inside of you?&quot; His hands curl into fists as he gazes at the Black Sun once more, with anguish in his eyes.

&quot;You&#39;re nothing but a stain upon our canvas.&quot; He can&#39;t stand to look at you anymore; his eyes remain fixated on Nyx.

&quot;I can&#39;t let you come any closer to our chosen one... Please Nyx...&quot; His gaze lowers to the Lost surrounding you. They look back at him with agitation.

[[Continue-&gt;Quest_MQ002_ApothusEncounter_PlayerWins_1]]</tw-passagedata><tw-passagedata pid="196" name="Quest_MQ002_ApothusEncounter_PlayerWins_1" tags="" position="725,2475" size="100,100">&quot;Grant me the strength to protect him, so you can finally have the vessel you deserve!&quot; He screams, his arms widened as if to embrace Nyx itself.

A Lost jumps towards him, his head pushes on Apothus&#39;s chest. Black goo splashes all over his body quickly crawling and swirling around it. 
His tattoo glows bright purple as he grins madly.

&quot;Ohhhhh Aeons yesss... Come to me...&quot;

Corruption fuels him with the power he denied himself for so long. 
The Lost lunges into his chest, giving himself away to his master.

&quot;Urgghhhhh...&quot; he groans, trying to keep himself together as his body expands. 
The fibers of his pectorals bulge as they fill with god-like strength.
Another one charges onto him, his meaty paws hugging him from behind, pulling himself into his back.

&quot;G-Guhhhh... So goooood...&quot; his distorting voice moans as more and more Lost joins them.

&quot;Aaaaa... RAAAAAAAAHH!&quot; his moans warp into bestial roars. He presents his cock to his Lost.
They worship it, caressing every inch before entering it as well.

&quot;Mooooooore. MOOOOOOOOOOORE!&quot; his body burst through the pile of gathering Lost. Apothus pulls his head back into a monstrous roar. 
Massive bullish horns emerge from each side of his head. His jaw changes, enormous tusks juts from his mouth into lethally sharp points. 
His clawed hands hold his head in a desperate attempt to control the corruption rushing within him.

&quot;I-I need... Urghhhh... Mooooore... MORE POWER!&quot;

Massive tendrils burst from his back, they lash out, pulling nearby Lost and pulling them to their master&#39;s expanding form. 
He grasps more and more Lost, forcing them to merge with him. His monstrous laughter resounds throughout the realm as his eyes turn jet black like tar.

His eyes flick to you, utterly devoid of his previous resolve. Only desire drives him now.

\&lt;&lt;set $WorldState.apothusTransformed = true&gt;&gt;
[[Fight Him-&gt;FightLogic][$Encounter_Target = $CharacterSheet_Apothus_2nd_Form]]</tw-passagedata><tw-passagedata pid="197" name="Quest_MQ002_ApothusEncounter_PlayerLoses" tags="" position="850,2475" size="100,100">You fall, the surrounding Lost watch with excitement upon seeing you in a weakened state.
Apothus raises his hand to them; they immediately stop.

&quot;Seems that you are not ready for what I can offer you.&quot; He says in a disappointed tone.

&quot;We are stuck in a neverending cycle of lust and greed. It will only tear us apart until we all lay on the sand with our bodies and mind broken. Nyx is out only way out of this cycle, for its light shows the world differently.&quot;

He steps towards you, his palm inching towards the back of your head.

&quot;You are free to come back once you&#39;re ready. For Nyx&#39;s light will never leave a soul behind.&quot;

He strikes you down.

&lt;&lt;print setup.getFightReward(null)&gt;&gt;
\&lt;&lt;run $CharacterSheet_Player.removeAbilityRuntimeData($Ability_EmbracedByNyxsLight);&gt;&gt;
[[You Died-&gt;Death]]</tw-passagedata><tw-passagedata pid="198" name="Quest_MQ002_Apothus_2nd_Form_Encounter_FightStart" tags="" position="975,2475" size="100,100"></tw-passagedata><tw-passagedata pid="199" name="Quest_MQ002_Apothus_2nd_Form_Encounter_FightIntro" tags="" position="1100,2475" size="100,100">&lt;&lt;print setup.getFightStartPassages($CharacterSheet_Apothus_2nd_Form)&gt;&gt;</tw-passagedata><tw-passagedata pid="200" name="Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses" tags="" position="1225,2475" size="100,100">That last hit proves too much for you. You fall to your side into a growing puddle of corruption. 
The thumping sounds of Apothus&#39;s feet grow ever closer, as do his distorted moans. 
His body trembles with the approaching ecstasy of release, nerves close to frying from the corruption spreading in his veins. 
His mind is barren of anything other than the single desire to fill you with his seed.

Apothus looks at you with sudden restraint. Perhaps a remnant of his old self? It is hard to say, but that inhibition could be your one chance to escape.
His vortex shaped tattoo glows with a blinding purple light.

&quot;Join me...&quot; He mutters, his words drifting through distorted moans.

[[Escape-&gt;Quest_MQ002_Manor_MainHall]]
[[Accept his Offer-&gt;Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_01]]</tw-passagedata><tw-passagedata pid="201" name="Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_01" tags="" position="100,2600" size="100,100">His arousal is infectious; you feel the raw passion within his eyes. 
He&#39;s a monster, who&#39;s presence is sure to bring corruption and chaos to all wanderers of the Barrens. 
Yet here he is, inches away from you. 
You rub your body against him, letting lust build. Your eyes meet his - He grins.

He presses his cock against yours; corruption enters you from the touch. You look at it with fascination. 

It pulses with a growing need and thickens in all directions. 
Your hand grasps his oily shaft feeling its unnatural vitality. It is so full, so juicy and plentiful, and yet it throbs harder than any shaft you&#39;ve felt. 

&quot;Miiiiiiine...&quot; he growls, grasping his dick and bringing it to your mouth.

[[Suck Him-&gt;Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_02]]</tw-passagedata><tw-passagedata pid="202" name="Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_02" tags="" position="225,2600" size="100,100">Your cock rises to full hardness as you taste his corrupted seed. The sound of your muffled moans pleases him. 
He thrust it deep in your throat, his groans making you shiver with lust. His clawed feet dig deep in the ground, generating fissures in the ancient cobblestones.

You feel his breathing grow heavier; his whole body shakes with uncontrollable desire.

&quot;MIIIINE!&quot; He roars, pulling his cock out of your throat to turn you around.

His cock pushes on your entrance; you moan in response. Apothus&#39;s body quivers, a monolithic figure of unstoppable power. 
His growth is unimpeded, a constant fuel to his irresistible might. You scream for him to finally fuck you. He roars and forces himself in, dropping all pretense of humanity.

[[Give in to his Corruption-&gt;Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_03]]</tw-passagedata><tw-passagedata pid="203" name="Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_03" tags="" position="350,2600" size="100,100">Tendrils of corruption slowly crawl upon your legs, pulling you closer to him. Some more slide along your waist, inching towards your cock. 
They spread along your skin, covering you more and more with Apothus&#39;s potent blend of corruption. 
It is more than arousing; your breathing suddenly becomes faster as it rushes inside you. You grow, pushing against Apothus&#39;s grasp as his powers fill your body. 
You thrust yourself on him, force more of his cock to fill you, milking every single drop of his potent seed. 
Your tongue slides out of your mouth, getting longer and thicker with every thrust of your master&#39;s cock. 

Suddenly, you feel something reach out to Apothus, like a limb you never knew you had.

&quot;W-What... What is this?&quot; He says with disbelief. 

&lt;&lt;SymbioteName&gt;&gt; tastes the corruption as well; his moans are resounding deep within your soul. They reach out, the taste triggering a long-forgotten hunger. 
Thick &lt;&lt;SymbioteColor&gt;&gt; goo spreads out to him, entering him as well.

[[Continue-&gt;Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_04]]</tw-passagedata><tw-passagedata pid="204" name="Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_04" tags="" position="475,2600" size="100,100">&quot;HHMMMMMRRRFFFFFF! YESSSSSS!&quot; He screams, going the same life-changing orgasm you felt when you first came into contact with &lt;&lt;SymbioteName&gt;&gt;. 

His strength grows exponentially, every fibre of his corrupted self suddenly processing corruption more efficiently than ever. 
You feel connected to him, his whole body feeling closer and closer to your own.

&quot;This power... I-I NEED IT ALL!&quot;

His hand grasps your chest and pulls you vigorously towards his body. You feel like you suddenly fell into a pool of warm honey. 
Your body fills with his Essence, though every inch of your being. 

Only your head pushes from his pecs, his long tongue slithers out and slides into your mouth, filling you with his warm, powerful presence. 
He milks you from every possible recess of sensitivity hidden upon your form. You cum, screaming in complete and utter pleasure. Your body no longer holds any secrets to him.

Yet you yearn for more. You need to have this beast fuck you over and over until he grows bigger than all that is. 
&lt;&lt;SymbioteName&gt;&gt; feels your need, your dream for forbidden pleasure haunts him. Your own body slowly unites with your master, your thoughts growing closer in tone.

&quot;Yesssss... Together...&quot; Apothus groans within your head.

[[Merge with Apothus-&gt;Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_06]]</tw-passagedata><tw-passagedata pid="205" name="Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_06" tags="" position="600,2600" size="100,100">Your corrupted minds merge into a monster that nothing in the Barrens can stop. Your hunger for power is insatiable. Your need for pleasure is neverending. 
You dream of reaching the penultimate pleasure that flesh can produce. To grow into the ultimate beast who holds the world in his hands. 

You leave the chosen one, for your cock demands a hole to fuck. 

[[Time Passes-&gt;Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_07]]</tw-passagedata><tw-passagedata pid="206" name="Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_07" tags="" position="725,2600" size="100,100">You wander the Barrens, your body growing day after day as you spread corruption unlike anything else. You soon tower over every other being. 
Monsters worship you as their god, as the fiend who rules over everything. Others can only run and hide from you, but soon the even the soil bends to your corruption. 
The sand grows black and oily; plants warp under your taint and spread your influence even further. 

Cycles go on as you revel under constant debauchery, your worshippers grow in number every day. You never stop expanding, bigger and bigger, with no signs of stopping.  
And every few minutes, countless monsters roar in delight as the earth fills with another load of your tainted seed.

But soon, your need for more grows ever more powerful; your thoughts go back to Nyx. 

It is only a matter of time before you can reach it yourself.

\&lt;&lt;run setup.triggerEnding(&quot;Ending_OneWithApothus&quot;)&gt;&gt;
[[The End-&gt;Ending]]</tw-passagedata><tw-passagedata pid="207" name="Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins" tags="" position="850,2600" size="100,100">Apothus slumps, his wounds are gushing out corruption across the ruins. He recoils back up, shaking his head wildly as he pants with exhaustion.

&quot;It&#39;s still not enough! I NEED MOOOOORE!&quot; He looks around in a panic, desperately searching for more Lost to absorb, but the ruins are empty of them. 
Only the two of you remain.

Purple fumes gush out of his nostrils; he roars in denial. He turns towards the cocoon. 
It was all he had left, his chosen one, his way out of this neverending cycle of death, lust and greed. 

But his chosen had power... power he could take for himself. Then no one could stop him. He would become the god this world desperately needs.

&quot;MOOOOOOORE!&quot;

[[Continue-&gt;Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_2]]</tw-passagedata><tw-passagedata pid="208" name="Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_2" tags="" position="975,2600" size="100,100">He turns to the cocoon and charges towards it like a starving animal. Corruption drives his every move. 
He drools as he reaches the black chamber, his hand immediately push through its surface as he laughs. 
His grin stretches his face with monstrous fangs gleaming with ferocious madness. His gooey hands push through the surface, his tendrils soon follow. 
They bulge obscenely as pure Essence flows into him. His back burst with sudden size, strength piling into his every limb.

&quot;Mrrrhhhhfffffff YES!!!!&quot; He roars in victory.

Litres of pure, unadulterated power rushes in every fibre of his body. The ground groans and tears under his weight. 
His roar sinks into a deep, distorted moan as spurts of black cum shoot upon the cocoon&#39;s surface. 
He pulls himself closer to it; tons upon tons of muscles booms out of him. 

&quot;MMMMrrrrrhahaaaaaaaaaaa... Watch me turn into a GOD!&quot; 

[[Continue-&gt;Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_3]]</tw-passagedata><tw-passagedata pid="209" name="Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_3" tags="" position="1100,2600" size="100,100">His body shoots upwards, higher than the cocoon he is absorbing. He lifts himself, feeling the growth forcing through the rest of his body. 
His pecs and abs swell, ballooning out as they clench into god-like mounds - no doubt capable of crushing mountains. 
His arms flex of their own volition, overwhelmed by the rushing, all-consuming growth flooding his senses. 
Apothus&#39;s moans turn into muffled deep gurgles as his balls pump out gallons upon gallons of corrupted seed upon the ruins. 
He basks in the orgasmic of growing his ever more massive.

His hands reach out towards Nyx; his ascension is so close to completion.

He is so close!

Apothus roars in victory, his hands reaching ever closer to the Black Sun. His need for growth takes over his soul. 
He is in a waking dream, where all shall finally be right; all he needs is to keep growing! Nothing else matters anymore!

[[Continue-&gt;Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_4]]</tw-passagedata><tw-passagedata pid="210" name="Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_4" tags="" position="1225,2600" size="100,100">The whole platform groans. 

It bellows in a cacauphony of ruination.

Patches of stones and soil launch off and into nothingness.

The magical sigils around the platform abruptly dim to a dull grey. 

[[Hold On-&gt;Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_5]]</tw-passagedata><tw-passagedata pid="211" name="Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_5" tags="" position="100,2725" size="100,100">Without Apothus&#39;s presence of mind, the spell to keep the platform afloat fades.

The ground suddenly collapses under him. 

He screams, his hands still reaching for Nyx. He roars in a sudden rage as the platform tilts towards him. 
The cocoon shifts and crumbles off its base, getting caught in the increasing force of the air crashing against it.

He crawls toward you, climbing upon the tilting ruins, unaware of the cause of his plight.

&quot;YOU! I WILL CHASE YOU THROUGH THE BARRENS UNTIL THE END OF TIME!&quot; His impossibly massive form hurdles forward before the ground beneath his clawed feet shatters. 
The wind roars, your drop reaches incredible speed. You try to reach the portal out of this realm, but it is too far.

The blue sky fills more of your vision. 
The wind is deafening, yet Apothus&#39;s monstrous roars are still audible. His body is dragged away by the wind, pushed far enough to be safe from his fury. 

[[Continue-&gt;Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_6]]</tw-passagedata><tw-passagedata pid="212" name="Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_6" tags="" position="225,2725" size="100,100">But the drop cannot be stopped.

The cataclysmic sound of the platform crashing is loud enough to burst your eardrums.

\&lt;&lt;set $WorldState.cultManor.monolithBroken = true&gt;&gt;
\&lt;&lt;set $DeathText = $DeathTextEnum.POST_APOTHUS&gt;&gt;
\&lt;&lt;run $CharacterSheet_Player.removeAbilityRuntimeData($Ability_EmbracedByNyxsLight);&gt;&gt;
[[You Fall-&gt;Death]]</tw-passagedata><tw-passagedata pid="213" name="Quest_MQ002_DragonMonkEncounter_FightStart" tags="" position="350,2725" size="100,100"></tw-passagedata><tw-passagedata pid="214" name="Quest_MQ002_DragonMonkEncounter_FightIntro" tags="" position="475,2725" size="100,100">\&lt;&lt;set $CharacterSheet_MQ002_DragonMonk.quest.met = true&gt;&gt;
&lt;&lt;print setup.getFightStartPassages($CharacterSheet_MQ002_DragonMonk)&gt;&gt;</tw-passagedata><tw-passagedata pid="215" name="Quest_MQ002_DragonMonkEncounter_PlayerWins" tags="" position="600,2725" size="100,100">Drenth falls to his knees, out of breath. 

You both know that this fight is over.

&lt;&lt;print setup.getFightReward($CharacterSheet_MQ002_DragonMonk)&gt;&gt;
\&lt;&lt;set $CharacterSheet_MQ002_DragonMonk.quest.beaten = true&gt;&gt;
\&lt;&lt;set $CharacterSheet_MQ002_DragonMonk.quest.beatenCycle = ~~($Day / 28) + 1&gt;&gt;
[[Continue-&gt;Quest_MQ002_DragonMonkEncounter_PlayerWins_2]]</tw-passagedata><tw-passagedata pid="216" name="Quest_MQ002_DragonMonkEncounter_PlayerWins_2" tags="" position="725,2725" size="100,100">The dragonborn grunts angrily, you can see that he&#39;s running out of options.
\&lt;&lt;if setup.MQ002_Manor_IsCorruptedInManor($CharacterSheet_Player)&gt;&gt;
You let out wicked smirk, flicking your &lt;&lt;print setup.processFlavours($CharacterSheet_Player, &quot;@[all|tongues|noverb]&quot;)&gt;&gt; wildly towards him.
\&lt;&lt;/if&gt;&gt;

&quot;You may have bested me now... But I&#39;ll never let you have it your way.&quot;

His arm suddenly glows with a bright white light.

&quot;For even if I die here, even if that means freeing the cult of Nyx.&quot; He stumbles back on his feet, the light grows powerful, blinding even.

&quot;I will fight on, as long as my soul is bright and virtuous, I will come back.&quot;

His hand clenches into a fist; he brings it to his chest.

&quot;So that upon the twelfth, I shall announce that I have not been claimed.&quot;

A thunderous sound bursts out of his fist. The fog all but blasts away to the edges of the room through the force of the impact.
It&#39;s strong enough to make the foundations groan.

The dragonborn&#39;s body shakes for an instant.

And then collapses.

\&lt;&lt;run setup.breakOath(&quot;drenth&quot;)&gt;&gt;
[[Continue-&gt;Quest_MQ002_DragonMonkEncounter_PlayerWins_3]]</tw-passagedata><tw-passagedata pid="217" name="Quest_MQ002_DragonMonkEncounter_PlayerWins_3" tags="" position="850,2725" size="100,100">The fog slowly crawls back upon the room, like a blanket of cotton.

[[Continue-&gt;Quest_MQ002_Manor_DragonRoom]]</tw-passagedata><tw-passagedata pid="218" name="Quest_MQ002_DragonMonkEncounter_PlayerLoses" tags="" position="975,2725" size="100,100">The dragonborn looks on down as you collapse from his last strike.

He walks to you with complete apathy.

And without a word, strikes you with a palm strike aimed at your chest.

&lt;&lt;print setup.getFightReward(null)&gt;&gt;

[[You died-&gt;Death]]</tw-passagedata><tw-passagedata pid="219" name="Encounter_Intro_Imp" tags="" position="1100,2725" size="100,100">\&lt;&lt;set $CharacterSheet_Imp.quest.met = true&gt;&gt;
You stumble upon a &lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Imp, &#39;sizeDescriptionFlavour&#39;)&gt;&gt; hostile imp.

&lt;&lt;print setup.getFightStartPassages($CharacterSheet_Imp)&gt;&gt;</tw-passagedata><tw-passagedata pid="220" name="Encounter_Start_Imp" tags="" position="1225,2725" size="100,100">&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Imp, &#39;encounterStartFlavour&#39;)&gt;&gt;</tw-passagedata><tw-passagedata pid="221" name="Encounter_Win_Imp" tags="" position="100,2850" size="100,100">The &lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Imp, &#39;sizeDescriptionFlavour&#39;)&gt;&gt; imp falls down and tries to get back up. He promises to give you power if you spare him.

[[Accept the Imp&#39;s proposal-&gt;Imp Fight Won - Deal]]
[[Leave-&gt;Imp Fight Won - NoDeal]]</tw-passagedata><tw-passagedata pid="222" name="Encounter_Loss_Imp" tags="" position="225,2850" size="100,100">The &lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Imp, &#39;sizeDescriptionFlavour&#39;)&gt;&gt; imp brings you down to your knees. 

&lt;&lt;print setup.getFightReward(undefined)&gt;&gt;

[[Submit-&gt;Imp Fight Lost]]
[[Escape-&gt;Village]]</tw-passagedata><tw-passagedata pid="223" name="Imp Fight Lost" tags="" position="350,2850" size="100,100">You fall down in exhaustion. 

As you try to get back up, the heavy musk of the &lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Imp, &#39;sizeDescriptionFlavour&#39;)&gt;&gt; imp&#39;s cock overwhelms you.  The demon&#39;s cock drips with glowing purple cum.

A part of yourself damns you for not escaping. Yet it is a muffled voice compared to the need that now screams within you. You take his cock into your mouth, his cum instantly infect your thoughts. Your eyes glow purple, and you smile at the demon. 

The following hours become a blur of overwhelming lust, you fuck in every way possible. 

It preys on your thoughts as you beg for more...

The techniques that you used in battle flow in his mind as you cum for hours.

\&lt;&lt;set _learnedMove = setup.learnRandomMoveFromTarget($CharacterSheet_Imp, $CharacterSheet_Player)&gt;&gt;
\&lt;&lt;if _learnedMove&gt;&gt;
    (The imp has learned _learnedMove.name)
\    &lt;&lt;set $CharacterSheet_Imp.fight.fightMoves = $CharacterSheet_Imp.fight.fightMoves.concatUnique(_learnedMove)&gt;&gt;
\&lt;&lt;/if&gt;&gt;

[[Give your soul away-&gt;Death]]</tw-passagedata><tw-passagedata pid="224" name="Imp Fight Won - Kill" tags="" position="475,2850" size="100,100">UNUSED ONLY HERE FOR REFERENCE

It&#39;s safer for everyone if those kinds of demon are taken care of.

You kill the imp who begs for his life.

(You will no longer encounter the imp in random encounters)

&lt;&lt;run setup.killEntity($CharacterSheet_Imp)&gt;&gt;

&lt;&lt;print setup.getFightReward($CharacterSheet_Imp)&gt;&gt;

[[Go back-&gt;Village]]</tw-passagedata><tw-passagedata pid="225" name="Imp Fight Won - NoDeal" tags="" position="600,2850" size="100,100">&lt;&lt;print setup.getFightReward($CharacterSheet_Imp)&gt;&gt;

[[Go back-&gt;Village]]</tw-passagedata><tw-passagedata pid="226" name="Imp Fight Won - Deal" tags="" position="725,2850" size="100,100">\&lt;&lt;if setup.sizeCharactercomparison($CharacterSheet_Player, $CharacterSheet_Imp) &gt;= $Comparators.REACHES_WAIST&gt;&gt;
Even with your body towering over the &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Imp, &quot;height&quot;))&gt;&gt; Imp, his need for your cock does not stop him. 
He climbs up your legs until he reaches your &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Player, &quot;cock&quot;))&gt;&gt; cock.
\&lt;&lt;else&gt;&gt;
The imp crawls to you and unbuttons your pants.
\&lt;&lt;/if&gt;&gt;

\&lt;&lt;if setup.sizeCharactercomparison($CharacterSheet_Player, $CharacterSheet_Imp) &gt;= $Comparators.REACHES_WAIST&gt;&gt;
“Hmmmmm... It’s bigger than any cock I’ve seen.” 
The imp visibly shakes with arousal. He crawls up the shaft and drools on your large gland. 
&quot;It&#39;s fucking massive...&quot; The small demon goes wild on your monstrous dick.
\&lt;&lt;else&gt;&gt;
&quot;I promise you won&#39;t regret this.&quot;
\&lt;&lt;/if&gt;&gt;

With each suck, you feel your cock getting bigger and longer. An unholy vitality fills you both as you force the imp deep on your growing dick. He coils his demonic tongue around your cock. It doesn&#39;t take long for you to cum down his throat.
He pulls back, his wounds fully healed.

&quot;Hope to see you again, big guy.&quot;

\&lt;&lt;run setup.applyCorruption($CharacterSheet_Player, 1)&gt;&gt;
Your body grew by &lt;&lt;print setup.getLength(setup.applyGrowth($CharacterSheet_Player, &quot;height&quot;, 5))&gt;&gt;.
Your cock grew by &lt;&lt;print setup.getLength(setup.applyGrowth($CharacterSheet_Player, &quot;cock&quot;, 1))&gt;&gt;.
Your soul has been corrupted slightly (+1)

&lt;&lt;print setup.getFightReward($CharacterSheet_Imp)&gt;&gt;

[[Go Back to the Village-&gt;Village]]</tw-passagedata><tw-passagedata pid="227" name="Encounter_Intro_Lakkos" tags="" position="850,2850" size="100,100">\&lt;&lt;set $CharacterSheet_Lakkos.quest.met = true&gt;&gt;
Your breath suddenly grows heavy. A wave of arousal washes over you and you&#39;re not sure why... 

Something is wrong, the air feels thick with powerful energy.
Every breath you take makes your heart beat faster. 

\&lt;&lt;if setup.sizeNormalPersoncomparison($CharacterSheet_Lakkos) &gt;= $Comparators.REACHES_WAIST&gt;&gt;
The sky is covered by his gigantic form. The ground shakes as his &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Lakkos, &quot;height&quot;))&gt;&gt; body lands in front of you.
You cannot stop yourself from eyeing his mountainous body.
\&lt;&lt;else&gt;&gt;
You suddenly see it, a winged &lt;&lt;print setup.getLength($CharacterSheet_Lakkos.info.height)&gt;&gt; figure flying down towards you. You brace yourself and get ready for the worst...
You soon realize that the monster would not be pouncing for an attack; he lands gracefully in front of you instead.
\&lt;&lt;/if&gt;&gt;

His red scale-covered limbs contrast with his human-looking upper body and face.
An aura of evil pulsates from his form that continuously increases your arousal. You are getting lost in his slitted red eyes. 

He seems almost angelic... Yet his expression suggests otherwise.
His grin grows predatory as his forked tail flicks behind muscular butt. 
 
\&lt;&lt;if $CharacterSheet_Lakkos.quest.beatenOnce&gt;&gt;
“Hmmmm... You again...”
\&lt;&lt;else&gt;&gt;
“I never expected to see adventurers travelling on their own around these parts.” 
\&lt;&lt;/if&gt;&gt;

His cock lays there for you to gaze at. It is a whole &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Lakkos, &quot;cock&quot;))&gt;&gt; long. His handsome smile curls into a devilish grin upon seeing you stare.
 
\&lt;&lt;if setup.hasAbility($CharacterSheet_Player, &quot;Ability_DemonicCorruption&quot;, 3)&gt;&gt;
“You look magnificent... Much better than that old body of yours.”

He eyes your scaled body in utter awe.

&quot;Still, not even a Lord of Lust can tame me. If you want to be on top, you&#39;ll have to defeat me.&quot;
\&lt;&lt;elseif setup.hasAbility($CharacterSheet_Player, &quot;Ability_DemonicCorruption&quot;)&gt;&gt;
&quot;How about a friendly sparring session between demons? I can grant you power beyond your wildest dreams if you win.&quot;
\&lt;&lt;else&gt;&gt;
&quot;I&#39;m glad you&#39;re here, you have something that I need... Something I&#39;ve been thirsting for, ever since I was banished to this hell hole.&quot;
\&lt;&lt;/if&gt;&gt;
 
He raises a clawed hand and beckoned you to come closer. 

&lt;&lt;print setup.getFightStartPassages($CharacterSheet_Lakkos)&gt;&gt;</tw-passagedata><tw-passagedata pid="228" name="Encounter_Start_Lakkos" tags="" position="975,2850" size="100,100">His tongue slides across his sharp teeth and his cock grows hard as he readies himself for combat.
 
&quot;I&#39;m Lakkos, by the way. You&#39;d better give me your best.&quot;</tw-passagedata><tw-passagedata pid="229" name="Encounter_Win_Lakkos" tags="" position="1100,2850" size="100,100">&quot;Hmmmmm... You&#39;re pretty good...&quot;
 
Lakkos stares at you; he feels that arousal threatens to take over your thoughts, but you fight on. He slowly realizes that he has lost this fight.
 
&quot;If only I had my powers back... Even gods used to fear me from where I&#39;m from...&quot; 
 
He falls to one knee, feeling exhausted from your battle. 
 
&quot;But power seems to work differently here, makes sense that she banished me here, I guess...&quot; He laughed softly as he gazes at your hardened body.

His grin does not leave his face as he stares hungrily at your cock.
\&lt;&lt;set $CharacterSheet_Lakkos.quest.beatenOnce = true&gt;&gt;

\&lt;&lt;if setup.getDemonicTFPassage($CharacterSheet_Player) == undefined&gt;&gt;
[[Fuck him-&gt;Encounter_Win_Lakkos_Sex_FullDemon]]
\&lt;&lt;else&gt;&gt;
[[Fuck him-&gt;Encounter_Win_Lakkos_Sex]]
\&lt;&lt;/if&gt;&gt;
[[Spare him and leave-&gt;Encounter_Win_Lakkos_Spare]]</tw-passagedata><tw-passagedata pid="230" name="Encounter_Win_Lakkos_Sex" tags="" position="1225,2850" size="100,100">&quot;Ahhhh... HMMMM... I can feel your lust... It&#39;s... It&#39;s more powerful than I thought mortals could exude.&quot;

His demonic tongue tastes your oozing cock. Your battle brought you to the edge of orgasm, you could blow at any moment.

&quot;With just a taste of your Essence... I could turn you into something more... Demons can feel pleasure beyond anything you can imagine!&quot;

\&lt;&lt;if $Essence &gt;= setup.getDemonicTFCost($CharacterSheet_Player)&gt;&gt;
    &lt;&lt;print &quot;[[Grant him Power (&quot;+setup.getDemonicTFCost($CharacterSheet_Player)+&quot; Essence)-&gt;&quot;+setup.getDemonicTFPassage($CharacterSheet_Player)+&quot;][$Essence -= &quot;+setup.getDemonicTFCost($CharacterSheet_Player)+&quot;]]&quot;&gt;&gt;
\&lt;&lt;else&gt;&gt;
    &lt;&lt;print &quot;&lt;span class = &#39;inactive&#39;&gt;[[Grant him Power (&quot;+setup.getDemonicTFCost($CharacterSheet_Player)+&quot; Essence)-&gt;&quot;+setup.getDemonicTFPassage($CharacterSheet_Player)+&quot;]]&lt;/span&gt;&quot;&gt;&gt;
\&lt;&lt;/if&gt;&gt;
[[Cum-&gt;Encounter_Win_Lakkos_NoDeal]]</tw-passagedata><tw-passagedata pid="231" name="Encounter_Win_Lakkos_Sex_FullDemon" tags="" position="100,2975" size="100,100">It&#39;s been too long... Your need drives you wild once more...

You jump at Lakkos and bring him down on all fours. You both need this more than anything, only you could sate each other&#39;s all-consuming lust. 

[[Fuck him-&gt;Encounter_Win_Lakkos_Sex_FullDemon_2]]</tw-passagedata><tw-passagedata pid="232" name="Encounter_Win_Lakkos_Sex_FullDemon_2" tags="" position="225,2975" size="100,100">You fucked in every way possible. Screams of pleasure filled the Barrens as you kept going for weeks. 
His gigantic form was a lot to handle, but you wished you and him were even more massive. Power and lust drove your every thought. 

Weeks turned into months. You fucked and fucked until you finally adjusted to your demonic body. 
Lakkos loved every second of it, maybe being banished here wasn&#39;t so bad for him after all. 

You finally reached the point where you felt a distant memory slowly emerge from your mind. An old duty that was never completed. 
You left soon after, your goals and instincts had changed and yet...

You continued your quest.

&lt;&lt;run setup.addDays($DaysPerCycle * 10)&gt;&gt;

&lt;&lt;print setup.getFightReward($CharacterSheet_Lakkos)&gt;&gt;

[[Continue-&gt;Village]]</tw-passagedata><tw-passagedata pid="233" name="Encounter_Win_Lakkos_NoDeal" tags="" position="350,2975" size="100,100">Lakkos hungrily devours every drop of your seed. You notice his wounds quickly heal as he releases your cock.

&quot;Hmmm, I do hope to see you again... Just remember how powerful you could become if you take my offer next time.&quot;

&lt;&lt;print setup.getFightReward($CharacterSheet_Lakkos)&gt;&gt;

[[Continue-&gt;Village]]</tw-passagedata><tw-passagedata pid="234" name="Encounter_Win_Lakkos_Spare" tags="" position="475,2975" size="100,100">As you feel Essence gather inside you, the demon&#39;s proposal rings hollow.

You leave him to his defeat.

&quot;Man... Just what&#39;s with the people here? Nothing makes any sense...&quot; You hear from behind you.

&lt;&lt;print setup.getFightReward($CharacterSheet_Lakkos)&gt;&gt;

[[Continue-&gt;Village]]</tw-passagedata><tw-passagedata pid="235" name="Encounter_Loss_Lakkos_0" tags="" position="600,2975" size="100,100">The overwhelming arousal of the demon is too much to bear. You fall down on your knees and jerk off intensely.
The pleasure is maddening, orgasm quickly build as you feel cum rush up your shaft. 
You don&#39;t notice Lakkos, who is now inches from your body. He grins in victory as red demonic energy flows from his hands and into your cock.
 
Your dick eagerly absorbs the demonic energy. 

A deep scream of pleasure burst from your lips.

[[I need more...-&gt;Encounter_Loss_Lakkos_1]]</tw-passagedata><tw-passagedata pid="236" name="Encounter_Loss_Lakkos_1" tags="" position="725,2975" size="100,100">You reach up to the incubus and kiss him deeply. He pushes it further, his own tongue reaching down your throat as if to taste something inside you.
You feel your orgasm being blocked by his magic. It builds a hunger for release that can&#39;t be sated. 
 
&quot;I... I need to cum...&quot;
 
You whimper to the demon who grins maniacally in response.
 
&quot;Oh, you&#39;re not ready yet.&quot;
 
He brings both hands to your shaft and let his demonic magic flow inside your flesh.

[[More...-&gt;Encounter_Loss_Lakkos_2]]</tw-passagedata><tw-passagedata pid="237" name="Encounter_Loss_Lakkos_2" tags="" position="850,2975" size="100,100">You feel your cock grow bigger, so much bigger. It grows to &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Player, &quot;cock&quot;) + 31)&gt;&gt;. 

Lakkos kisses you again, his taste drives you wild, you can&#39;t get enough. You feel your balls get denser and fuller. 
The incubus then pulls back and brings his cock to your face. It&#39;s massive, but you still try to suck it. 

He grabs the back of your head and pulls you to take it in. You gorge on the demon&#39;s precum; you feel it enhance your growing cock. 
It explodes with growth. In under a minute it reaches &lt;&lt;print setup.getLength(Math.max(setup.getStatValue($CharacterSheet_Player, &quot;height&quot;) -10, setup.getStatValue($CharacterSheet_Player, &quot;cock&quot;) + 50))&gt;&gt;. 

You try to grasp your massive tool, every touch brings you to the edge. Yet Lakkos&#39;s magic stops your upcoming orgasm.
 
&quot;Hehehehe... Now... Will you give me your soul for some release?&quot;
 
[[YES! TAKE IT! GRAAAAAAAAHHHHHHHH-&gt;Encounter_Loss_Lakkos_3]]</tw-passagedata><tw-passagedata pid="238" name="Encounter_Loss_Lakkos_3" tags="" position="975,2975" size="100,100">The incubus licks his lips in anticipation. Suddenly you feel the demonic magic opening the floodgates. 
The &lt;&lt;print setup.getLength(Math.max(setup.getStatValue($CharacterSheet_Lakkos, &quot;height&quot;) +10, setup.getStatValue($CharacterSheet_Lakkos, &quot;cock&quot;) +50))&gt;&gt; monster trembles at the upcoming flood of cum rushing through it. You scream under the sheer intensity of your upcoming orgasm. 
You need it more than anything. You unleash a roar that could be heard for miles. 

Cum shoots everywhere from your gigantic cock, it keeps going for hours... 
As the demonic magic that tainted your cum exits your body, something seemed to be forming between his fingers.
 
A white light glows in his palm. 
 
&quot;This is gonna be a potent one, I&#39;m sure...&quot; He mutters to himself.
 
Your vision begins to blur a little. Lakkos opens his mouth and eats the ball of light in one bite.

You feel yourself change as your vitality leaves your body and enters him. Your body slowly shrinks while the demon looks down on you with a devilish smile.
 
&quot;Give me everything...&quot; He whispers between moans.
 
You gaze upon his perfect body growing even bigger and more powerful. 

\&lt;&lt;run setup.applyGrowth($CharacterSheet_Lakkos, &quot;height&quot;, 10)&gt;&gt;
\&lt;&lt;run setup.applyGrowth($CharacterSheet_Lakkos, &quot;cock&quot;, 12)&gt;&gt;
\&lt;&lt;run setup.applyGrowth($CharacterSheet_Lakkos, &quot;balls&quot;, 4)&gt;&gt;
His body grows to &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Lakkos, &quot;height&quot;))&gt;&gt;.
His cock grows to &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Lakkos, &quot;cock&quot;))&gt;&gt;.
His balls grow to &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Lakkos, &quot;balls&quot;))&gt;&gt;.
 
Your vision slowly blurs, yet you stare at Lakkos with utter admiration for his new form...  

&lt;&lt;print setup.getFightReward(undefined)&gt;&gt;

[[Continue-&gt;Death]]</tw-passagedata><tw-passagedata pid="239" name="Encounter_Intro_Harbinger" tags="" position="1100,2975" size="100,100">You found your bae!

[[Return-&gt;Village]]</tw-passagedata><tw-passagedata pid="240" name="Encounter_Intro_Lost_Naga" tags="" position="1225,2975" size="100,100">\&lt;&lt;set $CharacterSheet_Lost_Naga.quest.met = true&gt;&gt;
After an hour of searching, you find yourself in what appears to be a swamp, or at least used to be one. 
Much of it has fallen to the spreading corruption. What once had been natural plants have been replaced with vulgar, multicoloured mutants. 
You don&#39;t get much time to inspect them as a sudden, scraping rustle draws your attention to the canopy above. 

Wrapped around the massive tree trunk is a serpentine monstrosity. His smooth hide shines with a purple so bright it&#39;s nearly pink. 
Yet there is an oily sheen to it, an iridescent shimmer in the light. It shifts with each idle flex and twitch of the coils. 
The skin creaks and groans as the muscles beneath dance and contort it with their size. 
The cobra hood of the gooey naga flares as he spots you. A low hissed &quot;Prrreeeyyy.&quot; escapes his muzzle as he bares his fangs.

[[Continue-&gt;Encounter_Intro_Lost_Naga_2]]</tw-passagedata><tw-passagedata pid="241" name="Encounter_Intro_Lost_Naga_2" tags="" position="100,3100" size="100,100">&lt;&lt;print setup.displayEncounterImage($CharacterSheet_Lost_Naga.info.picture)&gt;&gt;

You get to watch the herculean musculature of the beast tense proper as his coils turn the massive tree into little more than splinters between them.
The mud muffles the thud as the beast falls to the ground, but you could still feel the small quake in the wake of its tonnage. 

&lt;&lt;print setup.getFightStartPassages($CharacterSheet_Lost_Naga)&gt;&gt;</tw-passagedata><tw-passagedata pid="242" name="Encounter_Start_Lost_Naga" tags="" position="225,3100" size="100,100">Slowly the serpent rises to his full height, presenting a colossus of muscle and virility. His shaft swollen and engorged to enormous size, while his lips drooled with hunger.</tw-passagedata><tw-passagedata pid="243" name="Encounter_Win_Lost_Naga" tags="" position="350,3100" size="100,100">After a terrible battle, the naga finally collapses into a heap. Pink goo runs from the wounds he has sustained. 
But even now, you could see that they are closing already. There is little doubt that in just a few minutes, the beast would be in perfect shape again.
Though right now, he is barely even conscious. That does not stop him from sporting a full mast erection. 

\&lt;&lt;if setup.removeCurseOfTheNaga()&gt;&gt;
You place your hand on the wounded naga&#39;s head. He immediately shivers as thick pink goo rushes along your arm. 
$CharacterSheet_Player.symbiote.name is pleased, he can feel himself becoming complete once again.
The goo slowly enters your muscles. Your biceps, curls, abs and glutes suddenly pulsates. You feel the incoming growth spread down and up your body.

&quot;Hmmmmfff... Yes...&quot;

Growth rushes through you with every heartbeat. You pull your head back and moan as a burst of power suddenly hits you like a truck. 
Your body explodes with more strength than the naga has taken from you.
&lt;&lt;set $growth = setup.applyGrowth($CharacterSheet_Player, &quot;muscles&quot;, Math.ceil(setup.getStatValue($CharacterSheet_Player, &quot;muscles&quot;) * 0.1))&gt;&gt;
Your muscles become &lt;&lt;print setup.getMusclesDescriptor($CharacterSheet_Player)&gt;&gt;(+$growth).
Your body grows &lt;&lt;print setup.getLength(setup.applyGrowth($CharacterSheet_Player, &quot;height&quot;, Math.ceil(setup.getStatValue($CharacterSheet_Player, &quot;height&quot;) * 0.1)))&gt;&gt; taller.

&quot;Fuuuuuuck...&quot;

You feel more and more pink goo rush down your arm. It crawls along your chest to finally coil around your cock. 
You immediately see it throb and expand. Deep lustful moans escape you as your dick crawls along your legs.

\&lt;&lt;run setup.applyGrowth($CharacterSheet_Player, &quot;cock&quot;, Math.ceil(setup.getStatValue($CharacterSheet_Player, &quot;cock&quot;) * 0.1))&gt;&gt;
You grasp the base of your now &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Player, &quot;cock&quot;))&gt;&gt; cock and jerk it intensely.
\&lt;&lt;/if&gt;&gt;
You could have your way with him now. He would be unable to stop you.

&lt;&lt;print setup.getFightReward($CharacterSheet_Lost_Naga)&gt;&gt;

[[Fuck the naga-&gt;Encounter_Win_Lost_Naga_Fuck_1]]
[[Leave-&gt;Village]]</tw-passagedata><tw-passagedata pid="244" name="Encounter_Win_Lost_Naga_Fuck_1" tags="" position="475,3100" size="100,100">You decide to take advantage of the beast while you can. Your hands grip his massive cock, and you can almost hear your digits squeak over the gooey skin. 
His member is rockhard, firm enough to serve as a bludgeon, no doubt. 
You give it a tentative stroke, trace along the swollen veins along its length before you start to grin devilishly. You&#39;ve heard that snakes are supposedly very stretchy.
You decide to put it to the test. You jerk the serpent&#39;s cock down towards your own member. 

Your tips touch, and with a grin, you press onward. The naga gasps out weakly, his muscles arms flex in a futile flail. 
Really his head doesn&#39;t even manage to raise high enough to see you over his own pectoral mountains.


\&lt;&lt;if setup.sizeCharactercomparison($CharacterSheet_Player, $CharacterSheet_Lost_Naga) &gt;= $Comparators.EQUAL&gt;&gt;
[[Press the naga&#39;s cock on your slit-&gt;Encounter_Win_Lost_Naga_Fuck_PlayerBigger_1]]
&lt;span class = &#39;inactive&#39;&gt;[[Fuck the naga&#39;s cock slit-&gt;Encounter_Win_Lost_Naga_Fuck_NagaBigger_1]]&lt;/span&gt;
\&lt;&lt;else&gt;&gt;
&lt;span class = &#39;inactive&#39;&gt;[[Press the naga&#39;s cock on your slit-&gt;Encounter_Win_Lost_Naga_Fuck_PlayerBigger_1]]&lt;/span&gt;
[[Fuck the naga&#39;s cock slit-&gt;Encounter_Win_Lost_Naga_Fuck_NagaBigger_1]]
&lt;&lt;/if&gt;&gt;
[[Leave-&gt;Village]]

\&lt;&lt;if setup.getStatValue($CharacterSheet_Player, &quot;corruption&quot;) &gt;= 75&gt;&gt;
[[Absorb his very being (needs 75 or more corruption)-&gt;Encounter_Win_Lost_Naga_Fuck_Absorb_1]]
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="245" name="Encounter_Win_Lost_Naga_Fuck_Absorb_1" tags="" position="600,3100" size="100,100">You start to grin, lust wells up within you again. Why not take back what is yours? Fill the empty yawning in your balls with the snake? 
The naga growls softly before you, his hands rubbing his enormous and engorged balls. 

You lunge, grab his tail tip with your hand. Before the reptile knows what is happening, you already stuff it into your cock. 
It&#39;s barely bigger than his member, you can easily take it. With both hands on the tail, you pull, pull and push to feed it into your member. 
You flex your taint, flex your cock, make it swallow and gulp. Inches first, soon entire feet. The naga goes wide-eyed when he realizes what&#39;s happening. 
Panicked hisses and snarls leave his lips as he twists and contorts, his hands dig into the muddy ground. 
They grasp for anything to find a hold on, anything to use as anchor. But the few roots he finds crack and break in his hands. 
You laugh, madly, hungrily. 

[[Force him in-&gt;Encounter_Win_Lost_Naga_Fuck_Absorb_2]]</tw-passagedata><tw-passagedata pid="246" name="Encounter_Win_Lost_Naga_Fuck_Absorb_2" tags="" position="725,3100" size="100,100">Feet upon feet of coils bulge out your shaft and begin to fill your balls. 
You could feel your symbiote roar out in delight as he begins to tear at the beaten beast the moment it enters you. 
The naga screams and begs, but you would not have it. Before long, his entire tail is gone. His fat hips are next. His waist soon follows. 
Then you grab his shoulders and squish him right in. His goo body is contorting, conforming to your shaft. 

Your meaty hand pushes into his face, pushes it down into your member, which greedily swallows him up entirely. 

Your balls squirm and jostle with the trashing naga, but soon its shape begins to soften, to melt as your symbiote overtakes it. 
You absorb the monster, turn it into more of you. You could hear your skin creak, your bones ache as your body swells larger. 
\&lt;&lt;set $growth = setup.applyGrowth($CharacterSheet_Player, &quot;muscles&quot;, 4)&gt;&gt;

Your body grows &lt;&lt;print setup.getLength(setup.applyGrowth($CharacterSheet_Player, &quot;height&quot;, 7))&gt;&gt; taller.
Your muscles grow to become &lt;&lt;print setup.getMusclesDescriptor($CharacterSheet_Player)&gt;&gt;(+$growth).

Your hands stroke your swelling member, veins throbbing violently as it engorges ever bigger. 
It grows &lt;&lt;print setup.getLength(setup.applyGrowth($CharacterSheet_Player, &quot;cock&quot;, 5))&gt;&gt; longer.
\&lt;&lt;run setup.getLength(setup.applyGrowth($CharacterSheet_Player, &quot;balls&quot;, 2))&gt;&gt;

It didn&#39;t take long before you cum with a bellow. 
A deluge of your cum splatters into the morass before you, $CharacterSheet_Player.symbiote.color, sporting only the slightest hint of the iridescent pink of the naga.

You briefly look upon the mess, give a snorting chuckle, move on. 

\&lt;&lt;run setup.applyCorruption($CharacterSheet_Player, 5)&gt;&gt;
You gained 5 corruption.

[[Leave-&gt;Village]]</tw-passagedata><tw-passagedata pid="247" name="Encounter_Win_Lost_Naga_Fuck_PlayerBigger_1" tags="" position="850,3100" size="100,100">He doesn&#39;t get to see how your cock swallows his instead. You are probably just as surprised as he is. 
His member squishes and fits itself into your pipe with remarkable ease. The sensation leaves you huffing, panting, feeling the thick gooey warmth in your shaft.
Slowly you start to push forward, claiming inches of the naga&#39;s cock with your own with each thrust. 
The naga&#39;s gooey nature made this way too easy, he just slides down your member with little resistance. 

With just a few thrusts, you take him to the very hilt, claim his entire length, and with a flex of your mighty taint, you pull on his shaft. 

You laugh as you loom over the fallen serpent and continue to thrust onto him. 

The tickling sensation continues to run down your pipe, down into your loins. It fills your prostate with the most pleasant feelings. 
Slowly the pressure builds, higher and higher, growing more potent with each hammer strike of your hips. 

Your body grows &lt;&lt;print setup.getLength(setup.applyGrowth($CharacterSheet_Player, &quot;height&quot;, 4))&gt;&gt; bigger.
Your cock grows &lt;&lt;print setup.getLength(setup.applyGrowth($CharacterSheet_Player, &quot;cock&quot;, 3))&gt;&gt; longer.
\&lt;&lt;run setup.getLength(setup.applyGrowth($CharacterSheet_Player, &quot;balls&quot;, 1))&gt;&gt;

[[Cum-&gt;Encounter_Win_Lost_Naga_Fuck_PlayerBigger_2]]</tw-passagedata><tw-passagedata pid="248" name="Encounter_Win_Lost_Naga_Fuck_PlayerBigger_2" tags="" position="975,3100" size="100,100">You cry out as you cum. Your impossibly large load unleashes onto the serpent. 

So much of your cum flows past his shaft, it splatters onto his loins, and yet you are sure there should have been more. 
His balls swell, engorge and expand. They grow $CharacterSheet_Player.symbiote.color with all the seed you pump into him as his member drinks down your load like a greedy whore.

You keep pumping out more and more seed, so much more than a single climax would typically do. Until your fat orbs clench and hurt, unable to spill another drop. 

You let out a deep guttural growl, feeling surprising exhaustion after the act. Your gaze drifts over the stirring serpent. 
He&#39;d recover momentarily, no doubt. Then your eyes move past the absurdly swollen boulders he had for balls. 

There is no way he could chase you with those. He begins to rest on his tail tip in exhaustion.

[[Leave-&gt;Village]]</tw-passagedata><tw-passagedata pid="249" name="Encounter_Win_Lost_Naga_Fuck_NagaBigger_1" tags="" position="1100,3100" size="100,100">He doesn&#39;t get to see how his cock swallows yours. The slit spread around your member. It is forced to accept your intruding shaft. 
The entrance is so tight, so wet, like fucking an ass and yet... 
You piston your hips forward, pushing in inch after inch of your length into the serpentine rod, grunting and snarling like a feral beast while the naga below you gasps weakly time and time again. 

You laugh as you ram your cock in deeper. 

Despite the size difference, it is still so tight, almost as if it contracts around your shaft. Sucking on it. Gulping. 
Soon you two were grunting in tandem with each other, your hands holding his massive balls, pressing them up against his shaft as if you were handling a pair of gigantic glutes.
You grope and knead them with your eyes closed as you feel the pressure in your loins build. 

Just a few more...

[[Cum-&gt;Encounter_Win_Lost_Naga_Fuck_NagaBigger_2]]</tw-passagedata><tw-passagedata pid="250" name="Encounter_Win_Lost_Naga_Fuck_NagaBigger_2" tags="" position="1225,3100" size="100,100">You cry out as you cum. Your balls clench, pulled tight to your groin as you unload into the naga. You could feel his cock suck it up eagerly. 
It drinks your seed with vigour. Then your eyes go wide as his cock lurches upwards and swallows your member all the way to the base. 
His gooey cum rockets up around your member and splatters over your loins, but much more importantly, you could feel how it floods down your shaft. 
It stretches it and violates your prostate as it floods into your balls. Your orbs swell with size; they engorge as they take the naga&#39;s orgasm in return. 

Your body grows &lt;&lt;print setup.getLength(setup.applyGrowth($CharacterSheet_Player, &quot;height&quot;, 4))&gt;&gt; taller.
Your cock grows &lt;&lt;print setup.getLength(setup.applyGrowth($CharacterSheet_Player, &quot;cock&quot;, 3))&gt;&gt; longer.
\&lt;&lt;run setup.getLength(setup.applyGrowth($CharacterSheet_Player, &quot;balls&quot;, 1))&gt;&gt;

The pressure in your loins returned with a vengeance. 
But only for a few seconds. 
You nearly collapse to your knees as you climax again, your swollen sack shrinking as all the gooey cum flood back into the naga&#39;s member, pumped out by your shaft in exhausting fashion.

You&#39;d never thought that would actually happen in this place, but when you finally pull out of the naga&#39;s cock, you actually feel a little exhausted. Drained even.
Almost as if something more than just your seed has been taken. 

[[Leave-&gt;Village]]</tw-passagedata><tw-passagedata pid="251" name="Encounter_Loss_Lost_Naga_1" tags="" position="100,3225" size="100,100">You buckle as your strength leaves you. The vicious blows and devastating lashes of the serpent are too powerful to resist. 
Immediately the beast seizes the opening and its massive coils wrap around your body and pull tight. Incredible musculature grinds against your body as the naga holds you tight.
 His balls, his cock push into your face as he props himself up before you, his thick gooey precum drips into your hair.

&quot;Preeyyyy... feeeeeed.&quot; He growls above you as he then bends down. 

His head comes closer, his breath washes over your face before his maw opens wide, wider than it has any right to. 
The corners of his mouth turn into gooey strands as he gives you a view down the abyss of his gullet. His maw then engulfs your head, his whole being flows around you. 
His lips run over your broad shoulders like liquid, they overwhelm your powerful chest with near mocking ease. 
Your waist follows, and he only briefly pauses on your groin to give your member a few brief licks.

[[Continue-&gt;Encounter_Loss_Lost_Naga_2]]</tw-passagedata><tw-passagedata pid="252" name="Encounter_Loss_Lost_Naga_2" tags="" position="225,3225" size="100,100">You can feel gravity shift as the serpent rears up and lets you slide down his gooey, stretchy gullet. 
You struggle with all the might you could still muster, you push and punch, your legs kick, and yet there is nothing solid to hit, not even a proper sign of resistance.
It is as if you are caught in a rubber tube.

&quot;Yesss, sttrrrruuggglle.&quot; 

But your disgrace is far from over. Whatever kind of stomach this was, it does not work like a regular one. There are no acids to take you apart, there is only goo.
In the pitch darkness of the gut, it begins to flood into your ass, cock and mouth. The thick quasi liquid forces its way into your body, it stretches and violates it. 
\&lt;&lt;set $curseStatus = setup.applyCurseOfTheNaga()&gt;&gt;
\&lt;&lt;if $curseStatus == &quot;Cursed&quot;&gt;&gt;

Still, it goes even deeper as you could feel the strangest sensation. The goo of the naga attacks your symbiote. 
Already beaten, and with no chance for recovery, it cannot put up a fight as the naga subverts and assimilates it. You couldn&#39;t scream, you couldn&#39;t even gasp, or pant. 
Even your flailing becomes increasingly weak as the naga absorbs part of your other half.
\&lt;&lt;/if&gt;&gt;

The last thing you hear is the thundering groaning of swelling snake bulk and the bellowing roars of orgasm. 

&quot;YESSSS SSSOOOO MUCH POWER!&quot; 

The naga roars as you fade away to become part of a superior predator.

[[Let Go-&gt;Encounter_Loss_Lost_Naga_3]]</tw-passagedata><tw-passagedata pid="253" name="Encounter_Loss_Lost_Naga_3" tags="" position="350,3225" size="100,100">\&lt;&lt;if $curseStatus == &quot;Cursed&quot;&gt;&gt;
The Lost Naga has taken some of your size, only by defeating him can you get your strength back...

Your muscles are reduced to &lt;&lt;print setup.getMusclesDescriptor($CharacterSheet_Player)&gt;&gt; (-&lt;&lt;print $CharacterSheet_Player.quest.curseOfTheNagaStatDrain.muscles&gt;&gt;).
Your body is shortened by &lt;&lt;print setup.getLength($CharacterSheet_Player.quest.curseOfTheNagaStatDrain.height)&gt;&gt;.
Your cock&#39;s length is reduced by &lt;&lt;print setup.getLength($CharacterSheet_Player.quest.curseOfTheNagaStatDrain.cock)&gt;&gt;.
\&lt;&lt;elseif $curseStatus == &quot;AlreadyCursed&quot;&gt;&gt;
The Lost Naga has already stolen some of your size, only by defeating him can you get your strength back...
\&lt;&lt;else&gt;&gt;
The Lost Naga has grown, but your form is too small to lose any more size...
\&lt;&lt;/if&gt;&gt;

[[Continue-&gt;Death]]</tw-passagedata><tw-passagedata pid="254" name="Encounter_Intro_Swarm" tags="" position="475,3225" size="100,100">\&lt;&lt;set $CharacterSheet_Swarm.quest.met = true&gt;&gt;
\&lt;&lt;include Swarm_Flavours&gt;&gt;
\&lt;&lt;run console.log($CharacterSheet_Swarm.info.anatomy)&gt;&gt;
\&lt;&lt;run setup.setRandomRace($CharacterSheet_Swarm.info.anatomy)&gt;&gt; 
\&lt;&lt;run $CharacterSheet_Swarm.info.name = &quot;The lost &quot; + setup.getRace($CharacterSheet_Swarm.info.anatomy, true)&gt;&gt;
\&lt;&lt;run $Encounter_Target=$CharacterSheet_Swarm&gt;&gt;

While searching through the wastelands, your ears perk up to a fiendish and gutteral howl. 

It was fierce; powerful enough to rattle your ribcage.

The overwhelming presence of this creature could be felt across a massive distance - the aura of a Lost that could only have been birthed from the corrupted seed of your children. 

The corrupted &lt;&lt;print setup.getRace($CharacterSheet_Swarm.info.anatomy, true)&gt;&gt; &lt;&lt;print setup.processFlavours(
    $CharacterSheet_Lost_Entity,
    &quot;roars in ecstasy as it catches its master&#39;s scent. Soon, a hulking feral monstrosity bounds into view.&quot; + 
    &quot; Black oil drips off of its bulging body, the corrupt colour shimmering across its @[all| heads| a~an]. A @[1| tongues| noverb] hungrily rolls from his mouth as his @[all| cocks| one=hardens~more=hardens] with excitement.\n&quot;
)&gt;&gt;

\&lt;&lt;if setup.sizeCharactercomparison($CharacterSheet_Swarm, $CharacterSheet_Player) &gt; $Comparators.BIGGER&gt;&gt;
\&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Swarm, &quot;swarmEncounter&quot;, 1, $CharacterSheet_Player)&gt;&gt;
\&lt;&lt;else&gt;&gt;
\&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;swarmEncounter&quot;, 1, $CharacterSheet_Swarm)&gt;&gt;
\&lt;&lt;/if&gt;&gt;


[[Go back-&gt;Village]]</tw-passagedata><tw-passagedata pid="255" name="Swarm_Flavours" tags="" position="600,3225" size="100,100">\&lt;&lt;nobr&gt;&gt;
&lt;&lt;run $CharacterSheet_Swarm.addHeightFlavourText(
    &quot;swarmEncounter&quot;,
    1,
    &quot;Skidding to a halt in front of you, the towering beast presses its chest down to the floor in a show of respect. Those glistening black eyes would almost pass as cute if &quot; +
    &quot;its slavering maw hadn&#39;t been the size of your entire body and then some. Your eyes trail downwards as you feel a rush of warm liquid slam against your shins; &quot; +
    &quot;you can&#39;t help but smile realising how &#39;excited&#39; he was to see you.\n\nYou scratch his head in approval. Now, what to do?&quot;
)&gt;&gt;

&lt;&lt;run $CharacterSheet_Swarm.addHeightFlavourText(
    &quot;swarmEncounter&quot;,
    2,
    &quot;Skidding to a halt in front of you, the gargantuan beast presses its chest down to the floor in a show of respect. You admire the immensity of your beast, his monstrous maw &quot; +
    &quot;containing teeth the size of your body. His ever-growing body consumes most of your field of view, pulsating with deliciously bulging muscle. &quot; +
    &quot;A torrent of corrupted seed explodes out from behind him, a tidal wave of masculinity! Before you are swept away, &quot; +
    &quot;your child&#39;s tongue slips from its mouth, wraps around you and holds you still.\n\nYou smile in approval. Now, what to do?&quot;
)&gt;&gt;

&lt;&lt;run $CharacterSheet_Swarm.addHeightFlavourText(
    &quot;swarmEncounter&quot;,
    3,
    &quot;Skidding to a halt in front of you, the gargantuan beast presses its chest down to the floor in a show of respect. He is a titan compared to you, the blades of his shoulders rising &quot; +
    &quot;high enough into the sky to appear as bulging, growing mountains. His giant mouth alone could be mistaken for the interior of a living cave network. &quot; +
    &quot;A flood of corrupted seed erupts from somewhere behind him; a virile sea being forced from his @[all|cocks|noverb]! Before you are swept away, &quot; +
    &quot;your child&#39;s tongue slips from its mouth and wraps around you before lifting you above the voluminous alabaster sea.\n\nYou smile in approval. Now, what to do?&quot;
)&gt;&gt;

&lt;&lt;run $CharacterSheet_Swarm.addHeightFlavourText(
    &quot;swarmEncounter&quot;,
    4,
    &quot;Skidding to a halt in front of you, the gargantuan beast presses its chest down to the floor in a show of respect. The sight is unreal. A beast larger than mountains - so tall &quot; +
    &quot;and wide that the entire land around you is caught in its magnificent shadow, is prostrating himself to you. The amount of muscle packed onto its frame billows outwards to an unbelievable &quot; +
    &quot;degree; every chord audibly vibrating and creaking like the sound of bending metal. You are sure that his mouth, alone, could create a wound so large on the planet that even the cycles would do little to repair the damage. &quot;+
    &quot; The ground Shakes. The creature&#39;s hot and torrential breath quickens before the sound of a volcano erupting splinters through the ambient noises of growth. &quot; +
    &quot;A devastating ocean of virile seed rockets across the land, washing away nearby foliage! Everything and anything it touches is twisted into black versions of its prior self. If living, turning into another one of your new children. &quot; +
    &quot; Before you are swept away &quot; +
    &quot; your child&#39;s tongue slips from its mouth and burrows into the ground beneath you before lifting the hunk of earth upwards and raising you above the voluminous alabaster sea.\n\nYou smile in approval. Now, what to do?&quot;
)&gt;&gt;

&lt;&lt;run $CharacterSheet_Player.addHeightFlavourText(
    &quot;swarmEncounter&quot;,
    1,
    &quot;Skidding to a halt in front of you, the towering beast presses its chest down to the floor in a show of respect. Those glistening black eyes would almost pass as cute if &quot; +
    &quot;its slavering maw hadn&#39;t been the size of your entire body and then some. Your eyes trail downwards as you feel a rush of warm liquid slam against your shins; &quot; +
    &quot;you can&#39;t help but smile realising how &#39;excited&#39; he was to see you.\n\nYou scratch his head in approval. Now, what to do?&quot;
)&gt;&gt;

&lt;&lt;run $CharacterSheet_Player.addHeightFlavourText(
    &quot;swarmEncounter&quot;,
    2,
    &quot;Skidding to a halt in front of you, the muscular beast presses its chest down to the floor in a show of respect. Glistening eyes stare up at you. &quot;+
    &quot;Who knew your hyper muscular child could be so cute? Your eyes trail downwards as you feel a rush of warm liquid slam against your ankles; &quot; +
    &quot;you can&#39;t help but smile, realising how your presence alone is causing the creature such intense levels of arousal.\n\nYou scratch his head in approval. Now, what to do?&quot;
)&gt;&gt;

&lt;&lt;run $CharacterSheet_Player.addHeightFlavourText(
    &quot;swarmEncounter&quot;,
    3,
    &quot;Skidding to a halt in front of you, the muscular beast presses its chest down to the floor in a show of respect. Its pulsating form looks so small in comparison to your &quot;+
    &quot;towering figure. Regardless, you can&#39;t deny that its prostration was cute.\n\nYour eyes flick to a sudden movement from underneath your pet.\n\nAn explosion of black cum &quot; +
    &quot;rockets out from below its hefty bulk and paints the edges of your feet. Its mouth clamps shut, its body shudders and a new wave of growth takes it as your gigantic presence alone &quot; +
    &quot;amplifies its arousal by multiple folds. You smile while watching his orgasm chain and intensify for a good ten minutes.\n\nYou scratch his head in approval. &quot; + 
    &quot;Now, what to do?&quot;
)&gt;&gt;

&lt;&lt;run $CharacterSheet_Player.addHeightFlavourText(
    &quot;swarmEncounter&quot;,
    4,
    &quot;Skidding to a halt in front of you, the muscular beast presses its chest down to the floor in a show of respect. Its pulsating form is but a tiny shifting speck of uncontrolled &quot;+
    &quot;arousal. Your power, your size, and strength radiates from you with such force that the creature had clearly painted the dunes black with seed in an endless orgasm just trying to reach you. &quot; +
    &quot;\n\nCute.\n\nCreaking thunders across the lands as your titanic legs bend. Although your child was small; he easily put everything else in this wasteland to shame. &quot; +
    &quot;\n\nYou scratch his head in approval. &quot; + 
    &quot;Now, what to do?&quot;
)&gt;&gt;
\&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="256" name="Quest_MQ002_Entrance_PlayerWins" tags="" position="725,3225" size="100,100">The titan falls to his knees, the sheer weight of his armour is the only thing keeping him from falling over.

His head sinks downward, and you hear him mutter.

&quot;The sun... Please... I need it...&quot;

A pearly white orb slowly pushes out of his head as he pleads.

\&lt;&lt;set $CharacterSheet_MQ002_Guard.quest.beaten = true&gt;&gt;
\&lt;&lt;print setup.getFightReward($CharacterSheet_MQ002_Guard)&gt;&gt;

[[Continue-&gt;Quest_MQ002_Entrance_MinotaurDies]]
&lt;span class = &#39;inactive&#39;&gt;[[Grant him the sun&#39;s power]] (Not implemented yet)&lt;/span&gt;</tw-passagedata><tw-passagedata pid="257" name="Quest_MQ002_Entrance_MinotaurDies" tags="" position="850,3225" size="100,100">His soul floats away from him, but unlike those you&#39;ve seen before, it seems... confused. 

Like this is the first time it&#39;s experiencing Separation...

[[Continue-&gt;Quest_MQ002_Entrance_NoGuard]]</tw-passagedata><tw-passagedata pid="258" name="Quest_MQ002_Entrance_PlayerLoses" tags="" position="975,3225" size="100,100">Without even flinching, the minotaur raises his axe as you lay on the ground, grunting in pain.

You hear the massive weapon cut the air towards your neck. Your beaten body can&#39;t gather the strength to move out of the way.

[[You Died-&gt;Death]]</tw-passagedata><tw-passagedata pid="259" name="Quest_MQ002_NyxParasiteEncounter_FightIntro" tags="" position="1100,3225" size="100,100">\&lt;&lt;set $CharacterSheet_MQ002_NyxParasite.quest.met = true&gt;&gt;
&lt;&lt;print setup.getFightStartPassages($CharacterSheet_MQ002_NyxParasite)&gt;&gt;</tw-passagedata><tw-passagedata pid="260" name="Quest_MQ002_NyxParasiteEncounter_PlayerWins" tags="" position="1225,3225" size="100,100">The &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_MQ002_NyxParasite, &quot;height&quot;))&gt;&gt; parasite falls flat on the ground.

Stuck in a dead-end, it has nowhere to go. 

&lt;&lt;print setup.getFightReward($CharacterSheet_MQ002_NyxParasite)&gt;&gt;

\&lt;&lt;if $CharacterSheet_Player.quest.nyxParasiteInfections &lt;= 0&gt;&gt;
[[Kill it-&gt;Quest_MQ002_NyxParasiteEncounter_KillIt]]
\&lt;&lt;else&gt;&gt;
&lt;span class = &#39;inactive&#39;&gt;[[Kill it-&gt;Quest_MQ002_NyxParasiteEncounter_KillIt]]&lt;/span&gt; (This thought melts away from your mind)
\&lt;&lt;endif&gt;&gt;
[[Let it enter you-&gt;Quest_MQ002_NyxParasiteEncounter_ConsentualInfest]]</tw-passagedata><tw-passagedata pid="261" name="Quest_MQ002_NyxParasiteEncounter_ConsentualInfest" tags="" position="100,3350" size="100,100">\&lt;&lt;if $CharacterSheet_Player.quest.nyxParasiteInfections &lt;= 0&gt;&gt;
You look down upon the powerless parasite lying before you. You could kill it, right here and now. But something is stopping you.

The pleasure you felt when it bit you, it throbs within you more than ever. Who knows how pleasurable it will be if you fully let it take you?

Can it truly be called a parasite if you yearn its influence?
\&lt;&lt;else&gt;&gt;
Your brain throbs at the sight of the wounded parasite. You could never bring yourself to kill it. 

Not when it could bring you so much...
\&lt;&lt;/if&gt;&gt;

You step towards it, openly presenting and rubbing your &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Player, &quot;cock&quot;))&gt;&gt; cock, letting it taste your arousal as you lick your lips eagerly.  
\&lt;&lt;set $NyxParasiteEncounter_Won = true&gt;&gt;
&lt;&lt;include Quest_MQ002_NyxParasiteEncounter_Infection&gt;&gt;</tw-passagedata><tw-passagedata pid="262" name="Quest_MQ002_NyxParasiteEncounter_Infection" tags="" position="225,3350" size="100,100">It crawls towards you with newfound vitality; you soon feel the wet parasite slither up along your legs.
\&lt;&lt;if $NyxParasiteEncounter_Won&gt;&gt;
Quickly, it reaches your chest and stands inches from your mouth, like it was waiting for you to let it in.

You gaze at its featureless form and grin, opening your mouth wide open.
It jumps at the opportunity; your whole body shivers as you taste the oily substance all over its skin. 
It is a powerful aphrodisiac. You moan as it pushes deeper. Its body is feeling thicker around your mouth. 

Your head lurches back as you rub your hard cock with both hands. 
\&lt;&lt;else&gt;&gt;
Quickly, it reaches your chest and stands inches from your mouth, like a tiger about to pounce on its prey.

You gaze at its featureless form and can&#39;t stop yourself from gasping in terror.
It jumps at the opportunity; your whole body shivers as you taste the oily substance all over its skin. 

It is a powerful aphrodisiac. 

Your already exhausted body nearly gives up to the arousal that spikes within you.

Its body quickly feels thicker around your mouth as it crawls in. 
\&lt;&lt;endif&gt;&gt;

[[Continue-&gt;Quest_MQ002_NyxParasiteEncounter_Infection_2]]</tw-passagedata><tw-passagedata pid="263" name="Quest_MQ002_NyxParasiteEncounter_Infection_2" tags="" position="350,3350" size="100,100">Your moans are blocked by the monster rushing down your throat. You feel it flick its tail to slide down further inside you. 

Soon you feel a hardness build along your waist. It crawls and slowly intrudes your nutsack; your balls bathe in its aphrodisiac oil. 
You rub them experimentally; this is almost enough to make you cum on the spot. 
They are growing sensitive beyond what is humanly possible, and the constant pressure makes the pulsate wildly.

You slurp on the last bit of the parasite&#39;s tail and moan while licking the oil around your lips. 

[[Continue-&gt;Quest_MQ002_NyxParasiteEncounter_Infection_3]]</tw-passagedata><tw-passagedata pid="264" name="Quest_MQ002_NyxParasiteEncounter_Infection_3" tags="" position="475,3350" size="100,100">\&lt;&lt;if $CharacterSheet_Player.quest.nyxParasiteInfections &lt;= 0&gt;&gt;
You rub your balls once more. You are not sure what the parasite is doing to them, but they are changing.
\&lt;&lt;else&gt;&gt;
You remember this feeling well, you rub and moan as your balls grow once again.
\&lt;&lt;/if&gt;&gt;

You feel your balls grow. They absorb the aphrodisiac oil of the parasite like a sponge in water. 
You rub them hard; every touch now sends bolts of pleasure all over your body.

The parasite gorges on your incoming load, yet the pressure is becoming too much to bear. 
It grows in size, filling your balls even more. The sheer magnitude of your load is too much for the parasite as well.
You lurch your head back and scream as your swelled cock erupts like a fountain, litres and litres of cum jets out of your engorged balls, covering the hallway.
Your screams of utter ecstasy continue for minutes on end.

[[Continue-&gt;Quest_MQ002_NyxParasiteEncounter_Infection_4]]</tw-passagedata><tw-passagedata pid="265" name="Quest_MQ002_NyxParasiteEncounter_Infection_4" tags="" position="600,3350" size="100,100">The hunger of the parasite keeps your arousal at an all-time high. 
But it feels like this wasn&#39;t the only thing that changed within you.
\&lt;&lt;if $CharacterSheet_Player.quest.nyxParasiteInfections &lt;= 0&gt;&gt;
You feel an urge to spread this gift for yourself as well.
\&lt;&lt;else&gt;&gt;
With more parasites inside you, the urge to spread grows even stronger.
\&lt;&lt;/if&gt;&gt;

You gain 10 corruption.
\&lt;&lt;run setup.applyCorruption($CharacterSheet_Player, 10)&gt;&gt;
\&lt;&lt;run setup.MQ002_AddNyxParasiteInfection()&gt;&gt;
\&lt;&lt;if $CharacterSheet_Player.quest.nyxParasiteInfections == 1&gt;&gt;
You gain the &quot;Nyx Parasite Infection&quot; Ability.
\&lt;&lt;/if&gt;&gt;

\&lt;&lt;if $MQ002_Manor_Destination != undefined&gt;&gt;
[[Continue-&gt;$MQ002_Manor_Destination]]
\&lt;&lt;else&gt;&gt;
[[Continue-&gt;Quest_MQ002_Manor_MainHall]]
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="266" name="Quest_MQ002_NyxParasiteEncounter_KillIt" tags="" position="725,3350" size="100,100">As soon as you see it fall, you rush towards it to deliver the final blow. 
You stomp on the parasite over and over again, fear and adrenaline guiding you instinctively. 
Groans of efforts echo along the hall as you keep going for as long as your body allows you to. 
High pitched screams soon melt into wet splashes; its body convulses without intent.

You pant and take a few steps back. 
The gruesome sight of the dead parasite almost makes you sick.

You hold your breath and move to the door at the end of the hall. 
Your eyes stay glued to the monster&#39;s corpse, in case it suddenly springs back to life.

\&lt;&lt;if $MQ002_Manor_Destination != undefined&gt;&gt;
[[Continue-&gt;$MQ002_Manor_Destination]]
\&lt;&lt;else&gt;&gt;
[[Continue-&gt;Quest_MQ002_Manor_MainHall]]
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="267" name="Quest_MQ002_NyxParasiteEncounter_PlayerLoses" tags="" position="850,3350" size="100,100">\&lt;&lt;print setup.getFightReward(undefined)&gt;&gt;

As you see the parasite crawl hungrily towards you, you crumble.

You only have a few seconds to react before it reaches you

\&lt;&lt;if $CharacterSheet_Player.quest.nyxParasiteInfections &lt;= 0&gt;&gt;
[[Escape-&gt;Quest_MQ002_NyxParasiteEncounter_Escape]]
\&lt;&lt;else&gt;&gt;
&lt;span class = &#39;inactive&#39;&gt;[[Escape-&gt;Quest_MQ002_NyxParasiteEncounter_Escape]]&lt;/span&gt; (This thought melts away from your mind)
\&lt;&lt;endif&gt;&gt;
[[Submit to the Parasite-&gt;Quest_MQ002_NyxParasiteEncounter_Submit]]</tw-passagedata><tw-passagedata pid="268" name="Quest_MQ002_NyxParasiteEncounter_Submit" tags="" position="975,3350" size="100,100">\&lt;&lt;set $NyxParasiteEncounter_Won = false&gt;&gt;
The door you came from lays a few feet behind you, but an overpowering mixture of exhaustion and aroused curiosity keeps you on your knees.

&lt;&lt;include Quest_MQ002_NyxParasiteEncounter_Infection&gt;&gt;</tw-passagedata><tw-passagedata pid="269" name="Quest_MQ002_NyxParasiteEncounter_Escape" tags="" position="1100,3350" size="100,100">Your body is about to give up, but the sheer terror of seeing this parasite crawl towards you gives you a second wind.

You turn your back to the monster and scream, the door is only a few feet away... 
Without second thoughts, you hurl yourself back to the room you came from and force the door close with the little energy you have left.

You pant and expect the worst, but the monster does not seem to take chase.

[[Continue-&gt;$MQ002_Manor_Source]]</tw-passagedata><tw-passagedata pid="270" name="Encounter_Intro_Ortha" tags="" position="1225,3350" size="100,100">You stand infinity between worlds.

[[Continue-&gt;Encounter_Intro_Ortha_2]]</tw-passagedata><tw-passagedata pid="271" name="Encounter_Intro_Ortha_2" tags="" position="100,3475" size="100,100">Countless worlds lay before you, all within sight yet impossibly far away. 

Yet in this vast emptiness, you feel a presence. 

[[Turn Around-&gt;Encounter_Intro_Ortha_3]]</tw-passagedata><tw-passagedata pid="272" name="Encounter_Intro_Ortha_3" tags="" position="225,3475" size="100,100">You turn and come face to face with a living wall of muscles.
A behemoth so massive he overshadows the endless void beyond realms.
Yet his smile is warm and inviting.

&quot;I don&#39;t know how you managed to get here, but it&#39;s always nice to have some company.&quot; He says.

His four pecs rise higher than mountains with every breath. Each and everyone of his planetary muscles keeps expanding with no signs of stopping. 
It is a growth that can&#39;t be grasped, something that broke the containement of the universe.

The behemoth looks at you like he stumbled upon an old friend.

[[Fight Him!-&gt;Encounter_Intro_Ortha_4]]</tw-passagedata><tw-passagedata pid="273" name="Encounter_Intro_Ortha_4" tags="" position="350,3475" size="100,100">He laughs warmly.

&quot;Alright little one, I&#39;ll play your game.&quot;

His four arms flexes, booming all-consuming shockwaves of power through the void.

[[Fight-&gt;FightLogic]]</tw-passagedata><tw-passagedata pid="274" name="Encounter_Start_Ortha" tags="" position="475,3475" size="100,100"></tw-passagedata><tw-passagedata pid="275" name="Encounter_Win_Ortha" tags="" position="600,3475" size="100,100">The behemoth smiles and crosses his four arms.

&quot;Hmmmmm... You&#39;re pretty good!&quot; He lets out a booming laugh, his body quickly recovering from your fight.

&quot;Though I recognize some of your powers... Seems eerily similar to another Aeon I know...&quot; He ponders.

&quot;Well, no matter, I should send you back to your world now. You should not have been here.&quot;

[[Continue-&gt;Village]]</tw-passagedata><tw-passagedata pid="276" name="Encounter_Loss_Ortha" tags="" position="725,3475" size="100,100">The behemoths massive paw comes crashing towards you.

You expect the worst but it stops before crushing you into dust.
The universe sized paw ruffles your hair instead.

&quot;Well that was fun. I&#39;m not sure why you were sent here but it&#39;s now time for you to go back home.&quot;

[[Continue-&gt;Village]]</tw-passagedata><tw-passagedata pid="277" name="Encounter_Intro_Slime" tags="" position="850,3475" size="100,100">\&lt;&lt;if setup.sizecomparison(setup.getStatValue($CharacterSheet_Player, &quot;height&quot;), setup.getStatValue($CharacterSheet_Slime, &quot;height&quot;)) &gt;= $Comparators.FITS_ON_FINGER&gt;&gt;
As you traverse through the Barrens, you feel something strangely sticky underneath your heel.
Whatever it was, it&#39;s gone now, it either ran away or was entirely obliterated by your step.

Perhaps you should be more careful? Or not, after all, what&#39;s going to oppose you?

&lt;&lt;print setup.getFightReward($CharacterSheet_Slime)&gt;&gt;

[[Continue-&gt;Village]]
\&lt;&lt;else&gt;&gt;
\&lt;&lt;if $Essence &lt; 200&gt;&gt;
As you traverse through the Northern Barrens, you see an amorphous blob of goo. It seems to pay no attention to you, idly minding its own business.

You consider if it&#39;s a wise idea to approach it or not.

[[Approach-&gt;Encounter_Intro_Slime_EssenceLow_1]]
[[Leave-&gt;Encounter_Intro_Slime_EssenceLow_Leave]]
\&lt;&lt;elseif $Essence &gt;= 200 &amp;&amp; $Essence &lt; 600&gt;&gt;
As you traverse the Northern Barrens&#39; desertic landscapes, you notice a strange amorphous goo rise from a nearby dune. It seems to be heading towards you, seemingly intrigued by your presence. The sun shines through its wet green surface, letting you perceive the white glow of Essence within its core.

The intents of the being are unclear, would it be wiser to strike or escape?

[[Attack-&gt;Encounter_Intro_Slime_EssenceMedium_1]]
[[Leave-&gt;Encounter_Intro_Slime_EssenceMedium_Leave]]
\&lt;&lt;elseif $Essence &gt;= 600&gt;&gt;
As you traverse through the Northern Barrens, your ears pick up on noisy rustling nearby.

You barely have enough time to react to a blob of goo hurling itself at you.

Whatever the slime wants, it certainly has something to do with you, and with the way it darts around you agitatedly, it doesn&#39;t seem to want to let you go so without a fight.

[[Fight it-&gt;FightLogic]]
[[Escape-&gt;Village]]
\&lt;&lt;/if&gt;&gt;
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="278" name="Encounter_Intro_Slime_EssenceMedium_1" tags="" position="975,3475" size="100,100">Whatever it wants, it seems to be drawn to you. Adopting a fighting stance, you decide it&#39;s best to attack first before it gets any sudden ideas.

[[Fight it-&gt;FightLogic]]</tw-passagedata><tw-passagedata pid="279" name="Encounter_Intro_Slime_EssenceMedium_Leave" tags="" position="1100,3475" size="100,100">You quickly back away from the slime, whatever it wants is none of your business.

It trails behind you, but gives up interest after a moment.

[[Continue-&gt;Village]]</tw-passagedata><tw-passagedata pid="280" name="Encounter_Intro_Slime_EssenceLow_1" tags="" position="1225,3475" size="100,100">As you approach the aberration, it seemingly pays no attention to you. The creature is a strange slime, with a green coat, giving its body a shiny hue.

The slime is shaped into an ellipse, roughly &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Slime, &quot;height&quot;))&gt;&gt; in height.

It doesn&#39;t seem to pose much threat, but it could be a nuisance in the future, who knows what it may be planning.

[[Fight it-&gt;FightLogic]]
[[Leave it be-&gt;Encounter_Intro_Slime_EssenceLow_Leave]]</tw-passagedata><tw-passagedata pid="281" name="Encounter_Intro_Slime_EssenceLow_Leave" tags="" position="100,3600" size="100,100">You decide to leave this slime creature alone; whatever it may want, it seems to have nothing to do with you.

[[Continue-&gt;Village]]</tw-passagedata><tw-passagedata pid="282" name="Encounter_Start_Slime" tags="" position="225,3600" size="100,100"></tw-passagedata><tw-passagedata pid="283" name="Encounter_Win_Slime" tags="" position="350,3600" size="100,100">The slime collapses, flattening against the ground, unwilling to continue fighting.

As you approach, it almost bounces with eagerness, as if it wants you to do something to it?

Its surface moves and writhes like it is trying to move limbs it doesn&#39;t possess. The way it distorts reminds you of the first time you saw &lt;&lt;SymbioteName&gt;&gt;. Just like with them, your thoughts seem to warp its form.

Perhaps there&#39;s more to this creature than it seems.

&lt;&lt;print setup.getFightReward($CharacterSheet_Slime)&gt;&gt;

[[Reshape the slime-&gt;Encounter_Win_Slime_Reshape_Race]]
[[Leave-&gt;Village]]</tw-passagedata><tw-passagedata pid="284" name="Encounter_Win_Slime_Reshape_Race" tags="" position="475,3600" size="100,100">As you consider how you want to reshape the slime, it seems to respond to your thoughts.

First, you inspect its overall being; small nubs push from its gooey form. They steadily grow longer and more defined, building limbs on this previously formless creature. Its core stretches, gaining definition until it becomes the toned upper body of your thoughts.

You eye it warily, thinking about what you want its general appearance to look like.

[[Humanoid-&gt;Encounter_Win_Slime_Reshape_Humanoid][$ReshapeRace = &quot;Humanoid&quot;]]
[[Naga-&gt;Encounter_Win_Slime_Reshape_Naga][$ReshapeRace = &quot;Naga&quot;]]
[[Minotaur-&gt;Encounter_Win_Slime_Reshape_Minotaur][$ReshapeRace = &quot;Minotaur&quot;]]
[[Werewolf-&gt;Encounter_Win_Slime_Reshape_Werewolf][$ReshapeRace = &quot;Werewolf&quot;]]
[[Displacer Beast-&gt;Encounter_Win_Slime_Reshape_Displacer][$ReshapeRace = &quot;Displacer&quot;]]</tw-passagedata><tw-passagedata pid="285" name="Encounter_Win_Slime_Reshape_Displacer" tags="" position="600,3600" size="100,100">You focus the changing slime, reshaping it into a displacer beast. &lt;&lt;SymbioteName&gt;&gt; resonates with your thoughts, enhancing your will beyond the capabilities of a single being.

The slime quickly reshapes. 

Its legs take on a more feral form, and a long prehensile tail sprouts from the base of where its spine would be. 
It grows an extra set of arms, and dual whip-like tentacles sprout from its back, the tips lined with rows of razor-teeth like appendages. 
It remains bipedal, a somewhat humanoid displacer beast with a twin row of arms.

&lt;&lt;include Encounter_Win_Slime_Size&gt;&gt;</tw-passagedata><tw-passagedata pid="286" name="Encounter_Win_Slime_Reshape_Werewolf" tags="" position="725,3600" size="100,100">You focus your thoughts, thinking about reshaping the creature into a werewolf.

&lt;&lt;SymbioteName&gt;&gt; resonates with your thoughts, enhancing your will beyond the capabilities of a single being.

The slime quickly reshapes. 

Its legs become more canine-like, a small tail sprouts from the base of where its spine would belong as the rest of the body follows. 
Faux-claws shape from its hands and feet, its face stretches into a muzzle adorned with floppy canine ears. 
The slime now resembles a werewolf in all its bipedal glory.

&lt;&lt;include Encounter_Win_Slime_Size&gt;&gt;</tw-passagedata><tw-passagedata pid="287" name="Encounter_Win_Slime_Reshape_Minotaur" tags="" position="850,3600" size="100,100">You focus your thoughts, thinking about reshaping the creature into a minotaur.

&lt;&lt;SymbioteName&gt;&gt; resonates with your thoughts, enhancing your will beyond the capabilities of a single being.

The slime quickly reshapes. 

Its legs become more bovine-like, a long tail sprouts from the base of where its spine would belong, and its head reshapes into that of a bull&#39;s with a clean set of horns. 
The slime now resembles a minotaur, head, and legs of a bull, but the torso of a human.

&lt;&lt;include Encounter_Win_Slime_Size&gt;&gt;</tw-passagedata><tw-passagedata pid="288" name="Encounter_Win_Slime_Reshape_Naga" tags="" position="975,3600" size="100,100">You focus your thoughts, thinking about reshaping the creature into a naga.

&lt;&lt;SymbioteName&gt;&gt; resonates with your thoughts, enhancing your will beyond the capabilities of a single being.

The slime quickly reshapes. 

Its legs merge into a serpent-like tail, but its torso and head remain mostly humanoid-shaped. 
The slime now resembles a standard naga, half-human, half serpent.

&lt;&lt;include Encounter_Win_Slime_Size&gt;&gt;</tw-passagedata><tw-passagedata pid="289" name="Encounter_Win_Slime_Reshape_Humanoid" tags="" position="1100,3600" size="100,100">You eye the slime, content on having it remain with its humanoid figure. 
It has all the standard features you&#39;d expect on a human on the otherwise featureless slime.

&lt;&lt;include Encounter_Win_Slime_Size&gt;&gt;</tw-passagedata><tw-passagedata pid="290" name="Encounter_Win_Slime_Size" tags="" position="1225,3600" size="100,100">Its current stature is very slim and stands at about 5ft tall. You consider how you&#39;d want to reshape its body.

[[Focus on giving it a slim body-&gt;Encounter_Win_Slime_Size_Slim][$ReshapeSize = &quot;Slim&quot;]]
[[Focus on giving it a muscular body-&gt;Encounter_Win_Slime_Size_Muscular][$ReshapeSize = &quot;Muscular&quot;]]
[[Focus on giving it a chubby body-&gt;Encounter_Win_Slime_Size_Chubby][$ReshapeSize = &quot;Chubby&quot;]]
[[Focus on giving it a hyper body-&gt;Encounter_Win_Slime_Size_Hyper][$ReshapeSize = &quot;Hyper&quot;]]</tw-passagedata><tw-passagedata pid="291" name="Encounter_Win_Slime_Size_Slim" tags="" position="100,3725" size="100,100">You look down at the slime&#39;s form.
It&#39;s a fairly standard build, if not a little short, but you see no reason to change anything else.

&lt;&lt;include Encounter_Win_Slime_SexualOrgans&gt;&gt;</tw-passagedata><tw-passagedata pid="292" name="Encounter_Win_Slime_Size_Muscular" tags="" position="225,3725" size="100,100">You focus your thoughts on making its form more muscular. The slime shifts slightly, its body quickly morphing further to accompany your desire.

Its arms begin to swell with strength; its torso expands with enhanced musculature. 
\&lt;&lt;if $ReshapeRace == &quot;Displacer&quot;&gt;&gt;
It raises each arm, flexing its massive biceps as if to entice you.
\&lt;&lt;else&gt;&gt;
It raises two of its arms, flexing its massive biceps as the other two idly stroke its torso
\&lt;&lt;/if&gt;&gt;
Perhaps it&#39;s not used to the muscular form, but the slime seems to be enjoying its new stature.

\&lt;&lt;if $ReshapeRace == &quot;Naga&quot;&gt;&gt;
It flicks its tail about, bringing the tip of its serpentine mass to run along the creases of its abs, admiring the form of its physique.
\&lt;&lt;else&gt;&gt;
Its legs grow in tandem, the muscular quads swell with muscle as it flexes its legs, admiring the form of its physique.
\&lt;&lt;/if&gt;&gt;

Its height increases slightly as well, it is at least a foot taller. 
It continues its brief bout of self-worship, admiring the muscle tone of its torso and the rest of its body. 
But you&#39;re not entirely done yet; there&#39;s still the final pieces to consider.

&lt;&lt;include Encounter_Win_Slime_SexualOrgans&gt;&gt;</tw-passagedata><tw-passagedata pid="293" name="Encounter_Win_Slime_Size_Chubby" tags="" position="350,3725" size="100,100">You focus your thoughts on making its form a little chubbier. 
The slime shifts slightly, its body quickly morphing to accompany your desire further.

Its arms thicken, the weight they carry seems decently strong, but it&#39;s not as defined as a bodybuilder&#39;s would be. 
The slime wriggles and stretches, but otherwise doesn&#39;t make any attempts to show off for you.

\&lt;&lt;if $ReshapeRace == &quot;Naga&quot;&gt;&gt;
Its tail is more than sturdy enough to support the weight of its new build. It brings its tail up to admire the shape of its round belly.
\&lt;&lt;else&gt;&gt;
Its legs thicken as well, sturdy enough to support the weight of its new figure.
\&lt;&lt;/if&gt;&gt;

The rest of the body follows suit, its gut expanding enough to be notable, but shy of what one could consider fat. 
Overall, the build it carries is akin to that of a burly yet portly person.

Its height increases slightly as well, it is at least a foot taller. 
It runs its hands over its frame, admiring the strange new shape of its stout body. 
But you&#39;re not entirely done yet; there&#39;s still the final pieces to consider.

&lt;&lt;include Encounter_Win_Slime_SexualOrgans&gt;&gt;</tw-passagedata><tw-passagedata pid="294" name="Encounter_Win_Slime_Size_Hyper" tags="" position="475,3725" size="100,100">&lt;&lt;run setup.applyGrowth($CharacterSheet_Slime, &quot;height&quot;, setup.getStatValue($CharacterSheet_Slime, &quot;height&quot;))&gt;&gt;
You know it can be more, you want it to be more. You draw your focus on its body, the slime jiggles slightly as your thoughts intrude its own. 
It responds to your whims, its body swelling with mass—the gooey exterior grows to a massive size. 
The sheer height of the creature more than doubles, easily standing over &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Slime, &quot;height&quot;))&gt;&gt; tall now. 
Its arms follow suit, bulging with muscles so massive it seems like there&#39;s barely any room for them to move.

\&lt;&lt;if $ReshapeRace == &quot;Displacer&quot;&gt;&gt;
The dual set of arms are so massive that they&#39;re practically fighting with each other for space.
\&lt;&lt;/if&gt;&gt;

The sheer volume of muscle mass the slime is now exuding is causing its entire balance to shift. 
\&lt;&lt;if $ReshapeRace == &quot;Naga&quot;&gt;&gt;
Even so, it brings its serpentine tail up to its abs, admiring the shape of its tremendous physique.
\&lt;&lt;else&gt;&gt;
Its legs bulge with power, extremely sturdy, if not overbearing.
\&lt;&lt;/if&gt;&gt;

The slime is impossibly huge; it seems to be at its limit now. 
\&lt;&lt;if setup.sizecomparison(setup.getStatValue($CharacterSheet_Player, &quot;height&quot;), setup.getStatValue($CharacterSheet_Slime, &quot;height&quot;) * 2.5) &gt;= $Comparators.MUCH_BIGGER&gt;&gt;
Yet its limit can&#39;t even escape the shadow of something as massive as you are.
\&lt;&lt;/if&gt;&gt;

&lt;&lt;include Encounter_Win_Slime_SexualOrgans&gt;&gt;</tw-passagedata><tw-passagedata pid="295" name="Encounter_Win_Slime_SexualOrgans" tags="" position="600,3725" size="100,100">You&#39;re left to consider the final pieces of the slime.

[[Focus on giving it a penis-&gt;Encounter_Win_Slime_SexualOrgans_Penis][$ReshapeSexualOrgan = &quot;Penis&quot;]]
[[Focus on giving it a vagina-&gt;Encounter_Win_Slime_SexualOrgans_Vagina][$ReshapeSexualOrgan = &quot;Vagina&quot;]]
[[Focus on its ass-&gt;Encounter_Win_Slime_SexualOrgans_OnlyAss][$ReshapeSexualOrgan = &quot;None&quot;]]</tw-passagedata><tw-passagedata pid="296" name="Encounter_Win_Slime_SexualOrgans_Intro" tags="" position="725,3725" size="100,100">You eye the slime once more, admiring the shape of its form.</tw-passagedata><tw-passagedata pid="297" name="Encounter_Win_Slime_SexualOrgans_OnlyAss" tags="" position="850,3725" size="100,100">&lt;&lt;include Encounter_Win_Slime_SexualOrgans_Intro&gt;&gt;
You think that it needs nothing more than an ass to work with, after all, you have a particular goal in mind, and anything else is but a distraction.

It is facing away from you, but you keep a close eye on the translucent slime. 
The shape of its ass gains additional mass as well as a proper hole for you to use.

&lt;&lt;include Encounter_Win_Slime_Sex&gt;&gt;</tw-passagedata><tw-passagedata pid="298" name="Encounter_Win_Slime_SexualOrgans_Vagina" tags="" position="975,3725" size="100,100">&lt;&lt;include Encounter_Win_Slime_SexualOrgans_Intro&gt;&gt;
At the junction of the hips, a humanoid vagina begins to take shape. A pair of folded lips emerge along with a half-inch clitoris. 

It erects slightly. 

You grin in satisfaction at the sight of it, you know very well that it has an ass to play with as well.

&lt;&lt;include Encounter_Win_Slime_Sex&gt;&gt;</tw-passagedata><tw-passagedata pid="299" name="Encounter_Win_Slime_SexualOrgans_Penis" tags="" position="1100,3725" size="100,100">&lt;&lt;include Encounter_Win_Slime_SexualOrgans_Intro&gt;&gt; It just wouldn&#39;t be complete without a penis, after all, it&#39;s one of the most defining characteristics of a creature.

At the junction of the hips, a humanoid penis begins to take shape, extending outwardly for you.
\&lt;&lt;if $ReshapeSize == &quot;Hyper&quot;&gt;&gt;
Like the massive body of the slime, the huge erection swells out, reaching just past its thick pectorals.
\&lt;&lt;/if&gt;&gt;

You grin in satisfaction at the sight of it, you know very well that it has an ass to play with as well.

&lt;&lt;include Encounter_Win_Slime_Sex&gt;&gt;</tw-passagedata><tw-passagedata pid="300" name="Encounter_Win_Slime_Sex" tags="" position="1225,3725" size="100,100">With the slime morphed to your desire, you consider what you could do to it.

\&lt;&lt;if $ReshapeSexualOrgan == &quot;Penis&quot; &amp;&amp; setup.hasLimb($CharacterSheet_Player.info.anatomy, &quot;vaginas&quot;)&gt;&gt;
[[Ride Vaginal-&gt;Encounter_Win_Slime_Sex_RideVaginal]]
\&lt;&lt;/if&gt;&gt;
\&lt;&lt;if $ReshapeSexualOrgan == &quot;Penis&quot;&gt;&gt;
[[Ride Anal-&gt;Encounter_Win_Slime_Sex_RideAnal]]
\&lt;&lt;/if&gt;&gt;
\&lt;&lt;if setup.sizecomparison(setup.getStatValue($CharacterSheet_Player, &quot;cock&quot;), setup.getStatValue($CharacterSheet_Slime, &quot;height&quot;)) &gt;= $Comparators.BIGGER&gt;&gt;
[[Attempt to fuck it-&gt;Encounter_Win_Slime_Sex_TooBig]]
\&lt;&lt;else&gt;&gt;
\&lt;&lt;if $ReshapeSexualOrgan == &quot;Vagina&quot;&gt;&gt;
[[Penetrate Vagina-&gt;Encounter_Win_Slime_Sex_PenetrateVagina]]
\&lt;&lt;/if&gt;&gt;
[[Penetrate Ass-&gt;Encounter_Win_Slime_Sex_PenetrateAss]]
\&lt;&lt;/if&gt;&gt;
[[Abandon-&gt;Encounter_Win_Slime_Sex_Abandon]]</tw-passagedata><tw-passagedata pid="301" name="Encounter_Win_Slime_Sex_Intro" tags="" position="100,3850" size="100,100">As you approach the slime, you can’t resist from eyeing the massive member you’ve given it. 
\&lt;&lt;if $ReshapeSize == &quot;Hyper&quot;&gt;&gt;
Especially considering the massive size it is now.
\&lt;&lt;/if&gt;&gt;
You push it to the ground, getting it into position for yourself.

You waste no time disrobing, making sure that nothing is obstructing intimacy with this fascinating creature. 
\&lt;&lt;if $ReshapeRace == &quot;Naga&quot;&gt;&gt;
As you straddle the slime, you can feel its serpentine tail dragging along your back.
\&lt;&lt;elseif $ReshapeRace == &quot;Displacer&quot;&gt;&gt;
As you straddle the slime, it brings two arms to hold onto your hips as the other pair rests behind its head in an almost arrogant manner.
\&lt;&lt;else&gt;&gt;
As you straddle the slime, it brings both of its arms up to your hips.
\&lt;&lt;/if&gt;&gt;

&lt;&lt;include Encounter_Win_Slime_ShapeDescription&gt;&gt;</tw-passagedata><tw-passagedata pid="302" name="Encounter_Win_Slime_Sex_RideVaginal" tags="" position="225,3850" size="100,100">&lt;&lt;include Encounter_Win_Slime_Sex_Intro&gt;&gt;
As you approach the slime, you can’t resist from eyeing the massive member you’ve given it. 
\&lt;&lt;if $ReshapeSize == &quot;Hyper&quot;&gt;&gt;
Especially considering the massive size it is now.
\&lt;&lt;/if&gt;&gt;
You push it to the ground, getting it into position for yourself.

You waste no time disrobing, making sure that nothing is obstructing intimacy with this fascinating creature. 
\&lt;&lt;if $ReshapeRace == &quot;Naga&quot;&gt;&gt;
As you straddle the slime, you can feel its serpentine tail dragging along your back.
\&lt;&lt;elseif $ReshapeRace == &quot;Displacer&quot;&gt;&gt;
As you straddle the slime, it brings two arms to hold onto your hips as the other pair rests behind its head in an almost arrogant manner.
\&lt;&lt;else&gt;&gt;
As you straddle the slime, it brings both of its arms up to your hips.
\&lt;&lt;/if&gt;&gt;

&lt;&lt;include Encounter_Win_Slime_ShapeDescription&gt;&gt;

Your hand graps its erection, it&#39;s stiff and pliable but doesn&#39;t give form beneath your touch. 
You don&#39;t even have to worry about lubrication considering just how slick it is already. 

The slime makes little attempt to advance on you as you rub its tip along your lips, revelling in the warm, slimy feeling. Your lips align with the rod, you inch closer. 

You prod at your clit, rubbing yourself in slow, circular motions as you bring its glans to part your lips. 

[[Continue-&gt;Encounter_Win_Slime_Sex_RideVaginal_2]]</tw-passagedata><tw-passagedata pid="303" name="Encounter_Win_Slime_Sex_RideVaginal_2" tags="" position="350,3850" size="100,100">You slowly drive down; it quickly shifts its size to better accommodate your cunt.

You can feel every inch of the throbbing member within you, you gently clench down onto it, working your muscles around its girth as you bring yourself closer to its body. 

Your hands hold on to its chest as the slime&#39;s tool maintains a soft but unyielding grasp on your hips. 
You bring your hips up and down slowly, giving yourself a chance to get accustomed to its size before you take the pace further. 
\&lt;&lt;if $ReshapeRace == &quot;Naga&quot; || $ReshapeRace == &quot;Minotaur&quot; &gt;&gt;
You can feel its tail reach up from behind you, tenderly caressing your back in an almost affectionate manner.
\&lt;&lt;elseif $ReshapeRace == &quot;Displacer&quot;&gt;&gt;
You notice its tentacles tenderly stroke your shoulders before moving down, rubbing your chest in an almost affectionate manner.
\&lt;&lt;/if&gt;&gt;

The slime gently bucks into you, but you don&#39;t reprimand it, it seems to be enjoying this just as much as you are. 
There&#39;s an underlying sensation you cannot describe, perhaps it&#39;s the subtle lack of a heartbeat, but the gentle throbbing of its erection is enough to keep your mind distracted from the fact. 
The gentle pace is almost intimate, but the slime makes no notable advances on you as if it were perfectly content on the subdued position.

[[Continue-&gt;Encounter_Win_Slime_Sex_RideVaginal_3]]</tw-passagedata><tw-passagedata pid="304" name="Encounter_Win_Slime_Sex_RideVaginal_3" tags="" position="475,3850" size="100,100">The pace is under your complete control, every time you reach the base of its shaft, you can feel its thick balls press against your rear. 
Soon enough you can feel your resistance wearing down as pressure builds within your loins.

You can feel its body contort slightly as a brief moment of weightlessness befalls you. Suddenly your face is planted directly onto its chest. 
The slime looks at you with its featureless eyes, you&#39;re unsure what it could be thinking, but your thoughts are interrupted by your legs being pulled down onto its body as it then wraps its arms around your back, keeping you closely wound to its body.

Your breathing staggers as you can feel the pressure build within your loins. A long, wet tongue sticks out from its mouth as it gives you a sultry lick across your cheek.

Trapped within its embrace, it bucks almost aggressively into you. You cry out in pleasure as your climax hits, clenching down on its erection. 
Your girlcum only serves to lubricate its already slimy erection further. 
\&lt;&lt;if setup.hasLimb($CharacterSheet_Player.info.anatomy, &quot;cocks&quot;)&gt;&gt;
Your erection pulsates as you shoot ropes of cum all over the slime&#39;s torso.
\&lt;&lt;/if&gt;&gt;

[[Continue-&gt;Encounter_Win_Slime_Sex_RideVaginal_4]]</tw-passagedata><tw-passagedata pid="305" name="Encounter_Win_Slime_Sex_RideVaginal_4" tags="" position="600,3850" size="100,100">You can feel its thick erection throb frantically, pulsating with eagerness as it cums as well.

You feel waves upon waves of warm, slimy seed spill into your womb as you press your weight on its body. 
You can feel its erection deflate within you as it slowly slips out, trailing its ooze all over your nethers and its groin.

With a sigh of relief, you revel in the afterglow of its presence, enjoying the warm, soothing feeling of its slimy body.

[[Continue-&gt;Encounter_Win_Slime_Sex_RideVaginal_5]]</tw-passagedata><tw-passagedata pid="306" name="Encounter_Win_Slime_Sex_RideVaginal_5" tags="" position="725,3850" size="100,100">After a few minutes, you decide it&#39;s best to move on with the day. You disentangle itself from its grasp with little resistance. 
The slime hardly notices your missing presence, still lying on the earth as if you were still there. You pick up your belongings and continue with your day.

[[Continue-&gt;Village]]</tw-passagedata><tw-passagedata pid="307" name="Encounter_Win_Slime_ShapeDescription" tags="" position="850,3850" size="100,100">You admire the shape of its form, \
\&lt;&lt;if $ReshapeSize == &quot;Slim&quot;&gt;&gt;
its svelte figure is soft and unimposing.
\&lt;&lt;elseif $ReshapeRace == &quot;Muscular&quot;&gt;&gt;
its bulky frame is warm and inviting. You enjoy every crevice born of the shape of its musculature.
\&lt;&lt;elseif $ReshapeRace == &quot;Hyper&quot;&gt;&gt;
it&#39;s impossibly huge and muscular frame has almost completely inhibited its mobility, this slime is completely subdued, subject only to your will.
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="308" name="Encounter_Win_Slime_Sex_RideAnal" tags="" position="975,3850" size="100,100">&lt;&lt;include Encounter_Win_Slime_Sex_Intro&gt;&gt;

You try to get comfortable on top of it, 
\&lt;&lt;if $ReshapeSize == &quot;Hyper&quot;&gt;&gt;
you bring your hands down to its thick, massive pecs for support as your feet can barely touch the ground.
\&lt;&lt;else&gt;&gt;
you bring your hands down to its chest for support, comfortably straddled on its figure.
\&lt;&lt;/if&gt;&gt;
Once you feel like your balance is well, you bring a hand down to admire the slick texture of its erection. 
It&#39;s so warm and wet; you know you don&#39;t even have to worry about lubrication.

[[Continue-&gt;Encounter_Win_Slime_Sex_RideAnal_2]]</tw-passagedata><tw-passagedata pid="309" name="Encounter_Win_Slime_Sex_RideAnal_2" tags="" position="1100,3850" size="100,100">Aligning the tip of its erection to your backdoor, you gently tease its erection. 
The slime doesn&#39;t force into you, but rather holds onto you for support with surprising gentleness. 
You sink onto its girth, the slime shifts slightly to better accommodate your hole. You breathe heavily as you sink deeper until you&#39;ve reached the base of its crotch. 
You&#39;re not entirely sure how many inches of its dick you&#39;ve just taken, but you relish the warm, gooey sensation.
\&lt;&lt;if $ReshapeRace == &quot;Naga&quot; || $ReshapeRace == &quot;Minotaur&quot;&gt;&gt; 
You can feel its tail reach up from behind you, tenderly caressing your back in an almost affectionate manner.
\&lt;&lt;elseif $ReshapeRace == &quot;Displacer&quot;&gt;&gt;
You notice its tentacles tenderly stroke your shoulders before moving down, rubbing your chest in an almost affectionate manner.
\&lt;&lt;/if&gt;&gt;

You bring your hand to your nethers, wanting to get the most out of the situation. 
\&lt;&lt;if setup.hasLimb($CharacterSheet_Player.info.anatomy, &quot;cocks&quot;)&gt;&gt;
You wrap your fingers around your length, using your precum as sufficient lubrication as you start with a slow, steady rhythm as you slowly bounce up and down its erection.

\&lt;&lt;elseif setup.hasLimb($CharacterSheet_Player.info.anatomy, &quot;vaginas&quot;)&gt;&gt;
You gently prod at your clit, rubbing it around in slow circular motions as you slowly bounce up and down its erection.
\&lt;&lt;/if&gt;&gt;

[[Continue-&gt;Encounter_Win_Slime_Sex_RideAnal_3]]</tw-passagedata><tw-passagedata pid="310" name="Encounter_Win_Slime_Sex_RideAnal_3" tags="" position="1225,3850" size="100,100">The slime slowly begins bucking into you, causing you to clench your sphincter around its girthy length. 
You lean deeper forward, holding onto its slimy shoulders for support as it wraps its arms behind your rear. 
The slime gently gropes at your backside as it continues bucking into you.

With a forceful thrust, the slime causes you to fall on top of it nearly. 
With your head now closer to its face, it extends its tongue out toward you, giving your face a long, sultry lick. 
It lifts a hand to your nethers, 
\&lt;&lt;if setup.hasLimb($CharacterSheet_Player.info.anatomy, &quot;cocks&quot;)&gt;&gt;
wrapping its slick fingers around your length, jerking you off as it continues thrusting deeper into you.
\&lt;&lt;elseif setup.hasLimb($CharacterSheet_Player.info.anatomy, &quot;vaginas&quot;)&gt;&gt;
prodding at your clit as it digs a finger past your folds. It gently rubs a slick finger over your clit, flitting it back and forth, causing you to clench onto its manhood.
\&lt;&lt;/if&gt;&gt;
Your breathing grows staggered as you can feel yourself nearing the edge. You clench your grasp on its erection, wanting to milk it of everything it&#39;s worth. 
With a cry of pleasure, your orgasm finally hits. 
\&lt;&lt;if setup.hasLimb($CharacterSheet_Player.info.anatomy, &quot;cocks&quot;)&gt;&gt;
Your aching manhood shoots several jets of seed all over its chest.
\&lt;&lt;elseif setup.hasLimb($CharacterSheet_Player.info.anatomy, &quot;vaginas&quot;)&gt;&gt;
You feel yourself quivering slightly as a gentle stream of girlcum leaks down past your lips.
\&lt;&lt;/if&gt;&gt;

[[Continue-&gt;Encounter_Win_Slime_Sex_RideAnal_4]]</tw-passagedata><tw-passagedata pid="311" name="Encounter_Win_Slime_Sex_RideAnal_4" tags="" position="100,3975" size="100,100">The slime gives you another determined thrust, hilting itself as deep as it can go into your hole as you can feel its throbbing erection pump several waves of seed directly into your ass.

You sink deeper into the slimy embrace as you can feel its erection slowly begin to deflate, slipping out of your rear, trailing links of slimy seed between the two of you.

You revel within the afterglow.

[[Leave-&gt;Encounter_Win_Slime_Sex_RideAnal_5]]</tw-passagedata><tw-passagedata pid="312" name="Encounter_Win_Slime_Sex_RideAnal_5" tags="" position="225,3975" size="100,100">You disentangle itself from its grasp with little resistance. The slime hardly notices your missing presence, still lying on the earth as if you were still there. 
You pick up your belongings and continue with your day.

[[Continue-&gt;Village]]</tw-passagedata><tw-passagedata pid="313" name="Encounter_Win_Slime_Sex_PenetrateVagina" tags="" position="350,3975" size="100,100">As you approach the slime, you can’t resist from eyeing the admirable shape it’s been given. 
\&lt;&lt;if $ReshapeSize == &quot;Hyper&quot;&gt;&gt;
Especially considering the massive size it is now.
\&lt;&lt;/if&gt;&gt;
You push it to the ground, getting it into position for yourself.

\&lt;&lt;if $ReshapeRace == &quot;Naga&quot;&gt;&gt;
You climb over the slime, pulling its tail around your waist as you align the tip of your length with the folds of its box.
\&lt;&lt;else&gt;&gt;
You climb over the slime, pulling its legs up around your waist as you align the tip of your dick with the folds of its box.
\&lt;&lt;/if&gt;&gt;
You press your glans along the labia; it&#39;s so warm and wet you don&#39;t even need to worry about lubrication considering the nature of the slime. 
You place your hands at its side, keeping it pinned to the ground beneath your body.

[[Continue-&gt;Encounter_Win_Slime_Sex_PenetrateVagina_2]]</tw-passagedata><tw-passagedata pid="314" name="Encounter_Win_Slime_Sex_PenetrateVagina_2" tags="" position="475,3975" size="100,100">You drive your manhood deeper into its folds, its walls close in on you, wringing around and massaging your dick almost rhythmically. 
You continue pumping into it with a steady rhythm. It feels like this slime only wants to serve you now.
\&lt;&lt;if $ReshapeRace == &quot;Naga&quot; || $ReshapeRace == &quot;Minotaur&quot;&gt;&gt;
You can feel its tail reach up from behind you, tenderly caressing your back in an almost affectionate manner.
\&lt;&lt;elseif $ReshapeRace == &quot;Displacer&quot;&gt;&gt;
You notice its tentacles tenderly stroke your shoulders before moving down, holding onto your back for support.
\&lt;&lt;/if&gt;&gt;

You begin to increase your thrusts&#39; pace, dipping your manhood as deep into the slime as you can reach. 
You&#39;re perfectly accommodated within it, even to the point where you can press your entire crotch within the slime. Its vagina has completely encompassed your dick, massaging it with rhythmic pulses. 
Each thrust causes you to push through its slimy body; its body is perfect for your girth.

You can feel your dick begin throbbing with greater intensity as you close in on your climax. 
Your full balls are desperate to unload every ounce of cum directly into the eager slime. 
With one last forceful thrust and a cry of pleasure, you hilt as much of your dick as you can into its body, unleashing several waves of cum directly into the slime.

[[Continue-&gt;Encounter_Win_Slime_Sex_PenetrateVagina_3]]</tw-passagedata><tw-passagedata pid="315" name="Encounter_Win_Slime_Sex_PenetrateVagina_3" tags="" position="600,3975" size="100,100">The slime clenches and tightens around your erection, desperate to milk you of everything you&#39;re worth, eager to accept more of your cum.

You breathe a sigh of relief as your orgasm ends, slipping out of the abused womb. Trails of cum drip from the tip of your length as you take a moment to collect yourself.

You leave the slime alone on the ground after cleaning up and picking up your belongings.

[[Continue-&gt;Village]]</tw-passagedata><tw-passagedata pid="316" name="Encounter_Win_Slime_Sex_PenetrateAss" tags="" position="725,3975" size="100,100">As you approach the slime, you can’t resist from eyeing the admirable shape it’s been given. 
\&lt;&lt;if $ReshapeSize == &quot;Hyper&quot;&gt;&gt;
Especially considering the massive size it is now.
\&lt;&lt;/if&gt;&gt;
You bring it to the ground on its knees, getting it into position as you walk behind it.

You kneel behind the subdued slime, aligning the tip of your length with its rear. 
You drag the tip of your manhood along its hole; its slimy exterior is inviting, you know you don&#39;t even have to worry about lubrication considering how wet it is already. 
\&lt;&lt;if $ReshapeRace == &quot;Naga&quot; || $ReshapeRace == &quot;Minotaur&quot;&gt;&gt;
The slime whips its tail around, pulling you closer, practically begging for your entry with the wordless gesture.
\&lt;&lt;elseif $ReshapeRace == &quot;Displacer&quot;&gt;&gt;
The slime whips its tentacles back, wrapping around your torso, gently pulling your body closer, practically begging for your entry with the wordless gesture.
\&lt;&lt;else&gt;&gt;
The slime wiggles its hips for you enticingly, practically begging for your entry with the wordless gesture.
\&lt;&lt;/if&gt;&gt;

[[Continue-&gt;Encounter_Win_Slime_Sex_PenetrateAss_2]]</tw-passagedata><tw-passagedata pid="317" name="Encounter_Win_Slime_Sex_PenetrateAss_2" tags="" position="850,3975" size="100,100">You slowly begin bucking into the slime, sliding into its gooey backdoor with minimal resistance. It clenches its sphincter around you as you spread it open. 
The slime shifts slightly to better accommodate the size of your erection, making sure to be a tight, gooey sleeve for you as it pulsates rhythmically around your length.

As you begin to pick up the pace, the slime suddenly bucks back against you with eagerness, forcing you to stuff as much of your length as possible. 
You grip it tightly, hugging the slime by the waist as you thrust into it with greater effort to remind it who&#39;s in charge. 
Each thrust causes your heavy balls to slap against its body.

You cannot keep up the efforts for as long as you&#39;d hope due to the constant clenching and tugging the slime has on your dick. 
You can feel your resistance beginning to wear down as your thrusts become more frantic. Your breaths stagger as you can feel your orgasm building up.

[[Continue-&gt;Encounter_Win_Slime_Sex_PenetrateAss_3]]</tw-passagedata><tw-passagedata pid="318" name="Encounter_Win_Slime_Sex_PenetrateAss_3" tags="" position="975,3975" size="100,100">Giving one last forceful thrust, you hilt as much of your dick inside its ass as you can fit, making sure that it takes as much cum as possible. 
The slime eagerly clenches around you, desperate to milk you of as much of your cum as possible. 
\&lt;&lt;if setup.hasLimb($CharacterSheet_Slime.info.anatomy, &quot;cocks&quot;)&gt;&gt;
It shoots several ropes of cum onto the ground beneath it as well.
\&lt;&lt;/if&gt;&gt;

You sigh in relief as the high of your climax dies down, your dick deflates within it trailing links of cum as you slide out. 
For a brief moment before taking a moment to collect yourself, you revel in the afterglow.

You leave the slime alone; it falls lazily onto the ground once you let go of it. 

[[Leave-&gt;Village]]</tw-passagedata><tw-passagedata pid="319" name="Encounter_Win_Slime_Sex_TooBig" tags="" position="1100,3975" size="100,100">You eye the tiny slime, sure your creation is beautiful, but what could it do considering the sheer size you have over it?

[[Penile Masturbation-&gt;Encounter_Win_Slime_Sex_TooBig_PenileMasturbation]]
[[Vaginal Masturbation-&gt;Encounter_Win_Slime_Sex_TooBig_VaginalMasturbation]]
[[Hurl-&gt;Encounter_Win_Slime_Sex_TooBig_Hurl]]</tw-passagedata><tw-passagedata pid="320" name="Encounter_Win_Slime_Sex_TooBig_PenileMasturbation" tags="" position="1225,3975" size="100,100">You look at the slime. So small, so vulnerable. Something about how tiny it is in comparison to your massive body turns you on. 
The sight of your erection gives you a wicked idea. 
\&lt;&lt;if setup.getStatValue($CharacterSheet_Player, &quot;cock&quot;) &gt; 120 &amp;&amp; setup.getStatValue($CharacterSheet_Player, &quot;cock&quot;) &gt; setup.getStatValue($CharacterSheet_Slime, &quot;height&quot;)&gt;&gt;
You grin to yourself as you bring it down to your girth, enjoying the sight of your penis towering over the smaller slime.
\&lt;&lt;else&gt;&gt;
While your dick doesn&#39;t tower over the slime, your body&#39;s sheer size is enough to satisfy you.
\&lt;&lt;/if&gt;&gt;

The slime does its best to wrap around your length as you keep it firmly clutched close to your body. 
You almost crush the slime with your grasp, but it holds the form you gave it surprisingly well.

You continue jerking yourself off with slow, repeated strokes as you gradually increase the pace. 
The slime continues worshipping your manhood, stroking with increasing eagerness.

Your chest heaves as your breathing becomes more frantic. Your climax quickly approaches, spurred on by the warm feeling of the slime on your length. 
You clutch it tightly to your erection as your orgasm hits, shooting waves of cum into the air. 
There is so much cum that the slime within your grasp is completely drenched in the white cream.

Satisfied, you laugh to yourself at its predicament, but you think a little reward is in order for the lesser creature.

You bring it to your mouth, licking the slime clean before setting it back down. You clean yourself off before deciding to continue with your day, refreshed from the session.

[[Continue-&gt;Village]]</tw-passagedata><tw-passagedata pid="321" name="Encounter_Win_Slime_Sex_TooBig_VaginalMasturbation" tags="" position="100,4100" size="100,100">You look at the slime. So small, so vulnerable. 
Something about how tiny it is compared to your massive body turns you on. You can feel your clit aching with need, demanding your attention as it erects slightly. 
You grin to yourself as you bring the slime down to your labia, placing its head against your clit.

The slime reflexively wraps its hands around you, bringing its face closer to give your throbbing clit a long, wet lick.

You reflexively clench your legs together, wanting to get more from this slime. 
The slime eagerly works with your clit, tugging on it gently and making sure to rub it in all the right ways.

You dig a finger past your lips, fingering yourself gently as the slime continues worshipping your clit.

You clench around your fingers; you can feel your orgasm quickly approaching by the eager stimulation. 
It doesn&#39;t last as long as you&#39;d hoped, but the slime has far greater technique than you would have expected.

Your chest heaves as your breathing grows more frantic. You clench your legs closer together as you wring your cunt around your fingers. 
With a cry of pleasure, you finally cum. Girlcum slowly peters out from your lips, spilling out onto the ground beneath you as the slime continues licking and sucking on your clit. 
\&lt;&lt;if setup.HasLimb($CharacterSheet_Player.info.anatomy, &quot;cocks&quot;)&gt;&gt;
Your dick joins in as well, shooting several ropes of cum far into the sky.
\&lt;&lt;/if&gt;&gt;


Satisfied, you loosen your grip on your fingers and the slime. You set it down gently on the ground before deciding to continue with the day, refreshed from the session.

[[Continue-&gt;Village]]</tw-passagedata><tw-passagedata pid="322" name="Encounter_Win_Slime_Sex_TooBig_Hurl" tags="" position="225,4100" size="100,100">You look at the tiny slime. So small, so vulnerable.

You pick it up within your grasp, admiring the futility of its predicament. The slime doesn&#39;t show any signs of fear or concern for its well being. This gives you a wicked idea.

Gripping it tightly, you reel your arm back, preparing to throw it. With a forceful swing, you hurl the slime across the horizon. 
You can almost swear you hear a squeal of pure glee as it passes your ear.

It flies out of view rapidly, who knows how far exactly you chucked it.

[[Continue-&gt;Village]]</tw-passagedata><tw-passagedata pid="323" name="Encounter_Win_Slime_Sex_Abandon" tags="" position="350,4100" size="100,100">You leave the slime to itself. The slime quickly reverts to its spherical blob shape as you abandon it.

[[Leave-&gt;Village]]</tw-passagedata><tw-passagedata pid="324" name="Encounter_Loss_Slime" tags="" position="475,4100" size="100,100">The slime begins crawling over your form; its slick form glides along your torso as it sinks to your crotch.

[[Escape-&gt;Encounter_Loss_Slime_Escape]]
[[Submit-&gt;Encounter_Loss_Slime_Submit]]</tw-passagedata><tw-passagedata pid="325" name="Encounter_Loss_Slime_Escape" tags="" position="600,4100" size="100,100">You kick and squirm at the slime, but your blows hardly make any impact on its exterior. Seeing your apparent discomfort, the slime slinks off your torso, giving you a chance to escape.

[[Run back to the village-&gt;Village]]</tw-passagedata><tw-passagedata pid="326" name="Encounter_Loss_Slime_Submit" tags="" position="725,4100" size="100,100">Feeling weakened from the ordeal, you do not attempt to resist the encroaching slime. It continues uninterrupted.

[[Penis Submit-&gt;Encounter_Loss_Slime_Submit_Penis]]
[[Chest Submit-&gt;Encounter_Loss_Slime_Submit_Chest]]
[[Rear Submit-&gt;Encounter_Loss_Slime_Submit_Rear]]</tw-passagedata><tw-passagedata pid="327" name="Encounter_Loss_Slime_Submit_Penis" tags="" position="850,4100" size="100,100">The slime worms its way past your garments, sliding its slick body uninterrupted until it wraps around your shaft.

The constant assault of groping and squeezing causes your manhood to rise to full mast. 
The creature eagerly latches onto your manhood, caressing your balls as its entire body shifts to gently massage your manhood with slow repeated strokes.

Every throb from your erection causes it to wobble slightly in overeagerness. Whatever it wants, it&#39;s seemingly enthralled by your girth.

There is hardly any semblance of technique within its actions, just an eager blob pulsating its entire body to massage your length. 

The slime is clearly experienced because you can feel yourself growing closer to the edge.

With each pulse of your manhood, the slime writhes tighter around your form, desperate to coax you to release. 
Your breathing grows staggered as your resistance falls, with one final thrust into it you finally reach climax.

Waves of your cum are absorbed into its body; you feel yourself growing weary from the exertion. 
Is this what it wants? Are you nothing but a supplier to the hungry slime? 

Disoriented, you pass out from exhaustion.

You wake up sometime later, not quite sure how much time has passed. 

&lt;&lt;print setup.getFightReward(null)&gt;&gt;

[[Continue-&gt;Village]]</tw-passagedata><tw-passagedata pid="328" name="Encounter_Loss_Slime_Submit_Chest" tags="" position="975,4100" size="100,100">You clutch onto the slime; its damp body contorts underneath your grasp as you draw it closer.

The slime wraps around your torso, slinking past your garments as it tenderly caresses your chest. 
It wriggles and writhes around your torso, making sure to coat every inch it can reach. 
Each attempt you make at touching it only causes it to bounce and squirm even more.

The sentient blob is seemingly content on attempting to latch onto your pectorals, rubbing around your areola, possibly in an attempt to entice you. 
It pulsates with an increasingly faster rhythm.

Its presence causes heat to stir within your loins as it gropes your chest. 
The slime isn&#39;t stopping with the tender caresses, leaving wicks of ooze in its wake.

It seems to take notice of your enjoyment, but before you truly relish the moment, it quickly shoots itself into your mouth, past your lips without drawing its presence away from your chest.

You gag and sputter at the strange taste of the slime, but you don&#39;t choke on it yet. 
The slime just contorts further as you try to pull your head back, stretching its body to match your attempts at making distance.

Whatever it wants from you, it&#39;s going to get it now. You can feel a strange sensation of pressure building up within your chest. 
Is it stealing your air? Or perhaps it&#39;s crushing your torso beneath its weight.

You&#39;re feeling dizzy, the world is spinning, and the difficulty of breathing with the slime down your throat isn&#39;t helping. 

Disoriented, you pass out from exhaustion and pleasure.

You wake up sometime later, not quite sure how much time has passed. 

&lt;&lt;print setup.getFightReward(null)&gt;&gt;

[[Continue-&gt;Village]]</tw-passagedata><tw-passagedata pid="329" name="Encounter_Loss_Slime_Submit_Rear" tags="" position="1100,4100" size="100,100">You shift away from the slime, pulling it down from your chest and closer to your rear.

Perhaps it wouldn&#39;t be the worst thing to happen if you offered your ass? After all, the slime seemingly does want something from you.

The slime wraps around your thighs, tenderly caressing your taint. 
You shift slightly, trying to make room for its presence as it gently presses its body along your glutes.

It snakes its way through your sphincter, pulsating as it shifts several inches of itself deep into your hole.

You clench around it; a faint numbing pleasure fills your body as it digs deeper into your ass. 
The muscles of your sphincter stretch out as the slimy creature continues burrowing, wearing down your resistance as you squirm in pleasure.

A rhythmic pulsing gently massages your nethers as it continues, slowly shifting in and out of your rear. 
Gentle pumps coax you into relaxing as you give in to the pleasurable sensation.

You gasp as the entirety of the slime slips into your body, you can feel it writhing within you as you feel like you&#39;re ready to reach orgasm, but are prevented by a disorienting sensation.  

It feels as if your body is going to give in as if at any moment the slime will burst out of you.
Your entire body gives out, consciousness fades as everything turns to black.

You wake up sometime later, not quite sure how much time has passed. 

&lt;&lt;print setup.getFightReward(null)&gt;&gt;

[[Continue-&gt;Village]]</tw-passagedata><tw-passagedata pid="330" name="Tok_Fight_Intro" tags="" position="1225,4100" size="100,100">\&lt;&lt;set $CharacterSheet_Tok.quest.met = true&gt;&gt;
\&lt;&lt;if $CharacterSheet_Tok.quest.beatenOnce&gt;&gt;
&lt;&lt;include Tok_Fight_Intro_BeatenOnce&gt;&gt;

\&lt;&lt;else&gt;&gt;
While traversing a quiet swamp, you feel thunderous footsteps shake the ground near you. From behind nearby rotten stumps, you see a muscle-bound black titan roaming in the darkness.
His green eyes shine against the gathering twilight. Suddenly, he pauses and turns his massive body towards you.

His huge cock rises to life.

You gaze upon his muscular frame. Massive white stripes course across his arms and chest, but the rest of his form is totally black. As he walks towards you, you notice that his body seems to be entirely made of a thick goop. It moves along his body in a semi-liquid state; puddles of it form along his steps.

[[Continue-&gt;Tok_Fight_Intro_2]]
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="331" name="Tok_Fight_Intro_BeatenOnce" tags="" position="100,4225" size="100,100">&lt;&lt;print setup.displayEncounterImage($CharacterSheet_Tok.info.picture)&gt;&gt;
While traversing a quiet swamp, you feel thunderous footsteps shake the ground near you.

You recognize them, and as you expected, you see a muscle-bound black titan approaching you.
Tok&#39;s glowing green eyes study your form.

&quot;So... Are you here to fight once again? Or do you have some Essence to trade?&quot;

[[Trade-&gt;FightMoveStore]]
[[Fight-&gt;FightLogic]]

[[Leave-&gt;Village]]</tw-passagedata><tw-passagedata pid="332" name="Tok_Fight_Intro_2" tags="" position="225,4225" size="100,100">&lt;&lt;print setup.displayEncounterImage($CharacterSheet_Tok.info.picture)&gt;&gt;

There was no hiding from him; his bright green eyes eagerly study you. You notice his brutish mouth morph into a slight smile.

&quot;Mnnn... People don&#39;t cross here often, what brings you here before I snack off ya?&quot;

You could feel his nefarious intents as his smile warps into a predatory smirk.

&lt;&lt;print setup.getFightStartPassages($CharacterSheet_Tok)&gt;&gt;</tw-passagedata><tw-passagedata pid="333" name="Tok_Fight_Won" tags="" position="350,4225" size="100,100">Tok stumbles back, black goo gushes from his wounds.

&quot;How did you grow so powerful in such a short amount of time?&quot; He mutters.

\&lt;&lt;if setup.hasAbility($CharacterSheet_Player,&quot;Ability_HostOfEcho&quot;)&gt;&gt;
\&lt;&lt;if setup.getStatValue($CharacterSheet_Player, &quot;corruption&quot;) &gt; 30&gt;&gt;
His vicious snarl slowly morphs as he gazes upon your corrupted form...

&quot;I can see you&#39;ve fed the monster inside you. It won&#39;t be long until you&#39;re completely consumed by its power...&quot;
\&lt;&lt;else&gt;&gt;
&quot;Why do you persist in keeping your humanity... Pleasure beyond anything in this world could be yours if you truly embraced the monster inside you.&quot;
\&lt;&lt;/if&gt;&gt;

He now smirked as his form slowly loses its shape.
A large puddle of black goo gradually forms at his feet.

&quot;Next time we meet, have some Essence ready. You&#39;ve probably gathered a lot at this point.&quot;

He seems to be addressing the &lt;&lt;print setup.getRace($CharacterSheet_Player.symbiote.anatomy)&gt;&gt; inside rather than yourself.

&quot;Even if we are cut from a different cloth, I&#39;m sure I can grant you something that can improve you faster than your host ever could.&quot;
\&lt;&lt;/if&gt;&gt;

His body keeps dripping more of its goo until he fully dissolves into the ground.

You are alone once more. Yet the monster&#39;s promise of power resonates in your thoughts...

&lt;&lt;print setup.getFightReward($CharacterSheet_Tok)&gt;&gt;
&lt;&lt;set $CharacterSheet_Tok.quest.beatenOnce = true&gt;&gt;

[[Leave-&gt;Village]]</tw-passagedata><tw-passagedata pid="334" name="Tok Fight Lost" tags="" position="475,4225" size="100,100">The goo covering you made every movement difficult and slow. You feel it moving along your crotch. As time went on, it becomes hard to think straight as lust builds inside you. Tok looked on with a predatory grin.

&quot;Seems like we&#39;re done here...&quot;

[[Escape-&gt;Tok Fight Lost_Escape]]
[[Submit-&gt;Tok Fight Lost_2]]</tw-passagedata><tw-passagedata pid="335" name="Tok Fight Lost_Escape" tags="" position="600,4225" size="100,100">Against impossible odds, you manage to pull yourself away from the black gooey creature. 

You run as fast as you can, desperately wiping off the goo off of your body along the way.

Tok does not chase you.

[[Continue-&gt;Village]]</tw-passagedata><tw-passagedata pid="336" name="Tok Fight Lost_2" tags="" position="725,4225" size="100,100">You feel the goo surrounding you solidifying entirely. From your chest to your toes, a tight gooey casing prevents you from moving. It slowly spreads up to your neck. Tok kneels down and rubs your chest passionately.

&quot;Mnn... I am already quite excited!&quot;

His cock throbs and leaks some goo down your neck. He spreads it himself with his hands and cock. Soon only your hands and head are free from the tight prison.

[[Continue-&gt;Tok Fight Corrupted]]</tw-passagedata><tw-passagedata pid="337" name="Tok Fight Corrupted" tags="" position="850,4225" size="100,100">From within your flesh, $CharacterSheet_Player.symbiote.name roars in pleasure. Your muscles start to grow under the tightness of Tok&#39;s goo. 
His eyes widen in excitement as you grunt in discomfort. Your whole body is impossibly tight and he shows no signs of letting you go. 
Your cock snakes along your pecs as it grows bigger and thicker. 

You turn into your monstrous &lt;&lt;print setup.getRace($CharacterSheet_Player.symbiote.anatomy)&gt;&gt; form.

Yet it is not enough to free yourself. Tok drags his oozing cock to your arms and neck. Your massive body glistens in the $CharacterSheet_Player.symbiote.color layer of thick goo.

&quot;I&#39;ll make sure to put your body to better use.&quot;

Tok grabs you into a tight bear hug. His whole body oozes all over you. Every inch he touches shakes with pleasure.

Your muffled protests soon turn to loud moans. 

His corrupting influence quickly crawls up your neck. 

[[Embrace the changes-&gt;Tok Fight Corrupted 2]]</tw-passagedata><tw-passagedata pid="338" name="Tok Fight Corrupted 2" tags="" position="975,4225" size="100,100">You&#39;ve never felt anything like this... His goo quickly rushes inside you and enters your mind. Visions of yourself worshipping his body and corrupting other adventurers floods your consciousness. Your memories become warped. All you can recall is a life of worship. 

Tok is all that matters, his pleasure is your own. 

You feel yourself losing your form. Your soul barely holds on to what is left of you. Your gooey body turns into a puddle of liquid as Tok reforms and grins. He brings his cock to you. You lash out and coil yourself around it like your life depended on it.

&quot;Yesss... You are mine now... Consume my seed and become whole again!&quot;

[[Worship Tok-&gt;Tok Fight Corrupted 3]]</tw-passagedata><tw-passagedata pid="339" name="Tok Fight Corrupted 3" tags="" position="1100,4225" size="100,100">Your whole body crawls all over him. His cock is perfect, so thick and juicy. Nothing matters more than embracing your god&#39;s form. You move along the shaft and feel every vein, every ridge. It sends shivers of pleasure all over your liquid body. 

Slowly, your body changes. A mouth forms around Tok&#39;s cock; he groans in approval. Black arms rise from the goo and worship every muscle they could reach. The rest of your upper body soon follows as thick tentacles emerge from your back.

You are now dripping black corrupting goo with every crawl. Tok moaned as you suck him harder and faster. Passion overwhelms your every move. Your tentacles cups and massages his balls. He grasps the back of your head and forces his whole crotch down your mouth. 

&quot;FUCK YES! YOU&#39;RE MINE!&quot;

A mighty roar emerges from your god as gallons of cum rushes inside you. Your whole frame grows broader and more defined with every shot. Bright green eyes form on your head as you are reborn. 

You grow big enough to reach your master&#39;s chest. 
You feel... Perfect. 
With a body full of your god&#39;s seed, you could not ask for better.

And like an afterthought, your soul quickly withers and dies under the weight of your master&#39;s corruption. 

It&#39;s not like you need it anymore...

(&quot;$CharacterSheet_Player.info.name, Spawn of Tok&quot; will now appear in the world (in a later version...))

&lt;&lt;print setup.getFightReward(undefined)&gt;&gt;

[[This body has moved on...-&gt;Death]]</tw-passagedata><tw-passagedata pid="340" name="StoryInit_EndingSheet" tags="" position="1225,4225" size="100,100">&lt;&lt;include Ending_OneWithApothus&gt;&gt;
&lt;&lt;include Ending_NyxChosenAscension&gt;&gt;

&lt;&lt;run console.log(&quot;post endings&quot;)&gt;&gt;

&lt;&lt;set $EndingSheet =
[
    $Ending_OneWithApothus,
    $Ending_NyxChosenAscension,
];&gt;&gt;</tw-passagedata><tw-passagedata pid="341" name="Ending_NyxChosenAscension" tags="" position="100,4350" size="100,100">&lt;&lt;run console.log(&quot;setting Ending_NyxChosenAscension&quot;)&gt;&gt;

&lt;&lt;set $Ending_NyxChosenAscension = 
{
    id: &quot;Ending_NyxChosenAscension&quot;,
    unlocked: false,
    onPostWorldReset: function()
    {
        State.variables.CharacterSheet_Player.applyAbilityRuntimeData(State.variables.Ability_MemoriesOfTheChosen);
    }
};&gt;&gt;</tw-passagedata><tw-passagedata pid="342" name="Ending_OneWithApothus" tags="" position="225,4350" size="100,100">&lt;&lt;run console.log(&quot;setting Ending_OneWithApothus&quot;)&gt;&gt;

&lt;&lt;set $Ending_OneWithApothus = 
{
    id: &quot;Ending_OneWithApothus&quot;,
    unlocked: false,
    onPostWorldReset: function()
    {
        State.variables.CharacterSheet_Player.applyAbilityRuntimeData(State.variables.Ability_MemoriesOfApothus);
    }
};&gt;&gt;</tw-passagedata><tw-passagedata pid="343" name="Planetary69Ending" tags="" position="350,4350" size="100,100">((To be implemented at a later stage!))
[[leave-&gt;Village]]</tw-passagedata><tw-passagedata pid="344" name="Death" tags="" position="475,4350" size="100,100">\&lt;&lt;run $CharacterSheet_Player.removeAbilityRuntimeData($Ability_EmbracedByNyxsLight);&gt;&gt;
\&lt;&lt;run setup.setDays((~~($Day / ($DaysPerCycle*4)) + 1) * ($DaysPerCycle*4)) &gt;&gt;

You black out...

\&lt;&lt;if $DeathText == $DeathTextEnum.POST_APOTHUS&gt;&gt;
Your soul shakes with unease.
\&lt;&lt;/if&gt;&gt;

[[Continue-&gt;Death 2]]
\&lt;&lt;if $DeathText != $DeathTextEnum.POST_APOTHUS&gt;&gt;
[[Skip-&gt;Village]]
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="345" name="Death 2" tags="" position="600,4350" size="100,100">Time moves on...

\&lt;&lt;if $DeathText == $DeathTextEnum.POST_APOTHUS&gt;&gt;
Apothus&#39;s rampage only grows with each passing days.
\&lt;&lt;/if&gt;&gt;

\&lt;&lt;if $DeathText == $DeathTextEnum.POST_APOTHUS&gt;&gt;
[[Continue-&gt;Death_Post_Apothus]]
\&lt;&lt;else&gt;&gt;
[[Continue-&gt;Death 3]]
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="346" name="Death 3" tags="" position="725,4350" size="100,100">A burning light surrounds your formless self.

Some fragment of what you remember as &quot;sense&quot; slowly come back to you.

You see the light. It&#39;s so powerful it feels like you&#39;re on fire.

You recognize this feeling... You see the Eclipse gazing upon you. You and countless others.

Its magics flows around your soul, you feel your old self coming back.

[[Get up-&gt;Death 4]]</tw-passagedata><tw-passagedata pid="347" name="Death 4" tags="" position="850,4350" size="100,100">Countless monsters are already up. They immediatly resume their mindless rampage even though their bodies are still incomplete.

Your Talisman of Guidance glows in a bright golden light. A bright white portal suddenly opens in front of you. 
Countless monsters are about to rush you as they notice your escape route.

Without a moment&#39;s notice, you jump in.

[[Go back to the Village-&gt;Village]]</tw-passagedata><tw-passagedata pid="348" name="Death_Post_Apothus" tags="" position="975,4350" size="100,100">A shadow is cast over your reforming body.

The shape of a demon, so massive and tainted it overshadows the eclispe itself.

A terrifying grins curls from Apothus&#39;s lips.

The monsters around him try to run, only to be taken by the flood of corruption dripping from his body.

You must leave... (End of this version)

[[Use the Talisman to escape-&gt;Village]]</tw-passagedata><tw-passagedata pid="349" name="Intro01" tags="" position="1100,4350" size="100,100">You walk along the empty streets of your ruined village, great plumes of smoke rising from homes and stalls. 

Debris forces you to walk with caution, taking slow and careful steps as you wander through the eerily quiet remnants.

Through the barred windows of small shacks lining the street, you couldn’t see a single soul, doors half ajar, creaking on their rusted hinges. 

The village is eerily quiet- more so than usual after an attack.

Your tired eyes, filled with melancholy, turn upwards to gaze at the sky. 
The sun is low on the horizon, bathing the barren sands with a soft orange glow. 
Soon, that last bastion of light and warmth would sink below the shifting sands, swallowed by the march of time.

The expanse of the world- the vast, eerie emptiness of the desert, and the yawning abyss of the sky above. It all makes your troubles feel meaningless; 
a single grain of sand in a sea of millions, a sea which was shifted and warped by the winds and the storms. 

Infinitesimally small.

[[Continue-&gt;Intro02]]</tw-passagedata><tw-passagedata pid="350" name="Intro02" tags="" position="1225,4350" size="100,100">A glint catches your eye in the purple twilight sky above. 
One of the stars shines brighter than those around it, a magnificent mixture of oranges and reds, blazing like the flame of a brazier. It was quite beautiful, steadily growing larger and larger up in the sky. 

Though... as you watch the spectacle, you hear an alarming sound. A rumble which starts as the dull roar of an engine quickly grows into an explosive scream. 
The dancing light suddenly burst forth with a brilliant flash of white and orange, filling your vision. 
Your heart begins to pound as you realize what was coming.

Before you can react, you are overwhelmed by an earth-shattering blast. 
You hear the sounds of crumbling stone and the cries of warped steel. 

The world quickly grows dark.

[[Continue-&gt;Intro03]]</tw-passagedata><tw-passagedata pid="351" name="Intro03" tags="" position="100,4475" size="100,100">You awaken sometime later, your thoughts murky and body heavy.
Instead of pain, you feel as if you’ve been submerged in a pool of warm honey.  
A thick liquid gathers around you and rushes into your body from every orifice.
 
You try to scream, but the air in your lungs clashes with some thick goo entering your throat. It thrusts inside you without mercy. 
 
It enters through your ears, your nose, and soon, you feel it swirling around the inside of your skull.
As quickly as it appeared, it fully disappears in your body.
 
[[Continue-&gt;Intro04]]</tw-passagedata><tw-passagedata pid="352" name="Intro04" tags="" position="225,4475" size="100,100">You suddenly gasp, your lungs filling with air once more. You gulp for air for a few more moments, your erratic breaths slowly stabilizing as the world once again turns peaceful. 

As you plant your hands to the ground to get up, you feel as though you touched hot metal. Looking around, you noticed what little grass there was had been turned to ash.

You lay in the center of a large crater, its still-flaming edges licking at the street, staining the adobe exterior of nearby buildings with the harsh black of ash.

You quickly scramble backward away from the flaming center, crawling up the slope of the pit.

What had happened? 
Something that you’d never quite witnessed before. 
Something dangerous, something deadly.
Yet, here you stand without a scratch. 

You think it best to reflect once you make it back home- it certainly doesn&#39;t feel safe to be outside. Looking down, you notice your body and clothes are stained with ash and dirt. 
You decide to return home, where your bed is waiting for you.
 
[[Go Home-&gt;Intro05]]</tw-passagedata><tw-passagedata pid="353" name="Intro05" tags="" position="350,4475" size="100,100">You enter your home. Closer to the center of town, it was fortunately spared from the chaos near the fringes. Everything is as you left it, bathed in soft moonlight coming in through the windows. 
 
It feels like something is moving inside of you.
Your stomach turns, muscles growing increasingly sore as you stand in your dark kitchen.
 
It&#39;s as though your blood has a mind of its own. You feel it pumping through your veins. You try to relax on your bed and eventually fall asleep out of exhaustion.
 
[[Sleep-&gt;Intro06]]</tw-passagedata><tw-passagedata pid="354" name="Intro06" tags="" position="475,4475" size="100,100">You are surrounded by a cold, shifting void. Deep purple mist twists and curls around your legs; curling and twisting in wisps and trails. 

It licks at your feet, caressing your skin with a glacial embrace. 

A dim violet sky stretches across the horizon, the brightest hues found directly above you- as though you’re at the bottom of a deep, purple sea. 

There was nothing for miles...

...and miles.
...and miles.

[[Look Around You-&gt;Intro06_2]]</tw-passagedata><tw-passagedata pid="355" name="Intro06_2" tags="" position="600,4475" size="100,100">Behind you, the harsh black plane seems to stretch as far as the eye could see, the distance occluded by a murky, dark fog. 
Before you, there is naught but a single, endless, infinite drop. 
The expanse descends into darker shades of purple.
And at the very bottom- if there even was one- your eyes are scorched by one of the strongest and harshest lights you have ever seen.
That intense purple light almost seems to throb like a heartbeat, shifting and simmering, writhing, growling, moaning, pulsing.

[[Continue-&gt;Intro06_3]]</tw-passagedata><tw-passagedata pid="356" name="Intro06_3" tags="" position="725,4475" size="100,100">You stand there for what feels like hours.

The biting, otherworldly cold gnaws at your skin, and pulls at your mind. The mist around your feet dances almost tauntingly, bouncing and twirling in no way a gaseous substance should.

This place is not meant for mortals. 

Beyond all of that- beyond the unknowable, unspeakable sensations, beyond the empty and cold landscape, you felt something.

Something wonderful.
Something beautiful.

You begin to feel a comforting warmth wash over you, beating back that harsh cold, pulling you into a loving embrace of life and love.

This feeling is your oasis in this strange, alien desert.

[[Continue-&gt;Intro06_4]]</tw-passagedata><tw-passagedata pid="357" name="Intro06_4" tags="" position="850,4475" size="100,100">The life-bearing warmth which caresses your skin and fills your bones grows steadily stronger as time passes, expanding from the mere simmer of a candle to the comforting heat of a large hearth fire. 
The mist around your feet suddenly disperses, pushed back by some unseen force. 

You can feel something moving around you, some thick and heady mass curling around your body playfully. 
It teasingly pushes against your chest for a moment, with a strength that nearly makes you fall over. 
You feel the force suddenly step away, its writhing aura growing stronger a few feet in front of you. 

From the black, reflective ground before you rises a huge, writhing mass of semi-solid goo. It seems unstable, its color rolling through all different hues and shades. 
The goo slowly morphs into different forms, seemingly indecisive of its own nature.

Curiously, you aren’t terrified at all- whatever this strange, goopy creature was, it appeared to be the source of that blazing warmth that surrounded you. 
You could feel in your soul that it was not here to hurt you. 

You stare curiously as it cycles in and out of the appearance of creatures you have seen. Some even based on beasts you&#39;ve only heard of in stories- and some that none in your homeland could ever hope to imagine.
As you focus on it, its shape seems to be desperately trying to define itself.

You feel as though it was looking to you for help.

That it should become...
 
[[A Monstrous Symbiote-&gt;Intro07][setup.setRace($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.SYMBIOTE)]]
[[A Naga-&gt;Intro07][setup.setRace($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.NAGA)]]
[[A Minotaur-&gt;Intro07][setup.setRace($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.MINOTAUR)]]
[[A Werewolf-&gt;Intro07][setup.setRace($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.WOLF)]]</tw-passagedata><tw-passagedata pid="358" name="Intro07" tags="" position="975,4475" size="100,100">\&lt;&lt;if (setup.getRace($CharacterSheet_Player.symbiote.anatomy) == &quot;Symbiote&quot;)&gt;&gt;
You see the gooey head form into a vaguely humanoid shape, a chiseled jaw poking through the formless blob. 
It is accompanied by a sharply defined chin, casting heavy shadows on the monster’s increasingly lean neck. 
Several dozen thin, white veins begin to snake in all directions down from his head, spreading across his arms and torso, racing towards his feet.

Twisted white patches slowly take shape where his eyes should be, forming into solid shapes from milky trails that swirled around his face.
He stares down at you with his featureless, marble-white eyes, flexing the sharp claws that form at the tips of his long fingers. 
His mouth curls into a long, hungry grin, several rows of gnarled and sharp teeth rising out from the goopy interior of his jaw.
He lets out a low, rumbling, sensual growl; one that makes your chest vibrate, one that makes your body tremble as the sound waves pass through your bones.

A long, thick, deliciously slimy tongue slides out from his mouth, as thick as your wrist and as long as your entire body. 
It flicked eagerly at you, flinging saliva throughout the air.

What a monstrous, yet beautiful hunk.
\&lt;&lt;elseif (setup.getRace($CharacterSheet_Player.symbiote.anatomy) == &quot;Naga&quot;)&gt;&gt;
The otherwise goopy, shapeless form begins to shift, tightening and defining itself as though it was clay being molded by an invisible hand. 
It rises upwards, growing taller as the shape of a head rises out from the top, shoulders widening as the torso grows steadily more defined. 

Lower down, the form stretches out longways, bent and molded into a long, thick, serpentine tail that merges seamlessly with the humanoid upper-body of the muscle-bound beast.
Its head quickly morphed into a serpentine muzzle, whose form was accompanied by scales which pushed out from beneath the monster’s goopy exterior. 

Two large, fan-like protrusions of scales flanked the head, reminding you of an opulent head-dress fit for a king. 
The beast opens its mouth, flexing its powerful, scaly jaw as two massive fangs rise out of the roof of its maw. 
They drip with a sickly green venom, curving inwards like two daggers. 
Two cold, reptilian eyes form above the muzzle, blood-red pupils staring deeply into your soul. That frosty gaze makes your skin grow cold.

His tail slithered around in a hypnotic arc, multi-colored scales cascading in an endless loop of intricate patterns.
The naga’s unnerving mouth curls into a coy grin as it leers down at you, lower half stretching even further, into a &lt;&lt;print setup.getLength(70)&gt;&gt; long body.

What a terrifying, yet gorgeous monster. 
\&lt;&lt;elseif (setup.getRace($CharacterSheet_Player.symbiote.anatomy) == &quot;Minotaur&quot;)&gt;&gt;
The otherwise goopy, shapeless form begins to shift, tightening and defining itself like wet clay pinched by invisible fingers. 

Broad, powerful shoulders appear below the still-formless shape of the head, arms thickening and stretching outwards, legs growing longer, torso growing thicker. 

Its calves begin to bend backwards, formless feet defining into the powerful hooves of a massive bovine beast. 
Its head stretches forward, a primal muzzle forming as the goop recedes into the monster’s body. 

Two thick, curled horns push out from the top of his head, each one as thick as your arms, their exterior the color of volcanic soil. 
From behind, the thin tail of a bull began to swing between his legs.

In the wake of the vanishing goop is left thick tufts of fur, coating the legs and head, trailing down the center of the minotaur’s muscular torso; a large patch of fur blooms out from the deep valley of his powerful pecs, forming a V-shape with a long, thin trail dividing his expertely chiseled abs. 
The minotaur glances down at his bulging body, thick chest rising and falling with each of his strong huffs. 
His nostrils flex with each breath, hot air and the smell of testosterone wafting past your face each time he opened his mouth.
There was a deeply hungry look in his eyes as he stared down at you, as though he was looking for more.

What a primal, yet mighty creature.
\&lt;&lt;elseif (setup.getRace($CharacterSheet_Player.symbiote.anatomy) == &quot;Werewolf&quot;)&gt;&gt;
The otherwise goopy, shapeless form begins to shift, tightening and defining itself like wet clay pinched by invisible fingers. 

The vague shape of a narrow, lean-muzzled head rises out from the top of its morphing mass, accompanied by a thick neck and incredibly broad shoulders.

A pair of large ears sprouts from the head as the goopy beast opens its maw wide, letting out a gargled yet undeniably wolfish howl. 

It pierces your ears, breaking the otherwise crushing silence of this otherworldly plane. 

Several sets of large, pearly-white teeth emerge inside his mouth, their tips as sharp as daggers and curves as elegant as sickles. 

Two wild, hungry eyes then appeared beneath his ears, pupils dilated in the intense euphoria the beast was no-doubt experiencing.

His chest widens, filling out the space in front of his torso rather nicely. His waist also widens, a gap appearing in the shifting goo as the unmistakable shapes of digitigrade legs form on his lower half. 
His feet tilt upwards, the beast flexing his pawed toes as he rises taller and taller. 
His fingers grow longer, ends morphing into massive, sharp claws that look ready to rip through steel.

Then, all along his body, the writhing goo begins to recede, leaving in its wake a thick layer of soft canine fur. 
Behind his legs falls a thick, fluffy tail, curling in a gorgeous arc. 

He raises his stretching, shifting arms up high, flexing his powerful claws as the soft crack of bones signal the end of his transformation to a mighty beast. 
His wild, wolfish eyes stare down at you, your face level with his thick, furry chest.

What a hungry, yet handsome beast.
\&lt;&lt;/if&gt;&gt;

[[Continue-&gt;Intro07_2]]</tw-passagedata><tw-passagedata pid="359" name="Intro07_2" tags="" position="1100,4475" size="100,100">The air around the &lt;&lt;SymbioteRace&gt;&gt; seems to grow a little hotter, the edges of their beautiful form shimmering with an eminent power. 

You can feel it in the air, steadily building in intensity around them, the feeling as tense as a bowstring drawn to its utter limit. 

It permeates your bones, resonating deep within your soul, filling you with an utterly indescribable feeling.

You’ve never quite felt such an intimate link to another being before.
The goo around him suddenly speeds up, it rushes to every inch of his body. It grows the &lt;&lt;SymbioteRace&gt;&gt; into a beast of muscles and power.
It then gathers to its waist. You blush as a fat humanoid cock grows on the monster&#39;s crotch.

The &lt;&lt;SymbioteRace&gt;&gt; looks at his body, he seems enthralled with the form you&#39;ve expressed for him. He gropes his pecs and his &lt;&lt;print setup.getLength(12)&gt;&gt; cock. 
 
Suddenly, his whole form shakes with incoming growth...
He looks straight at you and moans eagerly. He urges you to gaze at his body.
 
You focus on
 
[[His cock-&gt;Intro08][$SymbioteBoost = &quot;cock&quot;]]
[[His muscles-&gt;Intro08][$SymbioteBoost = &quot;muscles&quot;]]
[[His whole body-&gt;Intro08][$SymbioteBoost = &quot;height&quot;]]</tw-passagedata><tw-passagedata pid="360" name="Intro08" tags="" position="1225,4475" size="100,100">\&lt;&lt;if $SymbioteBoost == &quot;cock&quot;&gt;&gt;
You focus on his cock. You immediately see it throb and expand. The &lt;&lt;SymbioteRace&gt;&gt; can&#39;t stop moaning as his shaft crawls along his legs.
He grasps the base and jerks off intensely.

\&lt;&lt;elseif $SymbioteBoost == &quot;muscles&quot;&gt;&gt;
You focus on his muscles. You immediately see his abs burst with size and power. His biceps expand until they become bigger than bowling balls. 
He then roars in delight as his pecs explode with growth. They inch bigger and bigger as he pinches his hard fat nipples in a torrent of pleasure and lust.

\&lt;&lt;elseif $SymbioteBoost == &quot;height&quot;&gt;&gt;
The &lt;&lt;SymbioteRace&gt;&gt;&#39;s whole body shakes in pleasure. His deep moans turn even deeper as he grows in size. He grins as your vision fills with the changing &lt;&lt;SymbioteRace&gt;&gt;.
His moans fill the void as his body becomes &lt;&lt;print setup.getLength(90)&gt;&gt; tall. He comes closer to you triumphantly, his mass thumping across the blackness. 
\&lt;&lt;/if&gt;&gt; 
 
He looks so hot... Your creation approaches as precum oozes from both of your cocks. You blush as his hands slowly feel your chest and slide down lower. 
You press your head on his thick juicy pecs as you reach for his rear end and firmly squeeze his muscular cheeks. He releases a deep alien moan in approval.
 
Some of his goo drips on your body, it quickly enters you through your skin. Your arousal suddenly skyrockets.

Some colours start to gain definition along the &lt;&lt;SymbioteRace&gt;&gt;&#39;s body. The dripping goo that surrounds the monster slowly stabilizes into a single colour.

[[Amber-&gt;Intro09][$CharacterSheet_Player.symbiote.color = $ColourPool.AMBER; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.AMBER)]] 
[[Beige-&gt;Intro09][$CharacterSheet_Player.symbiote.color = $ColourPool.BEIGE; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.BEIGE)]] 
[[Black-&gt;Intro09][$CharacterSheet_Player.symbiote.color = $ColourPool.BLACK; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.BLACK)]] 
[[Blue-&gt;Intro09][$CharacterSheet_Player.symbiote.color = $ColourPool.BLUE; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.BLUE)]] 
[[Brown-&gt;Intro09][$CharacterSheet_Player.symbiote.color = $ColourPool.BROWN; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.BROWN)]] 
[[Crimson-&gt;Intro09][$CharacterSheet_Player.symbiote.color = $ColourPool.CRIMSON; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.CRIMSON)]] 
[[Emerald-&gt;Intro09][$CharacterSheet_Player.symbiote.color = $ColourPool.EMERALD; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.EMERALD)]] 
[[Golden-&gt;Intro09][$CharacterSheet_Player.symbiote.color = $ColourPool.GOLDEN; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.GOLDEN)]] 
[[Green-&gt;Intro09][$CharacterSheet_Player.symbiote.color = $ColourPool.GREEN; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.GREEN)]] 
[[Grey-&gt;Intro09][$CharacterSheet_Player.symbiote.color = $ColourPool.GREY; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.GREY)]] 
[[Indigo-&gt;Intro09][$CharacterSheet_Player.symbiote.color = $ColourPool.INDIGO; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.INDIGO)]] 
[[Obsidian-&gt;Intro09][$CharacterSheet_Player.symbiote.color = $ColourPool.OBSIDIAN; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.OBSIDIAN)]] 
[[Orange-&gt;Intro09][$CharacterSheet_Player.symbiote.color = $ColourPool.ORANGE; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.ORANGE)]] 
[[Pink-&gt;Intro09][$CharacterSheet_Player.symbiote.color = $ColourPool.PINK; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.PINK)]] 
[[Purple-&gt;Intro09][$CharacterSheet_Player.symbiote.color = $ColourPool.PURPLE; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.PURPLE)]] 
[[Red-&gt;Intro09][$CharacterSheet_Player.symbiote.color = $ColourPool.RED; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.RED)]] 
[[Sapphire-&gt;Intro09][$CharacterSheet_Player.symbiote.color = $ColourPool.SAPPHIRE; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.SAPPHIRE)]] 
[[Violet-&gt;Intro09][$CharacterSheet_Player.symbiote.color = $ColourPool.VIOLET; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.VIOLET)]] 
[[Tan-&gt;Intro09][$CharacterSheet_Player.symbiote.color = $ColourPool.TAN; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.TAN)]] 
[[White-&gt;Intro09][$CharacterSheet_Player.symbiote.color = $ColourPool.WHITE; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.WHITE)]] 
[[Yellow-&gt;Intro09][$CharacterSheet_Player.symbiote.color = $ColourPool.YELLOW; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.YELLOW)]]</tw-passagedata><tw-passagedata pid="361" name="Intro09" tags="" position="100,4600" size="100,100">\&lt;&lt;run setup.colourAllLimbs($CharacterSheet_Player.symbiote.anatomy, $CharacterSheet_Player.symbiote.color)&gt;&gt;\
 
He grins at the sight of his &lt;&lt;SymbioteColor&gt;&gt; gooey body. 
 
It did not seem like he could talk, yet you could feel his gratitude for granting him this form. 
 
He kisses you deep and grinds his cock along your own. His thick, monstrous tongue coils around yours as you feel his gooey body slowly crawl all over your skin. 
 
Your moans fill the dark void as the goo changes you. Your cock grows as you grind yourself on the &lt;&lt;SymbioteRace&gt;&gt;&#39;s body. 
It grows bigger with every throb, it soon reaches further than the &lt;&lt;SymbioteRace&gt;&gt;&#39;s own monstrous tool. 
He pulls back from the kiss and grins upon seeing your form. You are utterly drenched with &lt;&lt;SymbioteColor&gt;&gt; goo. He takes you into a massive bear hug.

[[Let him in...-&gt;Intro10]]</tw-passagedata><tw-passagedata pid="362" name="Intro10" tags="" position="225,4600" size="100,100">His whole being enters you. You scream at the deluge of pleasure covering your every pore. Lustful moans emerge from your lips as your muscles explode with size and strength. 
Along with his strength, you feel his needs enter you... A need for sex and power... A need for more...  
You grasp your cock and try to keep it still as litres of goo rushes into your urethra. Your need for more keeps rising, you pull him closer as he covers your form. 
 
Your whole body grows in size. You soon become &lt;&lt;print setup.getLength(86)&gt;&gt; tall. It feels like your cock is about to explode into the biggest orgasm of your life.
The last of the goo finally enters you as you jack off furiously while flicking your thick &lt;&lt;SymbioteColor&gt;&gt; tongue in the air. 
 
Your &lt;&lt;print setup.getLength(86)&gt;&gt; &lt;&lt;SymbioteRace&gt;&gt; body now stands proudly in the dark void. His need for more burned inside your soul. You were ready to take on the world.
 
The monster&#39;s name appeared in your mind as orgasm hit you in a tidal wave of pleasure. 
 
&lt;&lt;textbox &quot;$CharacterSheet_Player.symbiote.name&quot; &quot;Echo&quot;&gt;&gt;
 
[[Wake Up-&gt;Intro11]]</tw-passagedata><tw-passagedata pid="363" name="Intro11_Cock" tags="" position="350,4600" size="100,100">You get up from bed and see your throbbing cock. It has clearly grown since yesterday...
 
\&lt;&lt;run setup.applyGrowth($CharacterSheet_Player, &quot;cock&quot;, 4)&gt;&gt;
It now reaches &lt;&lt;PlayerCock&gt;&gt; and begs for your attention. You can’t help but grasp it at the base.</tw-passagedata><tw-passagedata pid="364" name="Intro11_Muscles" tags="" position="475,4600" size="100,100">Your muscles throb, you reach for your pecs and moan softly. You look at yourself in the mirror and smile. 
You have definitely grown since yesterday. Your hand slides across your abs. 
 
\&lt;&lt;run setup.applyGrowth($CharacterSheet_Player, &quot;muscles&quot;, 8)&gt;&gt;</tw-passagedata><tw-passagedata pid="365" name="Intro11_Height" tags="" position="600,4600" size="100,100">\&lt;&lt;run setup.applyGrowth($CharacterSheet_Player, &quot;cock&quot;, 1)&gt;&gt;\
\&lt;&lt;run setup.applyGrowth($CharacterSheet_Player, &quot;height&quot;, 7)&gt;&gt;\
Your whole body throbs. When you get up from bed you feel like something about you is different. 
You look at yourself in the mirror and smile. Your whole body has grown to &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Player, &quot;height&quot;))&gt;&gt; tall, you barely fit in the mirror&#39;s frame anymore.</tw-passagedata><tw-passagedata pid="366" name="Intro11" tags="" position="725,4600" size="100,100">You wake up feeling energized, invigorated even. Your heart beats faster than you thought possible.
One look at yourself confirmed you still had your regular appearance, but something seemed different.
 
\&lt;&lt;if $SymbioteBoost == &quot;cock&quot;&gt;&gt;
&lt;&lt;include Intro11_Cock&gt;&gt;
\&lt;&lt;elseif $SymbioteBoost == &quot;muscles&quot;&gt;&gt;
&lt;&lt;include Intro11_Muscles&gt;&gt;
\&lt;&lt;elseif $SymbioteBoost == &quot;height&quot;&gt;&gt;
&lt;&lt;include Intro11_Height&gt;&gt;
\&lt;&lt;/if&gt;&gt; 
Moans escape through your heavy breathing, you can&#39;t control your ever increasing arousal...
 
You gaze at your changed body while grasping your cock. It definitely feels thicker...
 
After only a few jerks of your throbbing cock, your moans turn deeper. 
You feel whatever is inside you... It rushes into your cock, turning it harder than it&#39;s ever been. Cum drips from it like an open faucet. 
Your balls churn with seed, they also seem to have grown.
 
You cum all over yourself, thick shot after thick shot reaches up to the ceiling. 

Yet it keeps going. 
Your arousal doesn&#39;t stop growing. 
After 15 shots, cum stops shooting from you. But you feel that your body is still begging you for more...

[[Keep jerking off-&gt;Intro12]]</tw-passagedata><tw-passagedata pid="367" name="Intro12" tags="" position="850,4600" size="100,100">You keep jerking off, your moans grow louder. 
After a few more minutes, you explode once again.
 
This one goes on for 10 minutes straight. Your brain floods with orgasmic pleasure beyond what anyone can achieve.
 
You never want to stop...
 
You cum again... You go back to jerking off once more...
 
You keep going for hours and hours until you pass out of sheer exhaustion.

[[Rest-&gt;Intro13]]</tw-passagedata><tw-passagedata pid="368" name="Intro13" tags="" position="975,4600" size="100,100">&lt;&lt;run setup.addDays(1)&gt;&gt;
Slowly, you begin to get used to your inhuman libido. You realize that you have pleasured yourself for a full day. 
 
You slowly remember that tomorrow is too important to keep indulging in your inhuman lust.
 
For years you have trained to eventually become one of the protectors of the village. Today is supposed to be the final assignment for your training.
 
Even with the strange things that were happening to your body, you couldn&#39;t miss this for anything.
 
You quickly dressed and left for the temple of the Eldest.  
 
[[Leave-&gt;Village]]</tw-passagedata><tw-passagedata pid="369" name="intro_start" tags="" position="1100,4600" size="100,100">The back of your eyelids flicker with warm orange light. There&#39;s a distant sound; a cacophany of... something.

Pain throbs in your side, a stinging sensation surrounded by something warm and wet.

Blood?

[[Open your eyes-&gt;intro_start_2]]</tw-passagedata><tw-passagedata pid="370" name="intro_start_2" tags="" position="1225,4600" size="100,100">Your eyes peel open to a blurry sky. Each blink brings back a little more clarity and awakens a deep rooted sense of urgency and panic.

The village is under attack!

You rock your body to get back onto your feet. How long had you been unconscious for? Your head swivels towards the edge of the village. \
The outer wall; a fortified fence that acted as a barrier between the populace and the beasts outside is breached. Gaping holes and piles of debris could be seen, even from this distance. 

[[Look around you-&gt;intro_start_3]]</tw-passagedata><tw-passagedata pid="371" name="intro_start_3" tags="" position="100,4725" size="100,100">You twist around to face behind you and a wave of relief rolls through your body. The fighting is still going on but the defense of the Inner Wall is holding fast. This attack is unlike any other. \
For the creatures to be threatening the safety of the inner clusters and the Eldest&#39;s Temple is... surreal. 

Another abrupt stab of pain in your side causes you to wince.

[[Examine your waist-&gt;intro_start_4]]</tw-passagedata><tw-passagedata pid="372" name="intro_start_4" tags="" position="225,4725" size="100,100">As you feel for the wound in your midriff, a piece of corrugated metal brushes against your fingertips.

[[Pull it out -&gt; intro_pull_out_metal]]
[[Leave it alone -&gt; intro_leave_metal_alone]]</tw-passagedata><tw-passagedata pid="373" name="intro_pull_out_metal" tags="" position="350,4725" size="100,100">You need to sort this out before it gets any worse. Glancing at the state of the nearby shack, it is evident that something had barreled through here with tremendous force; claw marks, twisted metal and gouged earth. \
The debris embedded in your body must have flown a good one or two meters. 

Remaining out in the open between the two walls would be foolish, especially if the creature doubled back to hunt for prey it had missed. You need to move.

[[Pull! -&gt; intro_pull_out_metal_2]]</tw-passagedata><tw-passagedata pid="374" name="intro_pull_out_metal_2" tags="" position="475,4725" size="100,100">Gritting your teeth, you reach down, grab the plate and pull it out. You were lucky, it seemed to have hit you at an angle and non-lethally.

Ripping parts of your shirt off, you dress the wound and look around.

The fight is not yet over.

&lt;&lt;include intro_post_metal_choices&gt;&gt;</tw-passagedata><tw-passagedata pid="375" name="intro_leave_metal_alone" tags="" position="600,4725" size="100,100">Glancing at the state of the nearby shack, it&#39;s evident that something had barreled through here with tremendous force; claw marks, twisted metal and gouged earth. \
The debris embedded in your body must have flown a good one or two meters. The wound is deep but, thankfully, not deadly.

There&#39;s no time to deal with the injury right now. Sitting between the two walls with no way of defending yourself would be foolish.

Gritting your teeth, you decide to press on.

The fight is not yet over.

&lt;&lt;include intro_post_metal_choices&gt;&gt;</tw-passagedata><tw-passagedata pid="376" name="intro_post_metal_choices" tags="" position="725,4725" size="100,100">[[Protect the village&#39;s Inner Wall -&gt; intro_monster_ambush]]
[[Help the guards at the Outer Wall -&gt; intro_monster_ambush]]
[[Look for safety within the wrecked housing cluster -&gt; intro_monster_ambush]]</tw-passagedata><tw-passagedata pid="377" name="intro_monster_ambush" tags="" position="850,4725" size="100,100">You begin to move.

&quot;Look out!&quot; A shrill cry from a familliar voice gives you just enough warning to notice the rumbling earth. Footsteps. Large ones. A low baritone growl.

Instincts driving you, you duck. 

A mass of writhing black hurtles above you. Ebony claws barely miss you. Acting fast, you spin around. \
A thick black liquid cascades outwards from the massive beast as it lands in front of you, its body a formless blob of ink. It roars, spewing more of the substance out of its monstrous muzzle.

It kicks back into the sand with its powerful legs, launching itself at you! 

&quot;Not on my watch!&quot; You hear a voice on your left.

[[Continue-&gt;intro_monster_ambush_2]]</tw-passagedata><tw-passagedata pid="378" name="intro_monster_ambush_2" tags="" position="975,4725" size="100,100">A hand grabs your shoulder and pulls you out of the way. The abomination yowls as it plummets into one of the standing walls behind you.

&quot;Here, quick!&quot; A shortsword is thrown your way.

You catch the weapon and immediately look back at the monster.

&quot;Now&#39;s our chance!&quot; Abel screams as he runs towards it.

[[Attack the creature-&gt;intro_monster_ambush_3]]</tw-passagedata><tw-passagedata pid="379" name="intro_monster_ambush_3" tags="" position="1100,4725" size="100,100">You slash its throat. Abel stabs at its chest. The beast nearly pulls itself upright, but it can&#39;t react in time.

The body falls limp, a pitiful whine gurgling out of an ooze-clogged throat.

You pull back, panting.

[[Continue-&gt;intro_monster_ambush_4]]</tw-passagedata><tw-passagedata pid="380" name="intro_monster_ambush_4" tags="" position="1225,4725" size="100,100">&quot;Hey, you okay?&quot; The voice of your closest friend is as comforting as it could be.

You look up at the athletic man as he brushes a stray lock of wiry black hair from his face. Exhaustion is embossed within his expression. 

He has suffered a few wounds as well; cuts showing between pieces of torn fabric and leather armour.

[[Remain silent -&gt; intro_remain_silent]]
[[Tell him you are fine -&gt; intro_im_fine]]
[[Tell him you are not fine -&gt; intro_not_fine]]</tw-passagedata><tw-passagedata pid="381" name="intro_remain_silent" tags="" position="100,4850" size="100,100">Abel&#39;s smile falters as he looks you up and down with a fragile smile. &quot;Okay, then. I&#39;ll take that as a yes.&quot;
 
His eyes drift away from yours, attempting to hide his worry.

&quot;This attack... it&#39;s on a whole different scale and level to yesterday&#39;s one. They&#39;re everywhere - at least double the amount and I&#39;d reckon about twice as big.&quot;

&lt;&lt;include intro_abel_post_you_okay_choices&gt;&gt;</tw-passagedata><tw-passagedata pid="382" name="intro_im_fine" tags="" position="225,4850" size="100,100">Abel smiles, &quot;Good! You were always the toughest in the training rings.&quot;

His eyes drift away from yours, attempting to hide his worry.

&quot;This entire situation has gone to shit! We&#39;re needed everywhere and everything feels like its cracking at the seams. \
I&#39;m pretty sure there&#39;s at least double the amount of creatures attacking compared to yesterday and I&#39;d reckon about twice as big!&quot;

&lt;&lt;include intro_abel_post_you_okay_choices&gt;&gt;</tw-passagedata><tw-passagedata pid="383" name="intro_not_fine" tags="" position="350,4850" size="100,100">&quot;Shit, okay. Hang in there, buddy,&quot; Abel&#39;s face scrunches up into a sympathetic smile as he walks up to you and places a hand on your shoulders. 

&quot;I know you&#39;re hurt. I am too. But we are going to make it out of this nightmare together, yeah? We need to push on through for the sake of the village. \
They&#39;ve managed to break though the Outer Wall, but the Inner Wall is holding strong. We can do this.&quot; 

He chuckles nervously, &quot;Not going to be easy though. I&#39;d say there&#39;s double the amount of monsters compared to yesterday&#39;s attack and twice as big, I&#39;d reckon.&quot;

&lt;&lt;include intro_abel_post_you_okay_choices&gt;&gt;</tw-passagedata><tw-passagedata pid="384" name="intro_abel_post_you_okay_choices" tags="" position="475,4850" size="100,100">To emphasize his point, he uses his sword to point toward the writhing mound of muscle that rests at your feet. Even though dead, its eyes sparkle with unbridled hunger.

Even more perplexing is the gigantic battering ram that still repeatedly slams into its chest with unquenched arousal.

&lt;&lt;include intro_first_crossroads&gt;&gt;</tw-passagedata><tw-passagedata pid="385" name="intro_attack_intensity" tags="" position="600,4850" size="100,100">Abel sighs, &quot;They&#39;ve hit us with a vengeance. More of them and bigger.&quot;

He pauses, &quot;You know what the weirdest thing is? When we were fighting up at the Outer Wall, I swear to you - I recognised some of them!&quot;

His gaze drifts downwards, as if he does not believe his own words.

&quot;I know there&#39;s a ton of them out there, but these ones&#39; had features I would never forget. It&#39;s... It&#39;s like they dragged themselves back from the grave and came back even more massive than they already were.&quot;

[[Continue-&gt;intro_first_crossroads]]</tw-passagedata><tw-passagedata pid="386" name="intro_first_crossroads" tags="" position="725,4850" size="100,100">The sound of fighting echoes across the ruins of the village between the Inner and Outer Walls.

Writhing at your feet is the corpse of one of the attacking monsters. Its muscles expand and contract, seemingly with a life of its own.

Abel is a few steps away, bouncing on his heels and ready to get moving.

[[Inspect the monster&#39;s corpse -&gt; intro_inspect_monster]]
[[Talk to Abel about the attack-&gt; intro_attack_intensity]]
[[Get moving -&gt; intro_get_moving]]</tw-passagedata><tw-passagedata pid="387" name="intro_inspect_monster" tags="" position="850,4850" size="100,100">Kneeling down, you lean in closer toward the felled beast. It appears to be wolfish in shape, at least going by the facial structure: long snout, square jaw with a pair of triangular ears. \
That&#39;s where the similarities to the werewolf race ends, however, as the rest of its body from neck downwards balloon with egregious amounts of muscle.

You&#39;ve seen these types of beasts before. They&#39;re called The Lost. There are theories that they once used to be people that lost themselves to the insanity of the desert, hence the name, but this one is different. \
There&#39;s a black oil-like substance that seeps out from beneath its fur. \
If you listen closely, you can hear the sound of bursting bubbles which is promptly followed by a few more streamers of the inky substance dripping off of the corpse and onto the floor.

It&#39;s size is unbelievable. \
It&#39;s head is resting on massive boulder like shoulders that are a good distance off of the floor; propped up by gigantic arms. \
Its chest barrels so far forward that you doubt it would be able to see anything that stood close enough to its trunk like legs.

Wait...

... Is it still growing?

You squint. Your eyes do not deceive you. Although this creature is dead, each muscle is slowly stretching outwards. Higher. Bigger. Harder.

Your eyes flick toward its throbbing cock. Every loud thud of its head slamming into its chest is a perverse drum beat that grows deeper and heavier. The shaft was growing too; slowly inching upwards across the Lost&#39;s pectorals. \
Two watermelon sizes balls churn right below that, digging into the dirt with increasing weight and size. Given a few days, would this creature even be able to walk without the rod jutting in front of its vision?

Abel startles you as he speaks out from behind your shoulder, &quot;See what I mean? This bastard is massive and this is one of the smaller ones.&quot;

[[Ask about the black liquid -&gt; intro_corruption]]
[[Leave the monster -&gt; intro_first_crossroads]]</tw-passagedata><tw-passagedata pid="388" name="intro_corruption" tags="" position="975,4850" size="100,100">&quot;Cray calls this stuff Corruption. Apparently the Lost have always had it, but never in this quantity.&quot;

You notice Abel&#39;s hand moves to rub a hardening bulge near his crotch. &quot;Any salvager worth his salt says that this stuff as extremely dangerous. Gets under your skin. Maybe that&#39;s what is turning this thing into such a big, burly beast.&quot;

Abel&#39;s hand suddenly pulls away from his pants, &quot;Are we done here? I don&#39;t want to stay near this fiend any longer.&quot;

[[It doesn&#39;t feel too bad... -&gt; intro_hot]]
[[It looks dangerous... -&gt; intro_disgusting]]</tw-passagedata><tw-passagedata pid="389" name="intro_hot" tags="" position="1100,4850" size="100,100">Abel&#39;s face flushes bright red, &quot;You think so too?&quot; He shakes his head. &quot;S-shut up! Don&#39;t tease me at a time like this! That&#39;s just the corruption talking...&quot;

[[Leave the monster -&gt; intro_first_crossroads]]</tw-passagedata><tw-passagedata pid="390" name="intro_disgusting" tags="" position="1225,4850" size="100,100">Abel remains silent. He begins to wring his hands; a telltale sign that something is bothering him.

&quot;Y-yeah. I guess you&#39;re right.&quot;

[[Leave the monster -&gt; intro_first_crossroads]]</tw-passagedata><tw-passagedata pid="391" name="intro_get_moving" tags="" position="100,4975" size="100,100">&quot;All done?&quot; Abel asks. You nod.

&quot;Alright, then we best get going before any more of them show up. I swear, all of this nonsense started after the eclipse that had happened a day or two ago. \
There was something off about it; it just sent shivers down my spine.&quot;

You and your companion begin walking, using the tight spaces between standing shacks to your advantage. You are about to make a break for the inner wall before Abel stops you.

&quot;Wait. Do you hear that?&quot; he asks.

[[Stop and listen -&gt; intro_hold_up]]</tw-passagedata><tw-passagedata pid="392" name="intro_hold_up" tags="" position="225,4975" size="100,100">You do. The Earth shudders. Then again. The rhythmic thud of an ominous timpani.

You and Abel both turn to face the Outer Wall. A cocktail of fear, terror and shock colours Abel&#39;s face as you both watch a titanic dome of muscle approach from the horizon. \
It is another Lost; one that makes the previous assailant look like a cub.

&quot;That thing is coming straight towards us!&quot; Abel stammered, &quot;S-shit! What do we do!?&quot;

[[Hide -&gt; intro_hide_in_rubble]]
[[Fight it -&gt; intro_fight_it]]</tw-passagedata><tw-passagedata pid="393" name="intro_hide_in_rubble" tags="" position="350,4975" size="100,100">You reason that there is no way you can outrun a beast that big. One of its steps would easily swallow dozens of yours. You tell Abel that the best course of action is to hide.

&quot;Alright... Uh, got any ideas?&quot; he asks.

[[Play dead -&gt; intro_play_dead]]
[[Hide inside the nearby houses -&gt; intro_rubble_hide]]</tw-passagedata><tw-passagedata pid="394" name="intro_play_dead" tags="" position="475,4975" size="100,100">A look of horror washes over Abel&#39;s face. &quot;Say what now?&quot; He deadpans.

You point to the multiple wounds on your bodies and then in the direction of the monster you had slain. \
If anything, it would look convincing to a villager if they had to lie down near the corpse and pretend to have fallen to its claws. 

It is a gamble. A crazy one. However, it might just work.

Abel looks dumbfounded.

You ignore him.

Retracing your steps, you find your kill and lay down as close as possible to it.

&quot;If we die because of this stupid plan, I swear to the Aeons,&quot; Abel lies down next to you, &quot;I&#39;m going to kick your ass.&quot; 

The earth continues to shake. Louder. Stronger. Heavier. Through slitted eyes, you can see how the sand and stone around you jumps into the air in symphony to the Lost&#39;s bulk.

It&#39;s close, now.

[[Hold your breath -&gt; intro_hold_breath_play_dead]]</tw-passagedata><tw-passagedata pid="395" name="intro_hold_breath_play_dead" tags="" position="600,4975" size="100,100">You draw in one last draught of air and hold your breath.

There is no way this beast could exist, yet it does. It stands above you now, sniffing the area. Each breath it takes feels like a vaccuum; a loud snort that sounds like an angry gale of wind. \
You can see one of it&#39;s claws fairly clearly; a black buttress large enough to crush houses with a slight tap. It is still growing, too. \
Those sharp points dig into the dirt ever so slowly, pushing deeper and outwards. You imagine that there would be a small ravine under those meaty digits.

Arousal begins to bubble up within you. You can&#39;t move. You want to, but for some reason your body refuses to listen to reason. \
The urge to open your eyes and meet the powerful creature&#39;s face; to see how big the Lost actually is, is a thought too alluring to pass up.

Your body flushes with heat as you imagine the size of its pectorals; that the creature, even though tall, would have its massive shelf of muscle pushing against your body from size alone. \
A beast so well-built that it has trouble moving its limbs.

Hot breath rushes over your body. You feel something at your crotch. Comfortably hot liquid envelops it.

Your eyes shoot wide open to the gigantic maw of the beast placed precariously over your tented bulge. 

[[Resist -&gt; intro_playdead_resist]]
[[Do not resist -&gt; intro_playdead_give_in]]</tw-passagedata><tw-passagedata pid="396" name="intro_playdead_resist" tags="" position="725,4975" size="100,100">There is no way you&#39;re going to let this... thing, have its way with you! It&#39;s as Abel said; the corruption from the nearby corpse must have been effecting you.

You yell and strike the side of its oily head with a clenched fist.

Taken by surprise, it howls - giving you enough time to skitter up to your feet. You look to the side and smile. Looks like Abel has your back - his sword en garde.

This monster is huge...

You backstep as it lunges for you, its massive claw slamming into the ground. Swooping down low, you tighten the grip on your weapon&#39;s hilt. You charge. You shout. The blade connects with the creature&#39;s eye!

A terrifying screech of anger forces you to clamp your hands on your head.

Your breath takes as you notice a cloaked figure leap onto the creature&#39;s back!

[[Continue -&gt; intro_cray_kill]]</tw-passagedata><tw-passagedata pid="397" name="intro_playdead_give_in" tags="" position="850,4975" size="100,100">Its breaths are slow and heavy. Its cock tip slams into its chest with each pulse of its heart, the leaking tip sliding against the underside of its neck.

A long black tongue slithers out from its cavernous maw and tastes the growing wet spot in your pants. Its lips twist into a monstrous grin.

As if mountains are sliding against each other, it bends down lower. Incredibly built jaw muscles of the creature opens and then snaps shut on the hem of your pants before ripping them off. \
With the offending apparel removed, its cavernous maw envelopes your eager package.

You buck your hips uncontrollably. The pleasure of its strong suckling forces you to moan. It&#39;s mouth moulds around your cock perfectly, a fleshy and undulating pathway to endless bliss.

Every pull of its breath, every movement of its tongue, feels as if it brings you to the edge, but never enough to push you over it. 

You want it. You want to cum so badly; right there, in its mouth. You want to let your heavy and growing balls empty itself endlessly into a maw that could only make you bigger and bigger - to take you to highs you could never experience before!

\&lt;&lt;run $CharacterSheet_Player.applyAbilityRuntimeData($Ability_TaintedByTheLost)&gt;&gt;
Your soul has been corrupted slightly

Your breath catches as the beast&#39;s muzzle suddenly leaves your crotch. 

The miasma of lust suddenly dissipates.

[[Continue -&gt; intro_cray_kill]]</tw-passagedata><tw-passagedata pid="398" name="intro_rubble_hide" tags="" position="975,4975" size="100,100">&quot;Yeah, okay,&quot; Abel replies, &quot;That makes sense. Just be careful you don&#39;t get cut. We&#39;re as broken as we need to be, and I&#39;d like to keep myself more-&quot;

He stop himself mid sentence, noticing his own babbling.

You scan around and spot a mound of torn metal and broken rebar. It is a bit treacherous, but it&#39;s better than lying out in the open.

It takes a few minutes, but you and Abel manage to wedge yourself into an air pocket within the jumble of scrap. Just in time, as the light tremors turn into ominous quakes.

[[Peer through the cracks -&gt; intro_peer]]</tw-passagedata><tw-passagedata pid="399" name="intro_peer" tags="" position="1100,4975" size="100,100">You peer through the small gaps and your heart skips a beat. Massive is a word that does no justice to this monster. It looks like a minotaur, or maybe it used to be one at some point. \
Its legs, if you could call them that, are hulking pillars of shifting mountains. Instead of hooves, grotesquely large claws sunder the ground with every step.

Your eyes thin as you stare at it. Impossible...

... this abomination is also growing, just like the monster you slew!

It&#39;s feet are right by you now, eerily still.

[[Hold your breath -&gt; intro_rubble_hide_p2]]</tw-passagedata><tw-passagedata pid="400" name="intro_rubble_hide_p2" tags="" position="1225,4975" size="100,100">You and Abel draw in a long breath and hold it.

The snap and pop of expanding muscle is so close to you. It&#39;s massive muzzle is right above you. You can feel its breaths. Each snort is like a gale of wind.

Did it have your scent?

You can feel the sweat dripping off of Abel&#39;s chest, his exposed stomach pressing against your back.

[[Hold your breath -&gt; intro_hold_breath_1]]</tw-passagedata><tw-passagedata pid="401" name="intro_hold_breath_1" tags="" position="100,5100" size="100,100">You need to breathe.

[[Hold your breath -&gt; intro_hold_breath_2]]
[[Breathe -&gt; intro_breathe]]</tw-passagedata><tw-passagedata pid="402" name="intro_hold_breath_2" tags="" position="225,5100" size="100,100">Your lungs burn.

Black rings begin to consume the edges of your vision. You shut your eyes.

[[Hold your breath -&gt; intro_hold_breath_3]]
[[Breathe -&gt; intro_breathe]]</tw-passagedata><tw-passagedata pid="403" name="intro_hold_breath_3" tags="" position="350,5100" size="100,100">Your body twitches with need.

You cannot hold it any longer!

[[Breathe -&gt; intro_breathe]]</tw-passagedata><tw-passagedata pid="404" name="intro_breathe" tags="" position="475,5100" size="100,100">You gasp and fill your burning lungs with much needed oxygen.

Your heart catches in your throat. A massive glowing iris stares back at you from between the cracks!

Is this it? Is this where your story ends?

[[Continue -&gt; intro_cray_kill]]</tw-passagedata><tw-passagedata pid="405" name="intro_fight_it" tags="" position="600,5100" size="100,100">You grip the handle of your weapon tightly. The blade gleams in the moonlight.

Salvagers are known to have fought monstrosities of legends out there. If you intend to become one, then this is the time to prove that your mettle has more bite than bark. \
Your face scrunches up into a look of determination as you plant your feet and raise your sword en garde.

Abel whips his wrist around in a circle, spinning the blade playfully as he stands next to you and readies himself. &quot;May the Aeons watch over us.&quot;

You smile. This is what it&#39;s all about, right? You are not going to lay down and let life slide across the backdrop behind you. \
You&#39;re going to pen your history down - whether that be a song over your grave, or from the lips of the villagers you pass in the morning.

This is what it means to survive in this Aeon-forsaken world!

&quot;Not going to lie, though. That&#39;s a big son of a bitch,&quot; Abel chuckled, nervously. &quot;It must have a weak point somewhere right?&quot;

\&lt;&lt;set $IntroCountdown = 3&gt;&gt;
\&lt;&lt;set $InspectedHead = 0&gt;&gt;
\&lt;&lt;set $InspectedArms = 0&gt;&gt;
\&lt;&lt;set $InspectedLegs = 0&gt;&gt;
\&lt;&lt;set $InspectedCock = 0&gt;&gt;
\&lt;&lt;set $drank_corruption = 0&gt;&gt;
&lt;&lt;include intro_attack_choices&gt;&gt;</tw-passagedata><tw-passagedata pid="406" name="intro_attack_choices" tags="" position="725,5100" size="100,100">\&lt;&lt;if $InspectedLegs == 0&gt;&gt;
[[Inspect its legs -&gt; intro_inspect_legs]]
\&lt;&lt;else&gt;&gt;
[[Attack its legs! -&gt; intro_attack_wrong_choice_legs]]
\&lt;&lt;/if&gt;&gt;
\&lt;&lt;if $InspectedArms == 0&gt;&gt;
[[Inpsect its arms -&gt; intro_inspect_arms]]
\&lt;&lt;else&gt;&gt;
[[Attack its arms! -&gt; intro_attack_arms]]
\&lt;&lt;/if&gt;&gt;
\&lt;&lt;if $InspectedCock == 0&gt;&gt;
[[Inspect its cock -&gt; intro_inspect_cock]]
\&lt;&lt;else&gt;&gt;
[[Attack its cock! -&gt; intro_attack_wrong_choice]]
\&lt;&lt;/if&gt;&gt;
\&lt;&lt;if $InspectedHead == 0&gt;&gt;
[[Inspect its head -&gt; intro_inspect_head]]
\&lt;&lt;else&gt;&gt;
[[Attack its head! -&gt; intro_attack_head]]
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="407" name="intro_inspect_head" tags="" position="850,5100" size="100,100">\&lt;&lt;set $InspectedHead = 1&gt;&gt;
The mountain of muscle in front of you just never seems to stop growing in height as it approaches. Its face is bovine in shape, or was, before it changed into the abomination that it is now. \
It must have been a minotaur that had fallen to the corruption.

Its head is but a spec against a canvas of pulsing and oozing muscle. Those traps are large enough to stop it from facing its extreme left or right; a weakness you could definitely exploit. \
It would be tricky to get that high up, but definitely not impossible if you work with Abel.

\&lt;&lt;include intro_timer_passage&gt;&gt;
&lt;&lt;include intro_attack_choices&gt;&gt;</tw-passagedata><tw-passagedata pid="408" name="intro_inspect_arms" tags="" position="975,5100" size="100,100">\&lt;&lt;set $InspectedArms = 1&gt;&gt;
Batterings rams would not do those arms justice. You are fairly certain there are muscles there that you have never seen before. \
Its biceps are the size of a house with veins large enough to pump volumes of blood that would fill every water hole in the village ten-folds over.

The hills and troughs of those muscles are immense. Every moment causes each muscle to flex so strongly against each other that you can hear the grating sound of stone from this distance.

Perfect.

Although its massive claws are a major concern, it would most likely have difficulty hitting anything that forces it to move its arms into extreme positions.

Straight above it. Behind it. Under it.

\&lt;&lt;include intro_timer_passage&gt;&gt;
&lt;&lt;include intro_attack_choices&gt;&gt;</tw-passagedata><tw-passagedata pid="409" name="intro_inspect_legs" tags="" position="1100,5100" size="100,100">\&lt;&lt;set $InspectedLegs = 1&gt;&gt;
This creature&#39;s legs are the most dangerous thing about it. Even from this distance, it is clear that the beast is still growing. You reckon it would be a good head or too taller by the time it reaches you.

Boulder-like quads grind against each other, flexing and bulging upwards and outwards. You can see every chord of muscle; strong ropes of strength that could probably lift one of the direlect ruins out in the Barrens. \
Where it has hooves, the corruption has created glowing purple claws.

It&#39;s hard to see any weaknesses here.

\&lt;&lt;include intro_timer_passage&gt;&gt;
&lt;&lt;include intro_attack_choices&gt;&gt;</tw-passagedata><tw-passagedata pid="410" name="intro_inspect_cock" tags="" position="1225,5100" size="100,100">\&lt;&lt;set $InspectedCock = 1&gt;&gt;
You know you should be looking elsewhere, but you can&#39;t help but see the turgid shaft that juts from its hip and into the cleft between its pecs. \
The veins are throbbing. You could probably gauge how fast the creature&#39;s heart is beating by staring at those, even at this distance.

Lust begins to tease at your crotch. Imagine what it must be like; what it would feel like dragging such a massive rod and quad of balls across the Barrens to get here. \
The sensation of it growing taller and wider, almost threatening to rival your pillar-like waist in size. You then imagine what you could look like if you were left to grow for a few more cycles.

Your shaft would reach far above you and would drip copious amounts of dense seed. You would be an alpha; a paragon of virility...

&quot;Hey! Snap out if it!&quot; Abel&#39;s voice cuts through the thick cloud of arousal plaguing your mind. &quot;Don&#39;t let it get to you!&quot;

\&lt;&lt;include intro_timer_passage&gt;&gt;
&lt;&lt;include intro_attack_choices&gt;&gt;</tw-passagedata><tw-passagedata pid="411" name="intro_attack_head_on" tags="" position="100,5225" size="100,100">There is no time for the basics of training! This is a do or die situation!

You push off the ground and bolt toward the monstrosity. It roars as you approach. You and Abel run at it together, baiting it to swing its meaty arm down at you.

You split to the sides and jump.

The massive limb collides into the ground sending a shockwave hurtling across the sand. Grit blasts into the air, digging tiny holes into your skin. You clench your teeth, then land, pull your arm in and slash at the Lost.

Your sword hits a mountain. Impossible! You can almost hear the creature chuckle as it&#39;s golden eyes leer at you. Those muscles are unnaturally tough - as tough as the strongest metal you had ever seen!

Suddenly, the monster cries in pain as one of its legs give out underneath it. Abel lands a strike with your distraction!

&quot;Aim for the joints!&quot; He cries out.

You run to its flank and slash at the flesh above its elbow. You smile as the blade sinks in, deeply.

The beast rears up and you get ready to defend yourself. Yet...

... it isn&#39;t focused on either you or Abel.

[[Continue -&gt; intro_cray_kill]]</tw-passagedata><tw-passagedata pid="412" name="intro_attack_head" tags="" position="225,5225" size="100,100">It is a common strategy to exploit the head of a Lost; ever so neatly embedded in a cocoon of muscle. The tricky part is getting up to it.

You tell Abel your strategy and he nods, &quot;Right. I&#39;ll distract it while you get up there.&quot;

Without skipping a beat, you both take off. Your heart pounds in your chest. Adrenaline spurs your body to push its limits.

The beast roars as you come close! Its eyes settle on you, but Abel&#39;s warcry distracts it, &quot;Down here you piece of shit!&quot;

Its gigantic arm rises into the sky and for a moment, you fear that its sheer width would take both of you out. Thinking quickly, you feint to the right!

The ground quivers as its monstrous tonnage slams into it. Abel is tossed off of his feet.

Tensing your thighs, you kick off of the floor. Your leg catches on it&#39;s cliff-like calves and you launch upwards!

At last the face comes into view! You lift your sword and slash!

It cries in pain and lashes out, barely missing you as you descend!

Landing on your feet, you turn around to ready your next strike, but...

... it isn&#39;t focused on either you, or Abel.

[[Continue -&gt; intro_cray_kill]]</tw-passagedata><tw-passagedata pid="413" name="intro_attack_arms" tags="" position="350,5225" size="100,100">This thing is built large enough to be a building. However, no matter how strong those muscles are; the flesh of the armpits and above the elbow would be vulnerable. Slice the tendons. Stop its movement.

You tell Abel your plan and he raises an eyebrow, &quot;The joints? Yeah, makes sense. I&#39;ll take the left side, you get the right!&quot;

The proverbial claxon sounds and you both take off at the creature. 

The mountain in front of you eats away at your vision as you approach until nothing but hard chords of strength stretch from peripheral to peripheral.

You run shoulder to shoulder with Abel. The creature broadens it&#39;s stance, raises an arm and slams it into the ground.

&quot;Now!&quot; Abel yells, as you both leap apart.

You slide in underneath its chest and thrust your sword into the flesh above the elbow resting on the floor.

The creature yowls in pain and swivels to attack! You duck, but the attack never comes.

Turning around, you notice that the creature&#39;s ire is directed at something else entirely.

[[Continue -&gt; intro_cray_kill]]</tw-passagedata><tw-passagedata pid="414" name="intro_attack_wrong_choice_legs" tags="" position="475,5225" size="100,100">Your eyes are locked on the monster&#39;s legs.

You wait for an opening to attack. Nothing comes.

His monstrous claws stand in the way, his beastial posture blocks any approach.

Abel looks at you in terror as the monster steps ever closer.

[[Continue-&gt;intro_attack_wrong_choice]]</tw-passagedata><tw-passagedata pid="415" name="intro_attack_wrong_choice" tags="" position="600,5225" size="100,100">For every one of its thunderous steps, you and Abel are forced five paces backwards. Your hands tense on the handle of your blade as a thick puddle of black cum lands in front of you.

&lt;&lt;include intro_fail&gt;&gt;</tw-passagedata><tw-passagedata pid="416" name="intro_out_of_time" tags="" position="725,5225" size="100,100">It&#39;s too late! There&#39;s no possible way you can find a weakness on a creature of this size and stature!.

&lt;&lt;include intro_fail&gt;&gt;</tw-passagedata><tw-passagedata pid="417" name="intro_fail" tags="" position="850,5225" size="100,100">The scent... the virility of the beast in front of you. It is almost too much to bear. You drop your sword and fall to your knees. You hear the clatter of Abel&#39;s weapon as he joins you next to the growing pool of its ambrosia.

Power. Mass. Growth. You could have it right now if you give in. This Lost is not hunting you, it&#39;s offering you a chance to be something more. To be something greater.

All it would take is a little push...

[[Drink its seed -&gt; intro_drink_corruption]]
[[Resist! -&gt; intro_resist_drinking]]</tw-passagedata><tw-passagedata pid="418" name="intro_drink_corruption" tags="" position="975,5225" size="100,100">\&lt;&lt;set $drank_corruption = 1&gt;&gt;
Yes. This is your path of ascension. You realise that the passion that ignites your loins as you touch the Lost&#39;s thick, hot seed is merely a taste of what is to come; of what you will become.

You feel it run down your arm. Liquid fire. Hunger. You need it in you.

Cupping your hands, you fill them with as much Corruption as you can and bring it to your lips. The sensation is beyond divinity. Your groin grows hot, erect and pulses with a supernatural hardness.

The flood gates open. Down below, and within your mind as you euphoria takes you in one of the most mind bending orgasms that should never be achieved by a mortal.

\&lt;&lt;run $CharacterSheet_Player.applyAbilityRuntimeData($Ability_TaintedByTheLost)&gt;&gt;
[Your soul has been corrupted slightly.]

You cum again, and again, and again. Somewhere in the back of your mind, you hear your colossal corrupted kin scream in pain.

Why? Why or who would harm him?

You force your eyes open.

[[Continue -&gt; intro_cray_kill]]</tw-passagedata><tw-passagedata pid="419" name="intro_resist_drinking" tags="" position="1100,5225" size="100,100">You run your fingers through the thick, steaming sludge. You could have it all. Power beyond your ken, right at your fingertips.

Power. At the cost of what? Your sanity?

The small voice that has been screaming in the back of your mind suddenly reaches a terrifying crescendo as you realise what you and Abel are about to do.

You fill your lungs with air and pull back, utterly horrified. Grabbing Abel&#39;s shoulder, you rip your bodies away from the alluring blight.

The Lost roars with renewed anger. You brace for the sudden impact, but it never comes. Something else had its attention.

[[Continue -&gt; intro_cray_kill]]</tw-passagedata><tw-passagedata pid="420" name="intro_cray_kill" tags="" position="1225,5225" size="100,100">&quot;Raaaargh!&quot; A loud warcry bellows out from somewhere between mighty mounds of muscle.

The sound of steel piercing flesh reaches your ears. The Lost howls in agony. Whipping around, it attempts to grab its attacker, but fails to stop a greatsword from plummeting into its skull.

&quot;C-Cray!&quot; You hear Abel shout out as the beast tumbles to the side. He gracfully lands on his feet and sheaths his sword in a large makeshift scabbard strapped to his back.

You face the lead scavenger of your village. He is the hallmark of physique and prowess that keeps your home prosperous. The werewolf is an idol.

\&lt;&lt;if $drank_corruption == 1&gt;&gt;
The heavily built wolf cocks his head to the side as he looks at you, an unsettling expression colouring his features. 

[[Continue-&gt;intro_cray_gets_jealous]]
\&lt;&lt;else&gt;&gt;
[[Thank him -&gt; intro_cray_leaves]]
[[Ask him how you can aid the fight -&gt; intro_cray_leaves]]
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="421" name="intro_cray_gets_jealous" tags="" position="100,5350" size="100,100">&quot;Why did it choose you?&quot; He asks.

[[Ask him what he means -&gt; intro_cray_leaves]]</tw-passagedata><tw-passagedata pid="422" name="intro_cray_leaves" tags="" position="225,5350" size="100,100">The words leave your mouth. You can feel each syllable pass through your lips, but they fall on deaf ears.

Cray&#39;s expression remains petrified in some combination of excitement, irritation and... hunger. His immense bulks rotates toward the Outer Wall.

His eyes never leave yours until his back faces you.

&quot;Cray! Hey! Are you leaving? Where are you going!?&quot; Abel shouts, clearly shaken from your encounter.

No answer.

&quot;Come on, you can&#39;t just leave us!&quot; Abel begins to jog toward Cray but is interrupted with a frightening growl. Abel stops dead in his tracks.

&quot;Go home.&quot; The scavenger&#39;s voice rasps, &quot;Only I can end this cycle.&quot;

[[Leave him be -&gt; intro_cray_leaves_2]]
[[Run after him -&gt; intro_cray_knockout]]</tw-passagedata><tw-passagedata pid="423" name="intro_cray_leaves_2" tags="" position="350,5350" size="100,100">You and Abel watch, open mouthed, as the imposing figure leaves the village.

He does not look back.

After exchanging worried words, you decide to hide in the rubble and recover from your wounds until the sound of fighting dies out.

It is hard to rest within the wreckage of one&#39;s home. It is even harder with the memories of the night playing across the back of your eyelids on loop.

The monsters. The growth. The corruption. 

Cray...

You find the thoughts whirring in your mind like a swarm of angry hornets. Yet, eventually, as restless as your mind may be.

You drift into the darkness of slumber.

&lt;&lt;include intro_post_cray_encounter&gt;&gt;</tw-passagedata><tw-passagedata pid="424" name="intro_cray_knockout" tags="" position="475,5350" size="100,100">You shout after Cray, running past the stunned Abel. 

\&lt;&lt;if $drank_corruption == 1&gt;&gt;
He stops moving and growls, &quot;I see you are not content to simply steal what is rightfully mine, but to stick your nose even further into where it does not belong.&quot;
\&lt;&lt;else&gt;&gt;
He stops moving and growls.
\&lt;&lt;/if&gt;&gt;

In the blink of an eye, the werewolf backsteps and grabs you by the throat. He pushes his snout as close to your face as he can.

Black veined eyes stare at you as if you&#39;re just another monster.

&quot;Don&#39;t get in my way...&quot; he whispers menacingly.

You cough and gasp for air, yet he squeezes tighter. Abel runs at him, but is easily slapped away. This level of strength is unnatural!

&quot;I will remember you, pup,&quot; he continues, &quot;Make sure we never meet again.&quot;

The lack of air, the exhaustion of the day and the lack of strength to fight back results in darkness creeping in from the edges of your vision. You feel your body become numb before it is dropped unceremoniously onto the dirt.

The scavenger&#39;s words play on loop within your mind as your consciousness fades into oblivion.

&lt;&lt;include intro_post_cray_encounter&gt;&gt;</tw-passagedata><tw-passagedata pid="425" name="intro_post_cray_encounter" tags="" position="600,5350" size="100,100">\&lt;&lt;if $drank_corruption != 1&gt;&gt;
\&lt;&lt;run $CharacterSheet_Player.applyAbilityRuntimeData($Ability_SurvivorOfTheFirstEclipse)&gt;&gt;
\&lt;&lt;/if&gt;&gt;

[[Continue -&gt; intro_sleep]]</tw-passagedata><tw-passagedata pid="426" name="intro_timer_passage" tags="" position="725,5350" size="100,100">\&lt;&lt;set $IntroCountdown = $IntroCountdown - 1&gt;&gt;
\&lt;&lt;if $IntroCountdown == 2&gt;&gt;
The shuddering beneath your feet is intensifying. It is getting closer.
\&lt;&lt;elseif $IntroCountdown == 1&gt;&gt;
The beast is almost upon you!
\&lt;&lt;elseif $IntroCountdown == 0&gt;&gt;
&lt;&lt;goto [[intro_out_of_time]]&gt;&gt;
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="427" name="intro_sleep" tags="" position="850,5350" size="100,100">You are vaguely aware of the sound of renewed shock from people around you. Muffled voices panicking about... the sky?

Your eyes peel open ever so slightly to the darkness of a room. You recognise it as your own. Abel must have carried you back in your sleep.

&quot;Yeah, I know. I saw the ball of fire in the sky.&quot; Abel&#39;s voice startles you. He is standing at the door, talking to someone out of sight.

&quot;Bloody thing scared me half to death while we were out in the combat zone. Shockwave from its landing nearly tore apart what was left of the house we were hiding in.&quot; He nods at the prompt of whispered dialogue, \
&quot;Listen, I get the urgency. I get why the Eldest wants him to go, but can&#39;t you give $CharacterSheet_Player.info.name a break? At least until morning?&quot;

The argument goes backwards and forwards, but you find your mind slipping back into the caress of sleep. You can&#39;t help but feel a sense of unease. A meteorite?

[[Wake up-&gt;intro_wake_up]]</tw-passagedata><tw-passagedata pid="428" name="intro_wake_up" tags="" position="975,5350" size="100,100">You rest, dreamlessly, and are only awoken by the kiss of sunlight. Covering your face from the intruding rays you push yourself upright, letting your tattered blanket fall onto the dusty floor.

Your wound stings and your body aches with fatigue. How many more scars had you added to your collection from last night&#39;s battle?

You recall the conversation you overheard. Something about a meteorite and the Eldest.

Cray&#39;s grim expression pushes all of that to the side and you furrow your brows.

Although today would be yet another in this wasteland of a home; it feels as if last night is only the first of something far greater...

... and far more dangerous.

[[Get dressed -&gt; intro_get_dressed]]</tw-passagedata><tw-passagedata pid="429" name="intro_get_dressed" tags="" position="1100,5350" size="100,100">You take a moment to put your gear back on, wiping coagulated blood and Corruption off of your clothes with some scrap fabric have had collected for just this occasion.

When you finish, you find yourself holding two separate textiles. Subconsciously, you had used one to clean off the blood...

... The other, is stained black. You find yourself clutching onto the cloth tightly.

[[Breathe it in -&gt; intro_inhale_cloth]]
[[Throw it away -&gt; intro_throw_away_cloth]]</tw-passagedata><tw-passagedata pid="430" name="intro_inhale_cloth" tags="" position="1225,5350" size="100,100">Luck is on your side. There is enough here to have at least one mind bending orgasm - just enough to feel the forbidden pleasure.

Closing your eyes, you place the cloth over your mouth and inhale deeply. Searing warmth rushes through your body and you flush with intense arousal.

You need more.

Far more!

Your breath quickens into a frenzy. With every breath, pleasure builds and builds and builds until a mind-shattering orgasm rips through your senses.

It is beyond your expectation; the heavenly bliss expanding out from your groin and across your entire body.

You feel as if you&#39;ve somehow grown a little stronger.
\&lt;&lt;set $growth = setup.applyGrowth($CharacterSheet_Player, &quot;muscles&quot;, 2)&gt;&gt;

\&lt;&lt;run setup.applyCorruption($CharacterSheet_Player, 5)&gt;&gt;
You gained 5 corruption.

[[Leave -&gt; intro_leave_home]]</tw-passagedata><tw-passagedata pid="431" name="intro_throw_away_cloth" tags="" position="100,5475" size="100,100">Tearing your eyes from it, you ball the fabric and throw it across the room.

Disgusting.

You cannot help but be simultaneously angered and afraid of the inky toxin.

Taking a mental note of the potency of the foul Corruption, you get up to leave.

[[Leave -&gt; intro_leave_home]]</tw-passagedata><tw-passagedata pid="432" name="intro_leave_home" tags="" position="225,5475" size="100,100">Leaving the comfort of your home, you walk through what feels like a wall made of dry, hot air. The desert would not be kind to scavengers today.

&quot;G&#39;morning sleepy head!&quot; You hear Abel call out. He is standing next to a man covered from tip to toe in a frayed cassock. &quot;Come over here for a second.&quot;

You recognise the mysterious figure next to Abel as the Eldest&#39;s Herald. Only those chosen to be a Herald may enter the temple in the center of the village and speak with the Eldest. These people are your leader&#39;s voice, his eyes and ears.

The older man smiles at you from underneath his hood, his blue eyes sunken into his aged skull and canopied by a mat of silver hair. &quot;Ah, $CharacterSheet_Player.info.name. I am so happy to see that you have recovered.&quot;

[[Approach the Herald -&gt; intro_approach_herald]]</tw-passagedata><tw-passagedata pid="433" name="intro_approach_herald" tags="" position="350,5475" size="100,100">It is unwise to keep a Herald waiting. You briskly make your way over to the pair.

Taking your hand, he smiles up at you, &quot;I am truly grateful that you were not slain in the attack last night and, too, am I truly, truly sorry that I must request that you are put in danger again so suddenly.&quot;

Abel grunts and folds his arms.

&quot;The Eldest has requested you by name, $CharacterSheet_Player.info.name,&quot; the Harbinger continues, &quot;Last night, a great ball of purple fire erupted through the night sky and landed out in the Northern Barrens. \
The Eldest has commanded the village scavenger to retrieve samples from the site and to confirm whether it is a threat to our people or not.&quot;

You blink in surprise.

&quot;Cray&#39;s gone,&quot; Abel answers your confused expression, &quot;Which means you are next in line, apparently. Curse of being too good with those fists of yours, buddy.&quot;

&quot;That is not a curse, Abel!&quot; The Harbinger scowls, silencing your friend, &quot;It is one of the highest honours to hold the title of scavenger. It is the opportunity to etch your family name into the anals of our history. Now please, time is of the essence. Proceed to the Barrens and report back to us what you find.&quot;

Giving you little room to respond, the man leaves you and Abel and hobbles back toward the village center.

&quot;Well,&quot; Abel sighs and then puts a hand on your shoulder, his tone growing slightly sarcastic &quot;Congratulations. One battle and straight into the other. You stay safe out there, okay?&quot;

[[Ask Abel to accompany you -&gt; intro_abel_company]]
[[Thank him and depart -&gt; intro_depart]]</tw-passagedata><tw-passagedata pid="434" name="intro_abel_company" tags="" position="475,5475" size="100,100">&quot;I would if I could! Unlike you, I wasn&#39;t lucky enough to get promoted out of the trainee rank. The guards would kill me themselves before letting me out on the dunes.&quot; \
Abel sighs, &quot;Don&#39;t get me wrong, I&#39;m not upset about the promotion. I&#39;m just scared that I can&#39;t be there to help you if anything happens.&quot;

He suddenly wraps his arms around you and gives you a squeeze, &quot;Make sure you get back here alive and in one piece. I&#39;m not letting this forsaken world steal you too.&quot;

After a few moments of conversation, you say goodbye to each other and watch Abel&#39;s form disappear into the village proper.

[[Continue-&gt;Village]]</tw-passagedata><tw-passagedata pid="435" name="intro_depart" tags="" position="600,5475" size="100,100">There is no reason to delay. If a Harbinger gave you an order, it is priority to deal with it immediately.

After a few moments of conversation, you thank Abel for his help and say your farewells.

[[Continue-&gt;Village]]</tw-passagedata><tw-passagedata pid="436" name="Name Setup" tags="Name" position="24,1579" size="100,100">When the verse of the third tolls, I shall have the vigour to endure.
When the verse of the sixth sings, I shall have the strength to protect.
When the verse of the ninth intones, I shall have the ferocity to survive.
So that when the verse of the twelfth roars out, I will not be claimed.

Hear me, my voice carried upon my prayer as I declare: 

I am &lt;&lt;textbox &quot;$CharacterSheet_Player.info.name&quot; &quot;Ankou&quot;&gt;&gt; of the new cycle and I am 

[[A Human-&gt;intro_start][setup.setRace($CharacterSheet_Player.info.anatomy, State.variables.RacePool.DEFAULT)]]  &lt;span title=&quot;Click for more info&quot;&gt;&lt;&lt;click &quot;🛈&quot;&gt;&gt;&lt;&lt;toggleclass &quot;#humandescription&quot; &quot;hidden&quot;&gt;&gt;&lt;&lt;/click&gt;&gt;&lt;/span&gt;
&lt;div id=&quot;humandescription&quot; class=&quot;hidden expandInfo&quot;&gt; &lt;&lt;print setup.getRaceDescriptor(State.variables.RacePool.DEFAULT) &gt;&gt;&lt;/div&gt; \
[[A Werewolf-&gt;intro_start][setup.setRace($CharacterSheet_Player.info.anatomy, State.variables.RacePool.WOLF)]]  &lt;span title=&quot;Click for more info&quot;&gt;&lt;&lt;click &quot;🛈&quot;&gt;&gt;&lt;&lt;toggleclass &quot;#wolfdescription&quot; &quot;hidden&quot;&gt;&gt;&lt;&lt;/click&gt;&gt;&lt;/span&gt;
&lt;div id=&quot;wolfdescription&quot; class=&quot;hidden expandInfo&quot;&gt; &lt;&lt;print setup.getRaceDescriptor(State.variables.RacePool.WOLF) &gt;&gt;&lt;/div&gt; \
[[A Minotaur-&gt;intro_start][setup.setRace($CharacterSheet_Player.info.anatomy, State.variables.RacePool.MINOTAUR)]]  &lt;span title=&quot;Click for more info&quot;&gt;&lt;&lt;click &quot;🛈&quot;&gt;&gt;&lt;&lt;toggleclass &quot;#minodescription&quot; &quot;hidden&quot;&gt;&gt;&lt;&lt;/click&gt;&gt;&lt;/span&gt;
&lt;div id=&quot;minodescription&quot; class=&quot;hidden expandInfo&quot;&gt; &lt;&lt;print setup.getRaceDescriptor(State.variables.RacePool.MINOTAUR) &gt;&gt;&lt;/div&gt; \
[[A Dragonborn-&gt;intro_start][setup.setRace($CharacterSheet_Player.info.anatomy, State.variables.RacePool.DRAGONBORN)]]  &lt;span title=&quot;Click for more info&quot;&gt;&lt;&lt;click &quot;🛈&quot;&gt;&gt;&lt;&lt;toggleclass &quot;#dragonborndescription&quot; &quot;hidden&quot;&gt;&gt;&lt;&lt;/click&gt;&gt;&lt;/span&gt;
&lt;div id=&quot;dragonborndescription&quot; class=&quot;hidden expandInfo&quot;&gt; &lt;&lt;print setup.getRaceDescriptor(State.variables.RacePool.DRAGONBORN) &gt;&gt;&lt;/div&gt; \
[[A Behemoth-&gt;intro_start][setup.setRace($CharacterSheet_Player.info.anatomy, State.variables.RacePool.BEHEMOTH)]]  &lt;span title=&quot;Click for more info&quot;&gt;&lt;&lt;click &quot;🛈&quot;&gt;&gt;&lt;&lt;toggleclass &quot;#behemothdescription&quot; &quot;hidden&quot;&gt;&gt;&lt;&lt;/click&gt;&gt;&lt;/span&gt;
&lt;div id=&quot;behemothdescription&quot; class=&quot;hidden expandInfo&quot;&gt; &lt;&lt;print setup.getRaceDescriptor(State.variables.RacePool.BEHEMOTH) &gt;&gt;&lt;/div&gt; \

\&lt;&lt;if $Debug&gt;&gt;
[[Something else...-&gt;CustomRaceDisclaimer]]
[[Skip Intro-&gt;Village]]
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="437" name="CustomRaceDisclaimer" tags="" position="850,5475" size="100,100">Welcome to the custom race menu! This is a debug level tool which allows you to inject your own race into the game.
Please be advised that this race is NOT included into the main game and only exists within your save. Thus, please note:

- This race will NOT be carried into the next version if the save is incompatible
- We cannot guarantee that the text will cater for all aspects of your new race
- Sombreve and Taeryr cannot be held accountable for the save breaking due to a custom race, there are simply too many factors to build in at this moment.

[[I accept-&gt;CustomRaceCreator]]
[[I decline-&gt;Name Setup]]</tw-passagedata><tw-passagedata pid="438" name="CustomRaceCreator" tags="" position="975,5475" size="100,100">Instructions:

Please use a single number in the first box, as high as you want.
The second box is a list of adjectives that describe the texture of your limb. Please separate them with the &#39;,&#39; character.


My race&#39;s name is &lt;&lt;textbox &quot;$RacePool.CUSTOM.name&quot; &quot;Kobold&quot;&gt;&gt;

I have &lt;&lt;textbox &quot;$RacePool.CUSTOM.heads.defaultNumber&quot; &quot;1&quot;&gt;&gt; &lt;&lt;textbox &quot;$RacePool.CUSTOM.heads.raceTexture&quot; &quot;scaly, spiky&quot;&gt;&gt; head/heads
I have &lt;&lt;textbox &quot;$RacePool.CUSTOM.eyes.defaultNumber&quot; &quot;2&quot;&gt;&gt; &lt;&lt;textbox &quot;$RacePool.CUSTOM.eyes.raceTexture&quot; &quot;glossy&quot;&gt;&gt; eye/eyes
I have &lt;&lt;textbox &quot;$RacePool.CUSTOM.jaws.defaultNumber&quot; &quot;1&quot;&gt;&gt; &lt;&lt;textbox &quot;$RacePool.CUSTOM.jaws.raceTexture&quot; &quot;scaled&quot;&gt;&gt; set of jaws
I have &lt;&lt;textbox &quot;$RacePool.CUSTOM.teeths.defaultNumber&quot; &quot;1&quot;&gt;&gt; &lt;&lt;textbox &quot;$RacePool.CUSTOM.teeths.raceTexture&quot; &quot;jagged&quot;&gt;&gt; set of teeth
I have &lt;&lt;textbox &quot;$RacePool.CUSTOM.hands.defaultNumber&quot; &quot;2&quot;&gt;&gt; &lt;&lt;textbox &quot;$RacePool.CUSTOM.hands.raceTexture&quot; &quot;scaled&quot;&gt;&gt; hand/hands
I have &lt;&lt;textbox &quot;$RacePool.CUSTOM.horns.defaultNumber&quot; &quot;2&quot;&gt;&gt; &lt;&lt;textbox &quot;$RacePool.CUSTOM.horns.raceTexture&quot; &quot;ridged&quot;&gt;&gt; horn/horns
I have&lt;&lt;textbox &quot;$RacePool.CUSTOM.wings.defaultNumber&quot; &quot;0&quot;&gt;&gt; &lt;&lt;textbox &quot;$RacePool.CUSTOM.wings.raceTexture&quot; &quot;bat-like&quot;&gt;&gt; wing/wings
I have&lt;&lt;textbox &quot;$RacePool.CUSTOM.tongues.defaultNumber&quot; &quot;1&quot;&gt;&gt; &lt;&lt;textbox &quot;$RacePool.CUSTOM.tongues.raceTexture&quot; &quot;forked&quot;&gt;&gt; tongue/tongues
I have&lt;&lt;textbox &quot;$RacePool.CUSTOM.arms.defaultNumber&quot; &quot;2&quot;&gt;&gt; &lt;&lt;textbox &quot;$RacePool.CUSTOM.arms.raceTexture&quot; &quot;scaled&quot;&gt;&gt; arm/arms
I have&lt;&lt;textbox &quot;$RacePool.CUSTOM.pecs.defaultNumber&quot; &quot;2&quot;&gt;&gt; &lt;&lt;textbox &quot;$RacePool.CUSTOM.pecs.raceTexture&quot; &quot;scaled&quot;&gt;&gt; pec/pecs
I have&lt;&lt;textbox &quot;$RacePool.CUSTOM.breasts.defaultNumber&quot; &quot;0&quot;&gt;&gt; &lt;&lt;textbox &quot;$RacePool.CUSTOM.breasts.raceTexture&quot; &quot;&quot;&gt;&gt; boob/boobs
I have&lt;&lt;textbox &quot;$RacePool.CUSTOM.cocks.defaultNumber&quot; &quot;1&quot;&gt;&gt; &lt;&lt;textbox &quot;$RacePool.CUSTOM.cocks.raceTexture&quot; &quot;tapered&quot;&gt;&gt; cock/cocks
I have&lt;&lt;textbox &quot;$RacePool.CUSTOM.vaginas.defaultNumber&quot; &quot;0&quot;&gt;&gt; &lt;&lt;textbox &quot;$RacePool.CUSTOM.vaginas.raceTexture&quot; &quot;&quot;&gt;&gt; vagina/vaginas
I have&lt;&lt;textbox &quot;$RacePool.CUSTOM.balls.defaultNumber&quot; &quot;2&quot;&gt;&gt; &lt;&lt;textbox &quot;$RacePool.CUSTOM.balls.raceTexture&quot; &quot;scaly&quot;&gt;&gt; ball/balls
I have&lt;&lt;textbox &quot;$RacePool.CUSTOM.legs.defaultNumber&quot; &quot;2&quot;&gt;&gt; &lt;&lt;textbox &quot;$RacePool.CUSTOM.legs.raceTexture&quot; &quot;scaled&quot;&gt;&gt; leg/legs
I have&lt;&lt;textbox &quot;$RacePool.CUSTOM.tails.defaultNumber&quot; &quot;1&quot;&gt;&gt; &lt;&lt;textbox &quot;$RacePool.CUSTOM.tails.raceTexture&quot; &quot;spiked&quot;&gt;&gt; tail/tails
I have a &lt;&lt;textbox &quot;$RacePool.CUSTOM.abdominals.defaultNumber&quot; &quot;6&quot;&gt;&gt; pack of &lt;&lt;textbox &quot;$RacePool.CUSTOM.abdominals.raceTexture&quot; &quot;scaled&quot;&gt;&gt; abs


[[Done-&gt;intro_start][setup.setRace($CharacterSheet_Player.info.anatomy, State.variables.RacePool.CUSTOM, &quot;herm&quot;)]]</tw-passagedata><tw-passagedata pid="439" name="RandomEcounter" tags="" position="167,1844" size="100,100">\&lt;&lt;if !$Encounter_Target&gt;&gt;
    You find nothing exciting in your journey. All those that could have crossed your path are no more.

    [[Go Home-&gt;Village]]
\&lt;&lt;else&gt;&gt;
    &lt;&lt;print $Encounter_Target.fight.encounterIntroText&gt;&gt;
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="440" name="Travelling" tags="" position="1225,5475" size="100,100">&lt;&lt;set $Explore_Destination = setup.getExploreDestination(0)&gt;&gt;

&lt;&lt;link &quot;Explore the Barrens&quot; $Explore_Destination&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="441" name="Change_Combo_Moves_Menu" tags="" position="100,5600" size="100,100">Change Combo Moves!
\&lt;&lt;set $FightMovesLeft = 5&gt;&gt;
&lt;&lt;print setup.displayChangeFightMoves()&gt;&gt;</tw-passagedata><tw-passagedata pid="442" name="ChartPage" tags="" position="225,5600" size="100,100">You pick up your journal and open up a data analysis chart, perfect to track the changes of every creature within the Barrens.

&lt;&lt;print setup.renderGraph()&gt;&gt;

[[Leave-&gt;Village]]</tw-passagedata><tw-passagedata pid="443" name="Home" tags="Overworld" position="350,5600" size="100,100">&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;homeFlavour&quot;)&gt;&gt;

[[Change Fight Moveset-&gt;Change_Combo_Moves_Menu]]

[[Check Appearance-&gt;mirror_player]]
[[View Symbiote-&gt;mirror_symbiote]]
[[Check Data Logs-&gt;ChartPage]]
[[Recount your adventure-&gt;Journal]]

[[Leave-&gt;Village]]</tw-passagedata><tw-passagedata pid="444" name="Journal" tags="Overworld" position="475,5600" size="100,100">&lt;&lt;print setup.displayJournal()&gt;&gt;

[[Continue-&gt;Home]]</tw-passagedata><tw-passagedata pid="445" name="mirror_player" tags="" position="600,5600" size="100,100">&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;mirror_player_Flavour&quot;, 1)&gt;&gt;

You are currently a &lt;&lt;print setup.displayStatValue($CharacterSheet_Player, &quot;height&quot;, true)&gt;&gt; tall &lt;&lt;print setup.getRace($CharacterSheet_Player.info.anatomy)&gt;&gt; with &lt;&lt;print setup.getMusclesDescriptor($CharacterSheet_Player)&gt;&gt; muscles.

&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;mirror_player_HeadFlavour&quot;, 1)&gt;&gt;
&lt;&lt;if $CharacterSheet_Player.info.anatomy.horns != undefined &amp;&amp; $CharacterSheet_Player.info.anatomy.horns.number &gt;= 1&gt;&gt;
&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;mirror_player_HornsFlavour&quot;,1 )&gt;&gt;
&lt;&lt;/if&gt;&gt;
You smile. This was just the tip of the iceberg.

&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;mirror_player_UpperBodyFlavour&quot;, 1)&gt;&gt;
&lt;&lt;if $CharacterSheet_Player.info.anatomy.wings != undefined &amp;&amp; $CharacterSheet_Player.info.anatomy.wings.number &gt;= 1&gt;&gt;
&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;mirror_player_WingsFlavour&quot;,1 )&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;mirror_player_LowerBodyFlavour&quot;, 1)&gt;&gt;
&lt;&lt;if $CharacterSheet_Player.info.anatomy.tails != undefined &amp;&amp; $CharacterSheet_Player.info.anatomy.tails.number &gt;= 1&gt;&gt;
&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;mirror_player_TailFlavour&quot;, 1)&gt;&gt;
&lt;&lt;/if&gt;&gt;
Then your eyes travel along your navel and to your crotch, your pride and joy.

&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;mirror_player_CrotchFlavour&quot;, 1)&gt;&gt;

[[Back-&gt;Home]]
[[Return to the village-&gt;Village]]</tw-passagedata><tw-passagedata pid="446" name="mirror_symbiote" tags="" position="725,5600" size="100,100">\&lt;&lt;if setup.hasAbility($CharacterSheet_Player, &quot;Ability_ToLiveForEcho&quot;)&gt;&gt;
&lt;&lt;print &quot;You feel &lt;&lt;SymbioteName&gt;&gt; demanding to be released. Who are you to deny your master&#39;s wishes?&quot;&gt;&gt;
\&lt;&lt;/if&gt;&gt;
\&lt;&lt;if setup.getStatValue($CharacterSheet_Player, &quot;corruption&quot;) &lt;= $CorruptionComparators.PURE&gt;&gt;
&lt;&lt;print &quot;In the safety of your own claimed space, you find it surprisingly easy to come to a forceful orgasm, coaxing &lt;&lt;SymbioteName&gt;&gt; out into the open.&quot;&gt;&gt;
\&lt;&lt;elseif setup.getStatValue($CharacterSheet_Player, &quot;corruption&quot;) &lt;= $CorruptionComparators.NEUTRAL&gt;&gt;
&lt;&lt;print &quot;You eagerly start to pleasure yourself, feeling the now-familiar moment when &lt;&lt;SymbioteName&gt;&gt; erupts from you, surround you in its warm, slick embrace.&quot;&gt;&gt;
\&lt;&lt;elseif setup.getStatValue($CharacterSheet_Player, &quot;corruption&quot;) &lt;= $CorruptionComparators.TAINTED&gt;&gt;
&lt;&lt;print &quot;You flush at the thought of releasing &lt;&lt;SymbioteName&gt;&gt;, eager to feel his flesh against yours. Quickly you reach down to your already throbbing genitals to eagerly seek release and let out your companion.&quot;&gt;&gt;\
\&lt;&lt;else&gt;&gt;
&lt;&lt;print &quot;You put on a show, masturbating for those around you, adding your voice to the constant chorus of pleasure surrounding you.&quot;&gt;&gt;
\&lt;&lt;/if&gt;&gt;\

\&lt;&lt;if setup.hasAbility($CharacterSheet_Player, &quot;Ability_OrgasmicGrowth&quot;)&gt;&gt;\
&lt;&lt;print &quot;However, without the rush of battle--even against a lowly imp--your orgasm does not seem to push your body further past its limits.&quot;&gt;&gt;
\&lt;&lt;/if&gt;&gt;

&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;mirror_symbiote_Flavour&quot;, 1, undefined, true)&gt;&gt;

&lt;&lt;print &quot;&lt;&lt;SymbioteName&gt;&gt; is a &quot; + setup.displayStatValue($CharacterSheet_Player, &quot;height&quot;, true) + &quot; tall &lt;&lt;SymbioteRace&gt;&gt;  with &quot;+ setup.getMusclesDescriptor($CharacterSheet_Player) + &quot; muscles.&quot;&gt;&gt; 

\&lt;&lt;if setup.hasAbility($CharacterSheet_Player, &quot;Ability_ToLiveForEcho&quot;)&gt;&gt;
&lt;&lt;print setup.processFlavours($CharacterSheet_Player, &quot;Now unleashed, &lt;&lt;SymbioteName&gt;&gt; takes the lead in admiring itself for you. Starting with its @[all| heads| noverb]. It tries out a few expressions showing off its own jawline, opening its mouth occasionally to admire the view. &lt;&lt;SymbioteName&gt;&gt; seems to love admiring the shape of its pronounced cheeks and the way it draws attention to its own mouth. There, &lt;&lt;SymbioteName&gt;&gt;&#39;s @[all|eyes|noverb] linger before it opens its @[all| jaws | noverb] wide and lets its @[all| tongues| noverb] gloss out over its @[all| teeths| noverb]. &lt;&lt;SymbioteName&gt;&gt; seems to give you a salacious glower as it does so.&quot;)&gt;&gt;
\&lt;&lt;else&gt;&gt;
&lt;&lt;print setup.processFlavours($CharacterSheet_Player, &quot;You find yourself admiring the gooey glistening of &lt;&lt;SymbioteName&gt;&gt; covering your @[all| heads| noverb]. You try out a few expressions showing off its jawline and admiring the form of its face. From there, your @[all|eyes|noverb] linger before you spend a moment prodding a hand at your @[all| jaws | noverb], opening its mouth to take a look at its @[all| tongues| noverb] and  @[all| teeths| noverb]. You spend a moment admiring the sensation of the new face.&quot;)&gt;&gt;
\&lt;&lt;/if&gt;&gt;

&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;mirror_symbiote_HeadFlavour&quot;, 1, undefined, true)&gt;&gt;
\&lt;&lt;if $CharacterSheet_Player.symbiote.anatomy.horns != undefined &amp;&amp; $CharacterSheet_Player.symbiote.anatomy.horns.number &gt;= 1&gt;&gt;
&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;mirror_symbiote_HornsFlavour&quot;, 1, undefined, true)&gt;&gt;
\&lt;&lt;/if&gt;&gt;

\&lt;&lt;if setup.hasAbility($CharacterSheet_Player, &quot;Ability_ToLiveForEcho&quot;)&gt;&gt;
&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;mirror_symbiote_UpperBodyFlavour_LiveForEcho&quot;, 1, undefined, true)&gt;&gt;
\&lt;&lt;else&gt;&gt;
&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;mirror_symbiote_UpperBodyFlavour&quot;, 1, undefined, true)&gt;&gt;
\&lt;&lt;/if&gt;&gt;
&lt;&lt;if $CharacterSheet_Player.symbiote.anatomy.wings != undefined &amp;&amp; $CharacterSheet_Player.symbiote.anatomy.wings.number &gt;= 1&gt;&gt;
\&lt;&lt;if setup.hasAbility($CharacterSheet_Player, &quot;Ability_ToLiveForEcho&quot;)&gt;&gt;
&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;mirror_symbiote_WingsFlavour_LiveForEcho&quot;, 1, undefined, true)&gt;&gt;
\&lt;&lt;else&gt;&gt;
&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;mirror_symbiote_WingsFlavour&quot;, 1, undefined, true)&gt;&gt;
\&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
\&lt;&lt;if setup.hasAbility($CharacterSheet_Player, &quot;Ability_ToLiveForEcho&quot;)&gt;&gt;
&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;mirror_symbiote_LowerBodyFlavour_LiveForEcho&quot;, 1, undefined, true)&gt;&gt;
\&lt;&lt;else&gt;&gt;
&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;mirror_symbiote_LowerBodyFlavour&quot;, 1, undefined, true)&gt;&gt;
\&lt;&lt;/if&gt;&gt;
&lt;&lt;if $CharacterSheet_Player.symbiote.anatomy.tails != undefined &amp;&amp; $CharacterSheet_Player.symbiote.anatomy.tails.number &gt;= 1&gt;&gt;
\&lt;&lt;if setup.hasAbility($CharacterSheet_Player, &quot;Ability_ToLiveForEcho&quot;)&gt;&gt;
&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;mirror_symbiote_TailFlavour_LiveForEcho&quot;, 1, undefined, true)&gt;&gt;
\&lt;&lt;else&gt;&gt;
&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;mirror_symbiote_TailFlavour&quot;, 1, undefined, true)&gt;&gt;
\&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
You feel &lt;&lt;SymbioteName&gt;&gt;&#39;s attention turning lower.

&lt;&lt;print setup.getFlavourBasedDescription($CharacterSheet_Player, &quot;mirror_symbiote_CrotchFlavour&quot;, 1, undefined, true)&gt;&gt;

&lt;&lt;print &quot;Eventually, though, the presence of &lt;&lt;SymbioteName&gt;&gt; fades, relenting back to your &lt;&lt;PlayerRace&gt;&gt; form.&quot;&gt;&gt;

[[Back-&gt;Home]]
[[Return to the village-&gt;Village]]</tw-passagedata><tw-passagedata pid="447" name="Village" tags="Overworld" position="0,0" size="100,100">\&lt;&lt;print setup.getVillageDescriptor()&gt;&gt;

\&lt;&lt;if setup.canLevelUp($Level) &gt;&gt;
[[Level Up-&gt;Level Up]]
\&lt;&lt;/if&gt;&gt;
[[Home-&gt;Home]]

[[Combat Guide-&gt;Combat_Guide]]

&lt;&lt;print setup.getVillagePassages()&gt;&gt;
\&lt;&lt;set $Explore_Destination = setup.getExploreDestination()&gt;&gt;
\&lt;&lt;if setup.canExplore() &gt;&gt;
[[Explore the Northern Barrens-&gt;$Explore_Destination][$Encounter_Target = setup.getRandomEncounter(0)]]
    \&lt;&lt;if $CharacterSheet_Player.quest.exploration.easternFirstTime == true&gt;&gt;
[[Explore the Eastern Barrens-&gt;$Explore_Destination][$Encounter_Target = setup.getRandomEncounter(1)]]
    \&lt;&lt;else&gt;&gt;
[[Explore the Eastern Barrens-&gt;Explore_EastFirstTime]]
    \&lt;&lt;/if&gt;&gt;
\&lt;&lt;else&gt;&gt;
&lt;span class = &quot;inactive&quot;&gt;&lt;&lt;link &quot;Explore the Barrens&quot; $Explore_Destination&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
\&lt;&lt;/if&gt;&gt;

\&lt;&lt;if $Debug&gt;&gt;
[[Debug Menu-&gt;DebugMenu]]
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="448" name="Explore_EastFirstTime" tags="" position="975,5600" size="100,100">\&lt;&lt;set $CharacterSheet_Player.quest.exploration.easternFirstTime = true&gt;&gt;
A guard stops you as you try to cross through the eastern gate.

&quot;Woah there, are you sure you wanna go that way?&quot; He looks you over, doubtfully.

&quot;This is where the Lost lie, monsters whose sole goal is to grow and spread their vile corruption.&quot;

[[Cross the gate anyway-&gt;$Explore_Destination][$Encounter_Target = setup.getRandomEncounter(1)]]
[[Go back-&gt;Village]]</tw-passagedata><tw-passagedata pid="449" name="FightMoveStore" tags="" position="1100,5600" size="100,100">\&lt;&lt;if $BoughtFightMoves &lt;= 0&gt;&gt;
&quot;Alright, I think you’re strong enough to handle them by now. Here’s what I’ve got.&quot;
\&lt;&lt;elseif $BoughtFightMoves &lt; 4&gt;&gt;
&quot;I knew you&#39;d want more... Well here&#39;s what I have for you.&quot;
&lt;&lt;else&gt;&gt;
&quot;You&#39;ve consumed my whole stock! Maybe I&#39;ll have some more later but for now that&#39;s it.&quot;
\&lt;&lt;/if&gt;&gt;

&lt;&lt;print setup.displayFightMoveStore()&gt;&gt;

[[Leave-&gt;Village]]</tw-passagedata><tw-passagedata pid="450" name="Buy_Sigil_Growth" tags="" position="1225,5600" size="100,100">“This one is something special...”
 
He hands you a vial filled with a glowing, golden liquid.

“The Seed of Growth. It’s said to grow its user’s body when it activates. The effects are permanent too...&quot;

A wide smirk crawls up his brutish maw.

&quot;Of course, letting go of something this powerful comes with a price...”
\&lt;&lt;set $linkDesc = &quot;Buy for &quot;+$FightMove_Sigil_Growth.essenceCost+&quot; Essence&quot;&gt;&gt;
\&lt;&lt;set $linkPath = setup.getSigilBoughtPassage()&gt;&gt;

[[$linkDesc-&gt;$linkPath][setup.buyFightMove($CharacterSheet_Player, $FightMove_Sigil_Growth.name)]]
[[Go Back-&gt;FightMoveStore]]

&lt;&lt;set $SigilColor = &quot;golden&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="451" name="Buy_Sigil_Pain" tags="" position="100,5725" size="100,100">A vial filled with a dark, red liquid catches your attention.

“Hmmmm, the Seed of Pain. With enough of it running in someone&#39;s body, it can turn any attack into a fatal blow.&quot;

A wide smirk crawls up his brutish maw.
\&lt;&lt;set $linkDesc = &quot;Buy for &quot;+$FightMove_Sigil_Pain.essenceCost+&quot; Essence&quot;&gt;&gt;
\&lt;&lt;set $linkPath = setup.getSigilBoughtPassage()&gt;&gt;

[[$linkDesc-&gt;$linkPath][setup.buyFightMove($CharacterSheet_Player, $FightMove_Sigil_Pain.name)]]
[[Go Back-&gt;FightMoveStore]]

&lt;&lt;set $SigilColor = &quot;dark red&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="452" name="Buy_Sigil_Perception" tags="" position="225,5725" size="100,100">A vial filled with an opaque, cyan liquid takes your interest.

&quot;Ah!, the Seed of Perception. Once this one enters your opponents body, it will guide your attacks towards them.&quot;
\&lt;&lt;set $linkDesc = &quot;Buy for &quot;+$FightMove_Sigil_Perception.essenceCost+&quot; Essence&quot;&gt;&gt;
\&lt;&lt;set $linkPath = setup.getSigilBoughtPassage()&gt;&gt;

[[$linkDesc-&gt;$linkPath][setup.buyFightMove($CharacterSheet_Player, $FightMove_Sigil_Perception.name)]]
[[Go Back-&gt;FightMoveStore]]

&lt;&lt;set $SigilColor = &quot;cyan&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="453" name="Buy_Sigil_Vitality" tags="" position="350,5725" size="100,100">A vial filled with a moving turquoise liquid gets your attention.

&quot;This one is the Seed of Vitality. It converts the damaged flesh of your opponents into energy you can take for yourself.&quot;
\&lt;&lt;set $linkDesc = &quot;Buy for &quot;+$FightMove_Sigil_Vitality.essenceCost+&quot; Essence&quot;&gt;&gt;
\&lt;&lt;set $linkPath = setup.getSigilBoughtPassage()&gt;&gt;

[[$linkDesc-&gt;$linkPath][setup.buyFightMove($CharacterSheet_Player, $FightMove_Sigil_Vitality.name)]]
[[Go Back-&gt;FightMoveStore]]

&lt;&lt;set $SigilColor = &quot;turquoise&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="454" name="Buy_First_Sigil_1" tags="" position="475,5725" size="100,100">Tok hands you the $SigilColor vial.

&quot;After it comes in contact with your an opponent, strike them. This will awaken the seed&#39;s power&quot;

You grab it and examine the strange, thick liquid.

&quot;Normally, these can only be used once. But monsters like us can work around that...&quot;

You feel something rubbing on your crotch. A black tendril coming from Tok’s back slowly slides along your shaft.

&quot;Why settle for one vial? When you can produce gallons of the stuff yourself.&quot;

The tendrils pull down your pants, exposing your &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Player, &quot;cock&quot;))&gt;&gt; cock in its throbbing glory.
His massive black hand grasps your shaft, he brings the vial to your slit.

[[Continue-&gt;Buy_First_Sigil_2]]</tw-passagedata><tw-passagedata pid="455" name="Buy_First_Sigil_2" tags="" position="600,5725" size="100,100">“Hmm! Ffffuuuck.”

The $SigilColor liquid rushes inside your cock, it throbs as crawls down to your balls.

“Oh god... They’re growing...”

You breathing becomes heavy as your cum becomes tainted. The &lt;&lt;print setup.getRace($CharacterSheet_Player.symbiote.anatomy)&gt;&gt; inside you gorges itself with the seed...

“God... Ahhhhh...”

There’s just too much... Your balls feel so full... Pre flows out of you like an open faucet as you cup one of them.

“Ahhhhhh... Fuuuuuuck... GRAHHHH!”

You roar as $SigilColor cum burst out of your cock.
The feeling of your engorged balls is beyond arousing, your eyes lock on the other vials for sale.

(You can equip this new move to your moveset in your home)

[[Continue-&gt;FightMoveStore]]</tw-passagedata><tw-passagedata pid="456" name="Buy_More_Sigil" tags="" position="725,5725" size="100,100">Tok hands you the $SigilColor vial.

Your cock throbs with anticipation at what&#39;s coming. You open the vial and bring it to your slit.

You feel it course along your shaft until it reaches your balls. 

“Ahhhhhh... Fuuuuuuck... Yessssss...&quot;

The effects are immediate, they expand even faster than last time. 

&quot;Ohhhhh... Moooore...&quot;

Pre openly flows from your throbbing cock, you notice it slowly becoming $SigilColor as it pools in front of you.

You then feel your balls reaching their limit, cum overflows from them.

&quot;OH FUCK! GRAHHHH!&quot;

Deeply $SigilColor seed shoots out as you cup your balls and roar.

(You can equip this new move to your moveset in your home)

[[Continue-&gt;FightMoveStore]]</tw-passagedata><tw-passagedata pid="457" name="Quest_MQ001_EchoFirstEncounter" tags="" position="850,5725" size="100,100">&lt;&lt;set $Quest_MQ001_01 = 
{
    id:&quot;MQ001_01&quot;,
    description: &quot;I found the impact site of the meteor, I should check it out when I&#39;m ready.&quot;,
    villagePassage: &quot;[[Go to the meteor&#39;s impact site-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact]]&quot;,
    onComplete: function()
    {
        State.variables.Explore_Destinations.push(&quot;Quest_MQ002_Entrance_FirstTime&quot;);
    }
}&gt;&gt;</tw-passagedata><tw-passagedata pid="458" name="Quest_MQ001_EchoFirstEncounter_SeeSmoke" tags="Explore" position="975,5725" size="100,100">&lt;&lt;run $Quest_InProgress.push($Quest_MQ001_01)&gt;&gt;
\&lt;&lt;run setup.removeExplorationDestination(&quot;Quest_MQ001_EchoFirstEncounter_SeeSmoke&quot;)&gt;&gt;
You travel from dune to dune on your journey. You have been in the Barrens before in a caravan, but the isolation of being out here alone is daunting.

No one is here to have your back. There is no moment to relax as any mistep would be your last.

Could the endless anxiety and tension over the days he had spent out of the village gotten to Cray?

The train of thought hardly has time to flourish as movement on the horizon catches your eye. Dark smoke.

You have found the impact site.

[[Investigate-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact]]
[[Go back to the village-&gt;Village]]</tw-passagedata><tw-passagedata pid="459" name="Quest_MQ001_EchoFirstEncounter_InvestigateImpact" tags="" position="1100,5725" size="100,100">It takes a few more minutes of travel for you to arrive at the edge of the crater. The desert is hot, but this area in particular feels as if it could overcome you if you dawdled.

The sand, usually a dull yellow, has vitrified into a concave sheet of a reflective glass. Black glass. Although dazzling, your mind struggles to make sense of it. Regardless of its colour, it reflects the sunlight above in vibrant hues as if the light&#39;s properties were amplified instead of dulled.

Shading your eyes and squinting, you follow the curvature of the ground until you settle on a human-sized spherical shape nestled at its center. Like the oil, you find in some of the ancient active machines, the surface of the object warps the light into waves of colour, not unlike the glass around it.

It&#39;s beautiful. You fail to notice your feet taking steps forward into the crater. It is impossible to appreciate its full beauty without getting closer. You had to. You wanted to.

In what feels like a blink of an eye, you find yourself standing in front of it. A sudden sense of unease grips you. Now that you are closer, you begin to see that the tar-like substance is more like a shell than a solid sphere.

Something is moving inside: shapes that make no sense and colours that you cannot pin words to. It feels as if you are staring into a pit of endless chaos; chaos that somehow stares back at you from every direction, and those in between that.

Your ears ring. The sound of the desert is drowned out by cacophany; jagged spikes, pops and an eternity of every voice and whisper compressed into packets of tumultuous... noise.

Yet, you are still drawn to it. To you these sounds are the wails of a newborn child, a child seeking refuge in the hands of someone capable.

Your hands.

[[Touch the sphere-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_2]]
[[Go back to the village-&gt;Village]]</tw-passagedata><tw-passagedata pid="460" name="Quest_MQ001_EchoFirstEncounter_InvestigateImpact_2" tags="" position="1225,5725" size="100,100">Feeling with no feeling. Colour with no concept of colour. Shapes with no concept of space. A whisper with no breath.

The moment your skin makes contact with the meteorite it explodes outwards, as a wave crashing on a distant shore. Black surrounds you. Chaos surrounds you.

Light, dark and the uncertainty of the unknown blend before swallowing you whole.

Reality itself flees from you.

[[Continue-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_3]]</tw-passagedata><tw-passagedata pid="461" name="Quest_MQ001_EchoFirstEncounter_InvestigateImpact_3" tags="" position="100,5850" size="100,100">You are surrounded by a cold, shifting void. Purple mist twists and curls around your legs in sinuous trails. 

Like dancing tongues, they lick at your feet. A glacial caress. 

A deep violet sky stretches across the horizon while bright reddish hues dance above you - as though you’re at the bottom of an ethereal magenta coloured sea. 

Isolation. An endless void.

An eternity of nothing that stretches on...

...and on.

[[Look Around You-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_4]]</tw-passagedata><tw-passagedata pid="462" name="Quest_MQ001_EchoFirstEncounter_InvestigateImpact_4" tags="" position="225,5850" size="100,100">You turn around, and the endless void is suddenly replaced by a gaping chasm. An infinite drop.

Peering into the abyss, your eyes are scorched by the harshest light you have ever seen.

A colossal vein of purple energy throbs like a heartbeat; shifting, simmering, writhing, growling and moaning.

[[Continue-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_5]]</tw-passagedata><tw-passagedata pid="463" name="Quest_MQ001_EchoFirstEncounter_InvestigateImpact_5" tags="" position="350,5850" size="100,100">You stand there for what feels like hours, enraptured by the vista.

The biting, otherworldly, cold gnaws at your skin and pulls at your sanity.

This place is not meant for mortals. 

Beyond all of that - beyond the unknowable and unspeakable sensations, beyond the empty and cold landscape; you feel something.

Something wonderful.

Something beautiful.

You begin to feel a comforting warmth wash over you; a warmth that pulls you into the loving embrace of possibility which washes away the sting of the cold.

This feeling is your oasis in this strange, alien expanse.

[[Continue-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_6]]</tw-passagedata><tw-passagedata pid="464" name="Quest_MQ001_EchoFirstEncounter_InvestigateImpact_6" tags="" position="475,5850" size="100,100">The soothing heat seeps into your bones. 

The mist around your feet suddenly disperses, blasted away by some unseen force. 

Something is moving around you; a powerful aura that spins around your body, playfully. 

Teasingly, it pushes against your chest with strength that nearly topples you over. It suddenly retreats as if it realised it may have caused you harm. The presence in front of you seems to grow stronger. 

From the black, reflective ground before you rises a huge and writhing mass of semi-solid ooze. It seems unstable; its very being rolling through a spectrum of shapes and colours.

It seems indecisive.

Curiously, you aren’t terrified in the slightest - whatever this strange creature was, it appears to be the source of the embrace that surrounds you. Your soul resonates with it. It means you no harm, as you mean none to it.

You smile as it cycles in and out of the appearance of creatures from your memory; some even based on beasts you&#39;ve only heard of in stories. Your mirth increases as it shifts into forms that you and your people could never have dreamed of.

It calls out to you for help, as if it is asking you to shape it.

That it should become a...
 
[[Behemoth-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_behemoth][setup.setRace($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.BEHEMOTH)]]
[[Dragonborn-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_dragonborn][setup.setRace($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.DRAGONBORN)]]
[[Naga-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_naga][setup.setRace($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.NAGA)]]
[[Minotaur-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_minotaur][setup.setRace($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.MINOTAUR)]]
[[Monstrous Symbiote-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_symbiote][setup.setRace($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.SYMBIOTE)]]
[[Werewolf-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_werewolf][setup.setRace($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.WOLF)]]
\&lt;&lt;if State.variables.RacePool.CUSTOM.name != undefined&gt;&gt;
\&lt;&lt;set $customRaceButtonText = State.variables.RacePool.CUSTOM.name&gt;&gt;
[[$customRaceButtonText-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_custom][setup.setRace($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.CUSTOM)]]
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="465" name="Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_behemoth" tags="" position="600,5850" size="100,100">The amorphous creature begins to shift, moulding itself as though it was clay.

A massive profile builds up in front of you, dawrfing you in size. It does not stop there as it seems to bulge and widen into a terrifyingly muscular form.

You watch veins sprawl across the body, pumping blood into each swollen mound of strength. Pecs just out from its chest, a shelf that canopies rows of bulging abdominals.

Above each boulder of strength, a bullish neck rises upwards and is crowned by a muzzle that seems to be a cross of a canine and feral cat. With a beastly roar, sharp teeth form from its gums and a pair of dangerously curved horns sprout from the side of its head. Details flood the face; strong checkbones, a rugged jaw and a gorgeous mohawk that runs from the top of its head down into a mane across its back.

You hear the cracking of bone as its legs shift into a digitigrade stance and its back hunches forward to take on the typical posture of a behemoth.

Finally, a thick tail sprouts from its rear, ridged with webbed spines that frill outwards at its tip.

It kneels down in front of you, it leathery skin stretching across its muscular shape. Even though a behemoth is known for its aggressive and domineering tendencies; this one shows you its full respect and adoration.

[[Continue-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_8]]</tw-passagedata><tw-passagedata pid="466" name="Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_dragonborn" tags="" position="725,5850" size="100,100">A head forms out of the amorphous creature and a vaguely humanoid shape cascades down from it.

It rolls its shoulders, limbs bulking up with the smooth and elegant motion. The neck, bulging wider, tapers up to a wedge-shaped muzzle.

A forked tongue slips past its lips as teeth forms from its gums. Soon after, a wave of scales and ridges are etched into its skin and eventually covers its entire brawny mass. With a pleased rumble, a pair of slitted eyes flick towards you. You cannot help but admire the sharp angles that define a divine example of a dragonborn.

Raising its arms and pushing one of its digitgrade legs forward, it flexes, and in an instant, major crests and troughs flourish across its body into a canvas of perfectly sculpted musculature.

The mighty beast bows before you as wings erupt from its back, one arm pressed against its voluminous pectorals, the other outstretched showing off its arm&#39;s immaculate contour, tipped by vicious looking talons.

An Adonis. A being of perfect balance, strength, wisdom and elegance. A being showing its utter adoration and devotion to you, wordlessly, through its awe-inspiring body language.

[[Continue-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_8]]</tw-passagedata><tw-passagedata pid="467" name="Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_naga" tags="" position="850,5850" size="100,100">The amorphous creature begins to shift, moulding itself as though it was clay.

It rises upwards, growing taller as the shape of a head rises out from the top. Features like shoulders cascade outward, widening as the upper torso grows steadily more defined. 

Lower down, the form stretches out longways, extruded into a long, thick, prehensile tail that merges seamlessly with the humanoid upper-body of the muscle-bound beast.

More detail floods onto its visage; quickly morphing into a serpentine muzzle. From the tip of its head, a wave of scales pop out from its forming flesh and roll down the length of its back and tail. A hood forms on either side of its skull; a crown fit for a cold-blooded king.

The beast opens its mouth, showing you a pair of powerful fangs that descend from the roof of its mouth. They drip with a sickly green venom. 

A pair of slitted eyes take shape above the muzzle, blood-red pupils dilating to stare deeply into your soul. A frigid gaze. A loving gaze. It grins as it leers down at you, lower half stretching even further, into a &lt;&lt;print setup.getLength(70)&gt;&gt; long body.

[[Continue-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_8]]</tw-passagedata><tw-passagedata pid="468" name="Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_minotaur" tags="" position="975,5850" size="100,100">The amorphous creature begins to shift, moulding itself as though it was clay.

Broad, powerful shoulders ripple outwards from its neck, taking form below the outline of a head. Arms roll down from each boulder, thickening and stretching downwards while legs simultaneously grow from its waist. Knees form, jut backwards and end in strong hooves. From behind, the thin tail of a bull begins to swing between its legs.

Its head then ripples as detail creeps onto it; stretching forward into a primal flat-nosed muzzle. 

Two thick, curled horns push out from the top of its skull, each one as thick as your arms.

Ooze recedes only to be replaced by a lucious coat of fur; fine enough to show off its bulging muscles. A larger tuft of fur sprouts from betwene the cleft of its massive pecs, forming a treasure trail down to its genitals.

The minotaur glances down at its burgeoning body; thick chest rising and falling with each of its strong huffs. Its nostrils flare with each breath. The strong musk of testosterone overwhelms your senses.

There is a hungry look in its eyes as he stares down at you. He is a beast of desire, of strength and of loyalty, to you.

[[Continue-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_8]]</tw-passagedata><tw-passagedata pid="469" name="Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_symbiote" tags="" position="1100,5850" size="100,100">A head forms out of the amorphous creature and a vaguely humanoid shape is embossed into it.

Details fill out the visage; a strong jaw and a sharply defined chin which casts heavy shadows on its lean neck.

Several dozen thin, white veins begin to snake in all directions down from its head, spreading across its arms and torso which race towards its feet.

Writhing alabaster patches slowly take shape where its eyes should; formed from the milky trails that swirl around its face. He stares down at you with featureless, marble-like eyes.

Claws form on the tips of a hand. It raises them to cusp your chin. It smiles, gently, with newfound jagged lips which stretches into a hungry grin, filled with several rows of sharp teeth.

He lets out a low, rumbling and sensual growl; one that makes your chest vibrate.

A long, thick, deliciously slimy tongue slides out from its mouth, as thick as your wrist and as long as your entire body. It flicks at you eagerly.

[[Continue-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_8]]</tw-passagedata><tw-passagedata pid="470" name="Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_werewolf" tags="" position="1225,5850" size="100,100">The amorphous creature begins to shift, moulding itself as though it was clay.

The vague shape of a narrow, lean-muzzled head rises out from the top of its morphing mass and is accompanied by a thick neck flanked by incredibly broad shoulders.

A pair of triangular ears sprouts from the head as the creature opens its maw wide, letting out a gargled yet undeniably wolfish howl. 

It pierces your ears, breaking the otherwise crushing silence of this otherworldly plane. 

Several sets of large, pearly-white teeth emerge from its gums, their tips as sharp as daggers and curved as elegantly as sickles. 

A pair of wild, hungry eyes then appear, their pupils dilating as its expression contorts into that of extreme euphoria.

Its chest widens, forming a shelf of muscle above rows of chiselled abdominals. Below the waist, underneath a gratuitous package, powerful digitigrade legs form which are capped by dangerous claw-tipped paws. A similarly dangerous set of tools form on its hands, ready to rend any of your foes into ribbons.

Sprouting from its rear, a fluffy tail plumes outward and begins wagging ecstatically. The fur continues to roll upwards from the tail&#39;s base and across the body until a luscious coat covers it entirely.

Its wild eyes stare down at you with the look of pure adoration.

[[Continue-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_8]]</tw-passagedata><tw-passagedata pid="471" name="Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_custom" tags="" position="100,5975" size="100,100">&lt;&lt;print setup.processFlavours(
    $CharacterSheet_Player,
    &quot;The amorphous creature begins to shift, moulding itself as though it was clay.\n\n&quot; +
    &quot;The ooze bubbles at its apex, rising until it forms @[all|heads|a~an]. Smiling at you, @[all|teeths|noverb] forms out of the gum from beneath @[all|eyes|noverb] that stare at you with unwavering adoration.&quot;,
    true
)&gt;&gt; 

\&lt;&lt;if $CharacterSheet_Player.symbiote.anatomy.horns != undefined &amp;&amp; $CharacterSheet_Player.symbiote.anatomy.horns.number &gt;= 1&gt;&gt;
&lt;&lt;print setup.processFlavours(
    $CharacterSheet_Player,
    &quot;A gutteral roar suddenly takes the beast. With the sound of cracking bone, its flesh parts to make space for @[all|horns|noverb].&quot;,
    true
)&gt;&gt; 
\&lt;&lt;/if&gt;&gt;

&lt;&lt;print setup.processFlavours(
    $CharacterSheet_Player,
    &quot;Detail begins to flood into the rest of its muscular body; @[all|arms|noverb] form from growing stumps and swell with chords of vibrating strength. Nestled between those battering rams are @[all|pecs|noverb] which canopy a glorious wall of @[all|abdominals|noverb].\n\n&quot; +
    &quot;Below its waist, another set of writhing puddles expand into the shape of @[all|legs|noverb].&quot;,
    true
)&gt;&gt; 

\&lt;&lt;if $CharacterSheet_Player.symbiote.anatomy.wings != undefined &amp;&amp; $CharacterSheet_Player.symbiote.anatomy.wings.number &gt;= 1&gt;&gt;
&lt;&lt;print setup.processFlavours(
    $CharacterSheet_Player,
    &quot;Its back arches, its smile widens into picturesque euphoria as @[all|wings|noverb] erupt from behind its shoulder blades.&quot;,
    true
)&gt;&gt; 
\&lt;&lt;/if&gt;&gt;

\&lt;&lt;if $CharacterSheet_Player.symbiote.anatomy.tails != undefined &amp;&amp; $CharacterSheet_Player.symbiote.anatomy.tails.number &gt;= 1&gt;&gt;
&lt;&lt;print setup.processFlavours(
    $CharacterSheet_Player,
    &quot;Sprouting from its glutes, its @[all|tails|one=wags~more=wag]  with uncontained affection and pleasure.&quot;,
    true
)&gt;&gt; 
\&lt;&lt;/if&gt;&gt;

[[Continue-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_8]]</tw-passagedata><tw-passagedata pid="472" name="Quest_MQ001_EchoFirstEncounter_InvestigateImpact_8" tags="" position="225,5975" size="100,100">The scalding aura of the inky &lt;&lt;SymbioteRace&gt;&gt; grows in intensity. The edges of its beautiful form vibrate with imminent power, like a tense bowstring drawn to its utter limit. 

It resonates with the air, with your bones, and ultimately, your soul. The feeling is impossible to describe. The intimacy you feel with this creature is overwhelming; a bond stronger than love.

The sound of water fills your ears as the ooze on its form begins to spin and rush. You feel the connection with it, you feel your own adoration spike and you channel it into it&#39;s already burgeoning form.

His gaze meets yours and then he moans. He urges you onward...
 
You focus on:
 
[[His cock-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_9][$SymbioteBoost = &quot;cock&quot;]]
[[His muscles-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_9][$SymbioteBoost = &quot;muscles&quot;]]
[[His whole body-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_9][$SymbioteBoost = &quot;height&quot;]]</tw-passagedata><tw-passagedata pid="473" name="Quest_MQ001_EchoFirstEncounter_InvestigateImpact_9" tags="" position="350,5975" size="100,100">\&lt;&lt;if $SymbioteBoost == &quot;cock&quot;&gt;&gt;
&lt;&lt;print setup.processFlavours($CharacterSheet_Player,
&quot;You focus on his @[all|cocks|noverb]. It swells larger and fatter, throbbing with uncontained size. It reaches its previous limit, but then shatters that with even more size.\n\n Its package crawls across its abdomen, up towards its heaving chest.&quot;,
    true
)&gt;&gt; 
\&lt;&lt;run setup.applyGrowth($CharacterSheet_Player, &quot;cock&quot;, 4)&gt;&gt;
\&lt;&lt;elseif $SymbioteBoost == &quot;muscles&quot;&gt;&gt;
&lt;&lt;print setup.processFlavours($CharacterSheet_Player,
&quot;You focus on his musculature, wishing it larger! You immediately see its @[all|abdominals|noverb] burst with impossible size and power. It flexes its @[all|arms|noverb], showing off how its biceps expand - consuming more and more space on each limb with every passing second.&quot; +
&quot;\n\nA tremendous baritone roar erupts from its throat as its @[all|pecs|noverb] explode with size. The cleft deepens. Each bulging boulder barrels outwards, more and more! The rest of its titanic body rejoices in growth, as each muscle group tries to outdo the others.&quot;,
    true
)&gt;&gt; 
\&lt;&lt;run setup.applyGrowth($CharacterSheet_Player, &quot;muscles&quot;, 8)&gt;&gt;
\&lt;&lt;elseif $SymbioteBoost == &quot;height&quot;&gt;&gt;
The &lt;&lt;SymbioteRace&gt;&gt;&#39;s expression contorts in pleasure. Its deep moans dive in pitch, reaching brassy baritone notes as its body erupts upwards. It grins as your vision is utterly filled with the body of the growing &lt;&lt;SymbioteRace&gt;&gt;.
Its lustful gasps fill the void as its form reaches a height of &lt;&lt;print setup.getLength(90)&gt;&gt;. As the growth ends, it steps closer to you and then presses you against his warm flesh.
\&lt;&lt;run setup.applyGrowth($CharacterSheet_Player, &quot;cock&quot;, 1)&gt;&gt;\
\&lt;&lt;run setup.applyGrowth($CharacterSheet_Player, &quot;height&quot;, 7)&gt;&gt;\
\&lt;&lt;/if&gt;&gt; 

You can&#39;t help but flush with arousal. This creature was beyond good looking, beyond the concept of your ideal.

A sticky wet spot grows within your pants. You gasp, as you feel its massive hand roll over your chest. Gentle. Loving. Strong.

The limb slides down lower.

You look up, only to meet its gaze a hairs breadth away from your face. You can taste its powerful breath. Closing your eyes instinctively, you lock lips.

Divine euphoria. The proverbial match made in the heavens. Your body leans in closer to the creature, craving every inch of contact with it. Goo from its body rushes past your dancing tongues and into your throat. Some of it drips off of your body in sticky strings.

Your arousal suddenly skyrockets!

You begin to picture more detail on its body as you kiss; the colours and patterns that make it unique:

[[Amber-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = $ColourPool.AMBER; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.AMBER)]] 
[[Beige-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = $ColourPool.BEIGE; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.BEIGE)]] 
[[Black-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = $ColourPool.BLACK; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.BLACK)]] 
[[Blue-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = $ColourPool.BLUE; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.BLUE)]] 
[[Brown-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = $ColourPool.BROWN; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.BROWN)]] 
[[Crimson-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = $ColourPool.CRIMSON; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.CRIMSON)]] 
[[Emerald-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = $ColourPool.EMERALD; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.EMERALD)]] 
[[Golden-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = $ColourPool.GOLDEN; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.GOLDEN)]] 
[[Green-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = $ColourPool.GREEN; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.GREEN)]] 
[[Grey-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = $ColourPool.GREY; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.GREY)]] 
[[Indigo-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = $ColourPool.INDIGO; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.INDIGO)]] 
[[Obsidian-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = $ColourPool.OBSIDIAN; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.OBSIDIAN)]] 
[[Orange-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = $ColourPool.ORANGE; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.ORANGE)]] 
[[Pink-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = $ColourPool.PINK; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.PINK)]] 
[[Purple-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = $ColourPool.PURPLE; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.PURPLE)]] 
[[Red-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = $ColourPool.RED; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.RED)]] 
[[Sapphire-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = $ColourPool.SAPPHIRE; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.SAPPHIRE)]] 
[[Violet-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = $ColourPool.VIOLET; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.VIOLET)]] 
[[Tan-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = $ColourPool.TAN; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.TAN)]] 
[[White-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = $ColourPool.WHITE; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.WHITE)]] 
[[Yellow-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = $ColourPool.YELLOW; setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, State.variables.ColourPool.YELLOW)]]</tw-passagedata><tw-passagedata pid="474" name="Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10" tags="" position="475,5975" size="100,100">\&lt;&lt;run setup.colourAllLimbs($CharacterSheet_Player.symbiote.anatomy, $CharacterSheet_Player.symbiote.color)&gt;&gt;\
 
It presses you in tightly, closer to its glorious body, now coloured &lt;&lt;SymbioteColor&gt;&gt;. 
 
Amidst the floods of passion and love, you feel gratitude join in the divine union of you and this beast.

&lt;&lt;print setup.processFlavours($CharacterSheet_Player,
    &quot;It continues to kiss you deeply and grinds its @[all|cocks|noverb] along your own.&quot;,
    true
)&gt;&gt; 

Passion flares. Love ignites. Bonds strengthen.

&lt;&lt;print setup.processFlavours($CharacterSheet_Player,
    &quot;Your moans fill the dark void as the goo begins to change you. Your @[all|cocks|one=grows~more=grow] as you rut against the &lt;&lt;SymbioteRace&gt;&gt;&#39;s body. &quot; +
    &quot;Soon, it reaches further than the &lt;&lt;SymbioteRace&gt;&gt;&#39;s monstrous tool. &quot; +
    &quot;He pulls back from the kiss and smiles, filled with pride. You are utterly drenched with &lt;&lt;SymbioteColor&gt;&gt; the slime. He takes you into a massive bear hug.&quot;
)&gt;&gt; 

[[Let him in...-&gt;Quest_MQ001_EchoFirstEncounter_InvestigateImpact_11]]</tw-passagedata><tw-passagedata pid="475" name="Quest_MQ001_EchoFirstEncounter_InvestigateImpact_11" tags="" position="600,5975" size="100,100">Its whole being enters you. You scream as the deluge instills deep rooted pleasure across every pore. Your lips part as your muscles explode with immense size and strength. 

More than just strength enters you. You feel a waterfall of lust wrack your psyche - the creature&#39;s needs and desires becoming your own.

You crave sex and power. You need more....

&lt;&lt;print setup.processFlavours($CharacterSheet_Player,
    &quot;Grasping your @[all|cocks|noverb], you hold on for dear life as the thick meat begins devouring litres of goo through its tip. Your need keeps escalating! Exponentially reaching higher and higher heights!&quot;
)&gt;&gt; 

You erupt in size as the power pushes your form upwards, becoming &lt;&lt;print setup.getLength(86)&gt;&gt; tall! It feels like your mind is about to shatter with the most intense orgasm of your life!

The last of the goo finally enters you as you jack off furiously while flicking your thick &lt;&lt;SymbioteColor&gt;&gt; tongue in the air. 
 
You both stand together in the void. Titans in the endlessness. Rulers of this space. Yet you know you can both be so much more. You are ready to take on this ripe world.
 
Even though you are both screaming in ecstasy and coating the purple plains in layers of seed; the monster&#39;s name appears in your mind with extreme clarity. 
 
&lt;&lt;textbox &quot;$CharacterSheet_Player.symbiote.name&quot; &quot;Echo&quot;&gt;&gt;
\&lt;&lt;run setup.completeQuest($Quest_MQ001_01)&gt;&gt;
\&lt;&lt;run $CharacterSheet_Player.applyAbilityRuntimeData($Ability_EchoForm)&gt;&gt;
 
[[Be Reborn-&gt;Death][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_HostOfEcho)]]</tw-passagedata><tw-passagedata pid="476" name="Quest_MQ001" tags="" position="725,5975" size="100,100">&lt;&lt;set $Quest_MQ001 = 
{
    id:&quot;MQ001&quot;,
    description: &quot;Something fell from the sky. I should have died, but here I am... Still, today is the day I can finally become a Guard. There is no way I can let this opportunity fly by.&quot;,
    villageDescriptor: &quot;Some smoke still rises from where the meteor hit yesterday. You glance upon some salvagers heading to the crash site.\n&quot; +
                       &quot;Others are moving along, trying to make it in this poor but safe place.&quot;,
    villagePassage: &quot;[[Visit the Eldest-&gt;Quest_MQ001_VisitElder]]&quot;,
    onComplete: function()
    {
        State.variables.Quest_CanExplore = true;
    }
}&gt;&gt;</tw-passagedata><tw-passagedata pid="477" name="Quest_MQ001_VisitElder" tags="" position="850,5975" size="100,100">You enter the ruined Temple of the Eldest.
 
The metallic structure contrasts heavily with the rest of the village. 
You see a lone figure at the center, the light reflecting on his metallic skin gives it a soft glow.
The soft rumble of his throne rings in your ears as you approach.
 
He does not seem to notice your presence as you bow. His last functional eye softly gazes at the talisman in his mechanical claw.
 
[[Is everything ok?-&gt;Quest_MQ001_VisitElder_1]]</tw-passagedata><tw-passagedata pid="478" name="Quest_MQ001_VisitElder_1" tags="" position="975,5975" size="100,100">“I’m sorry &lt;&lt;print $CharacterSheet_Player.info.name&gt;&gt;... I did not see you come in.&quot;
 
He seemed worried, this was not a good sign. 
 
&quot;I know you were supposed to be promoted to protector of the village, but something&#39;s happened.&quot;

He looks away, hiding his dread.

&quot;We lost Cray... Someone has to become the new Salvager for the village.&quot;
 
Cray has been your role model for years. His stories have kept you motivated to keep training for as long as you can remember.
 
[[&quot;What happened to him?&quot;-&gt;Quest_MQ001_VisitElder_2]]</tw-passagedata><tw-passagedata pid="479" name="Quest_MQ001_VisitElder_2" tags="" position="1100,5975" size="100,100">&quot;He left his Talisman of Guidance here. Wherever he is, he chose to not find his way back here.&quot;
 
This is hard to believe, leaving without a talisman was worse than death. It was a path to damnation.
 
&quot;I suspect that he was corrupted by the Cult of Nyx... But more importantly, the people here need some flow of Essence coming in... Without it, I fear they would become...&quot;
He lowers his voice. &quot;Unwell...&quot;

You look at him in disbelief, yet you know The Eldest never lies.

&quot;You&#39;re the best warrior we have right now...&quot;

After some respite, you answer.
 
[[Reassure him that you&#39;ll do what you can.-&gt;Quest_MQ001_VisitElder_3_FriendlyResponse]]
 
[[Let him know you only want to leave this place.-&gt;Quest_MQ001_VisitElder_3_RudeResponse]]</tw-passagedata><tw-passagedata pid="480" name="Quest_MQ001_VisitElder_3_FriendlyResponse" tags="" position="1225,5975" size="100,100">&quot;Thank you. Be careful and follow your heart once you&#39;re out there.&quot;
 
He gives you a sad look.
 
&quot;I truly hope you don&#39;t let the horrors ahead change your ways.&quot;
 
He almost hands you Cray&#39;s talisman but stops halfway.
 
&quot;But before I let you go, I have to see if you can handle what lies outside.&quot;
\&lt;&lt;set $Encounter_Target = $CharacterSheet_Elder&gt;&gt; 
 
[[Brace Yourself-&gt;FightLogic]]</tw-passagedata><tw-passagedata pid="481" name="Quest_MQ001_VisitElder_3_RudeResponse" tags="" position="100,6100" size="100,100">He looks fazed.
 
There&#39;s a long silence between you two.
 
He examines you deeply.
 
&quot;You weren&#39;t always like this... I hope exploring the world beyond can help you find your way...&quot;
 
He almost hands you Cray&#39;s talisman but stops halfway.
 
&quot;But before I let you go, I have to see if you can handle the outside world.&quot;
\&lt;&lt;set $Encounter_Target = $CharacterSheet_Elder&gt;&gt; 
 
[[Brace Yourself-&gt;FightLogic]]</tw-passagedata><tw-passagedata pid="482" name="Quest_MQ001_VisitElder_FightStart" tags="" position="225,6100" size="100,100">The Eldest gets up from his throne, several wires and cables rise up with him.

Even with his body ruined by centuries of the harsh desertic climate, he stands ready to fight you.</tw-passagedata><tw-passagedata pid="483" name="Quest_MQ001_VisitElder_FightEnd" tags="" position="350,6100" size="100,100">He seems disturbed by your transformation. At the same time, seeing you with this power seemed to grant him the peace of mind he sought.
 
&quot;I could sense it even when you turned into this monster... You were still here.&quot;
 
He hands you Cray&#39;s talisman.
 
&quot;Remember, if you lose your soul, always follow the guidance of the talisman. We can&#39;t lose another warrior...&quot;

You nod. This did not go how you expected, but you accept the talisman.
 
&lt;&lt;print setup.getFightReward($CharacterSheet_Elder)&gt;&gt;
 
You are now allowed to leave the village.
\&lt;&lt;run setup.completeQuest($Quest_MQ001)&gt;&gt;

[[Village-&gt;Village]]</tw-passagedata><tw-passagedata pid="484" name="Quest_MQ002_ApothusRealm_Entrance" tags="" position="475,6100" size="100,100">You step out of the portal and immediately feel an overwhelming heaviness in the air. It&#39;s humid, musky, tainted with corruption. 

A black, empty sky surrounds you; the all-encompassing presence of Nyx only amplifies its darkness. 

Your skin burns under its unholy light like each ray is coated with acid. The black sun is overwhelming; it consumes most of the space above you.

Standing on a platform made of uneven rocks and soil, you notice that there is no ground behind you. The land simply ends into a sharp cliff that drops into nothingness. 
It is floating high above the realm, like Nyx itself was sucking it up towards it. Purple runes swirl around the edges. The cursed symbols pulse with an aggressive radiance; they look barely stable. 
Their power is undeniable; this is what stops this realm from falling.

The Black Sun&#39;s light seeps into your skin; your heart beats like a drum. 
\&lt;&lt;if setup.MQ002_Manor_IsCorruptedInManor($CharacterSheet_Player)&gt;&gt;
You bask yourself in its corrupting power. You cock throbs madly already. There better be something for you to fuck nearby. 
\&lt;&lt;else&gt;&gt;
Its alluring power is undeniable, you try to control your lust, but your cock throbs madly with need. Your hunger for power intensifies. 
You try to supress a moan. 
\&lt;&lt;/if&gt;&gt;

You gain the &quot;Embraced by Nyx&#39;s Light&quot; ability for as long as you stay in Apothus&#39;s realm.
\&lt;&lt;run $CharacterSheet_Player.applyAbilityRuntimeData($Ability_EmbracedByNyxsLight);&gt;&gt;
\&lt;&lt;run setup.MQ002_LeavingManor($CharacterSheet_Player)&gt;&gt;

\&lt;&lt;if $CharacterSheet_Player.quest.exploration.apothusRealmFirstTime&gt;&gt;
[[Explore this Realm-&gt;Quest_MQ002_ApothusRealm_ApproachStructure]]
\&lt;&lt;else&gt;&gt;
[[Approach the Structure-&gt;Quest_MQ002_ApothusRealm_ApothusMenu]]
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="485" name="Quest_MQ002_ApothusRealm_Exit" tags="" position="600,6100" size="100,100">\&lt;&lt;run setup.MQ002_GiveNyxLightAbility()&gt;&gt;
\&lt;&lt;run $CharacterSheet_Player.removeAbilityRuntimeData($Ability_EmbracedByNyxsLight);&gt;&gt;
You leave Apothus&#39;s tainted realm behind through the portal you came from.

[[Leave-&gt;Quest_MQ002_Manor_MainHall]]</tw-passagedata><tw-passagedata pid="486" name="Quest_MQ002_ApothusRealm_ApproachStructure" tags="" position="725,6100" size="100,100">Massive ruins reveal themselves near the horizon. Deep distorted moans of the Lost begin to reach you as you approach.

\&lt;&lt;if setup.MQ002_Manor_IsMassiveInManor($CharacterSheet_Player)&gt;&gt;
But they get buried under the booming sound of your footsteps. 

\&lt;&lt;elseif setup.MQ002_Manor_IsGiganticInManor($CharacterSheet_Player)&gt;&gt;
The ground cracks under the weight of your immense body, sprawling like countless serpents across the old stone. Each step toward the ruins weakens it even further. 
It&#39;s a miracle that the platform is still floating.

\&lt;&lt;/if&gt;&gt;
Taint seeps through the cracks in the stone bricks, warping their surface into a deep black hue. 
The smell is dangerously potent; every breath fills your lungs with burning lust. Your cock grows harder every time you exhale. 

Corruption flows along the floor and walls of the ruin like pulsating veins, inching around the center of the ruins like a black vortex. 

At the center of the ruined site lies a massive egg-shaped cocoon, as black as the void of space surrounding you, yet its presence is undeniable. A bright aura of dark purple circles it, swirling around the monument, sucking the unholy light into itself. 
Countless Lost are at its base, engaging in mad debauchery more intense than anything you&#39;ve ever seen. 
Their muscular forms writhe and moan with raw sexual intensity as they eternally give in to their lust.

[[Continue-&gt;Quest_MQ002_ApothusRealm_ApproachStructure_2]]</tw-passagedata><tw-passagedata pid="487" name="Quest_MQ002_ApothusRealm_ApproachStructure_2" tags="" position="850,6100" size="100,100">A deep monstrous roar rumbles throughout the ruins as thick black seed shoots from one of the Lost, more joining him seconds later. Their passion is endless, forever pushed to the very limit of pleasure that flesh can provide. Time has lost all of its meaning here; there is only pure ecstasy.

Numerous root-like veins throb along the cocoon&#39;s base, absorbing more of the Lost corrupted essence into itself. 
Veins, thicker than trees, thunderously pump across the platform. 
The cocoon shakes violently in response. A muffled moan resounds from within its black surface. 

It is mighty, bestial, gigantic, bigger than any beast you&#39;ve encountered before. 
The cocoon pulses with power as it drains more of the Lost&#39;s essence; the moan grows more piercing. 
The black cocoon slowly expands, gaining more mass and spreading along more surface for Nyx&#39;s light to bless. 

[[Continue-&gt;Quest_MQ002_ApothusRealm_ApproachStructure_2_1]]</tw-passagedata><tw-passagedata pid="488" name="Quest_MQ002_ApothusRealm_ApproachStructure_2_1" tags="" position="975,6100" size="100,100">A monstrous howl emanates from within the orb; it suddenly expands in all directions.
Shots of thick white seed shoot to its surface from whatever lies inside—the surrounding Lost all roar and cum in unison.

&quot;Wonderful, isn&#39;t it?&quot; Purrs an otherworldly voice. Its warmth is charming, but you know better than to let it draw you in.

[[Turn towards the voice-&gt;Quest_MQ002_ApothusRealm_ApproachStructure_3]]</tw-passagedata><tw-passagedata pid="489" name="Quest_MQ002_ApothusRealm_ApproachStructure_3" tags="" position="1100,6100" size="100,100">\&lt;&lt;if setup.MQ002_Manor_IsMassiveInManor($CharacterSheet_Player)&gt;&gt;
You look down, a tiny being seems to ask for your attention.
\&lt;&lt;else&gt;&gt;
You turn to face whoever is addressing you.
\&lt;&lt;/if&gt;&gt;

They seem to be a 12ft tall man wearing tattered rags that barely covers his waist. On his left pectoral is a glowing deep purple tattoo of a swirling vortex.

There is an alluring sweetness to his voice, yet the musky smell of corruption clings to him. He gazes at you with a lusty, hungry grin.

\&lt;&lt;if setup.MQ002_HasBrokenSeal()&gt;&gt;
&quot;So... you&#39;ve managed to free us from our little prison. That foolish Orthani finally got what he deserved too.&quot;
\&lt;&lt;else&gt;&gt;
&quot;So... you entered our prison but kept the seal up? You&#39;re an interesting one.&quot; He laughs inauspiciously.
\&lt;&lt;/if&gt;&gt;

[[Continue-&gt;Quest_MQ002_ApothusRealm_ApproachStructure_4]]</tw-passagedata><tw-passagedata pid="490" name="Quest_MQ002_ApothusRealm_ApproachStructure_4" tags="" position="1225,6100" size="100,100">&lt;&lt;print setup.displayEncounterImage($CharacterSheet_Apothus.info.picture)&gt;&gt;

He sounds weirdly delighted- as though he is in complete control. The influence of corruption is evidently gnawing at him. His breathing grows heavy, his eyes glow with an intense purple hue, loincloth stretching to contain his throbbing cock. 
Yet he is schockingly clear-minded as though he has learned to live with his decaying mind.

&quot;I&#39;ve forgotten how long we have been sealed here... but no matter. There is no reason for us to go back to the Barrens now; the warm embrace of Nyx and the growth of our chosen one are all we need.&quot;

He grins at you, unsure if he either should give in or resist the urge to have his way with you.

&quot;You may call me... Apothus.&quot;
&lt;&lt;include Quest_MQ002_ApothusRealm_ApothusMenu&gt;&gt;</tw-passagedata><tw-passagedata pid="491" name="Quest_MQ002_ApothusRealm_ApothusMenu" tags="" position="100,6225" size="100,100">\&lt;&lt;if $CharacterSheet_Player.quest.exploration.apothusRealmFirstTime&gt;&gt;
\&lt;&lt;set $CharacterSheet_Player.quest.exploration.apothusRealmFirstTime = false&gt;&gt;
\&lt;&lt;else&gt;&gt;
The Lost&#39;s corrupted cum flows along the ruins floor and walls. Their taint seeps through the stone ruins, warps it into a deep black. 
Your throbs cock harder with every breath you take. 

The blackness crawls on the stone&#39;s surface, inches onward around the ruins&#39; center, like an all-consuming vortex. 

\&lt;&lt;if $WorldState.apothusTransformed&gt;&gt;
Apothus stands at the center of the platform, roaring in pleasure, fucking his army of lust-driven worshippers.
\&lt;&lt;else&gt;&gt;
At the center lies a massive egg-shaped cocoon, as dark as the void surrounding you, scale utterly breathtaking. 
A profound aura of purple emanates from it, swirls around the monument, sucking the dark light into itself. 
Countless Lost are at its base. Their muscular forms writhe and moan in raw sexual intensity as they eternally engage in forbidden debauchery. 
\&lt;&lt;/if&gt;&gt;
\&lt;&lt;/if&gt;&gt;

\&lt;&lt;if $WorldState.apothusTransformed&gt;&gt;
[[Challenge Apothus-&gt;FightLogic][$Encounter_Target = $CharacterSheet_Apothus_2nd_Form]]
\&lt;&lt;else&gt;&gt;
[[Ask about him-&gt;Quest_MQ002_ApothusRealm_AskAboutHim]]
[[Ask about the Lost-&gt;Quest_MQ002_ApothusRealm_AskAboutTheLosts]]
[[Say you&#39;re here to save Cray-&gt;Quest_MQ002_ApothusRealm_HereToSaveCray]]
\&lt;&lt;if $CharacterSheet_Player.quest.oaths.apothus == $Oath.NONE&gt;&gt;

[[Attempt to bring his cult down-&gt;Quest_MQ002_ApothusRealm_HereToKillThem]]
\&lt;&lt;else&gt;&gt;

[[Feed the Chosen-&gt;Quest_MQ002_ApothusRealm_Feed_The_Chosen]]
\&lt;&lt;/if&gt;&gt;

\&lt;&lt;if $CharacterSheet_Apothus.quest.askedAboutHim &amp;&amp; $CharacterSheet_Player.quest.oaths.apothus != $Oath.ACTIVE&gt;&gt;
[[Say you want to unleash Nyx-&gt;Quest_MQ002_ApothusRealm_HereToUnleashNyx]]
\&lt;&lt;/if&gt;&gt;
\&lt;&lt;if $CharacterSheet_Player.quest.oaths.apothus == $Oath.ACTIVE &amp;&amp; setup.getStatValue($CharacterSheet_Player, &quot;corruption&quot;)&gt;&gt;
[[Usurp Apothus&#39;s cult-&gt;Quest_MQ002_ApothusRealm_ChallengeApothus]]

\&lt;&lt;/if&gt;&gt;
\&lt;&lt;/if&gt;&gt;
[[Leave-&gt;Quest_MQ002_ApothusRealm_Exit]]</tw-passagedata><tw-passagedata pid="492" name="Quest_MQ002_ApothusRealm_AskAboutHim" tags="" position="225,6225" size="100,100">A disarming smile graxes his features.

&quot;I&#39;m glad to see you&#39;re not here to attack us blindly.&quot; He comes closer, his cock dripping with thick black corruption under his thin loincloth.

&quot;I stumbled upon this realm ages ago by wandering the barrens, I was a salvager like yourself, you know?&quot; 

Corruption flows overtly through his black scleras.  
\&lt;&lt;if !setup.MQ002_Manor_IsCorruptedInManor($CharacterSheet_Player)&gt;&gt;
They made his attempt at being relatable completely hollow.
\&lt;&lt;/if&gt;&gt;

He sighed. &quot;This is such a long time ago it doesn&#39;t feel like I&#39;m talking about myself anymore...&quot; His eyes drifted to stare directly at the Black Sun. 

[[Continue-&gt;Quest_MQ002_ApothusRealm_AskAboutHim_2]]</tw-passagedata><tw-passagedata pid="493" name="Quest_MQ002_ApothusRealm_AskAboutHim_2" tags="" position="350,6225" size="100,100">&quot;Its warm light embraced me like I was its son. It whispered answers to my pleas and granted me the strength to face my foes,&quot; he keeps staring at it, his whole body shaking with arousal.

&quot;But we deserve better; we deserve to live free of fear, to be united under a common ideal,&quot; he lifts both of his arms wide like he was taking the sun into a warm embrace.

&quot;For the sun only gives... no one can deny it. I know you feel it too. The burning vigour that is growing within your loins.&quot; 
\&lt;&lt;if setup.MQ002_Manor_IsCorruptedInManor($CharacterSheet_Player)&gt;&gt;

He looks at you, feels the rapid beating of your heart and the throbbing of your &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Player, &quot;cock&quot;))&gt;&gt; cock.
\&lt;&lt;/if&gt;&gt;

&quot;So, why is it that you came all the way here, Salvager? Have you come to help us bring Nyx&#39;s blessing to the world?&quot; 

\&lt;&lt;set $CharacterSheet_Apothus.quest.askedAboutHim = true&gt;&gt;
[[Continue-&gt;Quest_MQ002_ApothusRealm_ApothusMenu]]</tw-passagedata><tw-passagedata pid="494" name="Quest_MQ002_ApothusRealm_AskAboutTheLosts" tags="" position="475,6225" size="100,100">&quot;People fear corruption, and yet here we are all working together to create something bigger than ourselves. 
Something that fulfills us, that ultimately makes us happy to be alive.&quot;

He turns to look at the neverending orgy, his lips curling into a warm smile.

&quot;People call them the Lost, but I just don&#39;t see it...&quot;

[[Continue-&gt;Quest_MQ002_ApothusRealm_ApothusMenu]]</tw-passagedata><tw-passagedata pid="495" name="Quest_MQ002_ApothusRealm_HereToSaveCray" tags="" position="600,6225" size="100,100">The human laughs, exposing his razor-sharp canines. 

&quot;Oh yes... I knew somebody would come for him at some point. It has taken longer than I expected,&quot; his purple eyes gaze directly within yours like he is reading an open book. 

&quot;Your friend is here... But there is no way to reach him for now,&quot; he turns to look at the ever-growing cocoon.

&quot;He&#39;s evolving.&quot;

&quot;We all see him in our dreams, growing and growing until he reaches Nyx itself. Only he who can make direct contact with the Black Sun is worthy of its power,&quot; Apothus keeps looking at the cocoon, completely mesmerized.

&quot;He is the one, the god we need to guide us, to stop us from succumbing to madness,&quot; he turns to you suddenly.

[[Continue-&gt;Quest_MQ002_ApothusRealm_ApothusMenu]]</tw-passagedata><tw-passagedata pid="496" name="Quest_MQ002_ApothusRealm_HereToKillThem" tags="" position="725,6225" size="100,100">He chuckles madly. 

&quot;And then what? We&#39;ll just keep coming back, cycle after cycle after cycle. Nyx is eternal, and so is our dedication to it.&quot; A thick purple mist suddenly gathers around his hands. 

&quot;Even if I die, my spell to keep this realm afloat will prevail. It lives through my will, deep within my immortal soul.&quot; His black eyes give you a piercing look.

&quot;You can try, just like your Orthani friend, but you&#39;ll eventually fall to corruption...&quot;

He walked towards you, his hands pulsating with dark magic.

&quot;Time is on our side.&quot;

[[Fight Him-&gt;FightLogic][$Encounter_Target = $CharacterSheet_Apothus]]</tw-passagedata><tw-passagedata pid="497" name="Quest_MQ002_ApothusRealm_HereToUnleashNyx" tags="" position="850,6225" size="100,100">The feeling of Nyx flowing through your skin is undeniable; it is more than arousing. It is glorious; You feel like you could fuck for whole cycles without stopping.                                                                
\&lt;&lt;if $CharacterSheet_Player.quest.nyxParasiteInfections &gt; 0&gt;&gt;
You love the parasites writhing within you as well. 
\&lt;&lt;/if&gt;&gt;

You approach the corrupted human; your hand clasps your throbbing cock. You could cum at any moment now.
\&lt;&lt;if setup.MQ002_Manor_IsMassiveInManor($CharacterSheet_Player)&gt;&gt;
Purple magic clads his hands as he hovers towards your head.

\&lt;&lt;/if&gt;&gt;

You don&#39;t need to say another word. The two of you kiss, with countless Lost looking at you with envy. Your tongues wrestle for dominance. 
His saliva is more corrupted than anything you&#39;ve encountered. The smell is acidic; you feel your tongue numbing as his poison flows inside you.

You growl as your hand goes down to his loincloth. It comes off in one pull. 

He giggles sinisterly. His hands cupping your &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Player, &quot;cock&quot;))&gt;&gt; balls before turning around. He presents his ass teasingly, eagerly waiting to be filled by your monster. 

&quot;Take me... Oh god, I need that cock inside me...&quot;

[[Fuck Him-&gt;Quest_MQ002_ApothusRealm_HereToUnleashNyx_2]]</tw-passagedata><tw-passagedata pid="498" name="Quest_MQ002_ApothusRealm_HereToUnleashNyx_2" tags="" position="975,6225" size="100,100">You grasp the back of his shoulders and push him down. He moans and laughs in response. 

&quot;Cmon, take me, big guy... Show those Lost how a real monster does it,&quot; he says as his hands glow with a dark purple aura.

You push yourself in, once inch at a time. Apothus screams lovingly as the first 6 inches of your monstrous tool fills him. 
His hands fill with an otherworldly magic, like Nyx itself is seeping its power directly onto him. His insides stretch and push tightly around your cock. 
You howl in pleasure; some Lost immediately rush to answer the call. Their oily tongues worship your pecs and arms. 
You feel their corruption seep into your skin. Your nipples thicken as some Lost suck them eagerly.

&quot;Join us $CharacterSheet_Player.info.name, let Nyx guide you for it is our only salvation in this cursed world. Our only way to experience the pleasures of corruption without losing our minds.&quot; 

[[Fuck Him Harder-&gt;Quest_MQ002_ApothusRealm_HereToUnleashNyx_3]]</tw-passagedata><tw-passagedata pid="499" name="Quest_MQ002_ApothusRealm_HereToUnleashNyx_3" tags="" position="1100,6225" size="100,100">His speech is cut short as you thrust the rest of your cock into him. 
&quot;Ahhhhh... By the Aeons... Yessss...&quot; He moans as countless Lost rush to him as well. A swarm of aroused musclebound beasts worship you. Multiple tongues fight for the space to enter your asshole. Countless others worship every inch of your muscles and take turns to kiss you with the passion of newfound love. 

Apothus lifts his hand to you; it now glows brighter than a flame. A bleeding wound sits on his open palm.

&quot;Mrrrffff... Ahhhh... We need an Oath... G-ghhhh. To swear your allegiance to Nyx! To fully allow you to feel its embrace! I Apothus declare with $CharacterSheet_Player.info.name under Nyx. So that we unleash The Black Sun upon the world, we shall have the strength and the clarity of mind to stop anything that might hinder us from attaining that goal!&quot;

[[Seal the Oath of Nyx-&gt;Quest_MQ002_ApothusRealm_HereToUnleashNyx_4]]</tw-passagedata><tw-passagedata pid="500" name="Quest_MQ002_ApothusRealm_HereToUnleashNyx_4" tags="" position="1225,6225" size="100,100">You bite your hand, pressing it against his, sealing the promise.

A swirl of purple magic surrounds you both. Lost roar in arousal and cum at being inched away from the immense power of Nyx. 
Dark magic coils around you both, it swirls into whirlpools that target your respective chests. 
Apothus is affected first, vortex shaped tattoo absorbing the dark energy. His voice cracks and strains under his own moans. 
It builds upon the design, making it bigger and more detailed; it reaches up to his shoulder. You feel it touch you next. It imprints itself on your skin; you cum on the spot. 
Every pore of your skin opens up, giving more room for Nyx&#39;s light to enter you. 

Your &lt;&lt;print setup.processFlavours($CharacterSheet_Player,&quot;@[all|cocks|one=shoots~more=shoot]&quot;)&gt;&gt; gallons upon gallons of cum, the pleasure is all-consuming. 
Every lick of the Lost, every inch of your &lt;&lt;print setup.processFlavours($CharacterSheet_Player,&quot;@[all|cocks|noverb]&quot;)&gt;&gt; entering Apothus becomes pleasurable enough to unleash additional orgasms on their own. 
You feel magic push deeper into your flesh, spinning and spreading along your chest. 
The Lost roar at the arrival of the new member of their cult, shots of corrupted cum starts covering everything in sight.

You roar as the Oath completes into a tattoo of a purple vortex covering your left pectoral.

[[Continue-&gt;Quest_MQ002_ApothusRealm_HereToUnleashNyx_5]]</tw-passagedata><tw-passagedata pid="501" name="Quest_MQ002_ApothusRealm_HereToUnleashNyx_5" tags="" position="100,6350" size="100,100">The Lost collapse around you, exhausted by your initiation.

Apothus helps you to your feet.

&quot;With your help, I feel like we can have our chosen one reach Nyx in no time...&quot;
\&lt;&lt;set $CharacterSheet_Player.quest.oaths.apothus = $Oath.ACTIVE&gt;&gt;
\&lt;&lt;run $CharacterSheet_Player.applyAbilityRuntimeData($Ability_Oath_Nyx);&gt;&gt;

[[Continue-&gt;Quest_MQ002_ApothusRealm_ApothusMenu]]</tw-passagedata><tw-passagedata pid="502" name="Quest_MQ002_ApothusRealm_ChallengeApothus" tags="" position="225,6350" size="100,100">You feel Nyx&#39;s call; it is more intimate than a lover&#39;s whisper. 

His Lost should be yours. Their corruption pulsates through your heart. They all look at you as their true master already.

You look at Cray in his growing cocoon. This impostor should never be in between you two.

You look at him, a black fire burning within your eyes. For once in countless cycles, the moans of the Lost grow silent. 
They stare as you approach Apothus. 

He immediately senses your intention.

A thick purple mist suddenly gathers around his hands.

[[Fight Him-&gt;FightLogic][$Encounter_Target = $CharacterSheet_Apothus]]</tw-passagedata><tw-passagedata pid="503" name="Quest_MQ002_ApothusRealm_Feed_The_Chosen" tags="" position="350,6350" size="100,100">The Losts move aside as you approach the SIZE black cocoon. They shake with anticipation, drool at the power within your flesh. Part of them yearns to take you to overwhelm you in their corruption. But the call of Nyx is too strong, a semblance of order in their broken minds.

if normal
you press your X hands on the base; it pulses with the Essence of countless beings. The chosen&#39;s presence is undeniable.\
 His mountainous muscles shudder within the cocoon&#39;s surface. He needs more; Only once he reaches the Black Sun above will he feel satisfied.

You dream of seeing him over the barrens; your old mentor now turned into a god—the whole world will bow in worship.

\&lt;&lt;if $WorldState.apothusChosen.essenceLevel == 0&gt;&gt;
&lt;&lt;print &quot;[[Feed him Essence (&quot;+setup.getNyxChosenFeedEssenceCost($CharacterSheet_Player)+&quot;-&gt;Feed_The_Chosen_ReachLevel1]]&quot;&gt;&gt;
\&lt;&lt;elseif $WorldState.apothusChosen.essenceFed == 1&gt;&gt;
&lt;&lt;print &quot;[[Feed him More... (&quot;+setup.getNyxChosenFeedEssenceCost($CharacterSheet_Player)+&quot;-&gt;Feed_The_Chosen_ReachLevel2]]&quot;&gt;&gt;
\&lt;&lt;elseif $WorldState.apothusChosen.essenceFed == 2&gt;&gt;
&lt;&lt;print &quot;[[Complete the chosen&#39;s ascension (&quot;+setup.getNyxChosenFeedEssenceCost($CharacterSheet_Player)+&quot;)-&gt;Feed_The_Chosen_Final]]&quot;&gt;&gt;
\&lt;&lt;/if&gt;&gt;
[[Go Back-&gt;Quest_MQ002_ApothusRealm_ApothusMenu]]</tw-passagedata><tw-passagedata pid="504" name="Feed_The_Chosen_Intro" tags="" position="475,6350" size="100,100">Essence flows from your arms and into the cocoon. 

The whole platform suddenly shakes. Parts of the ruins crumble as thick root-like tendrils emerge from the ground. They writhe across the cracking soil, growing more massive than the Losts surrounding them. 

A monstrous, lustful roar pushes through the confines of the cocoon. The Losts moan in response; their god is accepting your gift.</tw-passagedata><tw-passagedata pid="505" name="Feed_The_Chosen_Level1" tags="" position="600,6350" size="100,100">&lt;&lt;include Feed_The_Chosen_Intro&gt;&gt;
The black fleshy chamber grows upwards, directly towards the light of Nyx. You step back as the cocoon&#39;s surface extends to contain the chosen&#39;s growing muscles and cock.\
 His body is unbelievably massive, the epitome of power and virility. Muscles flex within the cocoon, sending ripples across its growing surface. 
 
The Losts all roar and cum in unison at the sight of their god towering over the ruins.

He grows up to SIZE, his black prison becoming visible from the ground below.</tw-passagedata><tw-passagedata pid="506" name="Feed_The_Chosen_Level2" tags="" position="725,6350" size="100,100">The black fleshy chamber grows upwards, directly towards the light of Nyx. You step back as the cocoon&#39;s surface extends to contain the chosen&#39;s growing muscles and cock.\
 His body is unbelievably massive, the epitome of power and virility. Muscles flex within the cocoon, sending ripples across its growing surface. 
 
The Losts look at you in complete awe as you step towards the chosen one. They kneel, letting you walk freely to the SIZE cocoon.\
 This one will surely be enough to make the chosen one reach the Black Sun itself. Your X hands press upon its surface once more, it pulls you in, taking your Essence like dry soil. \
 You feel Nyx&#39;s will through your own, to carve a vessel for it to walk the Barrens. 
 
To have all eyes pulled onto its light. 

The platform is barely holding on to the mountainous black cocoon. At SIZE, Nyx is almost within its reach.</tw-passagedata><tw-passagedata pid="507" name="Feed_The_Chosen_Final" tags="" position="850,6350" size="100,100">Apothus looks at you with a smile of pure, utter happiness. One that only displays a fraction of the bliss he feels at seeing a new god&#39;s birth.

His hands glow with a golden hue; the whole ruins shake in response.

You feed the cocoon with more Essence, enough to grow yourself into a titan of unbelievable strength. But this power needs to be used for a higher purpose.

Yes... To worship Nyx is to free oneself of doubts and fear!
\&lt;&lt;if $CharacterSheet_Player.quest.nyxParasiteInfections &lt;= 0&gt;&gt;

All shall live in its light! 

\&lt;&lt;else&gt;&gt;

Its parasites shall live among us!

\&lt;&lt;/if&gt;&gt;
Free from the fear of being broken by cursed beasts! We shall all be perfect, blessed by the all-consuming embrace of our new god!

Apothus grins, his eyes shine with the unholy glow of Nyx&#39;s light. He joins your effort, his hand pressing on the base of the cocoon.

The surrounding Losts soon follow, giving away their Essence to their god. A muffled roar shakes the whole platform. It bursts with sudden growth as if an explosion triggered within. 

-Nyx gets sucked inside cocoon
-blows up in size exponentially
-he hovers, his eyes black, his skin, dark purple.
-his hand grasp his cock, seems too overtaken by pleasure to form words.
-The Lost cum at this sight, they pile on one another to taste his flooding pre.
-Chosen roars and cums, flooding you with god like powers.
-The platform is flooded with screams for more.
-Apothus triggers the spells as he cums furiously.

-The last thing you hear is the all-consuming roar of the now unleashed gods.
You suddenly stand in the desert.
You are massive, your skin as black as night. Above you lays the massive body of your god, his lustful moans shakes your very being.
Precum falls on you next, you grow and grow and grow. The sun seems so close now. Yet your new god covers it completely with his massive form.
-His whole form glows with the power of the Nyx. His light cuts off the sun completely.
-Lustful roars resound across the Barrens. 
-You both cum, your tainted seed turning the soil black and corrupted forever.
-if parasites, you both cum millions and millions of parasites that will seek and turn anyone they meet.

Nyx&#39;s will flows through your own.

Echo&#39;s voice warps and moans under the all-consuming influence of Nyx.

Countless lost voices suddenly align.

Cum choice.

The world oozes with darkness.

A power that aligns all.

A darkness that yearns for more.

To live is to grow, to grow is to spread, to spread is to corrupt.

\&lt;&lt;run setup.triggerEnding(&quot;Ending_NyxChosenAscension&quot;)&gt;&gt;
[[The End-&gt;Ending]]</tw-passagedata><tw-passagedata pid="508" name="Quest_MQ002_Manor_DragonRoom_FirstTimeEntry" tags="" position="975,6350" size="100,100">\&lt;&lt;if setup.MQ002_Manor_IsMassiveInManor($CharacterSheet_Player)&gt;&gt;
The structure crumbles, the thunderous sound of wood shattering under your massive body roll across the manor once again.
You tear off parts of the roof and see what lays within.
\&lt;&lt;set $WorldState.cultManor.dragonRoom.isBroken = true&gt;&gt;

\&lt;&lt;/if&gt;&gt;
The copper coloured floor is swarmed by fog. 
The only things not engulfed in it are the grand bed at the center of the room and a person beside its base.

Sitting flat with his head looking down. The bright blue scales of his arms shine through the fog of the room.

He suddenly lifts his head up, as if he had just awoken from a nightmare. His slitted, draconic eyes meet with yours, he pulls back slightly in fear.

&quot;Who are you?&quot; He says with a cracking voice as he jumps back to his clawed, scaly feet. 

He looks terrified, but his movement is graceful and precise. His long grey tunic lands upon the thick layer of fog.
Based on his clothing and posture, he looks like a monk.

[[Attempt to Reassure Him-&gt;Quest_MQ002_Manor_DragonRoom_Reassure]]
[[Fight Him-&gt;Quest_MQ002_Manor_DragonRoom_Fight]]</tw-passagedata><tw-passagedata pid="509" name="Quest_MQ002_Manor_DragonRoom" tags="" position="1100,6350" size="100,100">\&lt;&lt;if $CharacterSheet_MQ002_DragonMonk.quest.infected == true&gt;&gt;
The master bedroom is empty but the smell of Drenth&#39;s cum still lingers in the air...

[[Leave-&gt;Quest_MQ002_Manor_WestWing]]
\&lt;&lt;elseif $CharacterSheet_MQ002_DragonMonk.quest.beaten == true&gt;&gt;
\&lt;&lt;if $CharacterSheet_MQ002_DragonMonk.quest.beatenCycle == ~~($Day / 28) + 1&gt;&gt;
Drenth&#39;s corpse lays in the center of the master bedroom.
A thick layer of fog covers his body up to his scaly chest.
\&lt;&lt;else&gt;&gt;
The master bedroom is empty...
\&lt;&lt;/if&gt;&gt;

[[Leave-&gt;Quest_MQ002_Manor_WestWing]]
\&lt;&lt;elseif $CharacterSheet_MQ002_DragonMonk.quest.threatened == true&gt;&gt;
\&lt;&lt;include Quest_MQ002_Manor_DragonRoom_Threatened&gt;&gt;
\&lt;&lt;else&gt;&gt;
\&lt;&lt;include Quest_MQ002_Manor_DragonRoom_Safe&gt;&gt;
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="510" name="Quest_MQ002_Manor_DragonRoom_Threatened" tags="" position="1225,6350" size="100,100">&lt;&lt;print setup.displayEncounterImage($CharacterSheet_MQ002_DragonMonk.info.picture)&gt;&gt;;
\&lt;&lt;include Quest_MQ002_Manor_DragonRoom_ParasiteHint&gt;&gt;

&quot;Why won&#39;t you just leave this cursed place behind?&quot; 

He jumps back and raises his arms into an attack stance.

&quot;Leave me be or die...&quot;

[[Fight him-&gt;Quest_MQ002_Manor_DragonRoom_Fight]]
[[Leave-&gt;Quest_MQ002_Manor_WestWing]]</tw-passagedata><tw-passagedata pid="511" name="Quest_MQ002_Manor_DragonRoom_ParasiteHint" tags="" position="100,6475" size="100,100">\&lt;&lt;if $CharacterSheet_Player.quest.nyxParasiteInfections &lt;= 0&gt;&gt;
The dragonborn hunches over slightly. 
He seems in pain, but there doesn&#39;t seem to be any visible wounds on his body.
\&lt;&lt;else&gt;&gt;
The dragonborn hunches over slightly. 
He seems in pain, a pain you recognize all too well.

You can see his veins pulsating, his expression of pain mixed with arousal, the subtle bulge throbbing along his tunic.
It feels like parasites of Nyx are within his body as well. Your own parasites press on your balls and prostate excitedly.
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="512" name="Quest_MQ002_Manor_DragonRoom_Safe" tags="" position="225,6475" size="100,100">\&lt;&lt;if setup.MQ002_HasIntactOath()&gt;&gt;
&lt;&lt;print setup.displayEncounterImage($CharacterSheet_MQ002_DragonMonk.info.pictureFriend)&gt;&gt;
\&lt;&lt;else&gt;&gt;
&lt;&lt;print setup.displayEncounterImage($CharacterSheet_MQ002_DragonMonk.info.picture)&gt;&gt;
\&lt;&lt;/if&gt;&gt;
\&lt;&lt;if $CharacterSheet_MQ002_DragonMonk.quest.met == false&gt;&gt;
\&lt;&lt;include Quest_MQ002_Manor_DragonRoom_FirstTimeEntry&gt;&gt;
\&lt;&lt;set $CharacterSheet_MQ002_DragonMonk.quest.met = true&gt;&gt;
\&lt;&lt;else&gt;&gt;
\&lt;&lt;include Quest_MQ002_Manor_DragonRoom_ParasiteHint&gt;&gt;

    \&lt;&lt;if $CharacterSheet_Player.quest.nyxParasiteInfections &gt; 0 &amp;&amp; $CharacterSheet_MQ002_DragonMonk.quest.askedWhoAreYou&gt;&gt;
&lt;span class=&quot;glitch&quot; data-text=&quot;Spread your Parasites...&quot;&gt;[[Spread your Parasites...-&gt;Quest_MQ002_Manor_DragonRoom_InfestHim]]&lt;/span&gt;
    \&lt;&lt;else&gt;&gt;
[[Ask &quot;Who are you?&quot;-&gt;Quest_MQ002_Manor_DragonRoom_WhoAreYou]]
    \&lt;&lt;/if&gt;&gt;
    \
    \&lt;&lt;if $CharacterSheet_Player.quest.nyxParasiteInfections &gt; 0 &amp;&amp; $CharacterSheet_MQ002_DragonMonk.quest.askedWhyAreYouHere&gt;&gt;
&lt;span class=&quot;glitch&quot; data-text=&quot;Fill him with Parasites...&quot;&gt;[[Fill him with Parasites...-&gt;Quest_MQ002_Manor_DragonRoom_InfestHim]]&lt;/span&gt;
    \&lt;&lt;elseif $CharacterSheet_MQ002_DragonMonk.quest.askedWhoAreYou&gt;&gt;
[[Ask &quot;Why Are You Here?&quot;-&gt;Quest_MQ002_Manor_DragonRoom_WhyAreYouHere]]
    \&lt;&lt;/if&gt;&gt;
    \
    \&lt;&lt;if $CharacterSheet_Player.quest.nyxParasiteInfections &gt; 0 &amp;&amp; $CharacterSheet_MQ002_DragonMonk.quest.askedLookingForSomeone&gt;&gt;
    &lt;span class=&quot;glitch&quot; data-text=&quot;Let your Parasites take him over...&quot;&gt;[[Let your Parasites take him over...-&gt;Quest_MQ002_Manor_DragonRoom_InfestHim]]&lt;/span&gt;
    \&lt;&lt;elseif $CharacterSheet_MQ002_DragonMonk.quest.askedWhyAreYouHere &amp;&amp; !$CharacterSheet_MQ002_DragonMonk.quest.askedLookingForSomeone&gt;&gt;
[[Tell him that you&#39;re looking for someone-&gt;Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone]]
    \&lt;&lt;/if&gt;&gt;

    \&lt;&lt;if $CharacterSheet_Player.quest.nyxParasiteInfections &gt; 0&gt;&gt;
[[Infest Him Further...-&gt;Quest_MQ002_Manor_DragonRoom_InfestHim]]
    \&lt;&lt;/if&gt;&gt;
[[Fight Him-&gt;Quest_MQ002_Manor_DragonRoom_Fight]]

[[Leave-&gt;Quest_MQ002_Manor_WestWing]]
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="513" name="Quest_MQ002_Manor_DragonRoom_Reassure" tags="" position="350,6475" size="100,100">\&lt;&lt;if setup.MQ002_Manor_IsMassiveInManor($CharacterSheet_Player)&gt;&gt;
\&quot;I&#39;m not going to hurt you.&quot; You say reassuringly, but your massive body is intimidating nevertheless.

\&lt;&lt;else&gt;&gt;
\&quot;I&#39;m not going to hurt you.&quot; You say reassuringly, but he seems troubled nevertheless.

\&lt;&lt;/if&gt;&gt;
&quot;G-Gugh... What do you want from me?&quot; He mutters under heavy breaths.

[[Continue-&gt;Quest_MQ002_Manor_DragonRoom_Safe]]</tw-passagedata><tw-passagedata pid="514" name="Quest_MQ002_Manor_DragonRoom_WhyAreYouHere" tags="" position="475,6475" size="100,100">The back of the dragonborn slides down the base of the bedframe until he hits the floor with an audible thud.

&quot;It&#39;s a long story...&quot; He says, his lower body gets engulfed by the layer of fog covering the floor.

&quot;I was sent here to kill the master of this realm, a vile monster of a man named Apothus.&quot; 

Just saying the name seems to disgust him, like there is poison in the word itself.

&quot;I came here and confronted him for his crimes against our values, hoping he could be reasoned with. 
But his greed for power blinded him, ever since he came here and gazed upon the Black Sun, he was lost to the Orthani tribe.&quot; He sighs, those memories look heavy on his soul. 

[[Continue-&gt;Quest_MQ002_Manor_DragonRoom_WhyAreYouHere_2]]</tw-passagedata><tw-passagedata pid="515" name="Quest_MQ002_Manor_DragonRoom_WhyAreYouHere_2" tags="" position="600,6475" size="100,100">&quot;And so we fought to the death. I&#39;d kill him without mercy, and wait for him to show his pathetic self to the gate of Nyx&#39;s realm after his rebirth.
He&#39;d show up within a few days, always more corrupted, more muscular and more monstrous every cycle.&quot; His previously proud tone suddenly drops.

&quot;It reached a point where I couldn&#39;t stop him. He went back to Nyx and gave himself to its corruption.
He... Changed. Became an abomination, one who spawned horrors and beasts to spread depravity across the Barrens.&quot; His voice grew quieter.

&quot;I had to put a stop to this, so for many cycles, I tried to fight my way in, died a hero&#39;s death.&quot;

[[Continue-&gt;Quest_MQ002_Manor_DragonRoom_WhyAreYouHere_3]]</tw-passagedata><tw-passagedata pid="516" name="Quest_MQ002_Manor_DragonRoom_WhyAreYouHere_3" tags="" position="725,6475" size="100,100">&quot;But one day, rumours of an important ritual managed to reach me; this was my chance to strike. 
I managed to sneak in, and as I thought, these cursed halls were empty. Every member of this horrible cult was in Apothus&#39;s personal realm. 
And so... I made a ritual of my own, one to seal off their only exit.&quot; He grinned through the pain in triumph.

&quot;Only I can ever free these monsters from their prison now... As long as I keep my oath, they can&#39;t escape.&quot;

\&lt;&lt;set $CharacterSheet_MQ002_DragonMonk.quest.askedWhyAreYouHere = true&gt;&gt;
[[Continue-&gt;Quest_MQ002_Manor_DragonRoom]]</tw-passagedata><tw-passagedata pid="517" name="Quest_MQ002_Manor_DragonRoom_WhoAreYou" tags="" position="850,6475" size="100,100">He begins to calm down a little.

&quot;The name&#39;s Drenth, Drenth of Kaldir&quot; He pauses.

&quot;Look, I don&#39;t know why you&#39;re here, but... There&#39;s evil sealed within these halls. And even with its power contained, it still sends monsters here, hoping they&#39;ll corrupt us into abominations like them.&quot; 

He sighs deeply, dispersing the fog somewhat.

&quot;Maybe it would be best for you to leave.&quot;
\&lt;&lt;set $CharacterSheet_MQ002_DragonMonk.quest.askedWhoAreYou = true&gt;&gt;

[[Continue-&gt;Quest_MQ002_Manor_DragonRoom]]</tw-passagedata><tw-passagedata pid="518" name="Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone" tags="" position="975,6475" size="100,100">&quot;And who could this person be? We&#39;re the only beings with an ounce of sanity remaining here...&quot;

You describe him Cray&#39;s appearance down to the most minute detail, down to the scars laid across his sturdy build.
Everyone in the village knows stories about him, of how hundreds of cycles of adventuring has turned him into the mountain of a man he is today. 
Of how even the most dangerous beasts would flee upon seeing the bright blue eyes behind his full iron helmet.

Drenth stayed silent, just for long enough to make it worrying.

[[Continue-&gt;Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_2]]</tw-passagedata><tw-passagedata pid="519" name="Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_2" tags="" position="1100,6475" size="100,100">&quot;This ritual I mentioned... Your friend was there.&quot;

Your eyes widen.

&quot;And from what I heard of what this ritual was meant to be, he was a centrepiece in it.&quot; He pauses slightly.

&quot;This cult looked for a warrior who could become a host to Nyx, the Black Sun itself for countless cycles.
And from what I saw, it did not look like he was here against his will either...&quot;

Drenth cuts himself short.

&quot;Look, no matter what happened to him, you can assume he&#39;s gone. Keeping all of them sealed here is the only way to keep the world safe...&quot;

[[Let him know that you need to save him-&gt;Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_SaveHim]]
[[Give up-&gt;Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_GiveUp]]</tw-passagedata><tw-passagedata pid="520" name="Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_SaveHim" tags="" position="1225,6475" size="100,100">You firmly believe that Cray can still be saved, but Drenth does not look convinced.

&quot;Absolutely not.&quot;

Drenth shakes his head, a hint of anger rises within him.

&quot;I did not spend this long protecting this seal only to break it. This is a risk I just can&#39;t take, do you even know how dangerous these monsters are?&quot;

[[Tell him that you can take them on-&gt;Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_SaveHim_2]]
[[Agree with him-&gt;Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_GiveUp]]</tw-passagedata><tw-passagedata pid="521" name="Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_SaveHim_2" tags="" position="100,6600" size="100,100">Cray glances at you, examining your body. He tries to hide how impressed he is...

&quot;Even if you did, some of them could escape&quot;

His tone weakens.

&quot;Why would we ever take that risk?&quot; He says as his voice lowers, pleading you to not do this.

[[Tell him to reactivate your seal once you enter their realm-&gt;Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_SaveHim_3]]
[[Stop pressing-&gt;Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_GiveUp]]</tw-passagedata><tw-passagedata pid="522" name="Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_SaveHim_3" tags="" position="225,6600" size="100,100">&quot;You&#39;re insane... This would mean sealing you with them forever...&quot; He sighs.
A long silence seeps in as the dragonborn ponders. He seems to be looking at his arm.

&quot;I hate myself for offering you this, but I don&#39;t think you can be reasoned with.&quot;

Drenth unsheathes a dagger and brings it to his hand.

&quot;Among the Orthani, an oath is more powerful than any kind of magic. By promising to protect our virtues, you could pass the blockade.&quot;

He looks at you, the strength of his beliefs burning bright in his eyes.

[[Make an oath with Drenth-&gt;Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_MakeOath]]
[[Refuse his proposal-&gt;Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_RefuseOath]]</tw-passagedata><tw-passagedata pid="523" name="Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_MakeOath" tags="" position="350,6600" size="100,100">&quot;For as long as you strive to fight Nyx&#39;s corruption, you shall be allowed through my seals.&quot;

He slashes his own hand, blood quickly gushing from the open wound.

&quot;For as long as your cause is virtuous, I will respect it.&quot;

You present your hand to him and flinches as the dagger enters your flesh.
He then presses his scaled hand on yours, his cold blood quickly pools with your own.

&quot;Through the chain of our oath, we will remain strong, free from temptation.&quot;

[[Hold his hand tightly-&gt;Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_MakeOath_2]]</tw-passagedata><tw-passagedata pid="524" name="Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_MakeOath_2" tags="" position="475,6600" size="100,100">You feel a burning sensation rise from your palm.

&quot;Don&#39;t let go...&quot; Drenth says firmly.

It feels like keeping your hand over fire, you clench your teeth as the pain suddenly moves.
Like molten lava coursing through a trench, the pain spreads up to your wrist.
You can hear your flesh sizzling as black marks slowly form around your hands.

They swirl, burning every inch of skin they come upon, and spread outwards toward your arm.
You breathe faster, the pain is becoming too hard to bear as the marks circle up towards your bicep.
Then they slow down; they revolve around your arm, slow enough for you to discern what they represent.

They form into series of black chains that coil around your bicep.
You look up to Drenth to see the same tattoo locking on his arm as well, only his chain is just the newest among countless others...

He simply nods as he lets go of your hand. The burning sensation slowly fades, but you feel an unnatural tightness around the limb...

&quot;The entrance to Apothus&#39;s realm is the golden monolith at the entrance of this cursed manor. Just know that our oath is sacred, breaking it is not an option.&quot;

He then lets his hand drop to his side. This whole ordeal seems to have taken a toll on him.
\&lt;&lt;set $CharacterSheet_MQ002_DragonMonk.quest.askedLookingForSomeone = true&gt;&gt;
\&lt;&lt;set $CharacterSheet_Player.quest.oaths.drenth = $Oath.ACTIVE&gt;&gt;

\&lt;&lt;run $CharacterSheet_Player.applyAbilityRuntimeData($Ability_Oath_Containment);&gt;&gt;

[[Continue-&gt;Quest_MQ002_Manor_DragonRoom]]</tw-passagedata><tw-passagedata pid="525" name="Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_RefuseOath" tags="" position="600,6600" size="100,100">&quot;I must say, I was hoping you&#39;d refuse. Please leave me be now, this is the only way to make sure their evil doesn&#39;t spread.&quot;

He gives you an empathic look before hunching back in pain again.

[[Continue-&gt;Quest_MQ002_Manor_DragonRoom]]</tw-passagedata><tw-passagedata pid="526" name="Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_GiveUp" tags="" position="725,6600" size="100,100">&quot;I know it&#39;s hard, but this is the only way to make sure their evil doesn&#39;t spread.&quot;

He gives you an empathic look before hunching back in pain again.

[[Continue-&gt;Quest_MQ002_Manor_DragonRoom]]</tw-passagedata><tw-passagedata pid="527" name="Quest_MQ002_Manor_DragonRoom_InfestHim" tags="" position="850,6600" size="100,100">Something within you throbs with need. It&#39;s your parasites, they aggressively shake and swirl within your balls.

Gallons of aphrodisiac course within you as they respond to the sweet smell of virtuousness.

&quot;HHff... Hhrrm... Fuuuuuuck...&quot; You moan as you feel your cock and balls expand.
They pulsate so hard it looks like they are flexing, your breath quickens as your heart beats faster and faster.

The dragonborn looks on with despair until he suddenly doubles over.

[[Feel his Parasites Awaken-&gt;Quest_MQ002_Manor_DragonRoom_InfestHim_2]]</tw-passagedata><tw-passagedata pid="528" name="Quest_MQ002_Manor_DragonRoom_InfestHim_2" tags="" position="975,6600" size="100,100">&quot;Ghhhh... No... Not now!&quot; He yells as his cups his own bulge frantically.

But soon even he can&#39;t resist the potent nectar of his own parasites. 
He moans, quietly at first, until he unbuttons his tunic in a panic.

&quot;U-uhh... HHHhh... Fo-forgive me, Ortha... GAHHHhhh!&quot; 

[[Gaze at his Growing Cock-&gt;Quest_MQ002_Manor_DragonRoom_InfestHim_3]]</tw-passagedata><tw-passagedata pid="529" name="Quest_MQ002_Manor_DragonRoom_InfestHim_3" tags="" position="1100,6600" size="100,100">He fails to remove his pants in time before his cock bursts out of them. 

&lt;&lt;print setup.processFlavours($CharacterSheet_MQ002_DragonMonk, &quot;Your mouth waters at the sight of the @[all|cocks|noverb].&quot;)&gt;&gt; 
It&#39;s already glistening with pre, it looks... Perfect. 

You come closer as your balls expand even more... 
The dragonborn looks at you in a mix of confusion and arousal, he tries to speak, but only moans come out of his mouth.

[[Whisper to his ear &quot;Sshh... Let&#39;s just enjoy this.&quot;-&gt;Quest_MQ002_Manor_DragonRoom_InfestHim_4]]</tw-passagedata><tw-passagedata pid="530" name="Quest_MQ002_Manor_DragonRoom_InfestHim_4" tags="" position="1225,6600" size="100,100">A long deep moan escapes him as you utter these words. 
&lt;&lt;print setup.processFlavours($CharacterSheet_Player, &quot;He gives himself away to your @[all|pecs|noverb] and @[all|abdominals|noverb].&quot;)&gt;&gt; 

You caress the back of his head and then kiss him deeply. 

&lt;&lt;print setup.processFlavours($CharacterSheet_Player, &quot;Your @[all|tongues|one=thrusts~more=thrust] deep into his throat, his lust is intoxicating.&quot;)&gt;&gt; 
&lt;&lt;print setup.processFlavours($CharacterSheet_MQ002_DragonMonk, &quot;Just like yours, his @[all|cocks|one=throbs~more=throb] aggressively.&quot;)&gt;&gt;
Through the pulses you feel along your fingers, you know now that not only blood travels through those veins.

&lt;&lt;print setup.processFlavours($CharacterSheet_Player, &quot;The dragonborn stares at your @[all|cocks|noverb], he marvels at the size and girth.&quot;)&gt;&gt; 

&quot;Please... I... I...&quot; He mutters.

[[Rub your cock on him-&gt;Quest_MQ002_Manor_DragonRoom_InfestHim_5]]</tw-passagedata><tw-passagedata pid="531" name="Quest_MQ002_Manor_DragonRoom_InfestHim_5" tags="" position="100,6725" size="100,100">&lt;&lt;print setup.processFlavours($CharacterSheet_Player, &quot;You rub your @[all|cocks|noverb] on his abs, his moans extend, grow more profound.&quot;)&gt;&gt; 

&quot;Go on... I know you want it. MMnhh... More than anything.&quot; You assert as you present your &lt;&lt;print setup.processFlavours($CharacterSheet_Player, &quot;@[all|cocks|noverb]&quot;)&gt;&gt; to him. 

He draws his head to the tip of &lt;&lt;print setup.processFlavours($CharacterSheet_Player, &quot;@[1|cocks|noverb]&quot;)&gt;&gt;, his whole body shaking in utter need. He kisses it softly, just enough to have a taste. 
A small amount of pre touches his tongue, he can feel them, their essence in your seed.

He wants more...

[[Give him more...-&gt;Quest_MQ002_Manor_DragonRoom_InfestHim_6]]</tw-passagedata><tw-passagedata pid="532" name="Quest_MQ002_Manor_DragonRoom_InfestHim_6" tags="" position="225,6725" size="100,100">His tongue drenches your glans, he tastes every inch before taking it all in. You feel him pushing down your slit, reaching down toward his prize.

He cups your &lt;&lt;print setup.processFlavours($CharacterSheet_Player, &quot;@[all|balls|noverb]&quot;)&gt;&gt;, feeling the parasites inside, caressing them.

&quot;HHNNnnnn...&quot;

You feel them respond, they course through your balls and slither up towards your &lt;&lt;print setup.processFlavours($CharacterSheet_Player, &quot;@[all|cocks|noverb]&quot;)&gt;&gt;. 
The feeling is more than orgasmic. You feel complete, like spreading the parasites is your reason for existing.

&quot;T-Take them...&quot;

The dragonborn fully gives in. 
He can feel them bulging along your shaft, he sucks like his life depends on it, his tongue reaching deep within your cock. 

[[Let the parasites out-&gt;Quest_MQ002_Manor_DragonRoom_InfestHim_7]]</tw-passagedata><tw-passagedata pid="533" name="Quest_MQ002_Manor_DragonRoom_InfestHim_7" tags="" position="350,6725" size="100,100">You feel them rising up, inch by inch as your &lt;&lt;print setup.processFlavours($CharacterSheet_Player, &quot;@[all|teeths|noverb]&quot;)&gt;&gt; clench. The pressure keeps building, his tongue reaches deeper. 
He gazes at you, with a deranged arousal burning in his eyes. His slurping moans grow louder and louder as he feels small parasites moving along your veins.

And finally, you feel it coming. You pull his head in, as deep as his body allows it, and you roar. 
You roar as an all-embracing orgasm breaks out. Your &lt;&lt;print setup.processFlavours($CharacterSheet_Player, &quot;@[all|churning|balls| one=throbs~more=throb]&quot;)&gt;&gt; as litters of cum pumps out of you. 
&lt;&lt;print setup.processFlavours($CharacterSheet_Player, &quot;The dragonborn unleashes a muffled roar himself as his load shoots up your @[all|abdominals|noverb] and pools under your @[all|pecs|noverb].&quot;)&gt;&gt; 
Your head thrashes back, only for another load to shoot out, making you roar even more passionately.

And then you feel it. Something monstrous moving along your shaft, your urethra widens more and more... 
The dragonborn grins. He caresses the base, pressures it to keep moving. Every inch it travels shocks you with inhuman pleasure. 
Your roars turn into ecstatic moans. 

You moan and moan as it keeps slithering up to your slit. The dragonborn pulls back and grins madly. 
A large parasite shaped like a &lt;&lt;print setup.getRace($CharacterSheet_Player.info.anatomy, true)&gt;&gt;&#39;s cock stretches your slit to its limit. It seems to have evolved with the time it passed inside you.

&quot;Fuck... Yessssss...&quot; The dragon moans.

[[Infest him Further...-&gt;Quest_MQ002_Manor_DragonRoom_InfestHim_8]]</tw-passagedata><tw-passagedata pid="534" name="Quest_MQ002_Manor_DragonRoom_InfestHim_8" tags="" position="475,6725" size="100,100">His mind is already made up, he opens his mouth and rolls out his tongue, licking his lips sensually. 
You scream in pleasure as your parasite pulls itself out of you. 
It slithers like a snake towards the dragon&#39;s open mouth and immerses itself in. 
His eyes roll in the back of his head as pleasure overwhelms him, he cums once again. 

Thick white creamy seed full of his own parasites bursts onto your &lt;&lt;print setup.processFlavours($CharacterSheet_Player, &quot; @[all|pecs|noverb]&quot;)&gt;&gt; as the monster fully enters him.

&quot;Ahhhhhh... This feels amazing...&quot; He moans as he attempts to catch his breath.

&quot;Hmmm... Haaahahahaaha... YESSSS...&quot; The dragonborn laughs madly as his right arm suddenly starts glowing. 
A fiery light fills the room as he tears off his tunic to ribbons. 

Your eyes widen as you see the source of this burning light. 
Numerous tattoos, all of them resembling chains, burn the dragonborn&#39;s skin. Like they are made of molten lava.

&quot;Feels so good to give in...&quot; He exclaims as his tattoos break, all at the same time. Each link of every chain burst into fragments of ink under his skin.

&quot;To finally be free.&quot;

He peers at you, deep into your eyes, no longer is he tired or in pain. He looks ready to bring the world its knees.

&quot;I feel so alive... And it&#39;s all thanks to you.&quot; 

\&lt;&lt;run setup.breakOath(&quot;drenth&quot;)&gt;&gt;
[[Kiss him wildly-&gt;Quest_MQ002_Manor_DragonRoom_InfestHim_10]]</tw-passagedata><tw-passagedata pid="535" name="Quest_MQ002_Manor_DragonRoom_InfestHim_10" tags="" position="600,6725" size="100,100">&lt;&lt;print setup.displayEncounterImage($CharacterSheet_MQ002_DragonMonk.info.pictureCorrupt)&gt;&gt;
You both pull eachother into a deep, messy kiss. Your &lt;&lt;print setup.processFlavours($CharacterSheet_Player, &quot; @[all|tongues|one=wrestles~more=wrestle]&quot;)&gt;&gt; his own as you cup each others balls lovingly. 

He then pushes back and snickers.

&quot;With all my oaths broken,&quot; He trails his broken tattoos with his fingers. &quot;The evils of this place really have nothing to stop them anymore...&quot; 
He looks affected by this, but at the same time. It also feels like these aren&#39;t his concerns anymore. 

He cups his balls once more while fixating your own.

&quot;The monolith at the entrance, this is where the leader of this cult lies.&quot; A grin slowly rises across his mouth.

&quot;You look strong enough to take them on. Please, kill their leader for me, for all the time he made me waste in this rotten hell.&quot;

The dragonborn stands up, giving you one last look before heading to the door.

&quot;I&#39;ll be seeing you around, the Barrens is a small place after all...&quot;

As his smile grows, two tongues roll down. They are thicker and longer than ever before.

&quot;And now that I&#39;m free, I have countless cycles of pleasure ahead of me.&quot;
\&lt;&lt;run setup.changeLimbNumber($CharacterSheet_MQ002_DragonMonk.info.anatomy, &quot;tongues&quot;, 2)&gt;&gt;
\&lt;&lt;set $CharacterSheet_MQ002_DragonMonk.quest.infected = true&gt;&gt;

[[Continue-&gt;Quest_MQ002_Manor_DragonRoom]]</tw-passagedata><tw-passagedata pid="536" name="Quest_MQ002_Manor_DragonRoom_Fight" tags="" position="725,6725" size="100,100">&quot;I should have known you were just another monster.&quot; 

He jumps back and raises his arms into an attack stance.

&quot;This is your last warning, leave me be or die...&quot;

\&lt;&lt;set $CharacterSheet_MQ002_DragonMonk.quest.threatened = true&gt;&gt;
[[Fight Him-&gt;FightLogic][$Encounter_Target = $CharacterSheet_MQ002_DragonMonk]]
[[Leave-&gt;Quest_MQ002_Manor_WestWing]]</tw-passagedata><tw-passagedata pid="537" name="Quest_MQ002" tags="" position="850,6725" size="100,100">&lt;&lt;set $Quest_MQ002 = 
{
    id:&quot;MQ002&quot;,
    description: &quot;While exploring, I found a strange portal. In front of it laid the sigil of the Cult of Nyx. They are probably ready for intruders...&quot;,
    villagePassage: &quot;[[Go to the Cult of Nyx&#39;s hideout-&gt;Quest_MQ002_Entrance]]&quot;,
    onComplete: function()
    {
        //todo
    }
}&gt;&gt;</tw-passagedata><tw-passagedata pid="538" name="Quest_MQ002_Entrance_FirstTime" tags="" position="975,6725" size="100,100">As you explore the never-ending desert of the Barrens, something on the horizon catches your attention.
A lone black structure stands surrounded by dunes.

As you approach, you recognize its shape. Without a doubt, it&#39;s the sigil of the Cult of Nyx.

A bright red portal lays at the base of it. 
You take a mental note of the path you chose to reach this point. 
This is undoubtedly an entrance to the cult&#39;s hideout.

&lt;&lt;run $Quest_InProgress.push($Quest_MQ002)&gt;&gt;

You can now travel to the Cult of Nyx&#39;s hideout from the village!

[[Village-&gt;Village]]

&lt;&lt;script&gt;&gt;
var i;

for(i = 0; i &lt; State.variables.Explore_Destinations.length; i++)
{
    if(State.variables.Explore_Destinations[i] == &quot;Quest_MQ002_Entrance_FirstTime&quot;)
    {
        State.variables.Explore_Destinations.splice(i, 1);
        break;
    }
}
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="539" name="Quest_MQ002_Entrance" tags="" position="1100,6725" size="100,100">As you step inside the portal, your surroundings suddenly change.
The bright afternoon of the desert instantly flashes away. 

You try to take in where you are now. 
It seems to be night time, you can barely see beyond a few feet in front of you.
The ground is covered in grass, too healthy-looking to be where you&#39;re from. Trees stand tall all around you.

You&#39;ve never seen anything like it...

[[Continue-&gt;Quest_MQ002_Entrance_2]]</tw-passagedata><tw-passagedata pid="540" name="Quest_MQ002_Entrance_2" tags="" position="1225,6725" size="100,100">The dim light of some torches draw your attention. They reveal a massive gate.
\&lt;&lt;if !$CharacterSheet_MQ002_Guard.quest.beaten&gt;&gt;
&lt;&lt;include Quest_MQ002_Entrance_Guard&gt;&gt;
\&lt;&lt;else&gt;&gt;
&lt;&lt;include Quest_MQ002_Entrance_NoGuard&gt;&gt;
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="541" name="Quest_MQ002_Entrance_Guard" tags="" position="100,6850" size="100,100">A massive armoured figure stands in front of it. 
If not for its soft breathing, you would have assumed it was a gigantic statue.
But as you come closer, you realize that it is a &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_MQ002_Guard, &quot;height&quot;))&gt;&gt; minotaur. 

His eyes pierce through you as he raises a massive axe threateningly. 

It does not seem he&#39;d be willing to reason with you.
 \&lt;&lt;set $CharacterSheet_MQ002_Guard.quest.met = true&gt;&gt;
[[Fight Him-&gt;FightLogic][$Encounter_Target = $CharacterSheet_MQ002_Guard]]
[[Leave-&gt;Village]]</tw-passagedata><tw-passagedata pid="542" name="Quest_MQ002_Entrance_NoGuard" tags="" position="225,6850" size="100,100">The entrance is freed from the minotaur&#39;s protection, nothing is stopping you from going inside the gate to the cult&#39;s hideout for this cycle.

[[Open the Gate-&gt;Quest_MQ002_MoveInsideGate]]
[[Leave-&gt;Village]]

&lt;&lt;run setup.MQ002_LeavingManor($CharacterSheet_Player)&gt;&gt;</tw-passagedata><tw-passagedata pid="543" name="Quest_MQ002_Manor_MainHall" tags="" position="350,6850" size="100,100">You stand in the main hall of the strange estate, intricate gold-clad markings course along the cobblestone floor.
They cover the whole room, with them gathering towards a structure in the center of it.

It&#39;s a grand golden monolith. Black markings swirl along its surface like water in a river.

\&lt;&lt;set $MQ002_Manor_Destination = &quot;Quest_MQ002_Manor_WestWing&quot;&gt;&gt;
\&lt;&lt;set $MQ002_Manor_Source = &quot;Quest_MQ002_Manor_MainHall&quot;&gt;&gt;
[[Move to the West Wing-&gt;Quest_MQ002_Manor_WestWing_Path]]
[[Examine the Monolith-&gt;Quest_MQ002_Manor_MainHall_ExamineMonolith]]

[[Leave the Manor-&gt;Quest_MQ002_Entrance_NoGuard]]</tw-passagedata><tw-passagedata pid="544" name="Quest_MQ002_Manor_MainHall_ExamineMonolith" tags="" position="475,6850" size="100,100">\&lt;&lt;if $WorldState.cultManor.monolithBroken&gt;&gt;
You approach the grand monolith and look closely.

It is completely clean of the black ink-like substance that once crawled upon its golden surface. 

\&lt;&lt;else&gt;&gt;
You approach the grand monolith and look closely.
A black ink-like substance moves along the golden surface. 

As you get closer, it crawls and merges until it forms readable letters.

\&lt;span class = &quot;monolith&quot;&gt;
\&lt;&lt;if setup.MQ002_Manor_IsCorruptedInManor($CharacterSheet_Player)&gt;&gt;
    \&lt;&lt;if $WorldState.cultManor.mainHall.isBroken&gt;&gt;
//&quot;As destructive as you&#39;ve been, we still welcome you to our halls.&quot;//
    \&lt;&lt;/if&gt;&gt;
//&quot;Break the seal of our realm. We can grant you what you truly seek.&quot;//
\&lt;&lt;else&gt;&gt;
    \&lt;&lt;if $WorldState.cultManor.mainHall.isBroken&gt;&gt;
//&quot;Your senseless destruction of our halls will be accounted for. We will show no mercy.&quot;//
    \&lt;&lt;else&gt;&gt;
//&quot;There is nothing for you here. Leave now or your soul will rot in these halls for all eternity.&quot;//
    \&lt;&lt;/if&gt;&gt;
\&lt;&lt;/if&gt;&gt;
\&lt;/span&gt;

\&lt;&lt;if setup.MQ002_HasBrokenSeal() || setup.MQ002_HasIntactOath()&gt;&gt;
[[Enter Apothus&#39;s Realm-&gt;Quest_MQ002_ApothusRealm_Entrance]]
\&lt;&lt;/if&gt;&gt;
\&lt;&lt;/if&gt;&gt;
[[Go Back-&gt;Quest_MQ002_Manor_MainHall]]</tw-passagedata><tw-passagedata pid="545" name="Quest_MQ002_Manor_WestWing_Path_SeeParasite" tags="" position="600,6850" size="100,100">\&lt;&lt;if setup.MQ002_Manor_IsMassiveInManor($CharacterSheet_Player)&gt;&gt;
As you walk along the broken hallway, you hear the familiar sound of a portal opening, the same as the one you&#39;ve heard countless times after being reborn.
Staring down, you see the strange dark light condense further down the hall.
Something heavy pushes through to it, causing the whole structure to shake until it breaks open. 
\&lt;&lt;else&gt;&gt;
As you walk along the hallway, something catches your attention.
A thick liquid is dripping from the ceiling.
You look upwards and see a black spot grows and spread; it seems like the whole thing is about to cave in from whatever is up there.
After you quickly step back, it happens. Dust flies everywhere as something falls in front of you.
You can see it slithering behind the dust.
\&lt;&lt;/if&gt;&gt;

A featureless, black snake-like body prods through. A large eye stares directly at you from where his head would have been. 
It is surrounded by what looks like black dripping leaves, each of them gilstening with the otherworldly glow of Nyx&#39;s light. 

[[Continue-&gt;Quest_MQ002_Manor_WestWing_Path_SeeParasite_2]]</tw-passagedata><tw-passagedata pid="546" name="Quest_MQ002_Manor_WestWing_Path_SeeParasite_2" tags="" position="725,6850" size="100,100">&lt;&lt;print setup.displayEncounterImage($CharacterSheet_MQ002_NyxParasite.info.picture)&gt;&gt;

Finally, it crawls until its &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_MQ002_NyxParasite, &quot;height&quot;))&gt;&gt; long body is fully exposed, its attention is completely focused on you...

[[Defend Yourself-&gt;FightLogic][$Encounter_Target = $CharacterSheet_MQ002_NyxParasite]]</tw-passagedata><tw-passagedata pid="547" name="Quest_MQ002_Manor_WestWing_Path" tags="" position="850,6850" size="100,100">\&lt;&lt;set $CharacterSheet_MQ002_NyxParasite.info.height = setup.getStatValue($CharacterSheet_Player, &quot;cock&quot;) * 3&gt;&gt;
\&lt;&lt;if setup.MQ002_Manor_RandomEncounter()&gt;&gt;\
&lt;&lt;include Quest_MQ002_Manor_WestWing_Path_SeeParasite&gt;&gt;
\&lt;&lt;else&gt;&gt;
\&lt;&lt;if $WorldState.cultManor.westWingHallway.isBroken&gt;&gt;
Your destruction is apparent, the previously glamourous hall is now completely destroyed by your gigantic form.

[[Move to the Next Wing-&gt;$MQ002_Manor_Destination]]
\&lt;&lt;elseif setup.MQ002_Manor_IsMassiveInManor($CharacterSheet_Player)&gt;&gt;
Your gigantic form cannot be contained by the hallway leading to the next wing.
With every step, stones and wood flies out in a destructive display of sheer size and power. 
\&lt;&lt;set $WorldState.cultManor.westWingHallway.isBroken = true&gt;&gt;

[[Barge in-&gt;$MQ002_Manor_Destination]]
\&lt;&lt;else&gt;&gt;
The hallway is eerily quiet. 
Your footsteps echo along the large corridor until you reach a single door at the end.

[[Open the door-&gt;$MQ002_Manor_Destination]]
\&lt;&lt;/if&gt;&gt;
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="548" name="Quest_MQ002_Manor_WestWing" tags="" position="975,6850" size="100,100">The stand of the west wing&#39;s living room is impressive. You assume it could host more than two dozen guests.

Yet some things strike you as odd. The room is empty of any sign of being lived-in.
Other than the slow waving of curtains in front of half-open windows, it seems frozen in time.

After some examination, the only thing of interest here is a door leading further west.

[[Enter the Room-&gt;Quest_MQ002_Manor_DragonRoom]]
\&lt;&lt;set $MQ002_Manor_Destination = &quot;Quest_MQ002_Manor_MainHall&quot;&gt;&gt;
\&lt;&lt;set $MQ002_Manor_Source = &quot;Quest_MQ002_Manor_WestWing&quot;&gt;&gt;
[[Go Back to the Main Hall-&gt;Quest_MQ002_Manor_WestWing_Path]]</tw-passagedata><tw-passagedata pid="549" name="Quest_MQ002_MoveInsideGate" tags="" position="1100,6850" size="100,100">\&lt;&lt;if setup.MQ002_Manor_IsMassiveInManor($CharacterSheet_Player)&gt;&gt;
From your height, you can see what lies beyond the gate. A vast empty field with no end in sight.
\&lt;&lt;else&gt;&gt;
As you push the massive gate open, something unexpected surprises you. 

A strange, dark glow floods out of the doors. It clashes with the light of nearby torches. 
You stare &lt;&lt;if setup.MQ002_Manor_IsCorruptedInManor($CharacterSheet_Player)&gt;&gt;uneasily&lt;&lt;else&gt;&gt;in fascination&lt;&lt;/if&gt;&gt; as the black light warps and darken the soft light of the flames. 
Every blade of grass that touches the invading glow shakes and grows slightly in size. 
Soon they are blacker than the night surrounding you. They flail violently in all directions.
\&lt;&lt;/if&gt;&gt;

\&lt;&lt;if setup.MQ002_Manor_IsCorruptedInManor($CharacterSheet_Player)&gt;&gt;
It feels like you are gazing at something from another world. One in which you do not belong...
\&lt;&lt;else&gt;&gt;
Your heart beats like a drum upon seeing the corruption you&#39;ve just witnessed. 
Who knows what it will do to you once you step through the gate?
\&lt;&lt;/if&gt;&gt;

[[Fully Open the Gate-&gt;Quest_MQ002_MoveInsideGate_2]]
[[Close it and Go Back-&gt;Quest_MQ002_Entrance_NoGuard]]</tw-passagedata><tw-passagedata pid="550" name="Quest_MQ002_MoveInsideGate_2" tags="" position="1225,6850" size="100,100">The old gate hard grinds along the changing ground. 

Deep, cold fog seeps out and cuts your breath short.

The strange light inevitably covers you as you push the gate fully open.

\&lt;&lt;if setup.MQ002_Manor_IsCorruptedInManor($CharacterSheet_Player)&gt;&gt;
Your corrupted body openly welcomes it... 
Lust rushes inside you as you open yourself to its dark temptation.
\&lt;&lt;else&gt;&gt;
Warm tingles softly pierce your exposed limbs. 
Even with the deep fog dimming it, you feel its influence seeping inside you.
Lustful images slowly appear in your thoughts.
\&lt;&lt;/if&gt;&gt;

The heat of warm bodies brushes over your skin. 
Wanting moans resound in your mind as your cock throbs with need. 

It is calling to you with every contact...

You gain the &quot;Touched by Nyx&#39;s Light&quot; ability for as long as you stay in this realm.
\&lt;&lt;run setup.MQ002_GiveNyxLightAbility()&gt;&gt;

\&lt;&lt;if $MQ002_LookedUpwards == undefined&gt;&gt;
[[Look Upwards-&gt;Quest_MQ002_MoveInsideGate_LookUpwards]]
\&lt;&lt;/if&gt;&gt;
\&lt;&lt;if $MQ002_LookedAround == undefined&gt;&gt;
[[Look Around You-&gt;Quest_MQ002_MoveInsideGate_LookAround]]
\&lt;&lt;else&gt;&gt;
[[Go to the Manor-&gt;Quest_MQ002_MoveInsideGate_3_GoToManor]]
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="551" name="Quest_MQ002_MoveInsideGate_LookUpwards" tags="" position="100,6975" size="100,100">You look upwards...

You get a glance at what lies above, beyond the deep fog. 
A black star burns brightly, reaching everything with its unholy light. 
This glimpse is enough to make you grunt in pain, you instinctively close your eyes and look away. 

Yet the fierceness of the black sun keeps burning inside your pupils. Like it has imprinted itself in your mind.

You gain 3 points of Corruption.
\&lt;&lt;run setup.applyCorruption($CharacterSheet_Player, 3)&gt;&gt;
\&lt;&lt;set $MQ002_LookedUpwards = true&gt;&gt;
[[Continue-&gt;Quest_MQ002_MoveInsideGate_2]]</tw-passagedata><tw-passagedata pid="552" name="Quest_MQ002_MoveInsideGate_LookAround" tags="" position="225,6975" size="100,100">As your eyes burn from the strange black light, you notice a structure standing not far beyond the gate. 

You could swear it was not here before... 
\&lt;&lt;set $MQ002_LookedAround = true&gt;&gt;
[[Continue-&gt;Quest_MQ002_MoveInsideGate_2]]</tw-passagedata><tw-passagedata pid="553" name="Quest_MQ002_MoveInsideGate_3_GoToManor" tags="" position="350,6975" size="100,100">From under the gaze of a black star, you push forward to the large edifice.

[[Continue-&gt;Quest_MQ002_Manor_Entrance]]</tw-passagedata><tw-passagedata pid="554" name="Quest_MQ002_Manor_Entrance" tags="" position="475,6975" size="100,100">As you approach, it becomes clear that the structure is a large estate.
What is even more striking than its formidable stature is its condition. 
It looks like it was built recently, with otherworldly jet black stones more fabulous than any material you&#39;ve seen in the Barrens.
Golden glyphs and markings curl up and rise along the contour of its silhouette.

\&lt;&lt;if setup.MQ002_Manor_HasBrokenPartOfManor()&gt;&gt;
Yet the previously imposing structure now shows damage beyond repair.

\&lt;&lt;/if&gt;&gt;
\&lt;&lt;if $WorldState.cultManor.mainHall.isBroken&gt;&gt;
You walk along an unusually clean cobblestone path to reach the destroyed entrance of the manor. 
\&lt;&lt;else&gt;&gt;
You walk along an unusually clean cobblestone path to reach the manor&#39;s entrance. 
\&lt;&lt;/if&gt;&gt;

\&lt;&lt;if setup.MQ002_Manor_IsMassiveInManor($CharacterSheet_Player)&gt;&gt;
&lt;&lt;include Quest_MQ002_Manor_Entrance_Massive&gt;&gt;
\&lt;&lt;else&gt;&gt;
&lt;&lt;include Quest_MQ002_Manor_Entrance_Normal&gt;&gt;
\&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="555" name="Quest_MQ002_Manor_Entrance_Normal" tags="" position="600,6975" size="100,100">[[Enter the Manor-&gt;Quest_MQ002_Manor_MainHall]]
[[Go Back to the Gate-&gt;Quest_MQ002_Entrance_NoGuard]]</tw-passagedata><tw-passagedata pid="556" name="Quest_MQ002_Manor_Entrance_Massive" tags="" position="725,6975" size="100,100">\&lt;&lt;if $WorldState.cultManor.mainHall.isBroken&gt;&gt;
[[Enter the Manor-&gt;Quest_MQ002_Manor_MainHall]]
\&lt;&lt;else&gt;&gt;
The door is too small for you to get in.
There&#39;s really only one way to get inside with your current size.

[[Barge In-&gt;Quest_MQ002_Manor_Entrance_Massive_BargeIn]]
\&lt;&lt;/if&gt;&gt;
[[Go Back to the Gate-&gt;Quest_MQ002_Entrance_NoGuard]]</tw-passagedata><tw-passagedata pid="557" name="Quest_MQ002_Manor_Entrance_Massive_BargeIn" tags="" position="850,6975" size="100,100">\&lt;&lt;if setup.getStatValue($CharacterSheet_Player, &quot;corruption&quot;) &lt; 50&gt;&gt;
You pull the door off its frame with relative ease, but trying to get by causing as little damage as possible is not so easy.
\&lt;&lt;else&gt;&gt;
You grin and rip the door off its frame like it&#39;s nothing. Seeing how small the manor is to you makes your cock throb... 
\&lt;&lt;/if&gt;&gt;

The whole face of the structure cracks and groans as you lift the roof off like it&#39;s a dollhouse. 
The foundation of black stones and wood shatters under your might.

[[Enter the Manor-&gt;Quest_MQ002_Manor_MainHall]]</tw-passagedata><tw-passagedata pid="558" name="Combat_Guide" tags="" position="975,6975" size="100,100">This version comes with a new combat system so here is a small guide to explain how it works.

A list of randomized moves are given to you every turn.
You can chain a move if its combo value (the number in the top right corner) is adjacent to that of the following move.

So a move with a value of 3 can only combo with moves that have a value of 2 or 4! 

Here&#39;s a little visual guide: 
&lt;&lt;print setup.displayEncounterImage(&quot;https://sombreve.github.io/Dawn-of-Corruption-Site/Images/combo_guide.png&quot;)&gt;&gt;

[[Continue-&gt;Village]]</tw-passagedata><tw-passagedata pid="559" name="Credits" tags="" position="1100,6975" size="100,100">&lt;p style=&quot;text-align:center&quot;&gt;
&lt;h2&gt;Directed by&lt;/h2&gt;
Sombreve 
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/sombreve.png][http://www.furaffinity.net/user/sombreve/]]

&lt;h2&gt;Programming by&lt;/h2&gt;
Sombreve 
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/sombreve.png][http://www.furaffinity.net/user/sombreve/]]

Taeryr 
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/taeryr.gif][https://www.furaffinity.net/user/taeryr]]

Mechanodragon
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/mechanodragon.gif][https://www.furaffinity.net/user/mechanodragon]]

&lt;h2&gt;Art by&lt;/h2&gt;
Rethxus 
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/rethxus.png][http://www.furaffinity.net/user/rethxus/]]

&lt;h2&gt;Written by&lt;/h2&gt;
Sombreve 
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/sombreve.png][http://www.furaffinity.net/user/sombreve/]]

Jagaz
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/jagaz.gif][http://www.furaffinity.net/user/jagaz/]]

Taeryr 
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/taeryr.gif][https://www.furaffinity.net/user/taeryr]]

Mechanodragon
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/mechanodragon.gif][https://www.furaffinity.net/user/mechanodragon]]

Delta-Tango
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/delta-tango.gif][https://www.furaffinity.net/user/Delta-Tango]]

Ninjasy2667 
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/ninjasy2667.gif][https://www.furaffinity.net/user/ninjasy2667]]

&lt;h2&gt;UI By&lt;/h2&gt;
Ghost
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/ghostboy.gif][https://www.furaffinity.net/user/ghostboy]]

Furyalpha123
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Furyalpha123.jpg][https://www.furaffinity.net/user/Furyalpha123]]

&lt;h2&gt;Testing By&lt;/h2&gt;
Vertigo
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/vertigolapse.gif][https://www.furaffinity.net/user/vertigolapse]]

Whiteleo
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/whiteleo.gif][https://www.furaffinity.net/user/whiteleo]]

Shadowlost25
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/shadowlost25.gif][https://www.furaffinity.net/user/shadowlost25]]

Legdim
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/legdim.png][https://twitter.com/BurlyDrake]]

bassman97 
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/bassman97.gif][https://www.furaffinity.net/user/bassman97]]

Tomi
Garryn
AizelTheUncultured
MikeLovesPecs

[[Main Menu-&gt;Main Menu]]
&lt;/p&gt;</tw-passagedata><tw-passagedata pid="560" name="DebugMenu" tags="" position="1225,6975" size="100,100">[[Return to Game-&gt;Village]]

[[Learn All Fight Moves-&gt;DebugMenu][setup.debug_LearnAllMoves()]]
[[God Stats-&gt;DebugMenu][setup.debug_GodStats()]]
[[Get Essence-&gt;DebugMenu][setup.debug_GetEssence()]]
[[Get Exp-&gt;DebugMenu][setup.debug_GetExp()]]
[[Get Levels-&gt;DebugMenu][setup.debug_GetLevels()]]
[[Gain 25 corruption-&gt;DebugMenu][setup.debug_GetCorruption()]]
[[Reset Corruption-&gt;DebugMenu][setup.debug_ResetCorruption()]]
[[Add 7 Days-&gt;DebugMenu][setup.addDays(7)]]

[[Log Player-&gt;DebugMenu][console.log($CharacterSheet_Player)]]

Abilities

[[Learn Echo Form-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_EchoForm)]]
[[Learn Host of Echo-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_HostOfEcho)]]
[[Learn Mutant-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_Mutant)]]
[[Learn Abomination-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_Mutant_2)]]
[[Learn Never Ending Growth-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_NeverendingGrowth)]]
[[Learn Unstoppable Expansion-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_UnstoppableExpansion)]]
[[Learn Masochism-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_Masochism)]]
[[Learn Herculean Build-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_HerculeanBuild)]]
[[Learn Appetite For Growth-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_AppetiteForGrowth)]]
[[Learn Demonic Corruption-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_DemonicCorruption)]]
[[Learn Vigor of the Endowed-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_VigorOfTheEndowed)]]
[[Learn Parasite Infection-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_NyxParasiteInfection)]]
[[Learn Oathbreaker-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_Oathbreaker)]]
[[Learn Oath of Containment-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_Oath_Containment)]]
[[Learn Orgasmic Growth-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_OrgasmicGrowth)]]
[[Learn Last Stand-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_LastStand)]]
/*This breaks in 0.4.0*/
/*[[Learn To Live For Echo-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_ToLiveForEcho)]]*/
[[Learn Warrior of Duality-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_WarriorOfDuality)]]
[[Learn Codex&#39;s Passion-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_CodexPassion)]]
[[Learn Under The Eye Of Ortha-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_UnderTheEyeOfOrtha)]]
[[Learn Essence Hoarder-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_EssenceHoarder)]]
[[Learn Sombreve&#39;s Whisper-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_SombrevesWhisper)]]
[[Learn Vampiric Lust-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_VampiricLust)]]
[[Learn Tank-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_Tank)]]
[[Learn Berserking-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_Berserking)]]
[[Learn Deadly Aim-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_DeadlyAim)]]
[[Learn Kaleth&#39;s Fervour-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_KalethsFervour)]]
[[Learn Withering Venom-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_WitheringVenom)]]
[[Learn Piercing Precision-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_PiercingPrecision)]]
[[Learn Channel The Astral Soul-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_ChannelTheAstralSoul)]]
[[Learn Valiant Rush-&gt;DebugMenu][$CharacterSheet_Player.applyAbilityRuntimeData($Ability_ValiantRush)]]

Anotomy
[[Set anatomy to default male-&gt;DebugMenu][setup.changeGender($CharacterSheet_Player.info.anatomy, &quot;male&quot;)]]
[[Set anatomy to default female-&gt;DebugMenu][setup.changeGender($CharacterSheet_Player.info.anatomy, &quot;female&quot;)]]
[[Set anatomy to default herm-&gt;DebugMenu][setup.changeGender($CharacterSheet_Player.info.anatomy, &quot;herm&quot;)]]

[[Cock Growth-&gt;DebugMenu][setup.applyGrowth($CharacterSheet_Player, &quot;cock&quot;, 3)]]
[[Balls Growth-&gt;DebugMenu][setup.applyGrowth($CharacterSheet_Player, &quot;balls&quot;, 3)]]
[[Muscles Growth-&gt;DebugMenu][setup.applyGrowth($CharacterSheet_Player, &quot;muscles&quot;, 3)]]
[[Height Growth-&gt;DebugMenu][setup.applyGrowth($CharacterSheet_Player, &quot;height&quot;, 3)]]

Size Mods
[[God Size-&gt;DebugMenu][setup.debug_GodSize()]]
[[Great Size-&gt;DebugMenu][setup.debug_GreatSize()]]
[[Big Size-&gt;DebugMenu][setup.debug_BigSize()]]

[[Enable Exploration-&gt;DebugMenu][setup.debug_SetCanExplore()]]

Multi Mods

Add 1 to \
&lt;&lt;click &quot;Limb&quot;&gt;&gt;&lt;&lt;replace &quot;#debug_LimbAnatomy&quot;&gt;&gt; \
[[cocks-&gt;DebugMenu][setup.changeLimbNumber($CharacterSheet_Player.info.anatomy, &quot;cocks&quot;, 1, &quot;add&quot;)]]
[[balls-&gt;DebugMenu][setup.changeLimbNumber($CharacterSheet_Player.info.anatomy, &quot;balls&quot;, 1, &quot;add&quot;)]]
[[heads-&gt;DebugMenu][setup.changeLimbNumber($CharacterSheet_Player.info.anatomy, &quot;heads&quot;, 1, &quot;add&quot;)]]
[[eyes-&gt;DebugMenu][setup.changeLimbNumber($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, 1, &quot;add&quot;)]]
[[jaws-&gt;DebugMenu][setup.changeLimbNumber($CharacterSheet_Player.info.anatomy, &quot;jaws&quot;, 1, &quot;add&quot;)]]
[[teeths-&gt;DebugMenu][setup.changeLimbNumber($CharacterSheet_Player.info.anatomy, &quot;teeths&quot;, 1, &quot;add&quot;)]]
[[hands-&gt;DebugMenu][setup.changeLimbNumber($CharacterSheet_Player.info.anatomy, &quot;hands&quot;, 1, &quot;add&quot;)]]
[[horns-&gt;DebugMenu][setup.changeLimbNumber($CharacterSheet_Player.info.anatomy, &quot;horns&quot;, 1, &quot;add&quot;)]]
[[wings-&gt;DebugMenu][setup.changeLimbNumber($CharacterSheet_Player.info.anatomy, &quot;wings&quot;, 1, &quot;add&quot;)]]
[[tongues-&gt;DebugMenu][setup.changeLimbNumber($CharacterSheet_Player.info.anatomy, &quot;tongues&quot;, 1, &quot;add&quot;)]]
[[arms-&gt;DebugMenu][setup.changeLimbNumber($CharacterSheet_Player.info.anatomy, &quot;arms&quot;, 1, &quot;add&quot;)]]
[[pecs-&gt;DebugMenu][setup.changeLimbNumber($CharacterSheet_Player.info.anatomy, &quot;pecs&quot;, 1, &quot;add&quot;)]]
[[abdominals-&gt;DebugMenu][setup.changeLimbNumber($CharacterSheet_Player.info.anatomy, &quot;abdominals&quot;, 1, &quot;add&quot;)]]
[[legs-&gt;DebugMenu][setup.changeLimbNumber($CharacterSheet_Player.info.anatomy, &quot;legs&quot;, 1, &quot;add&quot;)]]
[[tails-&gt;DebugMenu][setup.changeLimbNumber($CharacterSheet_Player.info.anatomy, &quot;tails&quot;, 1, &quot;add&quot;)]]
&lt;&lt;/replace&gt;&gt;&lt;&lt;/click&gt;&gt;
&lt;span id=&quot;debug_LimbAnatomy&quot;&gt;&lt;/span&gt;

Race:
(Set overrides limb number and color, Transform doesn&#39;t)
Set Player Race to \
&lt;&lt;click &quot;Race&quot;&gt;&gt;&lt;&lt;replace &quot;#debug_SetPlayerRace&quot;&gt;&gt; \
[[Human-&gt;DebugMenu][setup.setRace($CharacterSheet_Player.info.anatomy, State.variables.RacePool.DEFAULT)]]
[[Werewolf-&gt;DebugMenu][setup.setRace($CharacterSheet_Player.info.anatomy, State.variables.RacePool.WOLF)]]
[[Minotaur-&gt;DebugMenu][setup.setRace($CharacterSheet_Player.info.anatomy, State.variables.RacePool.MINOTAUR)]]
[[Dragonborn-&gt;DebugMenu][setup.setRace($CharacterSheet_Player.info.anatomy, State.variables.RacePool.DRAGONBORN)]]
[[Behemoth-&gt;DebugMenu][setup.setRace($CharacterSheet_Player.info.anatomy, State.variables.RacePool.BEHEMOTH)]]
[[Incubus-&gt;DebugMenu][setup.setRace($CharacterSheet_Player.info.anatomy, State.variables.RacePool.INCUBUS)]]
[[Lord of Lust-&gt;DebugMenu][setup.setRace($CharacterSheet_Player.info.anatomy, State.variables.RacePool.LORD_OF_LUST)]]
[[Naga (not implimented)-&gt;DebugMenu][setup.setRace($CharacterSheet_Player.info.anatomy, State.variables.RacePool.NAGA)]]
[[Symbiote (????)-&gt;DebugMenu][setup.setRace($CharacterSheet_Player.info.anatomy, State.variables.RacePool.SYMBIOTE)]]
[[Custom-&gt;DebugMenu][setup.setRace($CharacterSheet_Player.info.anatomy, State.variables.RacePool.CUSTOM)]]
&lt;&lt;/replace&gt;&gt;&lt;&lt;/click&gt;&gt;
&lt;span id=&quot;debug_SetPlayerRace&quot;&gt;&lt;/span&gt;

Transform Player Race to \
&lt;&lt;click &quot;Race&quot;&gt;&gt;&lt;&lt;replace &quot;#debug_TransformPlayerRace&quot;&gt;&gt; \
[[Human-&gt;DebugMenu][setup.transformEntireAnatomy($CharacterSheet_Player.info.anatomy, State.variables.RacePool.DEFAULT)]]
[[Werewolf-&gt;DebugMenu][setup.transformEntireAnatomy($CharacterSheet_Player.info.anatomy, State.variables.RacePool.WOLF)]]
[[Minotaur-&gt;DebugMenu][setup.transformEntireAnatomy($CharacterSheet_Player.info.anatomy, State.variables.RacePool.MINOTAUR)]]
[[Dragonborn-&gt;DebugMenu][setup.transformEntireAnatomy($CharacterSheet_Player.info.anatomy, State.variables.RacePool.DRAGONBORN)]]
[[Behemoth-&gt;DebugMenu][setup.transformEntireAnatomy($CharacterSheet_Player.info.anatomy, State.variables.RacePool.BEHEMOTH)]]
[[Incubus-&gt;DebugMenu][setup.transformEntireAnatomy($CharacterSheet_Player.info.anatomy, State.variables.RacePool.INCUBUS)]]
[[Lord of Lust-&gt;DebugMenu][setup.transformEntireAnatomy($CharacterSheet_Player.info.anatomy, State.variables.RacePool.LORD_OF_LUST)]]
[[Naga (not implimented)-&gt;DebugMenu][setup.transformEntireAnatomy($CharacterSheet_Player.info.anatomy, State.variables.RacePool.NAGA)]]
[[Symbiote (????)-&gt;DebugMenu][setup.transformEntireAnatomy($CharacterSheet_Player.info.anatomy, State.variables.RacePool.SYMBIOTE)]]
[[Custom-&gt;DebugMenu][setup.transformEntireAnatomy($CharacterSheet_Player.info.anatomy, State.variables.RacePool.CUSTOM)]]
&lt;&lt;/replace&gt;&gt;&lt;&lt;/click&gt;&gt;
&lt;span id=&quot;debug_TransformPlayerRace&quot;&gt;&lt;/span&gt;

Set Symbiote Race to \
&lt;&lt;click &quot;Race&quot;&gt;&gt;&lt;&lt;replace &quot;#debug_SetSymbioteRace&quot;&gt;&gt; \
[[Symbiote-&gt;DebugMenu][setup.setRace($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.SYMBIOTE)]]
[[Human-&gt;DebugMenu][setup.setRace($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.DEFAULT)]]
[[Werewolf-&gt;DebugMenu][setup.setRace($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.WOLF)]]
[[Minotaur-&gt;DebugMenu][setup.setRace($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.MINOTAUR)]]
[[Dragonborn-&gt;DebugMenu][setup.setRace($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.DRAGONBORN)]]
[[Behemoth-&gt;DebugMenu][setup.setRace($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.BEHEMOTH)]]
[[Incubus-&gt;DebugMenu][setup.setRace($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.INCUBUS)]]
[[Lord of Lust-&gt;DebugMenu][setup.setRace($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.LORD_OF_LUST)]]
[[Naga (not implimented)-&gt;DebugMenu][setup.setRace($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.NAGA)]]
[[Custom-&gt;DebugMenu][setup.setRace($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.CUSTOM)]]
&lt;&lt;/replace&gt;&gt;&lt;&lt;/click&gt;&gt;
&lt;span id=&quot;debug_SetSymbioteRace&quot;&gt;&lt;/span&gt;

Transform Symbiote Race to \
&lt;&lt;click &quot;Race&quot;&gt;&gt;&lt;&lt;replace &quot;#debug_TransformSymbioteRace&quot;&gt;&gt; \
[[Symbiote-&gt;DebugMenu][setup.transformEntireAnatomy($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.SYMBIOTE)]]
[[Human-&gt;DebugMenu][setup.transformEntireAnatomy($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.DEFAULT)]]
[[Werewolf-&gt;DebugMenu][setup.transformEntireAnatomy($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.WOLF)]]
[[Minotaur-&gt;DebugMenu][setup.transformEntireAnatomy($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.MINOTAUR)]]
[[Dragonborn-&gt;DebugMenu][setup.transformEntireAnatomy($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.DRAGONBORN)]]
[[Behemoth-&gt;DebugMenu][setup.transformEntireAnatomy($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.BEHEMOTH)]]
[[Incubus-&gt;DebugMenu][setup.transformEntireAnatomy($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.INCUBUS)]]
[[Lord of Lust-&gt;DebugMenu][setup.transformEntireAnatomy($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.LORD_OF_LUST)]]
[[Naga (not implimented)-&gt;DebugMenu][setup.transformEntireAnatomy($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.NAGA)]]
[[Custom-&gt;DebugMenu][setup.transformEntireAnatomy($CharacterSheet_Player.symbiote.anatomy, State.variables.RacePool.CUSTOM)]]
&lt;&lt;/replace&gt;&gt;&lt;&lt;/click&gt;&gt;
&lt;span id=&quot;debug_TransformSymbioteRace&quot;&gt;&lt;/span&gt;

Start Encounter
[[Imp-&gt;DebugEncounter][$DebugEncounter = &quot;CharacterSheet_Imp&quot;]]
[[Tok-&gt;DebugEncounter][$DebugEncounter = &quot;CharacterSheet_Tok&quot;]]
[[Lakkos-&gt;DebugEncounter][$DebugEncounter = &quot;CharacterSheet_Lakkos&quot;]]
[[Lost Entity-&gt;DebugEncounter][$DebugEncounter = &quot;CharacterSheet_Lost_Entity&quot;]]
[[Lost Swarm-&gt;Encounter_Intro_Swarm]]
[[Lost Naga-&gt;DebugEncounter][$DebugEncounter = &quot;CharacterSheet_Lost_Naga&quot;]]
[[Nyx Parasite-&gt;DebugEncounter][$DebugEncounter = &quot;CharacterSheet_MQ002_NyxParasite&quot;]]
[[Drenth-&gt;DebugEncounter][$DebugEncounter = &quot;CharacterSheet_MQ002_DragonMonk&quot;]]
[[Apothus-&gt;DebugEncounter][$DebugEncounter = &quot;CharacterSheet_Apothus&quot;]]
[[Apothus 2nd Form-&gt;DebugEncounter][$DebugEncounter = &quot;CharacterSheet_Apothus_2nd_Form&quot;]]
[[Ortha-&gt;DebugEncounter][$DebugEncounter = &quot;CharacterSheet_Ortha&quot;]]
[[Slime-&gt;DebugEncounter][$DebugEncounter = &quot;CharacterSheet_Slime&quot;]]

Music
[[Village Theme-&gt;DebugMenu][SimpleAudio.select(&quot;village&quot;).volume(1).play();]]
[[Manor Theme-&gt;DebugMenu][SimpleAudio.select(&quot;manor&quot;).volume(1).play();]]

[[Volume 80%-&gt;DebugMenu][SimpleAudio.select(&quot;:playing&quot;).volume(0.8);]]
[[Volume 40%-&gt;DebugMenu][SimpleAudio.select(&quot;:playing&quot;).volume(0.4);]]

[[Stop Music-&gt;DebugMenu][SimpleAudio.select(&quot;:playing&quot;).stop();]]

Debug Starters
[[MQ001-&gt;DebugMenu][setup.debug_DebugStarter_MQ001()]]
[[MQ002-&gt;DebugMenu][setup.debug_DebugStarter_MQ002()]]
[[MQ002_InsideManor-&gt;Quest_MQ002_MoveInsideGate_3_GoToManor][setup.debug_DebugStarter_MQ002()]]
[[MQ002_WestWing-&gt;Quest_MQ002_Manor_WestWing][setup.debug_DebugStarter_MQ002()]]
[[MQ002_ApothusRealm-&gt;Quest_MQ002_ApothusRealm_Entrance][setup.debug_DebugStarter_MQ002()]]

Endings
[[One with Apothus-&gt;Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_07]]
[[Nyx Chosen Ascension-&gt;Feed_The_Chosen_Final]]

Enemy Size Mods
[[Turn Imp Small-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_Imp, $Comparators.SMALLER)]]
[[Turn Imp Human Sized-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_Imp, $Comparators.EQUAL)]]
[[Turn Imp Massive-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_Imp, $Comparators.REACHES_WAIST)]]
[[Turn Imp Macro-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_Imp, $Comparators.REACHES_KNEES)]]

[[Turn Tok Small-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_Tok, $Comparators.SMALLER)]]
[[Turn Tok Human Sized-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_Tok, $Comparators.EQUAL)]]
[[Turn Tok Massive-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_Tok, $Comparators.REACHES_WAIST)]]
[[Turn Tok Macro-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_Tok, $Comparators.REACHES_KNEES)]]

[[Turn Lakkos Small-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_Lakkos, $Comparators.SMALLER)]]
[[Turn Lakkos Human Sized-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_Lakkos, $Comparators.EQUAL)]]
[[Turn Lakkos Massive-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_Lakkos, $Comparators.REACHES_WAIST)]]
[[Turn Lakkos Macro-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_Lakkos, $Comparators.REACHES_KNEES)]]

[[Turn Lost Entity Small-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_Lost_Entity, $Comparators.SMALLER)]]
[[Turn Lost Entity Human Sized-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_Lost_Entity, $Comparators.EQUAL)]]
[[Turn Lost Entity Massive-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_Lost_Entity, $Comparators.REACHES_WAIST)]]
[[Turn Lost Entity Macro-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_Lost_Entity, $Comparators.REACHES_KNEES)]]

[[Turn Lost Swarm Small-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_Swarm, $Comparators.SMALLER)]]
[[Turn Lost Swarm Human Sized-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_Swarm, $Comparators.EQUAL)]]
[[Turn Lost Swarm Massive-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_Swarm, $Comparators.REACHES_WAIST)]]
[[Turn Lost Swarm Macro-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_Swarm, $Comparators.REACHES_KNEES)]]

[[Turn Lost Naga Small-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_Lost_Naga, $Comparators.SMALLER)]]
[[Turn Lost Naga Human Sized-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_Lost_Naga, $Comparators.EQUAL)]]
[[Turn Lost Naga Massive-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_Lost_Naga, $Comparators.REACHES_WAIST)]]
[[Turn Lost Naga Macro-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_Lost_Naga, $Comparators.REACHES_KNEES)]]

[[Turn Nyx Parasite Small-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_MQ002_NyxParasite, $Comparators.SMALLER)]]
[[Turn Nyx Parasite Human Sized-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_MQ002_NyxParasite, $Comparators.EQUAL)]]
[[Turn Nyx Parasite Massive-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_MQ002_NyxParasite, $Comparators.REACHES_WAIST)]]
[[Turn Nyx Parasite Macro-&gt;DebugMenu][setup.debug_SetHeight($CharacterSheet_MQ002_NyxParasite, $Comparators.REACHES_KNEES)]]</tw-passagedata><tw-passagedata pid="561" name="DebugEncounter" tags="" position="100,7100" size="100,100">\&lt;&lt;set $Encounter_Target = State.variables[$DebugEncounter]&gt;&gt; 
\
\&lt;&lt;print $Encounter_Target.fight.encounterIntroText&gt;&gt;</tw-passagedata><tw-passagedata pid="562" name="Ending" tags="" position="225,7100" size="100,100">This world has reached the end of its story, cracked under the weight of its own ambitions.

Yet the seed of corruption lives on; In other lands yet untouched by your will to become something more.

[[Be Reborn-&gt;Name Setup]]
&lt;&lt;silently&gt;&gt;
&lt;&lt;include StoryInit_Base&gt;&gt;
&lt;&lt;include StoryInit_FightVariables&gt;&gt;
&lt;&lt;include StoryInit_FightMoves&gt;&gt;
&lt;&lt;include Quest_MQ001&gt;&gt;
&lt;&lt;include Quest_MQ001_EchoFirstEncounter&gt;&gt;
&lt;&lt;include Quest_MQ002&gt;&gt;
&lt;&lt;include StoryInit_QuestVariables&gt;&gt;
&lt;&lt;include StoryInit_Abilities&gt;&gt;
&lt;&lt;include Sheets_Player&gt;&gt;
&lt;&lt;include Sheets_Imp&gt;&gt;
&lt;&lt;include Sheets_Tok&gt;&gt;
&lt;&lt;include Sheets_Lakkos&gt;&gt;
&lt;&lt;include Sheets_Lost_Entity&gt;&gt;
&lt;&lt;include Sheets_Lost_Harbinger&gt;&gt;
&lt;&lt;include Sheets_Swarm&gt;&gt;
&lt;&lt;include Sheets_Lost_Naga&gt;&gt;
&lt;&lt;include Sheets_Elder&gt;&gt;
&lt;&lt;include Sheets_MQ002_Guard&gt;&gt;
&lt;&lt;include Sheets_MQ002_NyxParasite&gt;&gt;
&lt;&lt;include Sheets_MQ002_DragonMonk&gt;&gt;
&lt;&lt;include Sheets_Apothus&gt;&gt;
&lt;&lt;include Sheets_Apothus_2nd_Form&gt;&gt;
&lt;&lt;include Sheets_Ortha&gt;&gt;
&lt;&lt;include Sheets_Slime&gt;&gt;
&lt;&lt;include StoryInit_StateDrivenModifiers&gt;&gt;
&lt;&lt;include StoryInit_WorldState&gt;&gt;
&lt;&lt;run setup.triggerEndingsPostWorldCallbacks()&gt;&gt;
&lt;&lt;/silently&gt;&gt;</tw-passagedata><tw-passagedata pid="563" name="Level Up" tags="" position="350,7100" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;unset $AbilityOptions&gt;&gt;

&lt;&lt;set $LevelUpParams = 
{
    point : 2,
    hp: {name: &quot;Health&quot;, value: $CharacterSheet_Player.fight.hp},
	stamina: {name: &quot;Stamina&quot;, value: $CharacterSheet_Player.fight.stamina},
	strength: {name: &quot;Strength&quot;, value: $CharacterSheet_Player.fight.strength},
	arousalGain: {name: &quot;Arousal Gain per turn&quot;, value: $CharacterSheet_Player.fight.arousalGain},
	staminaRecovery: {name: &quot;Stamina Recovery per turn&quot;, value: $CharacterSheet_Player.fight.staminaRecovery},
}&gt;&gt;
&lt;&lt;/nobr&gt;&gt;
&lt;h1&gt;With experience, power builds within you.&lt;/h1&gt;

You can increase your Stats &lt;span id=&quot;LevelUp-Points&quot;&gt;&lt;&lt;print $LevelUpParams.point&gt;&gt; &lt;/span&gt; times.

&lt;&lt;print setup.displayStatsUp($CharacterSheet_Player, $LevelUpParams)&gt;&gt;

You can acquire a new ability.

&lt;&lt;print setup.displayAbilitiesUp($CharacterSheet_Player)&gt;&gt;

&lt;span class=&quot;LevelUpConfirm inactive&quot;&gt;[[Apply-&gt;Village][setup.levelUp($CharacterSheet_Player, $LevelUpParams, _AbilityChoiceIndex)]]&lt;/span&gt;
[[Cancel-&gt;Village]]</tw-passagedata><tw-passagedata pid="564" name="StoryBanner" tags="" position="475,7100" size="100,100">&lt;img src=&quot;https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Logo_small.png&quot; width=&quot;290&quot;&gt;</tw-passagedata><tw-passagedata pid="565" name="Main Menu" tags="Name" position="19,1463" size="100,100">Warning, this game is nsfw 18+ only. 
It features male gay characters and fetishes such as: 
Muscle Growth, Macro, Hyper, Goo, Transformation, Corruption

Measurement system
&lt;label&gt;&lt;&lt;radiobutton &#39;$Measurement&#39; $Units.IMPERIAL checked&gt;&gt;Imperial&lt;/label&gt;
&lt;label&gt;&lt;&lt;radiobutton &#39;$Measurement&#39; $Units.METRIC&gt;&gt;Metric&lt;/label&gt;

[[Begin-&gt;Name Setup]]

[[Credits-&gt;Credits]]</tw-passagedata><tw-passagedata pid="566" name="StoryCaption" tags="" position="21,1308" size="100,100">\&lt;&lt;if $SpecialBuild&gt;&gt;
\    &lt;&lt;if $Debug&gt;&gt;
\&lt;&lt;button &quot;Debug Mode On&quot;&gt;&gt;  &lt;&lt;script&gt;&gt; setup.toggleDebugMode()&lt;&lt;/script&gt;&gt; &lt;&lt;/button&gt;&gt;

\    &lt;&lt;else&gt;&gt;
\&lt;&lt;button &quot;Debug Mode Off&quot;&gt;&gt; &lt;&lt;script&gt;&gt; setup.toggleDebugMode()&lt;&lt;/script&gt;&gt; &lt;&lt;/button&gt;&gt;

\   &lt;&lt;/if&gt;&gt;
\&lt;&lt;/if&gt;&gt;
\v$VersionStr
\&lt;hr&gt;
\&lt;&lt;print setup.displayInfoStats(State.variables.CharacterSheet_Player)&gt;&gt;
\&lt;hr&gt;
\&lt;&lt;print setup.displayFightStats(State.variables.CharacterSheet_Player)&gt;&gt;
\&lt;&lt;print setup.displayPersistentAbilities(State.variables.CharacterSheet_Player)&gt;&gt;
\&lt;&lt;nobr&gt;&gt;
&lt;&lt;link [img[setup.getSaveIcon($CharacterSheet_Player)]]&gt;&gt;&lt;&lt;script&gt;&gt;setup.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link [img[setup.getResetIcon($CharacterSheet_Player)]]&gt;&gt;&lt;&lt;script&gt;&gt;setup.restart()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;
\&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="567" name="Transformation_Incubus_Level1_1" tags="" position="850,7100" size="100,100">You look down at the exhausted demon. 

You imagine yourself with some of Lakkos&#39;s features and powers. The horns, the massive cock, his control over people&#39;s lust and size. 

It could all be yours.

You go to the incubus and place your hand upon his head.

He looks at you in confusion when he suddenly feels pure power enter his body. His slitted red eyes suddenly glow red as he shivers.

&quot;What... What is this?&quot; This confirms your suspicion. He could not gather Essence out of people like you could. This was his first taste of pure, concentrated power. 


[[Give him Essence-&gt;Transformation_Incubus_Level1_2]]</tw-passagedata><tw-passagedata pid="568" name="Transformation_Incubus_Level1_2" tags="" position="975,7100" size="100,100">His muscles throb with strength as he gets up. He seems fully healed. 
In one sudden rush of energy, he moans as strength fills his whole frame. 
Then he burst with growth as cum oozes from his cock.
His newfound energy is bringing him to the edge of orgasm.

&quot;Ahhhhh... Oh fuck... This power...&quot;

He suddenly gropes your cock and pecs.

&quot;You made the right choice.&quot;

He kisses you deeply.

A dark red sigil suddenly appears around you. The same red as the demon&#39;s glowing eyes. 

[[Let demonic powers enter you-&gt;Transformation_Incubus_Level1_3]]</tw-passagedata><tw-passagedata pid="569" name="Transformation_Incubus_Level1_3" tags="" position="1100,7100" size="100,100">You feel it surround you. An energy that you don&#39;t quite understand.
It&#39;s fiery and passionate, like a force of nature. It shoots inside your soul and taints it to the core. 
You feel your restraints melt away; lust, sex and power slowly become your most significant needs. Two nubs start to push from your forehead.

Lakkos grins as he kneels down to face your cock. You feel his hot mouth taking all &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Player, &quot;cock&quot;))&gt;&gt; of your cock. With every thrust of his head, you felt it pulsate with energy. 
The nubs on your forehead suddenly split. You feel horns growing until the reach &lt;&lt;print setup.getHornsSize($CharacterSheet_Player)&gt;&gt;, they curved and rose straight up. Each was almost as thick as your wrists. 
\&lt;&lt;run setup.changeLimb($CharacterSheet_Player.info.anatomy, &quot;horns&quot;, $RacePool.INCUBUS)&gt;&gt;
You feel Lakkos suck you faster and harder. You&#39;re so close to the edge. 
You look at the demon with your now slitted purple eyes.

&quot;I want more... I want it all!&quot; You declare, showing the incubus your now razor-sharp canines.

[[Complete the transformation-&gt;Transformation_Incubus_Level1_4]]</tw-passagedata><tw-passagedata pid="570" name="Transformation_Incubus_Level1_4" tags="" position="1225,7100" size="100,100">\&lt;&lt;run $CharacterSheet_Player.applyAbilityRuntimeData($Ability_DemonicCorruption);&gt;&gt;
\&lt;&lt;run setup.upgradeLakkosStats(1)&gt;&gt;

Seeing your changed form is bringing Lakkos to the edge. He pulls back, freeing your now &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Player, &quot;cock&quot;))&gt;&gt; purple cock. 
He moans loudly as he jerks off while gazing at your new demonic body. You feel lust overwhelm you as the sigil burns with hell&#39;s fire.

&quot;GRAAAAHHHH&quot;

You both roar and cum all over each other; Your seeds fill both of you with an unholy vitality. 
Your bodies grew in size, a reflection of your newfound powers.

&lt;&lt;print setup.getFightReward($CharacterSheet_Lakkos)&gt;&gt;

You keep going, having sex for hours and hours with Lakkos. Yet your hunger is not satisfied, you need more than sex... You have to gain genuine power to fully become a demon.

Lakkos already looks much stronger than at the start of your encounter. Your next fight will be more difficult.

Yet you have a feeling that he could turn you even stronger as well...

(You can equip a new move to your moveset in your home)

\&lt;&lt;run setup.changeLimb($CharacterSheet_Player.info.anatomy, &quot;teeths&quot;, $RacePool.INCUBUS)&gt;&gt;
\&lt;&lt;run setup.changeLimb($CharacterSheet_Player.info.anatomy, &quot;jaws&quot;, $RacePool.INCUBUS)&gt;&gt;
\&lt;&lt;run setup.changeLimb($CharacterSheet_Player.info.anatomy, &quot;horns&quot;, $RacePool.INCUBUS)&gt;&gt;
\&lt;&lt;run setup.changeLimb($CharacterSheet_Player.info.anatomy, &quot;tongues&quot;, $RacePool.INCUBUS)&gt;&gt;
\&lt;&lt;run setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;tongues&quot;, $ColourPool.PURPLE)&gt;&gt;
\&lt;&lt;run setup.changeLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, $RacePool.INCUBUS)&gt;&gt;
\&lt;&lt;run setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, $ColourPool.PURPLE)&gt;&gt;
\&lt;&lt;run setup.changeLimb($CharacterSheet_Player.info.anatomy, &quot;cocks&quot;, $RacePool.INCUBUS)&gt;&gt;
\&lt;&lt;run setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;cocks&quot;, $ColourPool.PURPLE)&gt;&gt;
\&lt;&lt;run setup.changeLimb($CharacterSheet_Player.info.anatomy, &quot;balls&quot;, $RacePool.INCUBUS)&gt;&gt;
\&lt;&lt;run setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;balls&quot;, $ColourPool.PURPLE)&gt;&gt;
[[Return Home-&gt;Village]]</tw-passagedata><tw-passagedata pid="571" name="Transformation_Incubus_Level2_1" tags="" position="100,7225" size="100,100">Lakkos falls down in exhaustion but grins all the same. He knows you wanted more, no one could resist the appeal of demonic powers.
You rush to him and place your hand on his head once again. He licks your cock out of sheer need as pure power courses through him.

&quot;Hehehe... I can feel some of my old powers coming back...&quot;

His chuckles turn into maniacal laughter. 

You notice his pecs and shoulders grow as he gets to his feet. His whole body radiates with a dark red aura. 

&quot;I owe you a lot for this...&quot;

His cock shakes and throbs like it&#39;s possessed. Thick red veins fill it with power. He grasps the base and pulls his head back.

&quot;Ohhhh... Fuuuuuck...&quot;

Your eyes widen as his cock pushes forward. Pounds upon pounds of thick flesh piles on his already massive tool. He unleashes a maniacal laugh as cum gushes out of his growing dick. 

It expands until it gains &lt;&lt;print setup.getLength(7)&gt;&gt;.

\&lt;&lt;set setup.applyGrowth($CharacterSheet_Lakkos, &quot;cock&quot;, 7)&gt;&gt;

[[Accept Lakkos&#39;s Reward-&gt;Transformation_Incubus_Level2_2]]</tw-passagedata><tw-passagedata pid="572" name="Transformation_Incubus_Level2_2" tags="" position="225,7225" size="100,100">You suddenly notice his hands smoking with black, demonic energy. 

&quot;Now, let the powers of hell fully enter your being...&quot; 

A circle of pure darkness suddenly forms from under you. You can see movement under the glass-like surface of it.

A shape forms along the surface of the black circle. It throbs, gathering the surrounding darkness to grow outward.
The half-formed tendril waves towards you. You notice a thick purple liquid oozing from the tip.

&quot;Hmmm... Take it. Accept this gift straight from the embodiment of lust itself.&quot;

It slowly slithers towards you, you grab it and eagerly suck the tip. The sharp, bitter taste of its seed makes you shiver.
Suddenly, your eyes widen; your cock throbs harder than it ever has. An unholy lust rises within you.

More tendrils emerge from the dark portal. You hear Lakkos release a loud moan as the demon&#39;s growth accelerates. 
\&lt;&lt;set setup.applyGrowth($CharacterSheet_Lakkos, &quot;cock&quot;, 4)&gt;&gt;
His still growing cock reaches &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Lakkos, &quot;cock&quot;))&gt;&gt;.

[[Give in to Lust-&gt;Transformation_Incubus_Level2_3]]</tw-passagedata><tw-passagedata pid="573" name="Transformation_Incubus_Level2_3" tags="" position="350,7225" size="100,100">Some tendrils join the other and crawl to your mouth. Some coil around your cock, jerking it hungrily. 
Others reach for your ass. You feel your entrance widen as the oily appendages spread their demonic seed inside you.
The purple liquid entered you from the inside, it fused with your prostate, enhancing it to bring you pleasure beyond what you could ever imagine.
You panted as Lakkos jerks off in front of you, he is completely lost in arousal.

The tendrils suddenly fuck you better than anything could, three of them push deep inside your ass while four massage your cock and balls.
A thin one slowly enters your cock slit, feeding your tool with demonic energy.

&quot;Oh, God... Ahhhhh...&quot;

You cum, but they do not care, they keep pleasuring you in every way they can. Even after cumming, your arousal stays at an all-time high.
It feels like you could chain orgasms forever.  

[[Embrace your transformation-&gt;Transformation_Incubus_Level2_4]]</tw-passagedata><tw-passagedata pid="574" name="Transformation_Incubus_Level2_4" tags="" position="475,7225" size="100,100">Something grows over your arms and legs. The skin around them turns darker and darker until it became completely black. 
It then grows outward, turning into hard black scales. A bright purple glow emanates between each of them. 
 
You grin and gaze at your arms. Your fingernails extend and warp to become thick black claws. 

&quot;Graahhh... Oh, God... Oh, God... Fuuuuck...&quot;

You force yourself down on the tentacles penetrating your ass. 
It&#39;s too much to bear; you cum again. 

More tentacles suddenly rise and massage every inch of your body. Your muscles bask in the sheer lust of this otherworldly beast pleasuring you.
Your form slowly expands bigger as you cum once more.
 
Your moans could be heard all over the forest. A black forked tail suddenly bursts from behind you; its thickness increases as it pulls out of you. You coil it around your cock as you cum the last remains of your human seed. You drench yourself with your now thick dark purple cum.
 
As if to react to the last part of your humanity leaving you, the tentacles pull back, and the spell dissipates. Lakkos could now fully see your new body. 
\&lt;&lt;run $CharacterSheet_Player.applyAbilityRuntimeData($Ability_DemonicCorruption);&gt;&gt;

You are now a &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Player, &quot;height&quot;))&gt;&gt; demon with a &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Player, &quot;cock&quot;))&gt;&gt; cock. 

You both share a lustful grin. Your new bodies beg you to go wild on each other.

[[Fuck Lakkos for days-&gt;Transformation_Incubus_Level2_5]]</tw-passagedata><tw-passagedata pid="575" name="Transformation_Incubus_Level2_5" tags="" position="600,7225" size="100,100">After a whole week of passionate sex, you return to the village. 
Lakkos has told you that he could change you one last time if you gather enough Essence.

His improved body will prove to be an even bigger challenge though...

&lt;&lt;run setup.addDays($DaysPerCycle)&gt;&gt;
&lt;&lt;print setup.getFightReward($CharacterSheet_Lakkos)&gt;&gt;
\&lt;&lt;run setup.upgradeLakkosStats(2)&gt;&gt;
\&lt;&lt;run setup.changeLimb($CharacterSheet_Player.info.anatomy, &quot;arms&quot;, $RacePool.INCUBUS)&gt;&gt;
\&lt;&lt;run setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;arms&quot;, $ColourPool.BLACK)&gt;&gt;
\&lt;&lt;run setup.changeLimb($CharacterSheet_Player.info.anatomy, &quot;hands&quot;, $RacePool.INCUBUS)&gt;&gt;
\&lt;&lt;run setup.changeLimb($CharacterSheet_Player.info.anatomy, &quot;legs&quot;, $RacePool.INCUBUS)&gt;&gt;
\&lt;&lt;run setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;hands&quot;, $ColourPool.BLACK)&gt;&gt;
\&lt;&lt;run setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;legs&quot;, $ColourPool.BLACK)&gt;&gt;
\&lt;&lt;run setup.changeLimb($CharacterSheet_Player.info.anatomy, &quot;tails&quot;, $RacePool.INCUBUS)&gt;&gt;
\&lt;&lt;run setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;tails&quot;, $ColourPool.BLACK)&gt;&gt;

[[Continue-&gt;Village]]</tw-passagedata><tw-passagedata pid="576" name="Transformation_Incubus_Level3_1" tags="" position="725,7225" size="100,100">Lakkos can&#39;t wait any longer. He comes to you and grabs you by the back of the head; he pulls into a deep and hungry kiss. 
You both need this more than anything. 

He feels his old powers reaching out to him, just a little more essence before he regains his former strength.
 
You break the kiss and push his head down to suck on your &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Player, &quot;cock&quot;))&gt;&gt; cock. He can barely handle it, yet he forces himself to take you. 
He rolls his wet demonic tongue on your cock as you let him feel every inch down his throat. Some Essence of Power rush inside him once he takes the whole thing.
You want to make him work for his powers. With every suck, you allow him to have a little more. His moans turn deeper each time.

You see his shoulder growing wider and filling with strength. His whole body starts to grow. 
You feel his head getting larger under your hand. His tongue covering more and more of your cock.

&quot;Ahhhh... Ahhhh... You&#39;re getting into it uhhhhAHHHHH&quot; Your moans turn into screams of pleasure as he suddenly sucks harder and faster.

[[Give him more...-&gt;Transformation_Incubus_Level3_2]]</tw-passagedata><tw-passagedata pid="577" name="Transformation_Incubus_Level3_2" tags="" position="850,7225" size="100,100">You weren&#39;t ready for this. Lakkos&#39; sucks are beyond godlike. Hundreds of pounds of muscles begin to develop over his demonic body. 

&quot;I... I can&#39;t... I&#39;m gonna!&quot; You can see him smile as he grabs your waist and sucks you down to your balls.

&quot;AHHHHHHH&quot; You flood him with cum. And with it, your Essence rushes inside him. 

His whole body starts to shake. He looks up to you, his eyes are now completely red and glowing with demonic powers. His horns grow further until they reach behind his head.

\&lt;&lt;run setup.applyGrowth($CharacterSheet_Lakkos, &quot;cock&quot;, setup.getStatValue($CharacterSheet_Lakkos, &quot;cock&quot;) * 4)&gt;&gt;
&quot;Oh, yes... Here it comes...&quot; He moans as his cock grows between his jerking hands. He can barely handle it.
He drools, gazing at his now &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Lakkos, &quot;cock&quot;))&gt;&gt; monster cock.

&quot;Hmmm... Fuck yeah. A real cock for a real beast!&quot; He laughs madly while stroking himself with his hands and tail. The demon&#39;s body keeps shaking as power builds inside him.

&quot;I need more... I need to become truly massive to really enjoy this monster...&quot; He grins and looks at his gigantic cock. 

&quot;But first... My end of the bargain, &lt;&lt;print $CharacterSheet_Player.info.name&gt;&gt;&quot;

You shudder with excitement as he pierces the ground with his claws. A deep and black rot starts to flow in the earth around you. The few plants around you become warped and corrupted as it spreads for more than  &lt;&lt;print setup.getLength(30)&gt;&gt;. The center is jet black, you recognize the black gate to the Embodiment of Lust. But this time it&#39;s massive, the otherworldly on the other side eagerly push themself on the glass-like surface.

Lakkos laughs as he focuses his power back on himself. His scales pulsate with red demonic energy.
He grows and grows until his previously &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Lakkos, &quot;height&quot;))&gt;&gt; body reaches 
\&lt;&lt;run setup.applyGrowth($CharacterSheet_Lakkos, &quot;height&quot;, setup.getStatValue($CharacterSheet_Lakkos, &quot;height&quot;) * 1.5)&gt;&gt;
\&lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Lakkos, &quot;height&quot;))&gt;&gt;.
His laughs become more dominant and more wicked as his changes show no signs of stopping. Thick pre-cum oozes from his cock as he grasps his monster with glee.

[[Embrace the Corruption-&gt;Transformation_Incubus_Level3_3]]</tw-passagedata><tw-passagedata pid="578" name="Transformation_Incubus_Level3_3" tags="" position="975,7225" size="100,100">Suddenly, countless tentacles burst from the depth of the black portal. They feel the unholy lust radiating from both of you. 
Some coils around Lakkos&#39;s gigantic cock and massage it from every angle. But most of them crawl towards you. 
The smell of your black soul, begging to be thoroughly corrupted, drives them mad. They rush up your legs and invade your ass without warning. 

Your roars are louder than the giant demon&#39;s. Tentacles move along your cock and balls, drenching them with the same demonic liquid that changed you last time. 
But now you can take so much more... You force your ass down on the tentacles, inviting them to fill you deeper. 
You grasp some of them and jack them off, they drench your body with their corrupting seed. 

As if to respond to your mad need for pleasure, countless other black tendrils emerge.

You feel them slither around your legs, completely covering every inch of your scales in a wet and warm embrace. 
Once they reach your waist, you unleash a raw scream of manic lust. The tendrils attach to your cock and ball, injecting their demonic seed directly inside them.
You feel them grow and churn with the purple liquid. 

&quot;Oh, fuck... Oh fuuuuuck... Moooooore...&quot;

&lt;h1&gt;&quot;FUCK YESSSSS! MOOOOORE!&quot;&lt;/h1&gt;

Your cock shoots blanks over and over again. The tendrils crawl up your chest, and a massive tentacle enters your mouth.
You suck it like your life depends on it. You feel it bulge and expand as litres of thick demonic goo erupts from it. You try to take it all.
An unholy energy fills your whole being, you are now fully covered by the loving tendrils of a god from beyond.

[[Become Something More...-&gt;Transformation_Incubus_Level3_4]]</tw-passagedata><tw-passagedata pid="579" name="Transformation_Incubus_Level3_4" tags="" position="1100,7225" size="100,100">\&lt;&lt;run $CharacterSheet_Player.applyAbilityRuntimeData($Ability_DemonicCorruption);&gt;&gt;

Lakkos could only stare in amazement, you are entirely covered by so many tentacles, it was like being encased in a black cocoon.

You could feel your muscles filling with power; your silhouette is changing. The cocoon can barely contain your growing form. 
Lakkos knows you are turning into more than a demon, you have been chosen. Blessed by lust itself. All you need is one last push. 

He would gladly provide it.

He roars as release finally reaches him. His cock explodes like a broken dam. It completely drenches your cocoon; you feel your body feed on its unholy energy. 
Scales slowly grow along every surface of your body. Your head throbs as a new set of massive horns emerge from your temples. 
They grow to reach behind your head. 
\&lt;&lt;run setup.changeLimbNumber($CharacterSheet_Player.info.anatomy, &quot;horns&quot;, 2, &quot;add&quot;)&gt;&gt;
Your cock is pressing on the walls of your enclosure as it keeps growing bigger and bigger. You could feel your own dam breaking. 
The cocoon stretched to reach &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Player, &quot;height&quot;))&gt;&gt;. 

The tentacles could not hold you anymore, you slash at the surface of your cocoon with your now thicker claws. 
Litres of thick demonic seed flows as you step out. 

You are now fully covered in black spiky scales. A purple glow radiates from between each of them. 
The purple slit of your eyes are now surrounded by pure black scleras. Your now &lt;&lt;print setup.getLength(setup.getStatValue($CharacterSheet_Player, &quot;cock&quot;))&gt;&gt; cock constantly throbs with need. 
Lakkos drools at your new form, your grin at him in response, exposing your new set of sharp, pointed teeth.

Calling you a demon would be an understatement at this point, your total devotion to your arousal has turned you into something more... A true Lord of Lust.

(You can equip a new move to your moveset in your home)
\&lt;&lt;run setup.transformEntireAnatomy($CharacterSheet_Player.info.anatomy, State.variables.RacePool.LORD_OF_LUST, true)&gt;&gt;
\&lt;&lt;run setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;pecs&quot;, $ColourPool.BLACK)&gt;&gt;
\&lt;&lt;run setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;heads&quot;, $ColourPool.BLACK)&gt;&gt;
\&lt;&lt;run setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;abdominals&quot;, $ColourPool.BLACK)&gt;&gt;
\&lt;&lt;run setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;tongues&quot;, $ColourPool.PURPLE)&gt;&gt;
\&lt;&lt;run setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;eyes&quot;, $ColourPool.PURPLE)&gt;&gt;
\&lt;&lt;run setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;cocks&quot;, $ColourPool.PURPLE)&gt;&gt;
\&lt;&lt;run setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;balls&quot;, $ColourPool.PURPLE)&gt;&gt;
\&lt;&lt;run setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;arms&quot;, $ColourPool.BLACK)&gt;&gt;
\&lt;&lt;run setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;hands&quot;, $ColourPool.BLACK)&gt;&gt;
\&lt;&lt;run setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;legs&quot;, $ColourPool.BLACK)&gt;&gt;
\&lt;&lt;run setup.colourLimb($CharacterSheet_Player.info.anatomy, &quot;tails&quot;, $ColourPool.BLACK)&gt;&gt;

[[Fuck Lakkos-&gt;Transformation_Incubus_Level3_5]]</tw-passagedata><tw-passagedata pid="580" name="Transformation_Incubus_Level3_5" tags="" position="1225,7225" size="100,100">You jumped at Lakkos. You fucked in every way possible. You kept going for weeks, without any breaks. 
His gigantic form was a lot to handle, but you wished you and him were even more enormous. Power and lust drove your every thought. 

Weeks turned into months. You fucked and fucked until you finally adjusted to your demonic body. 
Lakkos loved every second of it, maybe being banished here wasn&#39;t so bad for him after all. 

You finally reached the point where you felt a distant memory slowly emerge from your mind. An old duty that was never completed. 
You left soon after, your goals and instincts had changed and yet...

You continued your quest.
\&lt;&lt;run setup.upgradeLakkosStats(3)&gt;&gt;

&lt;&lt;run setup.addDays($DaysPerCycle * 15)&gt;&gt;

&lt;&lt;print setup.getFightReward($CharacterSheet_Lakkos)&gt;&gt;

[[Continue-&gt;Village]]</tw-passagedata></tw-storydata>
	<script id="script-sugarcube" type="text/javascript">
	/*! SugarCube JS */
	if(document.documentElement.getAttribute("data-init")==="loading"){!function(window,document,jQuery,undefined){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_slicedToArray=function(){function e(e,t){var r=[],n=!0,a=!1,i=undefined;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},errorPrologRegExp=/^(?:(?:uncaught\s+(?:exception:\s+)?)?\w*(?:error|exception|_err):\s+)+/i,Alert=function(){function e(e,t,r,n){var a="fatal"===e,i="Apologies! "+(a?"A fatal":"An")+" error has occurred.";i+=a?" Aborting.":" You may be able to continue, but some parts may not work properly.",null==t&&null==r||(i+="\n\nError",null!=t&&(i+=" ["+t+"]"),i+=null!=r?": "+r.replace(errorPrologRegExp,"")+".":": unknown error."),"object"===(void 0===n?"undefined":_typeof(n))&&null!==n&&n.stack&&(i+="\n\nStack Trace:\n"+n.stack),window.alert(i)}function t(t,r,n){e(null,t,r,n)}function r(t,r,n){e("fatal",t,r,n)}return function(e){window.onerror=function(n,a,i,o,s){"complete"===document.readyState?t(null,n,s):(r(null,n,s),window.onerror=e,"function"==typeof window.onerror&&window.onerror.apply(this,arguments))}}(window.onerror),Object.freeze(Object.defineProperties({},{error:{value:t},fatal:{value:r}}))}(),Patterns=function(){var e=function(){var e=new Map([[" ","\\u0020"],["\f","\\f"],["\n","\\n"],["\r","\\r"],["\t","\\t"],["\v","\\v"],[" ","\\u00a0"],[" ","\\u1680"],["᠎","\\u180e"],[" ","\\u2000"],[" ","\\u2001"],[" ","\\u2002"],[" ","\\u2003"],[" ","\\u2004"],[" ","\\u2005"],[" ","\\u2006"],[" ","\\u2007"],[" ","\\u2008"],[" ","\\u2009"],[" ","\\u200a"],["\u2028","\\u2028"],["\u2029","\\u2029"],[" ","\\u202f"],[" ","\\u205f"],["　","\\u3000"],["\ufeff","\\ufeff"]]),t=/^\s$/,r="";return e.forEach(function(e,n){t.test(n)||(r+=e)}),r?"[\\s"+r+"]":"\\s"}(),t="[\\u0020\\f\\t\\v\\u00a0\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]",r="\\s"===e?"\\S":e.replace(/^\[/,"[^"),n="[0-9A-Z_a-z\\-\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u00ff\\u0150\\u0170\\u0151\\u0171]",a=n.replace("\\-",""),i=function(){return"("+n+"+)\\(([^\\)\\|\\n]+)\\):|"+t+"*("+n+"+)"+t+"*:([^;\\|\\n]+);|"+t+"*((?:[#.]"+n+"+"+t+"*)+);"}();return Object.freeze({space:e,spaceNoTerminator:t,lineTerminator:"[\\n\\r\\u2028\\u2029]",notSpace:r,anyChar:"(?:.|[\\n\\r\\u2028\\u2029])",anyLetter:n,anyLetterStrict:a,identifierFirstChar:"[$A-Z_a-z]",identifierNextChar:"[$0-9A-Z_a-z]",identifier:"[$A-Z_a-z][$0-9A-Z_a-z]*",variableSigil:"[$_]",variable:"[$_][$A-Z_a-z][$0-9A-Z_a-z]*",macroName:"[A-Za-z][\\w-]*|[=-]",templateName:"[A-Za-z][\\w-]*",cssIdOrClassSigil:"[#.]",cssImage:"\\[[<>]?[Ii][Mm][Gg]\\[(?:\\s|\\S)*?\\]\\]+",inlineCss:i,url:"(?:file|https?|mailto|ftp|javascript|irc|news|data):[^\\s'\"]+"})}();!function(){function e(e,t){var r=Number.parseInt(e,10)||0;if(r<1)return"";var n=void 0===t?"":String(t);for(""===n&&(n=" ");n.length<r;){var a=n.length,i=r-a;n+=a>i?n.slice(0,i):n}return n.length>r&&(n=n.slice(0,r)),n}var t=function(){function e(e,n){var a=String(e);if(!a)return a;switch(n){case"start":return t.test(a)?a.replace(t,""):a;case"end":return r.test(a)?a.replace(r,""):a;default:throw new Error('_trimString called with incorrect where parameter value: "'+n+'"')}}var t=new RegExp("^"+Patterns.space+Patterns.space+"*"),r=new RegExp(""+Patterns.space+Patterns.space+"*$");return e}();Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,writable:!0,value:function(){function e(){if(null==this)throw new TypeError("Array.prototype.flat called on null or undefined");var t=0===arguments.length?1:Number(arguments[0])||0;return t<1?Array.prototype.slice.call(this):Array.prototype.reduce.call(this,function(r,n){return n instanceof Array?r.push.apply(r,_toConsumableArray(e.call(n,t-1))):r.push(n),r},[])}return e}()}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatMap called on null or undefined");return Array.prototype.map.apply(this,arguments).flat()}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");if(0===arguments.length)return!1;var e=this.length>>>0;if(0===e)return!1;var t=arguments[0],r=Number(arguments[1])||0;for(r<0&&(r=Math.max(0,e+r));r<e;++r){var n=this[r];if(n===t||n!==n&&t!==t)return!0}return!1}}),Object.entries||Object.defineProperty(Object,"entries",{configurable:!0,writable:!0,value:function(e){if("object"!==(void 0===e?"undefined":_typeof(e))||null===e)throw new TypeError("Object.entries object parameter must be an object");return Object.keys(e).map(function(t){return[t,e[t]]})}}),Object.fromEntries||Object.defineProperty(Object,"fromEntries",{configurable:!0,writable:!0,value:function(e){return Array.from(e).reduce(function(e,t){if(Object(t)!==t)throw new TypeError("Object.fromEntries iterable parameter must yield objects");return t[0]in e?Object.defineProperty(e,t[0],{configurable:!0,enumerable:!0,writable:!0,value:t[1]}):e[t[0]]=t[1],e},{})}}),Object.getOwnPropertyDescriptors||Object.defineProperty(Object,"getOwnPropertyDescriptors",{configurable:!0,writable:!0,value:function(e){if(null==e)throw new TypeError("Object.getOwnPropertyDescriptors object parameter is null or undefined");var t=Object(e);return Reflect.ownKeys(t).reduce(function(e,r){var n=Object.getOwnPropertyDescriptor(t,r);return void 0!==n&&(r in e?Object.defineProperty(e,r,{configurable:!0,enumerable:!0,writable:!0,value:n}):e[r]=n),e},{})}}),Object.values||Object.defineProperty(Object,"values",{configurable:!0,writable:!0,value:function(e){if("object"!==(void 0===e?"undefined":_typeof(e))||null===e)throw new TypeError("Object.values object parameter must be an object");return Object.keys(e).map(function(t){return e[t]})}}),String.prototype.padStart||Object.defineProperty(String.prototype,"padStart",{configurable:!0,writable:!0,value:function(t,r){if(null==this)throw new TypeError("String.prototype.padStart called on null or undefined");var n=String(this),a=n.length,i=Number.parseInt(t,10);return i<=a?n:e(i-a,r)+n}}),String.prototype.padEnd||Object.defineProperty(String.prototype,"padEnd",{configurable:!0,writable:!0,value:function(t,r){if(null==this)throw new TypeError("String.prototype.padEnd called on null or undefined");var n=String(this),a=n.length,i=Number.parseInt(t,10);return i<=a?n:n+e(i-a,r)}}),String.prototype.trimStart||Object.defineProperty(String.prototype,"trimStart",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimStart called on null or undefined");return t(this,"start")}}),String.prototype.trimLeft||Object.defineProperty(String.prototype,"trimLeft",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimLeft called on null or undefined");return t(this,"start")}}),String.prototype.trimEnd||Object.defineProperty(String.prototype,"trimEnd",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimEnd called on null or undefined");return t(this,"end")}}),String.prototype.trimRight||Object.defineProperty(String.prototype,"trimRight",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimRight called on null or undefined");return t(this,"end")}})}(),function(){function _random(){var e=void 0,t=void 0;switch(arguments.length){case 0:throw new Error("_random called with insufficient parameters");case 1:e=0,t=arguments[0];break;default:e=arguments[0],t=arguments[1]}if(e>t){var r=[t,e];e=r[0],t=r[1]}return Math.floor(_nativeMathRandom()*(t-e+1))+e}function _randomIndex(e,t){var r=void 0,n=void 0;switch(t.length){case 1:r=0,n=e-1;break;case 2:r=0,n=Math.trunc(t[1]);break;default:r=Math.trunc(t[1]),n=Math.trunc(t[2])}return Number.isNaN(r)?r=0:!Number.isFinite(r)||r>=e?r=e-1:r<0&&(r=e+r)<0&&(r=0),Number.isNaN(n)?n=0:!Number.isFinite(n)||n>=e?n=e-1:n<0&&(n=e+n)<0&&(n=e-1),_random(r,n)}function _getCodePointStartAndEnd(e,t){var r=e.charCodeAt(t);if(Number.isNaN(r))return{char:"",start:-1,end:-1};if(r<55296||r>57343)return{char:e.charAt(t),start:t,end:t};if(r>=55296&&r<=56319){var n=t+1;if(n>=e.length)throw new Error("high surrogate without trailing low surrogate");var a=e.charCodeAt(n);if(a<56320||a>57343)throw new Error("high surrogate without trailing low surrogate");return{char:e.charAt(t)+e.charAt(n),start:t,end:n}}if(0===t)throw new Error("low surrogate without leading high surrogate");var i=t-1,o=e.charCodeAt(i);if(o<55296||o>56319)throw new Error("low surrogate without leading high surrogate");return{char:e.charAt(i)+e.charAt(t),start:i,end:t}}var _nativeMathRandom=Math.random;Object.defineProperty(Array,"random",{configurable:!0,writable:!0,value:function(e){if("object"!==(void 0===e?"undefined":_typeof(e))||null===e||!Object.prototype.hasOwnProperty.call(e,"length"))throw new TypeError("Array.random array parameter must be an array or array-lke object");var t=e.length>>>0;if(0!==t){return e[0===arguments.length?_random(0,t-1):_randomIndex(t,Array.prototype.slice.call(arguments,1))]}}}),Object.defineProperty(Array.prototype,"concatUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.concatUnique called on null or undefined");var e=Array.from(this);if(0===arguments.length)return e;var t=Array.prototype.reduce.call(arguments,function(e,t){return e.concat(t)},[]),r=t.length;if(0===r)return e;for(var n=Array.prototype.indexOf,a=Array.prototype.push,i=0;i<r;++i){var o=t[i];-1===n.call(e,o)&&a.call(e,o)}return e}}),Object.defineProperty(Array.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.count called on null or undefined");for(var e=Array.prototype.indexOf,t=arguments[0],r=Number(arguments[1])||0,n=0;-1!==(r=e.call(this,t,r));)++n,++r;return n}}),Object.defineProperty(Array.prototype,"delete",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.delete called on null or undefined");if(0===arguments.length)return[];var e=this.length>>>0;if(0===e)return[];for(var t=Array.prototype.concat.apply([],arguments),r=t.length,n=[],a=0;a<e;++a)for(var i=this[a],o=0;o<r;++o){var s=t[o];if(i===s||i!==i&&s!==s){n.push(a);break}}for(var u=[],l=0,c=n.length;l<c;++l)u[l]=this[n[l]];for(var d=Array.prototype.splice,f=n.length-1;f>=0;--f)d.call(this,n[f],1);return u}}),Object.defineProperty(Array.prototype,"deleteAt",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteAt called on null or undefined");if(0===arguments.length)return[];var e=this.length>>>0;if(0===e)return[];for(var t=Array.prototype.splice,r=[].concat(_toConsumableArray(new Set(Array.prototype.concat.apply([],arguments).map(function(t){return t<0?Math.max(0,e+t):t})).values())),n=[].concat(_toConsumableArray(r)).sort(function(e,t){return t-e}),a=[],i=0,o=r.length;i<o;++i)a[i]=this[r[i]];for(var s=0,u=n.length;s<u;++s)t.call(this,n[s],1);return a}}),Object.defineProperty(Array.prototype,"deleteWith",{configurable:!0,writable:!0,value:function(e,t){if(null==this)throw new TypeError("Array.prototype.deleteWith called on null or undefined");if("function"!=typeof e)throw new Error("Array.prototype.deleteWith predicate parameter must be a function");var r=this.length>>>0;if(0===r)return[];for(var n=Array.prototype.splice,a=[],i=[],o=0;o<r;++o)e.call(t,this[o],o,this)&&(i.push(this[o]),a.push(o));for(var s=a.length-1;s>=0;--s)n.call(this,a[s],1);return i}}),Object.defineProperty(Array.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.first called on null or undefined");if(0!=this.length>>>0)return this[0]}}),Object.defineProperty(Array.prototype,"includesAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAll called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAll.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var e=0,t=arguments.length;e<t;++e)if(!Array.prototype.some.call(this,function(e){return e===this.val||e!==e&&this.val!==this.val},{val:arguments[e]}))return!1;return!0}}),Object.defineProperty(Array.prototype,"includesAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAny called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAny.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var e=0,t=arguments.length;e<t;++e)if(Array.prototype.some.call(this,function(e){return e===this.val||e!==e&&this.val!==this.val},{val:arguments[e]}))return!0;return!1}}),Object.defineProperty(Array.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.last called on null or undefined");var e=this.length>>>0;if(0!==e)return this[e-1]}}),Object.defineProperty(Array.prototype,"pluck",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pluck called on null or undefined");var e=this.length>>>0;if(0!==e){var t=0===arguments.length?_random(0,e-1):_randomIndex(e,[].concat(Array.prototype.slice.call(arguments)));return Array.prototype.splice.call(this,t,1)[0]}}}),Object.defineProperty(Array.prototype,"pluckMany",{configurable:!0,writable:!0,value:function(e){if(null==this)throw new TypeError("Array.prototype.pluckMany called on null or undefined");var t=this.length>>>0;if(0===t)return[];var r=Math.trunc(e);if(!Number.isInteger(r))throw new Error("Array.prototype.pluckMany want parameter must be an integer");if(r<1)return[];r>t&&(r=t);var n=Array.prototype.splice,a=[],i=t-1;do{a.push(n.call(this,_random(0,i--),1)[0])}while(a.length<r);return a}}),Object.defineProperty(Array.prototype,"pushUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pushUnique called on null or undefined");var e=arguments.length;if(0===e)return this.length>>>0;for(var t=Array.prototype.indexOf,r=Array.prototype.push,n=0;n<e;++n){var a=arguments[n];-1===t.call(this,a)&&r.call(this,a)}return this.length>>>0}}),Object.defineProperty(Array.prototype,"random",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.random called on null or undefined");var e=this.length>>>0;if(0!==e){return this[0===arguments.length?_random(0,e-1):_randomIndex(e,[].concat(Array.prototype.slice.call(arguments)))]}}}),Object.defineProperty(Array.prototype,"randomMany",{configurable:!0,writable:!0,value:function(e){if(null==this)throw new TypeError("Array.prototype.randomMany called on null or undefined");var t=this.length>>>0;if(0===t)return[];var r=Math.trunc(e);if(!Number.isInteger(r))throw new Error("Array.prototype.randomMany want parameter must be an integer");if(r<1)return[];r>t&&(r=t);var n=new Map,a=[],i=t-1;do{var o=void 0;do{o=_random(0,i)}while(n.has(o));n.set(o,!0),a.push(this[o])}while(a.length<r);return a}}),Object.defineProperty(Array.prototype,"shuffle",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.shuffle called on null or undefined");var e=this.length>>>0;if(0===e)return this;for(var t=e-1;t>0;--t){var r=Math.floor(_nativeMathRandom()*(t+1));if(t!==r){var n=this[t];this[t]=this[r],this[r]=n}}return this}}),Object.defineProperty(Array.prototype,"unshiftUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.unshiftUnique called on null or undefined");var e=arguments.length;if(0===e)return this.length>>>0;for(var t=Array.prototype.indexOf,r=Array.prototype.unshift,n=0;n<e;++n){var a=arguments[n];-1===t.call(this,a)&&r.call(this,a)}return this.length>>>0}}),Object.defineProperty(Function.prototype,"partial",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Function.prototype.partial called on null or undefined");var e=Array.prototype.slice,t=this,r=e.call(arguments,0);return function(){for(var n=[],a=0,i=0;i<r.length;++i)n.push(r[i]===undefined?arguments[a++]:r[i]);return t.apply(this,n.concat(e.call(arguments,a)))}}}),Object.defineProperty(Math,"clamp",{configurable:!0,writable:!0,value:function(e,t,r){var n=Number(e);return Number.isNaN(n)?NaN:n.clamp(t,r)}}),Object.defineProperty(Math,"easeInOut",{configurable:!0,writable:!0,value:function(e){return 1-(Math.cos(Number(e)*Math.PI)+1)/2}}),Object.defineProperty(Number.prototype,"clamp",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Number.prototype.clamp called on null or undefined");if(2!==arguments.length)throw new Error("Number.prototype.clamp called with an incorrect number of parameters");var e=Number(arguments[0]),t=Number(arguments[1]);if(e>t){var r=[t,e];e=r[0],t=r[1]}return Math.min(Math.max(this,e),t)}}),RegExp.escape||function(){var e=/[\\^$*+?.()|[\]{}]/g,t=new RegExp(e.source);Object.defineProperty(RegExp,"escape",{configurable:!0,writable:!0,value:function(r){var n=String(r);return n&&t.test(n)?n.replace(e,"\\$&"):n}})}(),function(){var e=/{(\d+)(?:,([+-]?\d+))?}/g,t=new RegExp(e.source);Object.defineProperty(String,"format",{configurable:!0,writable:!0,value:function(r){function n(e,t,r){if(!t)return e;var n=Math.abs(t)-e.length;if(n<1)return e;var a=String(r).repeat(n);return t<0?e+a:a+e}if(arguments.length<2)return 0===arguments.length?"":r;var a=2===arguments.length&&Array.isArray(arguments[1])?[].concat(_toConsumableArray(arguments[1])):Array.prototype.slice.call(arguments,1);return 0===a.length?r:t.test(r)?(e.lastIndex=0,r.replace(e,function(e,t,r){var i=a[t];if(null==i)return"";for(;"function"==typeof i;)i=i();switch(void 0===i?"undefined":_typeof(i)){case"string":break;case"object":i=JSON.stringify(i);break;default:i=String(i)}return n(i,r?Number.parseInt(r,10):0," ")})):r}})}(),Object.defineProperty(String.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.contains called on null or undefined");return-1!==String.prototype.indexOf.apply(this,arguments)}}),Object.defineProperty(String.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.count called on null or undefined");var e=String(arguments[0]||"");if(""===e)return 0;for(var t=String.prototype.indexOf,r=e.length,n=Number(arguments[1])||0,a=0;-1!==(n=t.call(this,e,n));)++a,n+=r;return a}}),Object.defineProperty(String.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.first called on null or undefined");return _getCodePointStartAndEnd(String(this),0).char}}),Object.defineProperty(String.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.last called on null or undefined");var e=String(this);return _getCodePointStartAndEnd(e,e.length-1).char}}),Object.defineProperty(String.prototype,"splice",{configurable:!0,writable:!0,value:function(e,t,r){if(null==this)throw new TypeError("String.prototype.splice called on null or undefined");var n=this.length>>>0;if(0===n)return"";var a=Number(e);Number.isSafeInteger(a)?a<0&&(a+=n)<0&&(a=0):a=0,a>n&&(a=n);var i=Number(t);(!Number.isSafeInteger(i)||i<0)&&(i=0);var o=this.slice(0,a);return void 0!==r&&(o+=r),a+i<n&&(o+=this.slice(a+i)),o}}),Object.defineProperty(String.prototype,"splitOrEmpty",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.splitOrEmpty called on null or undefined");return""===String(this)?[]:String.prototype.split.apply(this,arguments)}}),Object.defineProperty(String.prototype,"toLocaleUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toLocaleUpperFirst called on null or undefined");var e=String(this),t=_getCodePointStartAndEnd(e,0),r=t.char,n=t.end;return-1===n?"":r.toLocaleUpperCase()+e.slice(n+1)}}),Object.defineProperty(String.prototype,"toUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toUpperFirst called on null or undefined");var e=String(this),t=_getCodePointStartAndEnd(e,0),r=t.char,n=t.end;return-1===n?"":r.toUpperCase()+e.slice(n+1)}}),Object.defineProperty(Date.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:date)",this.toISOString()]}}),Object.defineProperty(Function.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)","("+this.toString()+")"]}}),Object.defineProperty(Map.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:map)",[].concat(_toConsumableArray(this))]}}),Object.defineProperty(RegExp.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)",this.toString()]}}),Object.defineProperty(Set.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:set)",[].concat(_toConsumableArray(this))]}}),Object.defineProperty(JSON,"reviveWrapper",{configurable:!0,writable:!0,value:function(e,t){if("string"!=typeof e)throw new TypeError("JSON.reviveWrapper code parameter must be a string");return["(revive:eval)",[e,t]]}}),Object.defineProperty(JSON,"_real_parse",{value:JSON.parse}),Object.defineProperty(JSON,"parse",{configurable:!0,writable:!0,value:function value(text,reviver){return JSON._real_parse(text,function(key,val){var value=val;if(Array.isArray(value)&&2===value.length)switch(value[0]){case"(revive:set)":value=new Set(value[1]);break;case"(revive:map)":value=new Map(value[1]);break;case"(revive:date)":value=new Date(value[1]);break;case"(revive:eval)":try{if(Array.isArray(value[1])){var $ReviveData$=value[1][1];value=eval(value[1][0])}else value=eval(value[1])}catch(e){}}else if("string"==typeof value&&"@@revive@@"===value.slice(0,10))try{value=eval(value.slice(10))}catch(e){}if("function"==typeof reviver)try{value=reviver(key,value)}catch(e){}return value})}}),Object.defineProperty(Array.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.contains called on null or undefined");return Array.prototype.includes.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAll called on null or undefined");return Array.prototype.includesAll.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAny called on null or undefined");return Array.prototype.includesAny.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"flatten",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatten called on null or undefined");return Array.prototype.flat.call(this,1/0)}}),Object.defineProperty(String.prototype,"readBracketedList",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.readBracketedList called on null or undefined");for(var e=new RegExp("(?:\\[\\[((?:\\s|\\S)*?)\\]\\])|([^\"'\\s]\\S*)","gm"),t=[],r=void 0;null!==(r=e.exec(this));)r[1]?t.push(r[1]):r[2]&&t.push(r[2]);return t}})}();var Browser=function(){var e=navigator.userAgent.toLowerCase(),t=e.includes("windows phone"),r=Object.freeze({Android:!t&&e.includes("android"),BlackBerry:/blackberry|bb10/.test(e),iOS:!t&&/ip(?:hone|ad|od)/.test(e),Opera:!t&&("object"===_typeof(window.operamini)||e.includes("opera mini")),Windows:t||/iemobile|wpdesktop/.test(e),any:function(){return r.Android||r.BlackBerry||r.iOS||r.Opera||r.Windows}}),n=!r.Windows&&!/khtml|trident|edge/.test(e)&&e.includes("gecko"),a=!e.includes("opera")&&/msie|trident/.test(e),i=a?function(){var t=/(?:msie\s+|rv:)(\d+\.\d)/.exec(e);return t?Number(t[1]):0}():null,o=e.includes("opera")||e.includes(" opr/"),s=o?function(){var t=new RegExp((/khtml|chrome/.test(e)?"opr":"version")+"\\/(\\d+\\.\\d+)"),r=t.exec(e);return r?Number(r[1]):0}():null,u=e.includes("vivaldi");return Object.freeze({userAgent:e,isMobile:r,isGecko:n,isIE:a,ieVersion:i,isOpera:o,operaVersion:s,isVivaldi:u})}(),Has=function(){var e=function(){try{return"function"==typeof document.createElement("audio").canPlayType}catch(e){}return!1}(),t=function(){try{return"Blob"in window&&"File"in window&&"FileList"in window&&"FileReader"in window&&!Browser.isMobile.any()&&(!Browser.isOpera||Browser.operaVersion>=15)}catch(e){}return!1}(),r=function(){try{return"geolocation"in navigator&&"function"==typeof navigator.geolocation.getCurrentPosition&&"function"==typeof navigator.geolocation.watchPosition}catch(e){}return!1}(),n=function(){try{return"MutationObserver"in window&&"function"==typeof window.MutationObserver}catch(e){}return!1}(),a=function(){try{return"performance"in window&&"function"==typeof window.performance.now}catch(e){}return!1}(),i=function(){try{return"ontouchstart"in window||!!window.DocumentTouch&&document instanceof window.DocumentTouch||!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints}catch(e){}return!1}(),o=function(){try{for(var e=new Map([["transition","transitionend"],["MSTransition","msTransitionEnd"],["WebkitTransition","webkitTransitionEnd"],["MozTransition","transitionend"]]),t=[].concat(_toConsumableArray(e.keys())),r=document.createElement("div"),n=0;n<t.length;++n)if(r.style[t[n]]!==undefined)return e.get(t[n])}catch(e){}return!1}();return Object.freeze({audio:e,fileAPI:t,geolocation:r,mutationObserver:n,performance:a,touch:i,transitionEndEvent:o})}(),Visibility=function(){function e(){return a}function t(){return a&&document[a.stateProperty]||"visible"}function r(){return Boolean(a)}function n(){return Boolean(a&&document[a.hiddenProperty])}var a=function(){try{return Object.freeze([{hiddenProperty:"hidden",stateProperty:"visibilityState",changeEvent:"visibilitychange"},{hiddenProperty:"webkitHidden",stateProperty:"webkitVisibilityState",changeEvent:"webkitvisibilitychange"},{hiddenProperty:"mozHidden",stateProperty:"mozVisibilityState",changeEvent:"mozvisibilitychange"},{hiddenProperty:"msHidden",stateProperty:"msVisibilityState",changeEvent:"msvisibilitychange"}].find(function(e){return e.hiddenProperty in document}))}catch(e){}return undefined}();return Object.freeze(Object.defineProperties({},{vendor:{get:e},state:{get:t},isEnabled:{value:r},isHidden:{value:n},hiddenProperty:{value:a&&a.hiddenProperty},stateProperty:{value:a&&a.stateProperty},changeEvent:{value:a&&a.changeEvent}}))}(),Fullscreen=function(){function e(e){var t=e||document.documentElement;return t===document.documentElement&&("msRequestFullscreen"===f.requestFn||Browser.isOpera&&Browser.operaVersion<15)&&(t=document.body),t}function t(){return f}function r(){return(f||null)&&document[f.element]}function n(){return Boolean(f&&document[f.isEnabled])}function a(){return Boolean(f&&document[f.element])}function i(t,r){var n=this;if(!f)return Promise.reject(new Error("fullscreen not supported"));var i=e(r);if("function"!=typeof i[f.requestFn])return Promise.reject(new Error("fullscreen not supported"));if(a())return Promise.resolve();if(p())return i[f.requestFn](t);var o=".Fullscreen_requestFullscreen";return new Promise(function(e,r){jQuery(i).off(o).one(""+f.errorEvent+o+" "+f.changeEvent+o,function(t){jQuery(n).off(o),t.type===f.errorEvent?r(new Error("unknown fullscreen request error")):e()}),i[f.requestFn](t)})}function o(){var e=this;if(!f||"function"!=typeof document[f.exitFn])return Promise.reject(new TypeError("fullscreen not supported"));if(!a())return Promise.reject(new TypeError("fullscreen mode not active"));if(p())return document[f.exitFn]();var t=".Fullscreen_exitFullscreen";return new Promise(function(r,n){jQuery(document).off(t).one(""+f.errorEvent+t+" "+f.changeEvent+t,function(a){jQuery(e).off(t),a.type===f.errorEvent?n(new Error("unknown fullscreen exit error")):r()}),document[f.exitFn]()})}function s(e,t){return a()?o():i(e,t)}function u(t,r){if(f){var n=e(r);$(n).on(f.changeEvent,t)}}function l(t,r){if(f){var n=e(r);t?$(n).off(f.changeEvent,t):$(n).off(f.changeEvent)}}function c(t,r){if(f){var n=e(r);$(n).on(f.errorEvent,t)}}function d(t,r){if(f){var n=e(r);t?$(n).off(f.errorEvent,t):$(n).off(f.errorEvent)}}var f=function(){try{return Object.freeze([{isEnabled:"fullscreenEnabled",element:"fullscreenElement",requestFn:"requestFullscreen",exitFn:"exitFullscreen",changeEvent:"fullscreenchange",errorEvent:"fullscreenerror"},{isEnabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",requestFn:"webkitRequestFullscreen",exitFn:"webkitExitFullscreen",changeEvent:"webkitfullscreenchange",errorEvent:"webkitfullscreenerror"},{isEnabled:"mozFullScreenEnabled",element:"mozFullScreenElement",requestFn:"mozRequestFullScreen",exitFn:"mozCancelFullScreen",changeEvent:"mozfullscreenchange",errorEvent:"mozfullscreenerror"},{isEnabled:"msFullscreenEnabled",element:"msFullscreenElement",requestFn:"msRequestFullscreen",exitFn:"msExitFullscreen",changeEvent:"MSFullscreenChange",errorEvent:"MSFullscreenError"}].find(function(e){return e.isEnabled in document}))}catch(e){}return undefined}(),p=function(){function e(){if(null!==t)return t;if(t=!1,f)try{var e=document.exitFullscreen();e.catch(function(){}),t=e instanceof Promise}catch(e){}return t}var t=null;return e}();return Object.freeze(Object.defineProperties({},{vendor:{get:t},element:{get:r},isEnabled:{value:n},isFullscreen:{value:a},request:{value:i},exit:{value:o},toggle:{value:s},onChange:{value:u},offChange:{value:l},onError:{value:c},offError:{value:d}}))}(),_ref3=function(){function e(e){for(var t=e.cloneNode(!0),r=document.createDocumentFragment(),n=void 0;null!==(n=t.firstChild);){if(n.nodeType===Node.ELEMENT_NODE)switch(n.nodeName.toUpperCase()){case"BR":case"DIV":case"P":r.appendChild(document.createTextNode(" "))}r.appendChild(n)}return r.textContent}function t(e){if("object"!==(void 0===e?"undefined":_typeof(e))||null===e)return e;if(e instanceof String)return String(e);if(e instanceof Number)return Number(e);if(e instanceof Boolean)return Boolean(e);if("function"==typeof e.clone)return e.clone(!0);if(e.nodeType&&"function"==typeof e.cloneNode)return e.cloneNode(!0);var r=void 0;return e instanceof Array?r=new Array(e.length):e instanceof Date?r=new Date(e.getTime()):e instanceof Map?(r=new Map,e.forEach(function(e,n){return r.set(n,t(e))})):e instanceof RegExp?r=new RegExp(e):e instanceof Set?(r=new Set,e.forEach(function(e){return r.add(t(e))})):r=Object.create(Object.getPrototypeOf(e)),Object.keys(e).forEach(function(n){return r[n]=t(e[n])}),r}function r(e){
for(var t=document.createDocumentFragment(),r=document.createElement("p"),n=void 0;null!==(n=e.firstChild);){if(n.nodeType===Node.ELEMENT_NODE){switch(n.nodeName.toUpperCase()){case"BR":if(null!==n.nextSibling&&n.nextSibling.nodeType===Node.ELEMENT_NODE&&"BR"===n.nextSibling.nodeName.toUpperCase()){e.removeChild(n.nextSibling),e.removeChild(n),t.appendChild(r),r=document.createElement("p");continue}if(!r.hasChildNodes()){e.removeChild(n);continue}break;case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":r.hasChildNodes()&&(t.appendChild(r),r=document.createElement("p")),t.appendChild(n);continue}}r.appendChild(n)}r.hasChildNodes()&&t.appendChild(r),e.appendChild(t)}function n(){try{return document.activeElement||null}catch(e){return null}}function a(t){if("string"!=typeof t)throw new TypeError("story display title must be a string (received: "+Util.getType(t)+")");var r=document.createDocumentFragment();new Wikifier(r,t);var n=e(r).trim();document.title=Config.passages.displayTitles&&""!==State.passage&&State.passage!==Config.passages.start?State.passage+" | "+n:n;var a=document.getElementById("story-title");null!==a&&jQuery(a).empty().append(r)}function i(e,t,r){var n="object"===(void 0===e?"undefined":_typeof(e))?e:document.getElementById(e);if(null==n)return null;var a=Array.isArray(t)?t:[t];jQuery(n).empty();for(var i=0,o=a.length;i<o;++i)if(Story.has(a[i]))return new Wikifier(n,Story.get(a[i]).processText().trim()),n;if(null!=r){var s=String(r).trim();""!==s&&new Wikifier(n,s)}return n}function o(e,t,r){var n=jQuery(document.createElement("div")),a=jQuery(document.createElement("button")),i=jQuery(document.createElement("pre")),o=L10n.get("errorTitle")+": "+(t||"unknown error");return a.addClass("error-toggle").ariaClick({label:L10n.get("errorToggle")},function(){a.hasClass("enabled")?(a.removeClass("enabled"),i.attr({"aria-hidden":!0,hidden:"hidden"})):(a.addClass("enabled"),i.removeAttr("aria-hidden hidden"))}).appendTo(n),jQuery(document.createElement("span")).addClass("error").text(o).appendTo(n),jQuery(document.createElement("code")).text(r).appendTo(i),i.addClass("error-source").attr({"aria-hidden":!0,hidden:"hidden"}).appendTo(n),n.addClass("error-view").appendTo(e),console.warn(o+"\n\t"+r.replace(/\n/g,"\n\t")),!1}function s(e,t){var r=s;switch(void 0===e?"undefined":_typeof(e)){case"number":if(Number.isNaN(e))return t;break;case"object":if(null===e)return t;if(Array.isArray(e))return e.map(function(e){return r(e,t)}).join(", ");if(e instanceof Set)return[].concat(_toConsumableArray(e)).map(function(e){return r(e,t)}).join(", ");if(e instanceof Map){return"{ "+[].concat(_toConsumableArray(e)).map(function(e){var n=_slicedToArray(e,2),a=n[0],i=n[1];return r(a,t)+" → "+r(i,t)}).join(", ")+" }"}return e instanceof Date?e.toLocaleString():"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e);case"function":case"undefined":return t}return String(e)}return Object.freeze(Object.defineProperties({},{clone:{value:t},convertBreaks:{value:r},safeActiveElement:{value:n},setDisplayTitle:{value:a},setPageElement:{value:i},throwError:{value:o},toStringOrDefault:{value:s}}))}(),clone=_ref3.clone,convertBreaks=_ref3.convertBreaks,safeActiveElement=_ref3.safeActiveElement,setDisplayTitle=_ref3.setDisplayTitle,setPageElement=_ref3.setPageElement,throwError=_ref3.throwError,toStringOrDefault=_ref3.toStringOrDefault;!function(){function e(e){13!==e.which&&32!==e.which||(e.preventDefault(),jQuery(safeActiveElement()||this).trigger("click"))}function t(e){return function(){var t=jQuery(this);t.ariaIsDisabled()||(t.is("[aria-pressed]")&&t.attr("aria-pressed","true"===t.attr("aria-pressed")?"false":"true"),e.apply(this,arguments))}}function r(e){return t(function(){jQuery(this).off(".aria-clickable").removeAttr("tabindex aria-controls aria-pressed").not("a,button").removeAttr("role").end().filter("button").prop("disabled",!0),e.apply(this,arguments)})}jQuery.fn.extend({ariaClick:function(n,a){if(0===this.length||0===arguments.length)return this;var i=n,o=a;return null==o&&(o=i,i=undefined),i=jQuery.extend({namespace:undefined,one:!1,selector:undefined,data:undefined,controls:undefined,pressed:undefined,label:undefined},i),"string"!=typeof i.namespace?i.namespace="":"."!==i.namespace[0]&&(i.namespace="."+i.namespace),"boolean"==typeof i.pressed&&(i.pressed=i.pressed?"true":"false"),this.filter("button").prop("type","button"),this.not("a,button").attr("role","button"),this.attr("tabindex",0),null!=i.controls&&this.attr("aria-controls",i.controls),null!=i.pressed&&this.attr("aria-pressed",i.pressed),null!=i.label&&this.attr({"aria-label":i.label,title:i.label}),this.not("button").on("keypress.aria-clickable"+i.namespace,i.selector,e),this.on("click.aria-clickable"+i.namespace,i.selector,i.data,i.one?r(o):t(o)),this},ariaDisabled:function(e){if(0===this.length||0===arguments.length)return this;var t=this.not("button,fieldset,input,menuitem,optgroup,option,select,textarea"),r=this.filter("button,fieldset,input,menuitem,optgroup,option,select,textarea");return e?(t.each(function(){this.setAttribute("disabled",""),this.setAttribute("aria-disabled","true")}),r.each(function(){this.disabled=!0,this.setAttribute("aria-disabled","true")})):(t.each(function(){this.removeAttribute("disabled"),this.removeAttribute("aria-disabled")}),r.each(function(){this.disabled=!1,this.removeAttribute("aria-disabled")})),this},ariaIsDisabled:function(){return this.is("[disabled]")}})}(),function(){jQuery.extend({wikiWithOptions:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(0!==r.length){var a=document.createDocumentFragment();r.forEach(function(t){return new Wikifier(a,t,e)});var i=[].concat(_toConsumableArray(a.querySelectorAll(".error"))).map(function(e){return e.textContent.replace(errorPrologRegExp,"")});if(i.length>0)throw new Error(i.join("; "))}},wiki:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.wikiWithOptions.apply(this,[undefined].concat(t))}}),jQuery.fn.extend({wikiWithOptions:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(0===this.length||0===r.length)return this;var a=document.createDocumentFragment();return r.forEach(function(t){return new Wikifier(a,t,e)}),this.append(a),this},wiki:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.wikiWithOptions.apply(this,[undefined].concat(t))}})}();var Util=function(){function e(e){if(null===e)return"null";var t=void 0===e?"undefined":_typeof(e);return"object"===t?Object.prototype.toString.call(e).slice(8,-1):t}function t(e){return"boolean"==typeof e||"string"==typeof e&&("true"===e||"false"===e)}function r(e){return null!=e&&"function"==typeof e[Symbol.iterator]}function n(e){var t=void 0;switch(void 0===e?"undefined":_typeof(e)){case"number":t=e;break;case"string":t=Number(e);break;default:return!1}return!Number.isNaN(t)&&Number.isFinite(t)}function a(e,t){return e===t||e!==e&&t!==t}function i(e){var t=Object.create(null);if(e instanceof Array)e.forEach(function(e,r){return t[String(e)]=r});else if(e instanceof Set)Array.from(e).forEach(function(e,r){return t[String(e)]=r});else if(e instanceof Map)e.forEach(function(e,r){return t[String(r)]=e});else{if("object"!==(void 0===e?"undefined":_typeof(e))||null===e||Object.getPrototypeOf(e)!==Object.prototype)throw new TypeError("Util.toEnum obj parameter must be an Array, Map, Set, or generic object");Object.assign(t,e)}return Object.freeze(t)}function o(e){return Object.prototype.toString.call(e).slice(8,-1)}function s(e){var t=String(e).trim(),r=t.replace(/[^\w\s\u2013\u2014-]+/g,"").replace(/[_\s\u2013\u2014-]+/g,"-").toLocaleLowerCase();return y.test(r)?t.replace(v,"").replace(/[_\s\u2013\u2014-]+/g,"-"):r}function u(e){if(null==e)return"";var t=String(e);return t&&w.test(t)?t.replace(b,function(e){return k[e]}):t}function l(e){if(null==e)return"";var t=String(e);return t&&E.test(t)?t.replace(S,function(e){return j[e.toLowerCase()]}):t}function c(e,t){var r=String(e),n=Math.trunc(t),a=r.charCodeAt(n);if(Number.isNaN(a))return{char:"",start:-1,end:-1};var i={char:r.charAt(n),start:n,end:n};if(a<55296||a>57343)return i;if(a>=55296&&a<=56319){var o=n+1;if(o>=r.length)return i;var s=r.charCodeAt(o);return s<56320||s>57343?i:(i.char=i.char+r.charAt(o),i.end=o,i)}if(0===n)return i;var u=n-1,l=r.charCodeAt(u);return l<55296||l>56319?i:(i.char=r.charAt(u)+i.char,i.start=u,i)}function d(){return x.now()}function f(e){var t=O.exec(String(e));if(null===t)throw new SyntaxError('invalid time value syntax: "'+e+'"');var r=Number(t[1]);if(1===t[2].length&&(r*=1e3),Number.isNaN(r)||!Number.isFinite(r))throw new RangeError('invalid time value: "'+e+'"');return r}function p(e){if("number"!=typeof e||Number.isNaN(e)||!Number.isFinite(e)){var t=void 0;switch(void 0===e?"undefined":_typeof(e)){case"string":t='"'+e+'"';break;case"number":t=String(e);break;default:t=o(e)}throw new Error("invalid milliseconds: "+t)}return e+"ms"}function h(e){if(!e.includes("-"))switch(e){case"bgcolor":return"backgroundColor";case"float":return"cssFloat";default:return e}return("-ms-"===e.slice(0,4)?e.slice(1):e).split("-").map(function(e,t){return 0===t?e:e.toUpperFirst()}).join("")}function g(e){var t=document.createElement("a"),r=Object.create(null);t.href=e,t.search&&t.search.replace(/^\?/,"").splitOrEmpty(/(?:&(?:amp;)?|;)/).forEach(function(e){var t=e.split("="),n=_slicedToArray(t,2),a=n[0],i=n[1];r[a]=i});var n=t.host&&"/"!==t.pathname[0]?"/"+t.pathname:t.pathname;return{href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:t.port,path:""+n+t.search,pathname:n,query:t.search,search:t.search,queries:r,searches:r,hash:t.hash}}function m(e,t,r){if("object"!==(void 0===e?"undefined":_typeof(e))||null===e)throw new Error("Util.newExceptionFrom original parameter must be an object");if("function"!=typeof t)throw new Error("Util.newExceptionFrom exceptionType parameter must be an error type constructor");var n=new t(e.message);void 0!==e.name&&(n.name=e.name),void 0!==e.code&&(n.code=e.code),void 0!==e.columnNumber&&(n.columnNumber=e.columnNumber),void 0!==e.description&&(n.description=e.description),void 0!==e.fileName&&(n.fileName=e.fileName),void 0!==e.lineNumber&&(n.lineNumber=e.lineNumber),void 0!==e.number&&(n.number=e.number),void 0!==e.stack&&(n.stack=e.stack);var a=void 0===r?"undefined":_typeof(r);if("undefined"!==a)if("object"===a&&null!==r)Object.assign(n,r);else{if("string"!==a)throw new Error("Util.newExceptionFrom override parameter must be an object or string");n.message=r}return n}var v=/[\x00-\x20!-\/:-@[-^`{-\x9f]+/g,y=/^-*$/,b=/[&<>"'`]/g,w=new RegExp(b.source),k=Object.freeze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"}),S=/&(?:amp|#38|#x26|lt|#60|#x3c|gt|#62|#x3e|quot|#34|#x22|apos|#39|#x27|#96|#x60);/gi,E=new RegExp(S.source,"i"),j=Object.freeze({"&amp;":"&","&#38;":"&","&#x26;":"&","&lt;":"<","&#60;":"<","&#x3c;":"<","&gt;":">","&#62;":">","&#x3e;":">","&quot;":'"',"&#34;":'"',"&#x22;":'"',"&apos;":"'","&#39;":"'","&#x27;":"'","&#96;":"`","&#x60;":"`"}),x=Has.performance?performance:Date,O=/^([+-]?(?:\d*\.)?\d+)([Mm]?[Ss])$/;return Object.freeze(Object.defineProperties({},{getType:{value:e},isBoolean:{value:t},isIterable:{value:r},isNumeric:{value:n},sameValueZero:{value:a},toEnum:{value:i},toStringTag:{value:o},slugify:{value:s},escape:{value:u},unescape:{value:l},charAndPosAt:{value:c},fromCssTime:{value:f},toCssTime:{value:p},fromCssProperty:{value:h},parseUrl:{value:g},newExceptionFrom:{value:m},now:{value:d},random:{value:Math.random},entityEncode:{value:u},entityDecode:{value:l},evalExpression:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),SimpleStore=function(){function e(e,n){if(r)return r.create(e,n);for(var a=0;a<t.length;++a)if(t[a].init(e,n))return r=t[a],r.create(e,n);throw new Error("no valid storage adapters found")}var t=[],r=null;return Object.freeze(Object.defineProperties({},{adapters:{value:t},create:{value:e}}))}();SimpleStore.adapters.push(function(){function e(){function e(e){try{var t=window[e],r="_sc_"+String(Date.now());t.setItem(r,r);var n=t.getItem(r)===r;return t.removeItem(r),n}catch(e){}return!1}return r=e("localStorage")&&e("sessionStorage")}function t(e,t){if(!r)throw new Error("adapter not initialized");return new n(e,t)}var r=!1,n=function(){function e(t,r){_classCallCheck(this,e);var n=t+".",a=null,i=null;r?(a=window.localStorage,i="localStorage"):(a=window.sessionStorage,i="sessionStorage"),Object.defineProperties(this,{_engine:{value:a},_prefix:{value:n},_prefixRe:{value:new RegExp("^"+RegExp.escape(n))},name:{value:i},id:{value:t},persistent:{value:!!r}})}return _createClass(e,[{key:"size",value:function(){return this.keys().length}},{key:"keys",value:function(){for(var e=[],t=0;t<this._engine.length;++t){var r=this._engine.key(t);this._prefixRe.test(r)&&e.push(r.replace(this._prefixRe,""))}return e}},{key:"has",value:function(e){return!("string"!=typeof e||!e)&&this._engine.hasOwnProperty(this._prefix+e)}},{key:"get",value:function(t){if("string"!=typeof t||!t)return null;var r=this._engine.getItem(this._prefix+t);return null==r?null:e._deserialize(r)}},{key:"set",value:function(t,r){if("string"!=typeof t||!t)return!1;try{this._engine.setItem(this._prefix+t,e._serialize(r))}catch(e){if(/quota.?(?:exceeded|reached)/i.test(e.name+e.message))throw Util.newExceptionFrom(e,Error,this.name+" quota exceeded");throw e}return!0}},{key:"delete",value:function(e){return!("string"!=typeof e||!e)&&(this._engine.removeItem(this._prefix+e),!0)}},{key:"clear",value:function(){for(var e=this.keys(),t=0,r=e.length;t<r;++t)this.delete(e[t]);return!0}},{key:"length",get:function(){return this.keys().length}}],[{key:"_serialize",value:function(e){return LZString.compressToUTF16(JSON.stringify(e))}},{key:"_deserialize",value:function(e){return JSON.parse(LZString.decompressFromUTF16(e))}}]),e}();return Object.freeze(Object.defineProperties({},{init:{value:e},create:{value:t}}))}()),SimpleStore.adapters.push(function(){function e(e){try{var t="_sc_"+String(Date.now());o._setCookie(t,o._serialize(t),undefined),i=o._deserialize(o._getCookie(t))===t,o._setCookie(t,undefined,a)}catch(e){i=!1}return i&&r(e),i}function t(e,t){if(!i)throw new Error("adapter not initialized");return new o(e,t)}function r(e){if(""!==document.cookie)for(var t=e+".",r=new RegExp("^"+RegExp.escape(t)),i=e+"!.",s=e+"*.",u=/\.(?:state|rcWarn)$/,l=document.cookie.split(/;\s*/),c=0;c<l.length;++c){var d=l[c].split("="),f=decodeURIComponent(d[0]);if(r.test(f)){var p=decodeURIComponent(d[1]);""!==p&&function(){var e=!u.test(f);o._setCookie(f,undefined,a),o._setCookie(f.replace(r,function(){return e?i:s}),p,e?n:undefined)}()}}}var n="Tue, 19 Jan 2038 03:14:07 GMT",a="Thu, 01 Jan 1970 00:00:00 GMT",i=!1,o=function(){function e(t,r){_classCallCheck(this,e);var n=t+(r?"!":"*")+".";Object.defineProperties(this,{_prefix:{value:n},_prefixRe:{value:new RegExp("^"+RegExp.escape(n))},name:{value:"cookie"},id:{value:t},persistent:{value:!!r}})}return _createClass(e,[{key:"size",value:function(){return this.keys().length}},{key:"keys",value:function(){if(""===document.cookie)return[];for(var e=document.cookie.split(/;\s*/),t=[],r=0;r<e.length;++r){var n=e[r].split("="),a=decodeURIComponent(n[0]);if(this._prefixRe.test(a)){""!==decodeURIComponent(n[1])&&t.push(a.replace(this._prefixRe,""))}}return t}},{key:"has",value:function(t){return!("string"!=typeof t||!t)&&null!==e._getCookie(this._prefix+t)}},{key:"get",value:function(t){if("string"!=typeof t||!t)return null;var r=e._getCookie(this._prefix+t);return null===r?null:e._deserialize(r)}},{key:"set",value:function(t,r){if("string"!=typeof t||!t)return!1;try{if(e._setCookie(this._prefix+t,e._serialize(r),this.persistent?n:undefined),!this.has(t))throw new Error("unknown validation error during set")}catch(e){throw Util.newExceptionFrom(e,Error,"cookie error: "+e.message)}return!0}},{key:"delete",value:function(t){if("string"!=typeof t||!t||!this.has(t))return!1;try{if(e._setCookie(this._prefix+t,undefined,a),this.has(t))throw new Error("unknown validation error during delete")}catch(e){throw Util.newExceptionFrom(e,Error,"cookie error: "+e.message)}return!0}},{key:"clear",value:function(){for(var e=this.keys(),t=0,r=e.length;t<r;++t)this.delete(e[t]);return!0}},{key:"length",get:function(){return this.keys().length}}],[{key:"_getCookie",value:function(e){if(!e||""===document.cookie)return null;for(var t=document.cookie.split(/;\s*/),r=0;r<t.length;++r){var n=t[r].split("=");if(e===decodeURIComponent(n[0])){return decodeURIComponent(n[1])||null}}return null}},{key:"_setCookie",value:function(e,t,r){if(e){var n=encodeURIComponent(e)+"=";null!=t&&(n+=encodeURIComponent(t)),null!=r&&(n+="; expires="+r),n+="; path=/",document.cookie=n}}},{key:"_serialize",value:function(e){return LZString.compressToBase64(JSON.stringify(e))}},{key:"_deserialize",value:function(e){return JSON.parse(LZString.decompressFromBase64(e))}}]),e}();return Object.freeze(Object.defineProperties({},{init:{value:e},create:{value:t}}))}());var DebugView=function(){return function(){function e(t,r,n,a){_classCallCheck(this,e),Object.defineProperties(this,{parent:{value:t},view:{value:document.createElement("span")},break:{value:document.createElement("wbr")}}),jQuery(this.view).attr({title:a,"aria-label":a,"data-type":null!=r?r:"","data-name":null!=n?n:""}).addClass("debug"),jQuery(this.break).addClass("debug hidden"),this.parent.appendChild(this.view),this.parent.appendChild(this.break)}return _createClass(e,[{key:"append",value:function(e){return jQuery(this.view).append(e),this}},{key:"modes",value:function(e){if(null==e){var t={};return this.view.className.splitOrEmpty(/\s+/).forEach(function(e){"debug"!==e&&(t[e]=!0)}),t}if("object"===(void 0===e?"undefined":_typeof(e)))return Object.keys(e).forEach(function(t){this[e[t]?"addClass":"removeClass"](t)},jQuery(this.view)),this;throw new Error("DebugView.prototype.modes options parameter must be an object or null/undefined")}},{key:"remove",value:function(){var e=jQuery(this.view);this.view.hasChildNodes()&&e.contents().appendTo(this.parent),e.remove(),jQuery(this.break).remove()}},{key:"output",get:function(){return this.view}},{key:"type",get:function(){return this.view.getAttribute("data-type")},set:function(e){this.view.setAttribute("data-type",null!=e?e:"")}},{key:"name",get:function(){return this.view.getAttribute("data-name")},set:function(e){this.view.setAttribute("data-name",null!=e?e:"")}},{key:"title",get:function(){return this.view.title},set:function(e){this.view.title=e}}],[{key:"isEnabled",value:function(){return"enabled"===jQuery(document.documentElement).attr("data-debug-view")}},{key:"enable",value:function(){jQuery(document.documentElement).attr("data-debug-view","enabled"),jQuery.event.trigger(":debugviewupdate")}},{key:"disable",value:function(){jQuery(document.documentElement).removeAttr("data-debug-view"),jQuery.event.trigger(":debugviewupdate")}},{key:"toggle",value:function(){"enabled"===jQuery(document.documentElement).attr("data-debug-view")?e.disable():e.enable()}}]),e}()}(),PRNGWrapper=function(){return function(){function e(t,r){_classCallCheck(this,e),Object.defineProperties(this,new Math.seedrandom(t,r,function(e,t){return{_prng:{value:e},seed:{writable:!0,value:t},pull:{writable:!0,value:0},random:{value:function(){return++this.pull,this._prng()}}}}))}return _createClass(e,null,[{key:"marshal",value:function(e){if(!e||!e.hasOwnProperty("seed")||!e.hasOwnProperty("pull"))throw new Error("PRNG is missing required data");return{seed:e.seed,pull:e.pull}}},{key:"unmarshal",value:function(t){if(!t||!t.hasOwnProperty("seed")||!t.hasOwnProperty("pull"))throw new Error("PRNG object is missing required data");for(var r=new e(t.seed,!1),n=t.pull;n>0;--n)r.random();return r}}]),e}()}(),StyleWrapper=function(){var e=new RegExp(Patterns.cssImage,"g"),t=new RegExp(Patterns.cssImage);return function(){function r(e){if(_classCallCheck(this,r),null==e)throw new TypeError("StyleWrapper style parameter must be an HTMLStyleElement object");Object.defineProperties(this,{style:{value:e}})}return _createClass(r,[{key:"isEmpty",value:function(){return 0===this.style.cssRules.length}},{key:"set",value:function(e){this.clear(),this.add(e)}},{key:"add",value:function(r){var n=r;t.test(n)&&(e.lastIndex=0,n=n.replace(e,function(e){var t=Wikifier.helpers.parseSquareBracketedMarkup({source:e,matchStart:0});if(t.hasOwnProperty("error")||t.pos<e.length)return e;var r=t.source;if("data:"!==r.slice(0,5)&&Story.has(r)){var n=Story.get(r);n.tags.includes("Twine.image")&&(r=n.text.trim())}return'url("'+r.replace(/"/g,"%22")+'")'})),this.style.styleSheet?this.style.styleSheet.cssText+=n:this.style.appendChild(document.createTextNode(n))}},{key:"clear",value:function(){this.style.styleSheet?this.style.styleSheet.cssText="":jQuery(this.style).empty()}}]),r}()}(),Diff=function(){function e(t,n){for(var a=Object.prototype.toString,i=t instanceof Array,o=[].concat(Object.keys(t),Object.keys(n)).sort().filter(function(e,t,r){return 0===t||r[t-1]!==e}),s={},u=void 0,l=function(e){return e===u},c=0,d=o.length;c<d;++c){var f=o[c],p=t[f],h=n[f];if(t.hasOwnProperty(f))if(n.hasOwnProperty(f)){if(p===h)continue;if((void 0===p?"undefined":_typeof(p))===(void 0===h?"undefined":_typeof(h)))if("function"==typeof p)p.toString()!==h.toString()&&(s[f]=[r.Copy,h]);else if("object"!==(void 0===p?"undefined":_typeof(p))||null===p)s[f]=[r.Copy,h];else{var g=a.call(p),m=a.call(h);if(g===m)if(p instanceof Date)Number(p)!==Number(h)&&(s[f]=[r.Copy,clone(h)]);else if(p instanceof Map)s[f]=[r.Copy,clone(h)];else if(p instanceof RegExp)p.toString()!==h.toString()&&(s[f]=[r.Copy,clone(h)]);else if(p instanceof Set)s[f]=[r.Copy,clone(h)];else if("[object Object]"!==g)s[f]=[r.Copy,clone(h)];else{var v=e(p,h);null!==v&&(s[f]=v)}else s[f]=[r.Copy,clone(h)]}else s[f]=[r.Copy,"object"!==(void 0===h?"undefined":_typeof(h))||null===h?h:clone(h)]}else if(i&&Util.isNumeric(f)){var y=Number(f);if(!u){u="";do{u+="~"}while(o.some(l));s[u]=[r.SpliceArray,y,y]}y<s[u][1]&&(s[u][1]=y),y>s[u][2]&&(s[u][2]=y)}else s[f]=r.Delete;else s[f]=[r.Copy,"object"!==(void 0===h?"undefined":_typeof(h))||null===h?h:clone(h)]}return Object.keys(s).length>0?s:null}function t(e,n){for(var a=Object.keys(n||{}),i=clone(e),o=0,s=a.length;o<s;++o){var u=a[o],l=n[u];if(l===r.Delete)delete i[u];else if(l instanceof Array)switch(l[0]){case r.SpliceArray:i.splice(l[1],l[2]-l[1]+1);break;case r.Copy:i[u]=clone(l[1]);break;case r.CopyDate:i[u]=new Date(l[1])}else i[u]=t(i[u],l)}return i}var r=Util.toEnum({Delete:0,SpliceArray:1,Copy:2,CopyDate:3});return Object.freeze(Object.defineProperties({},{Op:{value:r},diff:{value:e},patch:{value:t}}))}(),L10n=function(){function e(){r()}function t(e,t){if(!e)return"";var r=function(e){var t=void 0;return e.some(function(e){return!!l10nStrings.hasOwnProperty(e)&&(t=e,!0)}),t}(Array.isArray(e)?e:[e]);if(!r)return"";for(var i=l10nStrings[r],o=0;a.test(i);){if(++o>50)throw new Error("L10n.get exceeded maximum replacement iterations, probable infinite loop");n.lastIndex=0,i=i.replace(n,function(e){var r=e.slice(1,-1);return t&&t.hasOwnProperty(r)?t[r]:l10nStrings.hasOwnProperty(r)?l10nStrings[r]:void 0})}return i}function r(){strings&&Object.keys(strings).length>0&&Object.keys(l10nStrings).forEach(function(e){try{var t=void 0;switch(e){case"identity":t=strings.identity;break;case"aborting":t=strings.aborting;break;case"cancel":t=strings.cancel;break;case"close":t=strings.close;break;case"ok":t=strings.ok;break;case"errorTitle":t=strings.errors.title;break;case"errorNonexistentPassage":t=strings.errors.nonexistentPassage;break;case"errorSaveMissingData":t=strings.errors.saveMissingData;break;case"errorSaveIdMismatch":t=strings.errors.saveIdMismatch;break;case"warningDegraded":t=strings.warnings.degraded;break;case"debugViewTitle":t=strings.debugView.title;break;case"debugViewToggle":t=strings.debugView.toggle;break;case"uiBarToggle":t=strings.uiBar.toggle;break;case"uiBarBackward":t=strings.uiBar.backward;break;case"uiBarForward":t=strings.uiBar.forward;break;case"uiBarJumpto":t=strings.uiBar.jumpto;break;case"jumptoTitle":t=strings.jumpto.title;break;case"jumptoTurn":t=strings.jumpto.turn;break;case"jumptoUnavailable":t=strings.jumpto.unavailable;break;case"savesTitle":t=strings.saves.title;break;case"savesDisallowed":t=strings.saves.disallowed;break;case"savesIncapable":t=strings.saves.incapable;break;case"savesLabelAuto":t=strings.saves.labelAuto;break;case"savesLabelDelete":t=strings.saves.labelDelete;break;case"savesLabelExport":t=strings.saves.labelExport;break;case"savesLabelImport":t=strings.saves.labelImport;break;case"savesLabelLoad":t=strings.saves.labelLoad;break;case"savesLabelClear":t=strings.saves.labelClear;break;case"savesLabelSave":t=strings.saves.labelSave;break;case"savesLabelSlot":t=strings.saves.labelSlot;break;case"savesUnavailable":t=strings.saves.unavailable;break;case"savesUnknownDate":t=strings.saves.unknownDate;break;case"settingsTitle":t=strings.settings.title;break;case"settingsOff":t=strings.settings.off;break;case"settingsOn":t=strings.settings.on;break;case"settingsReset":t=strings.settings.reset;break;case"restartTitle":t=strings.restart.title;break;case"restartPrompt":t=strings.restart.prompt;break;case"shareTitle":t=strings.share.title;break;case"autoloadTitle":t=strings.autoload.title;break;case"autoloadCancel":t=strings.autoload.cancel;break;case"autoloadOk":t=strings.autoload.ok;break;case"autoloadPrompt":t=strings.autoload.prompt;break;case"macroBackText":t=strings.macros.back.text;break;case"macroReturnText":t=strings.macros.return.text}t&&(l10nStrings[e]=t.replace(/%\w+%/g,function(e){return"{"+e.slice(1,-1)+"}"}))}catch(e){}})}var n=/\{\w+\}/g,a=new RegExp(n.source);return Object.freeze(Object.defineProperties({},{init:{value:e},get:{value:t}}))}(),strings={errors:{},warnings:{},debugView:{},uiBar:{},jumpto:{},saves:{},settings:{},restart:{},share:{},autoload:{},macros:{back:{},return:{}}},l10nStrings={identity:"game",aborting:"Aborting",cancel:"Cancel",close:"Close",ok:"OK",errorTitle:"Error",errorToggle:"Toggle the error view",errorNonexistentPassage:'the passage "{passage}" does not exist',errorSaveMissingData:"save is missing required data. Either the loaded file is not a save or the save has become corrupted",errorSaveIdMismatch:"save is from the wrong {identity}",_warningIntroLacking:"Your browser either lacks or has disabled",_warningOutroDegraded:", so this {identity} is running in a degraded mode. You may be able to continue, however, some parts may not work properly.",warningNoWebStorage:"{_warningIntroLacking} the Web Storage API{_warningOutroDegraded}",warningDegraded:"{_warningIntroLacking} some of the capabilities required by this {identity}{_warningOutroDegraded}",debugBarToggle:"Toggle the debug bar",debugBarNoWatches:"— no watches set —",debugBarAddWatch:"Add watch",debugBarDeleteWatch:"Delete watch",debugBarWatchAll:"Watch all",debugBarWatchNone:"Delete all",debugBarLabelAdd:"Add",debugBarLabelWatch:"Watch",debugBarLabelTurn:"Turn",debugBarLabelViews:"Views",debugBarViewsToggle:"Toggle the debug views",debugBarWatchToggle:"Toggle the watch panel",uiBarToggle:"Toggle the UI bar",uiBarBackward:"Go backward within the {identity} history",uiBarForward:"Go forward within the {identity} history",uiBarJumpto:"Jump to a specific point within the {identity} history",jumptoTitle:"Jump To",jumptoTurn:"Turn",jumptoUnavailable:"No jump points currently available…",savesTitle:"Saves",savesDisallowed:"Saving has been disallowed on this passage.",savesIncapable:"{_warningIntroLacking} the capabilities required to support saves, so saves have been disabled for this session.",savesLabelAuto:"Autosave",savesLabelDelete:"Delete",savesLabelExport:"Save to Disk…",savesLabelImport:"Load from Disk…",savesLabelLoad:"Load",savesLabelClear:"Delete All",savesLabelSave:"Save",savesLabelSlot:"Slot",savesUnavailable:"No save slots found…",savesUnknownDate:"unknown",settingsTitle:"Settings",settingsOff:"Off",settingsOn:"On",settingsReset:"Reset to Defaults",restartTitle:"Restart",restartPrompt:"Are you sure that you want to restart? Unsaved progress will be lost.",shareTitle:"Share",autoloadTitle:"Autoload",autoloadCancel:"Go to start",autoloadOk:"Load autosave",autoloadPrompt:"An autosave exists. Load it now or go to the start?",macroBackText:"Back",macroReturnText:"Return"},Config=function(){var e=!1,t=!1,r=!1,n=0,a=!0,i=!0,o=!0,s=100,u=!0,l=1e3,c=void 0,d=void 0,f=!1,p=!1,h=void 0,g=void 0,m=void 0,v=void 0,y=void 0,b="untitled-story",w=void 0,k=void 0,S=void 0,E=8,j=void 0,x=800,O=!0,T="Config.history.mode has been deprecated and is no longer used by SugarCube, please remove it from your code",C="Config.history.tracking has been deprecated, use Config.history.maxStates instead";return Object.freeze({get debug(){return e},set debug(t){e=Boolean(t)},get addVisitedLinkClass(){return t},set addVisitedLinkClass(e){t=Boolean(e)},get cleanupWikifierOutput(){return r},set cleanupWikifierOutput(e){r=Boolean(e)},get loadDelay(){return n},set loadDelay(e){if(!Number.isSafeInteger(e)||e<0)throw new RangeError("Config.loadDelay must be a non-negative integer");n=e},audio:Object.freeze({get pauseOnFadeToZero(){return a},set pauseOnFadeToZero(e){a=Boolean(e)},get preloadMetadata(){return i},set preloadMetadata(e){i=Boolean(e)}}),history:Object.freeze({get controls(){return o},set controls(e){var t=Boolean(e);if(1===s&&t)throw new Error("Config.history.controls must be false when Config.history.maxStates is 1");o=t},get maxStates(){return s},set maxStates(e){if(!Number.isSafeInteger(e)||e<0)throw new RangeError("Config.history.maxStates must be a non-negative integer");s=e,o&&1===e&&(o=!1)},get mode(){throw new Error(T)},set mode(e){throw new Error(T)},get tracking(){throw new Error(C)},set tracking(e){throw new Error(C)}}),macros:Object.freeze({get ifAssignmentError(){return u},set ifAssignmentError(e){u=Boolean(e)},get maxLoopIterations(){return l},set maxLoopIterations(e){if(!Number.isSafeInteger(e)||e<0)throw new RangeError("Config.macros.maxLoopIterations must be a non-negative integer");l=e}}),navigation:Object.freeze({get override(){return c},set override(e){if(!(null==e||e instanceof Function))throw new TypeError("Config.navigation.override must be a function or null/undefined (received: "+Util.getType(e)+")");c=e}}),passages:Object.freeze({get descriptions(){return d},set descriptions(e){if(null!=e){var t=Util.getType(e);if("boolean"!==t&&"Object"!==t&&"function"!==t)throw new TypeError("Config.passages.descriptions must be a boolean, object, function, or null/undefined (received: "+t+")")}d=e},get displayTitles(){return f},set displayTitles(e){f=Boolean(e)},get nobr(){return p},set nobr(e){p=Boolean(e)},get onProcess(){return g},set onProcess(e){if(null!=e){var t=Util.getType(e);if("function"!==t)throw new TypeError("Config.passages.onProcess must be a function or null/undefined (received: "+t+")")}g=e},get start(){return h},set start(e){if(null!=e){var t=Util.getType(e);if("string"!==t)throw new TypeError("Config.passages.start must be a string or null/undefined (received: "+t+")")}h=e},get transitionOut(){return m},set transitionOut(e){if(null!=e){var t=Util.getType(e);if("string"!==t&&("number"!==t||!Number.isSafeInteger(e)||e<0))throw new TypeError("Config.passages.transitionOut must be a string, non-negative integer, or null/undefined (received: "+t+")")}m=e}}),saves:Object.freeze({get autoload(){return v},
set autoload(e){if(null!=e){var t=Util.getType(e);if("boolean"!==t&&"string"!==t&&"function"!==t)throw new TypeError("Config.saves.autoload must be a boolean, string, function, or null/undefined (received: "+t+")")}v=e},get autosave(){return y},set autosave(e){if(null!=e){var t=Util.getType(e);if("string"===t)return void(y=[e]);if("boolean"!==t&&("Array"!==t||!e.every(function(e){return"string"==typeof e}))&&"function"!==t)throw new TypeError("Config.saves.autosave must be a boolean, Array of strings, function, or null/undefined (received: "+t+("Array"===t?" of mixed":"")+")")}y=e},get id(){return b},set id(e){if("string"!=typeof e||""===e)throw new TypeError("Config.saves.id must be a non-empty string (received: "+Util.getType(e)+")");b=e},get isAllowed(){return w},set isAllowed(e){if(!(null==e||e instanceof Function))throw new TypeError("Config.saves.isAllowed must be a function or null/undefined (received: "+Util.getType(e)+")");w=e},get onLoad(){return k},set onLoad(e){if(!(null==e||e instanceof Function))throw new TypeError("Config.saves.onLoad must be a function or null/undefined (received: "+Util.getType(e)+")");k=e},get onSave(){return S},set onSave(e){if(!(null==e||e instanceof Function))throw new TypeError("Config.saves.onSave must be a function or null/undefined (received: "+Util.getType(e)+")");S=e},get slots(){return E},set slots(e){if(!Number.isSafeInteger(e)||e<0)throw new TypeError("Config.saves.slots must be a non-negative integer (received: "+Util.getType(e)+")");E=e},get version(){return j},set version(e){j=e}}),ui:Object.freeze({get stowBarInitially(){return x},set stowBarInitially(e){var t=Util.getType(e);if("boolean"!==t&&("number"!==t||!Number.isSafeInteger(e)||e<0))throw new TypeError("Config.ui.stowBarInitially must be a boolean or non-negative integer (received: "+t+")");x=e},get updateStoryElements(){return O},set updateStoryElements(e){O=Boolean(e)}})})}(),SimpleAudio=function(){function e(){if(arguments.length<2){var e=[];throw arguments.length<1&&e.push("track ID"),arguments.length<2&&e.push("sources"),new Error("no "+e.join(" or ")+" specified")}var t=String(arguments[0]).trim(),r='track ID "'+t+'"';if(_.test(t))throw new Error("invalid "+r+": track IDs must not contain colons or whitespace");var n=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1),a=void 0;try{a=T(n)}catch(e){throw new Error(r+": error during track initialization: "+e.message)}if(Config.debug&&!a.hasSource())throw new Error(r+": no supported audio sources found");N.has(t)&&N.get(t)._destroy(),N.set(t,a)}function t(e){return N.has(e)&&N.get(e)._destroy(),N.delete(e)}function r(){N.forEach(function(e){return e._destroy()}),N.clear()}function n(e){return N.has(e)}function a(e){return N.get(e)||null}function i(){if(arguments.length<2){var e=[];throw arguments.length<1&&e.push("group ID"),arguments.length<2&&e.push("track IDs"),new Error("no "+e.join(" or ")+" specified")}var t=String(arguments[0]).trim(),r='group ID "'+t+'"';if(":"!==t[0]||_.test(t.slice(1)))throw new Error("invalid "+r+": group IDs must start with a colon and must not contain colons or whitespace");if(A.includes(t))throw new Error("cannot clobber special "+r);var n=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1),a=void 0;try{a=new Set(n.map(function(e){if(!N.has(e))throw new Error('track "'+e+'" does not exist');return e}))}catch(e){throw new Error(r+": error during group initialization: "+e.message)}I.set(t,Object.freeze(Array.from(a)))}function o(e){return I.delete(e)}function s(){I.clear()}function u(e){return I.has(e)}function l(e){return I.get(e)||null}function c(){if(arguments.length<2){var e=[];throw arguments.length<1&&e.push("list ID"),arguments.length<2&&e.push("track IDs"),new Error("no "+e.join(" or ")+" specified")}var t=String(arguments[0]).trim(),r='list ID "'+t+'"';if(_.test(t))return this.error("invalid "+r+": list IDs must not contain colons or whitespace");var n=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1),a=void 0;try{a=new V(n.map(function(e){if(null===e)throw new Error("track descriptor must be a string or object (type: null)");switch(void 0===e?"undefined":_typeof(e)){case"string":e={id:e};break;case"object":if(!e.hasOwnProperty("id")&&!e.hasOwnProperty("sources"))throw new Error('track descriptor must contain one of either an "id" or a "sources" property');if(e.hasOwnProperty("id")&&e.hasOwnProperty("sources"))throw new Error('track descriptor must contain either an "id" or a "sources" property, not both');break;default:throw new Error("track descriptor must be a string or object (type: "+(void 0===e?"undefined":_typeof(e))+")")}var t=void 0,r=void 0,n=void 0;if(e.hasOwnProperty("id")){if("string"!=typeof e.id)throw new Error('"id" property must be a string');if(!N.has(e.id))throw new Error('track "'+e.id+'" does not exist');r=N.get(e.id)}else if(e.hasOwnProperty("sources")){if(!Array.isArray(e.sources)||0===e.sources.length)throw new Error('"sources" property must be a non-empty array');if(e.hasOwnProperty("own"))throw new Error('"own" property is not allowed with the "sources" property');try{r=T(e.sources),t=!0}catch(e){throw new Error("error during track initialization: "+e.message)}if(Config.debug&&!r.hasSource())throw new Error("no supported audio sources found")}if(e.hasOwnProperty("own")){if("boolean"!=typeof e.own)throw new Error('"own" property must be a boolean');t=e.own,t&&(r=r.clone())}if(e.hasOwnProperty("volume")){if("number"!=typeof e.volume||Number.isNaN(e.volume)||!Number.isFinite(e.volume)||e.volume<0)throw new Error('"volume" property must be a non-negative finite number');n=e.volume}return{own:null!=t&&t,track:r,volume:null!=n?n:r.volume()}}))}catch(e){throw new Error(r+": error during playlist initialization: "+e.message)}D.has(t)&&D.get(t)._destroy(),D.set(t,a)}function d(e){return D.has(e)&&D.get(e)._destroy(),D.delete(e)}function f(){D.forEach(function(e){return e._destroy()}),D.clear()}function p(e){return D.has(e)}function h(e){return D.get(e)||null}function g(){if(0===arguments.length)throw new Error("no track selector specified");var e=String(arguments[0]).trim(),t=new Set;try{var r=function e(t){var r=t.id,a=void 0;switch(r){case":all":a=n;break;case":looped":a=n.filter(function(e){return N.get(e).loop()});break;case":muted":a=n.filter(function(e){return N.get(e).mute()});break;case":paused":a=n.filter(function(e){return N.get(e).isPaused()});break;case":playing":a=n.filter(function(e){return N.get(e).isPlaying()});break;default:a=":"===r[0]?I.get(r):[r]}if(t.hasOwnProperty("not")){var i=t.not.map(function(t){return e(t)}).flat(1/0);a=a.filter(function(e){return!i.includes(e)})}return a},n=Array.from(N.keys());z(e).forEach(function(e){return r(e).forEach(function(e){if(!N.has(e))throw new Error('track "'+e+'" does not exist');t.add(e)})})}catch(e){throw new Error("error during runner initialization: "+e.message)}return new U(t)}function m(){O("load")}function v(){O("loadwithscreen")}function y(e){if(null==e)return R;R=!!e,O("mute",R)}function b(e){if(!Visibility.isEnabled())return!1;if(null==e)return F;F=!!e;var t=".SimpleAudio_masterMuteOnHidden";if(F){var r=""+Visibility.changeEvent+t;jQuery(document).off(t).on(r,function(){return y(Visibility.isHidden())}),Visibility.isHidden()&&y(!0)}else jQuery(document).off(t)}function w(e){if(null==e)return M;if("number"!=typeof e||Number.isNaN(e)||!Number.isFinite(e))throw new Error("rate must be a finite number");M=Math.clamp(e,.2,5),O("rate",M)}function k(){O("stop")}function S(){O("unload")}function E(e){if(null==e)return Q;if("number"!=typeof e||Number.isNaN(e)||!Number.isFinite(e))throw new Error("volume must be a finite number");Q=Math.clamp(e,0,1),O("volume",Q)}function j(e,t){if("function"!=typeof t)throw new Error("callback parameter must be a function");L.set(e,t)}function x(e){L.delete(e)}function O(e,t){L.forEach(function(r){return r(e,t)})}function T(e){return new B(e.map(function(e){if("data:"!==e.slice(0,5)&&Story.has(e)){var t=Story.get(e);if(t.tags.includes("Twine.audio"))return t.text.trim()}var r=P.exec(e);return null===r?e:{format:r[1],src:r[2]}}))}var C=Object.freeze(["click","contextmenu","dblclick","keyup","mouseup","pointerup","touchend"]),A=Object.freeze([":not",":all",":looped",":muted",":paused",":playing"]),P=/^([\w-]+)\s*\|\s*(\S.*)$/,_=/[:\s]/,N=new Map,I=new Map,D=new Map,L=new Map,M=1,Q=1,R=!1,F=!1,W=function(){function e(){if(null!==t)return t;if(t=!1,Has.audio)try{var e=document.createElement("audio");e.muted=!0;var r=e.play();r.catch(function(){}),t=r instanceof Promise}catch(e){}return t}var t=null;return e}(),B=function(){function e(t){if(_classCallCheck(this,e),t instanceof Array)this._create(t);else{if(!(t instanceof e))throw new Error("sources parameter must be either an array, of URIs or source objects, or an AudioTrack instance");this._copy(t)}}return _createClass(e,[{key:"_create",value:function(t){var r=/^data:\s*audio\/([^;,]+)\s*[;,]/i,n=/\.([^.\/\\]+)$/,a=e.getType,i=[],o=document.createElement("audio");o.preload="none",t.forEach(function(e){var t=null;switch(void 0===e?"undefined":_typeof(e)){case"string":var s=void 0;if("data:"===e.slice(0,5)){if(null===(s=r.exec(e)))throw new Error("source data URI missing media type")}else if(null===(s=n.exec(Util.parseUrl(e).pathname)))throw new Error("source URL missing file extension");var u=a(s[1]);null!==u&&(t={src:e,type:u});break;case"object":if(null===e)throw new Error("source object cannot be null");if(!e.hasOwnProperty("src"))throw new Error('source object missing required "src" property');if(!e.hasOwnProperty("format"))throw new Error('source object missing required "format" property');var l=a(e.format);null!==l&&(t={src:e.src,type:l});break;default:throw new Error("invalid source value (type: "+(void 0===e?"undefined":_typeof(e))+")")}if(null!==t){Browser.isOpera&&(t.type=t.type.replace(/;.*$/,""));var c=document.createElement("source");c.src=t.src,c.type=t.type,o.appendChild(c),i.push(t)}}),o.hasChildNodes()&&Config.audio.preloadMetadata&&(o.preload="metadata"),this._finalize(o,i,clone(t))}},{key:"_copy",value:function(e){this._finalize(e.audio.cloneNode(!0),clone(e.sources),clone(e.originals))}},{key:"_finalize",value:function(e,t,r){var n=this;Object.defineProperties(this,{audio:{configurable:!0,value:e},sources:{value:Object.freeze(t)},originals:{value:Object.freeze(r)},_error:{writable:!0,value:!1},_faderId:{writable:!0,value:null},_mute:{writable:!0,value:!1},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1}}),jQuery(this.audio).on("loadstart.AudioTrack",function(){return n._error=!1}).on("error.AudioTrack",function(){return n._error=!0}).find("source:last-of-type").on("error.AudioTrack",function(){return n._trigger("error")}),j(this,function(e){if(!n.audio)return void x(n);switch(e){case"loadwithscreen":if(n.hasSource()){var t=LoadScreen.lock();n.one("canplaythrough.AudioTrack_loadwithscreen error.AudioTrack_loadwithscreen",function(){jQuery(this).off(".AudioTrack_loadwithscreen"),LoadScreen.unlock(t)}).load()}break;case"load":n.load();break;case"mute":n._updateAudioMute();break;case"rate":n._updateAudioRate();break;case"stop":n.stop();break;case"volume":n._updateAudioVolume();break;case"unload":n.unload()}}),this._updateAudioMute(),this._updateAudioRate(),this._updateAudioVolume()}},{key:"_trigger",value:function(e){jQuery(this.audio).triggerHandler(e)}},{key:"_destroy",value:function(){x(this),this.audio&&(jQuery(this.audio).off(),this.unload(),this._error=!0,delete this.audio)}},{key:"clone",value:function(){return new e(this)}},{key:"load",value:function(){var e=this;if(this.fadeStop(),this.audio.pause(),!this.audio.hasChildNodes()){if(0===this.sources.length)return;this.sources.forEach(function(t){var r=document.createElement("source");r.src=t.src,r.type=t.type,e.audio.appendChild(r)})}"auto"!==this.audio.preload&&(this.audio.preload="auto"),this.isLoading()||this.audio.load()}},{key:"unload",value:function(){this.fadeStop(),this.stop();var e=this.audio;for(e.preload="none";e.hasChildNodes();)e.removeChild(e.firstChild);e.load()}},{key:"play",value:function(){var e=this;if(!this.hasSource())return Promise.reject(new Error("none of the candidate sources were acceptable"));if(this.isUnloaded())return Promise.reject(new Error("no sources are loaded"));if(this.isFailed())return Promise.reject(new Error("failed to load any of the sources"));"auto"!==this.audio.preload&&(this.audio.preload="auto");var t=".AudioTrack_play";return W()?this.audio.play():new Promise(function(r,n){e.isPlaying()?r():(jQuery(e.audio).off(t).one("error"+t+" playing"+t+" timeupdate"+t,function(a){jQuery(e).off(t),"error"===a.type?n(new Error("unknown audio play error")):r()}),e.audio.play())})}},{key:"playWhenAllowed",value:function(){var e=this;this.play().catch(function(){var t=C.map(function(e){return e+".AudioTrack_playWhenAllowed"}).join(" ");jQuery(document).one(t,function(){jQuery(document).off(".AudioTrack_playWhenAllowed"),e.audio.play()})})}},{key:"pause",value:function(){this.audio.pause()}},{key:"stop",value:function(){this.audio.pause(),this.time(0),this._trigger(":stopped")}},{key:"fade",value:function(e,t,r){var n=this;if("number"!=typeof e)throw new TypeError("duration parameter must be a number");if("number"!=typeof t)throw new TypeError("toVolume parameter must be a number");if(null!=r&&"number"!=typeof r)throw new TypeError("fromVolume parameter must be a number");if(!this.hasSource())return Promise.reject(new Error("none of the candidate sources were acceptable"));if(this.isUnloaded())return Promise.reject(new Error("no sources are loaded"));if(this.isFailed())return Promise.reject(new Error("failed to load any of the sources"));this.fadeStop();var a=Math.clamp(null==r?this.volume():r,0,1),i=Math.clamp(t,0,1);return a!==i?(this.volume(a),jQuery(this.audio).off("timeupdate.AudioTrack_fade").one("timeupdate.AudioTrack_fade",function(){var t=void 0,r=void 0;a<i?(t=a,r=i):(t=i,r=a);var o=Math.max(e,1),s=(i-a)/(o/.025);n._trigger(":fading"),n._faderId=setInterval(function(){if(!n.isPlaying())return void n.fadeStop();n.volume(Math.clamp(n.volume()+s,t,r)),Config.audio.pauseOnFadeToZero&&0===n.volume()&&n.pause(),n.volume()===i&&(n.fadeStop(),n._trigger(":faded"))},25)}),this.play()):void 0}},{key:"fadeIn",value:function(e,t){return this.fade(e,1,t)}},{key:"fadeOut",value:function(e,t){return this.fade(e,0,t)}},{key:"fadeStop",value:function(){null!==this._faderId&&(clearInterval(this._faderId),this._faderId=null)}},{key:"loop",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return null==e?this.audio.loop:(this.audio.loop=!!e,this)})},{key:"mute",value:function(e){return null==e?this._mute:(this._mute=!!e,this._updateAudioMute(),this)}},{key:"_updateAudioMute",value:function(){this.audio.muted=this._mute||R}},{key:"rate",value:function(e){if(null==e)return this._rate;if("number"!=typeof e)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(e,.2,5),this._updateAudioRate(),this}},{key:"_updateAudioRate",value:function(){this.audio.playbackRate=Math.clamp(this._rate*M,.2,5)}},{key:"time",value:function(e){var t=this;if(null==e)return this.audio.currentTime;if("number"!=typeof e)throw new TypeError("time parameter must be a number");return this.hasMetadata()?this.audio.currentTime=e:jQuery(this.audio).off("loadedmetadata.AudioTrack_time").one("loadedmetadata.AudioTrack_time",function(){return t.audio.currentTime=e}),this}},{key:"volume",value:function(e){if(null==e)return this._volume;if("number"!=typeof e)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(e,0,1),this._updateAudioVolume(),this}},{key:"_updateAudioVolume",value:function(){this.audio.volume=Math.clamp(this._volume*Q,0,1)}},{key:"duration",value:function(){return this.audio.duration}},{key:"remaining",value:function(){return this.audio.duration-this.audio.currentTime}},{key:"isFailed",value:function(){return this._error}},{key:"isLoading",value:function(){return this.audio.networkState===HTMLMediaElement.NETWORK_LOADING}},{key:"isUnloaded",value:function(){return!this.audio.hasChildNodes()}},{key:"isUnavailable",value:function(){return!this.hasSource()||this.isUnloaded()||this.isFailed()}},{key:"isPlaying",value:function(){return!this.audio.paused&&this.hasSomeData()}},{key:"isPaused",value:function(){return this.audio.paused&&(this.audio.duration===1/0||this.audio.currentTime>0)&&!this.audio.ended}},{key:"isStopped",value:function(){return this.audio.paused&&0===this.audio.currentTime}},{key:"isEnded",value:function(){return this.audio.ended}},{key:"isFading",value:function(){return null!==this._faderId}},{key:"isSeeking",value:function(){return this.audio.seeking}},{key:"hasSource",value:function(){return this.sources.length>0}},{key:"hasNoData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_NOTHING}},{key:"hasMetadata",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_METADATA}},{key:"hasSomeData",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA}},{key:"hasData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_ENOUGH_DATA}},{key:"on",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return jQuery.fn.on.apply(jQuery(this.audio),t),this}},{key:"one",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return jQuery.fn.one.apply(jQuery(this.audio),t),this}},{key:"off",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return jQuery.fn.off.apply(jQuery(this.audio),t),this}}],[{key:"_verifyType",value:function(t){if(!t||!Has.audio)return null;var r=e._types;if(!r.hasOwnProperty(t)){var n=document.createElement("audio");r[t]=""!==n.canPlayType(t).replace(/^no$/i,"")}return r[t]?t:null}},{key:"getType",value:function(t){if(!t||!Has.audio)return null;var r=e.formats,n=t.toLowerCase(),a=r.hasOwnProperty(n)?r[n]:"audio/"+n;return e._verifyType(a)}},{key:"canPlayFormat",value:function(t){return null!==e.getType(t)}},{key:"canPlayType",value:function(t){return null!==e._verifyType(t)}}]),e}();Object.defineProperties(B,{formats:{value:{aac:"audio/aac",caf:"audio/x-caf","x-caf":"audio/x-caf",mp3:'audio/mpeg; codecs="mp3"',mpeg:'audio/mpeg; codecs="mp3"',m4a:"audio/mp4",mp4:"audio/mp4","x-m4a":"audio/mp4","x-mp4":"audio/mp4",oga:"audio/ogg",ogg:"audio/ogg",opus:'audio/ogg; codecs="opus"',wav:"audio/wav",wave:"audio/wav",weba:"audio/webm",webm:"audio/webm"}},_types:{value:{}}});var V=function(){function e(t){if(_classCallCheck(this,e),t instanceof Array)this._create(t);else{if(!(t instanceof e))throw new Error("tracks parameter must be either an array, of track objects, or an AudioTrack instance");this._copy(t)}}return _createClass(e,[{key:"_create",value:function(e){var t=this;this._finalize(e.map(function(e){if("object"!==(void 0===e?"undefined":_typeof(e)))throw new Error("tracks parameter array members must be objects");var r=void 0,n=void 0,a=void 0,i=void 0;if(e instanceof B)r=!0,n=e.rate(),a=e.clone(),i=e.volume();else{if(!e.hasOwnProperty("track"))throw new Error('track object missing required "track" property');if(!(e.track instanceof B))throw new Error('track object\'s "track" property must be an AudioTrack object');r=e.hasOwnProperty("own")&&e.own,n=e.hasOwnProperty("rate")?e.rate:e.track.rate(),a=e.track,i=e.hasOwnProperty("volume")?e.volume:e.track.volume()}return a.stop(),a.loop(!1),a.mute(!1),a.rate(n),a.volume(i),a.on("ended.AudioList",function(){return t._onEnd()}),{own:r,track:a,volume:i,rate:n}}))}},{key:"_copy",value:function(e){this._finalize(clone(e.tracks))}},{key:"_finalize",value:function(e){Object.defineProperties(this,{tracks:{configurable:!0,value:Object.freeze(e)},queue:{configurable:!0,value:[]},current:{writable:!0,value:null},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1},_mute:{writable:!0,value:!1},_loop:{writable:!0,value:!1},_shuffle:{writable:!0,value:!1}})}},{key:"_destroy",value:function(){this.stop(),this.tracks.filter(function(e){return e.own}).forEach(function(e){return e.track._destroy()}),delete this.tracks,delete this.queue}},{key:"load",value:function(){this.tracks.forEach(function(e){return e.track.load()})}},{key:"unload",value:function(){this.stop(),this.tracks.forEach(function(e){return e.track.unload()})}},{key:"play",value:function(){return null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||(0===this.queue.length&&this._fillQueue(),this._next())?this.current.track.play():Promise.reject(new Error("no tracks were available"))}},{key:"playWhenAllowed",value:function(){var e=this;this.play().catch(function(){var t=C.map(function(e){return e+".AudioList_playWhenAllowed"}).join(" ");jQuery(document).one(t,function(){jQuery(document).off(".AudioList_playWhenAllowed"),e.play()})})}},{key:"pause",value:function(){null!==this.current&&this.current.track.pause()}},{key:"stop",value:function(){null!==this.current&&(this.current.track.stop(),this.current=null),this._drainQueue()}},{key:"skip",value:function(){this._next()?this.current.track.play():this._loop&&this.play()}},{key:"fade",value:function(e,t,r){if("number"!=typeof e)throw new TypeError("duration parameter must be a number");if("number"!=typeof t)throw new TypeError("toVolume parameter must be a number");if(null!=r&&"number"!=typeof r)throw new TypeError("fromVolume parameter must be a number");if(0===this.queue.length&&this._fillQueue(),null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||this._next()){var n=Math.clamp(t,0,1)*this.current.volume,a=void 0;return null!=r&&(a=Math.clamp(r,0,1)*this.current.volume),this._volume=t,this.current.track.fade(e,n,a)}}},{key:"fadeIn",value:function(e,t){return this.fade(e,1,t)}},{key:"fadeOut",value:function(e,t){return this.fade(e,0,t)}},{key:"fadeStop",value:function(){null!==this.current&&this.current.track.fadeStop()}},{key:"loop",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return null==e?this._loop:(this._loop=!!e,this)})},{key:"mute",value:function(e){return null==e?this._mute:(this._mute=!!e,null!==this.current&&this.current.track.mute(this._mute),this)}},{key:"rate",value:function(e){if(null==e)return this._rate;if("number"!=typeof e)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(e,.2,5),null!==this.current&&this.current.track.rate(this._rate*this.current.rate),this}},{key:"shuffle",value:function(e){var t=this;if(null==e)return this._shuffle;if(this._shuffle=!!e,this.queue.length>0&&(this._fillQueue(),!this._shuffle&&null!==this.current&&this.queue.length>1)){var r=this.queue.findIndex(function(e){return e===t.current});if(-1!==r){var n;(n=this.queue).push.apply(n,_toConsumableArray(this.queue.splice(0,r+1)))}}return this}},{key:"volume",value:function(e){if(null==e)return this._volume;if("number"!=typeof e)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(e,0,1),null!==this.current&&this.current.track.volume(this._volume*this.current.volume),this}},{key:"duration",value:function(){if(arguments.length>0)throw new Error("duration takes no parameters");return this.tracks.map(function(e){return e.track.duration()}).reduce(function(e,t){return e+t},0)}},{key:"remaining",value:function(){if(arguments.length>0)throw new Error("remaining takes no parameters");var e=this.queue.map(function(e){return e.track.duration()}).reduce(function(e,t){return e+t},0);return null!==this.current&&(e+=this.current.track.remaining()),e}},{key:"time",value:function(){if(arguments.length>0)throw new Error("time takes no parameters");return this.duration()-this.remaining()}},{key:"isPlaying",value:function(){return null!==this.current&&this.current.track.isPlaying()}},{key:"isPaused",value:function(){return null===this.current||this.current.track.isPaused()}},{key:"isStopped",value:function(){return 0===this.queue.length&&null===this.current}},{key:"isEnded",value:function(){return 0===this.queue.length&&(null===this.current||this.current.track.isEnded())}},{key:"isFading",value:function(){return null!==this.current&&this.current.track.isFading()}},{key:"_next",value:function(){null!==this.current&&(this.current.track.stop(),this.current=null);for(var e=void 0;e=this.queue.shift();)if(!e.track.isUnavailable()){this.current=e;break}return null!==this.current&&(this.current.track.mute(this._mute),this.current.track.rate(this._rate*this.current.rate),this.current.track.volume(this._volume*this.current.volume),this.current.track.loop(!1),!0)}},{key:"_onEnd",value:function(){if(0===this.queue.length){if(!this._loop)return;this._fillQueue()}this._next()&&this.current.track.play()}},{key:"_drainQueue",value:function(){this.queue.splice(0)}},{key:"_fillQueue",value:function(){var e;this._drainQueue(),(e=this.queue).push.apply(e,_toConsumableArray(this.tracks.filter(function(e){return!e.track.isUnavailable()}))),0!==this.queue.length&&this._shuffle&&(this.queue.shuffle(),this.queue.length>1&&this.queue[0]===this.current&&this.queue.push(this.queue.shift()))}}]),e}(),U=function(){function e(t){if(_classCallCheck(this,e),!(t instanceof Set||t instanceof e))throw new TypeError("list parameter must be a Set or a AudioRunner instance");Object.defineProperties(this,{trackIds:{value:new Set(t instanceof e?t.trackIds:t)}})}return _createClass(e,[{key:"load",value:function(){e._run(this.trackIds,B.prototype.load)}},{key:"unload",value:function(){e._run(this.trackIds,B.prototype.unload)}},{key:"play",value:function(){e._run(this.trackIds,B.prototype.play)}},{key:"playWhenAllowed",value:function(){e._run(this.trackIds,B.prototype.playWhenAllowed)}},{key:"pause",value:function(){e._run(this.trackIds,B.prototype.pause)}},{key:"stop",value:function(){e._run(this.trackIds,B.prototype.stop)}},{key:"fade",value:function(t,r,n){if(null==t||null==r)throw new Error("fade requires parameters");e._run(this.trackIds,B.prototype.fade,t,r,n)}},{key:"fadeIn",value:function(t,r){if(null==t)throw new Error("fadeIn requires a parameter");e._run(this.trackIds,B.prototype.fadeIn,t,1,r)}},{key:"fadeOut",value:function(t,r){if(null==t)throw new Error("fadeOut requires a parameter");e._run(this.trackIds,B.prototype.fadeOut,t,0,r)}},{key:"fadeStop",value:function(){e._run(this.trackIds,B.prototype.fadeStop)}},{key:"loop",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){if(null==t)throw new Error("loop requires a parameter");return e._run(this.trackIds,B.prototype.loop,t),this})},{key:"mute",value:function(t){if(null==t)throw new Error("mute requires a parameter");return e._run(this.trackIds,B.prototype.mute,t),this}},{key:"rate",value:function(t){if(null==t)throw new Error("rate requires a parameter");return e._run(this.trackIds,B.prototype.rate,t),this}},{key:"time",value:function(t){if(null==t)throw new Error("time requires a parameter");return e._run(this.trackIds,B.prototype.time,t),this}},{key:"volume",value:function(t){if(null==t)throw new Error("volume requires a parameter");return e._run(this.trackIds,B.prototype.volume,t),this}},{key:"on",value:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e._run.apply(e,[this.trackIds,B.prototype.on].concat(r)),this}},{key:"one",value:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e._run.apply(e,[this.trackIds,B.prototype.one].concat(r)),this}},{key:"off",value:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e._run.apply(e,[this.trackIds,B.prototype.off].concat(r)),this}}],[{key:"_run",value:function(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];e.forEach(function(e){var r=N.get(e);r&&t.apply(r,n)})}}]),e}(),z=function(){function e(e,t){var a=void 0;if(r.lastIndex=t,null===(a=r.exec(e))||"("!==a[0])throw new Error('invalid ":not()" syntax: missing parentheticals');n.lastIndex=r.lastIndex;for(var i=r.lastIndex,o={str:"",nextMatch:-1},s=1;null!==(a=n.exec(e));)if("("===a[0]?++s:--s,s<1){o.nextMatch=n.lastIndex,o.str=e.slice(i,o.nextMatch-1);break}return o}function t(r){for(var n=[],a=/:?[^\s:()]+/g,i=void 0;null!==(i=a.exec(r));){var o=i[0];if(":not"===o){if(0===n.length)throw new Error('invalid negation: no group ID preceded ":not()"');var s=n[n.length-1];if(":"!==s.id[0])throw new Error('invalid negation of track "'+s.id+'": only groups may be negated with ":not()"');var u=e(r,a.lastIndex);if(-1===u.nextMatch)throw new Error('unknown error parsing ":not()"');a.lastIndex=u.nextMatch,s.not=t(u.str)}else n.push({id:o})}return n}var r=/\S/g,n=/[()]/g;return t}();return Object.freeze(Object.defineProperties({},{tracks:{value:Object.freeze(Object.defineProperties({},{add:{value:e},delete:{value:t},clear:{value:r},has:{value:n},get:{value:a}}))},groups:{value:Object.freeze(Object.defineProperties({},{add:{value:i},delete:{value:o},clear:{value:s},has:{value:u},get:{value:l}}))},lists:{value:Object.freeze(Object.defineProperties({},{add:{value:c},delete:{value:d},clear:{value:f},has:{value:p},get:{value:h}}))},select:{value:g},load:{value:m},loadWithScreen:{value:v},mute:{value:y},muteOnHidden:{value:b},rate:{value:w},stop:{value:k},unload:{value:S},volume:{value:E}}))}(),State=function(){function e(){session.delete("state"),H=[],J=c(),G=-1,Z=[],Y=null===Y?null:new PRNGWrapper(Y.seed,!1)}function t(){if(session.has("state")){var e=session.get("state");return null!=e&&(n(e),!0)}return!1}function r(e){var t={index:G};return e?t.history=clone(H):t.delta=A(H),Z.length>0&&(t.expired=[].concat(_toConsumableArray(Z))),null!==Y&&(t.seed=Y.seed),t}function n(e,t){if(null==e)throw new Error("state object is null or undefined");if(!e.hasOwnProperty(t?"history":"delta")||0===e[t?"history":"delta"].length)throw new Error("state object has no history or history is empty");if(!e.hasOwnProperty("index"))throw new Error("state object has no index");if(null!==Y&&!e.hasOwnProperty("seed"))throw new Error("state object has no seed, but PRNG is enabled");if(null===Y&&e.hasOwnProperty("seed"))throw new Error("state object has seed, but PRNG is disabled");H=t?clone(e.history):P(e.delta),G=e.index,Z=e.hasOwnProperty("expired")?[].concat(_toConsumableArray(e.expired)):[],e.hasOwnProperty("seed")&&(Y.seed=e.seed),g(G)}function a(){return r(!0)}function i(e){return n(e,!0)}function o(){return Z}function s(){return Z.length+v()}function u(){return Z.concat(H.slice(0,v()).map(function(e){return e.title}))}function l(e){return null!=e&&""!==e&&(!!Z.includes(e)||!!H.slice(0,v()).some(function(t){return t.title===e}))}function c(e,t){return{title:null==e?"":String(e),variables:null==t?{}:clone(t)}}function d(){return J}function f(){return G}function p(){return J.title}function h(){return J.variables}function g(e){if(null==e)throw new Error("moment activation attempted with null or undefined");switch(void 0===e?"undefined":_typeof(e)){case"object":J=clone(e);break;case"number":if(b())throw new Error("moment activation attempted with index on empty history");if(e<0||e>=y())throw new RangeError("moment activation attempted with out-of-bounds index; need [0, "+(y()-1)+"], got "+e);J=clone(H[e]);break;default:throw new TypeError('moment activation attempted with a "'+(void 0===e?"undefined":_typeof(e))+'"; must be an object or valid history stack index')}return null!==Y&&(Y=PRNGWrapper.unmarshal({seed:Y.seed,pull:J.pull})),session.set("state",r()),jQuery.event.trigger(":historyupdate"),J}function m(){return H}function v(){return G+1}function y(){return H.length}function b(){return 0===H.length}function w(){return H.length>0?H[G]:null}function k(){return H.length>0?H[H.length-1]:null}
function S(){return H.length>0?H[0]:null}function E(e){return b()||e<0||e>G?null:H[e]}function j(e){if(b())return null;var t=1+(e?Math.abs(e):0);return t>v()?null:H[v()-t]}function x(e){if(b()||null==e||""===e)return!1;for(var t=G;t>=0;--t)if(H[t].title===e)return!0;return!1}function O(e){if(v()<y()&&H.splice(v(),y()-v()),H.push(c(e,J.variables)),Y&&(k().pull=Y.pull),Config.history.maxStates>0)for(;y()>Config.history.maxStates;)Z.push(H.shift().title);return G=y()-1,g(G),v()}function T(e){return!(null==e||e<0||e>=y()||e===G)&&(G=e,g(G),!0)}function C(e){return null!=e&&0!==e&&T(G+e)}function A(e){if(!Array.isArray(e))return null;if(0===e.length)return[];for(var t=[clone(e[0])],r=1,n=e.length;r<n;++r)t.push(Diff.diff(e[r-1],e[r]));return t}function P(e){if(!Array.isArray(e))return null;if(0===e.length)return[];for(var t=[clone(e[0])],r=1,n=e.length;r<n;++r)t.push(Diff.patch(t[r-1],e[r]));return t}function _(e,t){if(!b()){var r=void 0;throw r="the Story JavaScript",new Error("State.initPRNG must be called during initialization, within either "+r+" or the StoryInit special passage")}Y=new PRNGWrapper(e,t),J.pull=Y.pull}function N(){return null!==Y}function I(){return Y?Y.pull:NaN}function D(){return Y?Y.seed:null}function L(){return Y?Y.random():Math.random()}function M(){K={},TempVariables=K}function Q(){return K}function R(e){var t=W(e);if(null!==t){for(var r=t.names,n=t.store,a=0,i=r.length;a<i;++a){if(void 0===n[r[a]])return;n=n[r[a]]}return n}}function F(e,t){var r=W(e);if(null===r)return!1;for(var n=r.names,a=n.pop(),i=r.store,o=0,s=n.length;o<s;++o){if(void 0===i[n[o]])return!1;i=i[n[o]]}return i[a]=t,!0}function W(e){for(var t={store:"$"===e[0]?State.variables:State.temporary,names:[]},r=e,n=void 0;null!==(n=X.exec(r));)r=r.slice(n[0].length),n[1]?t.names.push(n[1]):n[2]?t.names.push(n[2]):n[3]?t.names.push(n[3]):n[4]?t.names.push(n[4]):n[5]?t.names.push(R(n[5])):n[6]&&t.names.push(Number(n[6]));return""===r?t:null}function B(){storage.delete(ee)}function V(e){if("string"!=typeof e)throw new TypeError("State.metadata.delete key parameter must be a string (received: "+(void 0===e?"undefined":_typeof(e))+")");var t=storage.get(ee);t&&t.hasOwnProperty(e)&&(1===Object.keys(t).length?storage.delete(ee):(delete t[e],storage.set(ee,t)))}function U(e){if("string"!=typeof e)throw new TypeError("State.metadata.get key parameter must be a string (received: "+(void 0===e?"undefined":_typeof(e))+")");var t=storage.get(ee);return t&&t.hasOwnProperty(e)?t[e]:undefined}function z(e){if("string"!=typeof e)throw new TypeError("State.metadata.has key parameter must be a string (received: "+(void 0===e?"undefined":_typeof(e))+")");var t=storage.get(ee);return t&&t.hasOwnProperty(e)}function q(e,t){if("string"!=typeof e)throw new TypeError("State.metadata.set key parameter must be a string (received: "+(void 0===e?"undefined":_typeof(e))+")");if(void 0===t)V(e);else{var r=storage.get(ee)||{};r[e]=t,storage.set(ee,r)}}function $(){var e=storage.get(ee);return e?Object.keys(e).length:0}var H=[],J=c(),G=-1,Z=[],Y=null,K={},X=new RegExp("^(?:"+Patterns.variableSigil+"("+Patterns.identifier+")|\\.("+Patterns.identifier+")|\\[(?:(?:\"((?:\\\\.|[^\"\\\\])+)\")|(?:'((?:\\\\.|[^'\\\\])+)')|("+Patterns.variableSigil+Patterns.identifierFirstChar+".*)|(\\d+))\\])"),ee="metadata";return Object.freeze(Object.defineProperties({},{reset:{value:e},restore:{value:t},marshalForSave:{value:a},unmarshalForSave:{value:i},expired:{get:o},turns:{get:s},passages:{get:u},hasPlayed:{value:l},active:{get:d},activeIndex:{get:f},passage:{get:p},variables:{get:h},history:{get:m},length:{get:v},size:{get:y},isEmpty:{value:b},current:{get:w},top:{get:k},bottom:{get:S},index:{value:E},peek:{value:j},has:{value:x},create:{value:O},goTo:{value:T},go:{value:C},deltaEncode:{value:A},deltaDecode:{value:P},prng:{value:Object.freeze(Object.defineProperties({},{init:{value:_},isEnabled:{value:N},pull:{get:I},seed:{get:D}}))},random:{value:L},clearTemporary:{value:M},temporary:{get:Q},getVar:{value:R},setVar:{value:F},metadata:{value:Object.freeze(Object.defineProperties({},{clear:{value:B},delete:{value:V},get:{value:U},has:{value:z},set:{value:q},size:{get:$}}))},initPRNG:{value:_},restart:{value:function(){return Engine.restart()}},backward:{value:function(){return Engine.backward()}},forward:{value:function(){return Engine.forward()}},display:{value:function(){return Engine.display.apply(Engine,arguments)}},show:{value:function(){return Engine.show.apply(Engine,arguments)}},play:{value:function(){return Engine.play.apply(Engine,arguments)}}}))}(),Scripting=function(){function addAccessibleClickHandler(e,t,r,n,a){if(arguments.length<2)throw new Error("addAccessibleClickHandler insufficient number of parameters");var i=void 0,o=void 0;if("function"==typeof t?(i=t,o={namespace:n,one:!!r}):(i=r,o={namespace:a,one:!!n,selector:t}),"function"!=typeof i)throw new TypeError("addAccessibleClickHandler handler parameter must be a function");return jQuery(e).ariaClick(o,i)}function insertElement(e,t,r,n,a,i){var o=jQuery(document.createElement(t));return r&&o.attr("id",r),n&&o.addClass(n),i&&o.attr("title",i),a&&o.text(a),e&&o.appendTo(e),o[0]}function insertText(e,t){jQuery(e).append(document.createTextNode(t))}function removeChildren(e){jQuery(e).empty()}function removeElement(e){jQuery(e).remove()}function fade(e,t){function r(){i+=.05*a,n(o,Math.easeInOut(i)),(1===a&&i>=1||-1===a&&i<=0)&&(e.style.visibility="in"===t.fade?"visible":"hidden",o.parentNode.replaceChild(e,o),o=null,window.clearInterval(s),t.onComplete&&t.onComplete())}function n(e,t){e.style.zoom=1,e.style.filter="alpha(opacity="+Math.floor(100*t)+")",e.style.opacity=t}var a="in"===t.fade?1:-1,i=void 0,o=e.cloneNode(!0),s=void 0;e.parentNode.replaceChild(o,e),"in"===t.fade?(i=0,o.style.visibility="visible"):i=1,n(o,i),s=window.setInterval(r,25)}function scrollWindowTo(e,t){function r(){l+=a,window.scroll(0,i+u*(s*Math.easeInOut(l))),l>=1&&window.clearInterval(c)}function n(e){for(var t=0;e.offsetParent;)t+=e.offsetTop,e=e.offsetParent;return t}var a=null!=t?Number(t):.1;Number.isNaN(a)||!Number.isFinite(a)||a<0?a=.1:a>1&&(a=1);var i=window.scrollY?window.scrollY:document.body.scrollTop,o=function(e){var t=n(e),r=t+e.offsetHeight,a=window.scrollY?window.scrollY:document.body.scrollTop,i=window.innerHeight?window.innerHeight:document.body.clientHeight,o=a+i;return t>=a&&r>o&&e.offsetHeight<i?t-(i-e.offsetHeight)+20:t}(e),s=Math.abs(i-o),u=i>o?-1:1,l=0,c=void 0;c=window.setInterval(r,25)}function either(){if(0!==arguments.length)return Array.prototype.concat.apply([],arguments).random()}function forget(e){if("string"!=typeof e)throw new TypeError("forget key parameter must be a string (received: "+Util.getType(e)+")");State.metadata.delete(e)}function hasVisited(){if(0===arguments.length)throw new Error("hasVisited called with insufficient parameters");if(State.isEmpty())return!1;for(var e=Array.prototype.concat.apply([],arguments),t=State.passages,r=0,n=e.length;r<n;++r)if(!t.includes(e[r]))return!1;return!0}function lastVisited(){if(0===arguments.length)throw new Error("lastVisited called with insufficient parameters");if(State.isEmpty())return-1;for(var e=Array.prototype.concat.apply([],arguments),t=State.passages,r=t.length-1,n=State.turns,a=0,i=e.length;a<i&&n>-1;++a){var o=t.lastIndexOf(e[a]);n=Math.min(n,-1===o?-1:r-o)}return n}function memorize(e,t){if("string"!=typeof e)throw new TypeError("memorize key parameter must be a string (received: "+Util.getType(e)+")");State.metadata.set(e,t)}function passage(){return State.passage}function previous(){var e=State.passages;if(arguments.length>0){var t=Number(arguments[0]);if(!Number.isSafeInteger(t)||t<1)throw new RangeError("previous offset parameter must be a positive integer greater than zero");return e.length>t?e[e.length-1-t]:""}for(var r=e.length-2;r>=0;--r)if(e[r]!==State.passage)return e[r];return""}function random(){var e=void 0,t=void 0;switch(arguments.length){case 0:throw new Error("random called with insufficient parameters");case 1:e=0,t=Math.trunc(arguments[0]);break;default:e=Math.trunc(arguments[0]),t=Math.trunc(arguments[1])}if(!Number.isInteger(e))throw new Error("random min parameter must be an integer");if(!Number.isInteger(t))throw new Error("random max parameter must be an integer");if(e>t){var r=[t,e];e=r[0],t=r[1]}return Math.floor(State.random()*(t-e+1))+e}function randomFloat(){var e=void 0,t=void 0;switch(arguments.length){case 0:throw new Error("randomFloat called with insufficient parameters");case 1:e=0,t=Number(arguments[0]);break;default:e=Number(arguments[0]),t=Number(arguments[1])}if(Number.isNaN(e)||!Number.isFinite(e))throw new Error("randomFloat min parameter must be a number");if(Number.isNaN(t)||!Number.isFinite(t))throw new Error("randomFloat max parameter must be a number");if(e>t){var r=[t,e];e=r[0],t=r[1]}return State.random()*(t-e)+e}function recall(e,t){if("string"!=typeof e)throw new TypeError("recall key parameter must be a string (received: "+Util.getType(e)+")");return State.metadata.has(e)?State.metadata.get(e):t}function tags(){if(0===arguments.length)return Story.get(State.passage).tags.slice(0);for(var e=Array.prototype.concat.apply([],arguments),t=[],r=0,n=e.length;r<n;++r)t=t.concat(Story.get(e[r]).tags);return t}function temporary(){return State.temporary}function time(){return null===Engine.lastPlay?0:Util.now()-Engine.lastPlay}function turns(){return State.turns}function variables(){return State.variables}function visited(){if(State.isEmpty())return 0;for(var e=Array.prototype.concat.apply([],0===arguments.length?[State.passage]:arguments),t=State.passages,r=State.turns,n=0,a=e.length;n<a&&r>0;++n)r=Math.min(r,t.count(e[n]));return r}function visitedTags(){if(0===arguments.length)throw new Error("visitedTags called with insufficient parameters");if(State.isEmpty())return 0;for(var e=Array.prototype.concat.apply([],arguments),t=e.length,r=State.passages,n=new Map,a=0,i=0,o=r.length;i<o;++i){var s=r[i];if(n.has(s))n.get(s)&&++a;else{var u=Story.get(s).tags;if(u.length>0){for(var l=0,c=0;c<t;++c)u.includes(e[c])&&++l;l===t?(++a,n.set(s,!0)):n.set(s,!1)}}}return a}function evalJavaScript(code,output){return function(code,output){return eval(code)}.call(output?{output:output}:null,String(code),output)}function evalTwineScript(code,output){return function(code,output){return eval(code)}.call(output?{output:output}:null,parse(String(code)),output)}var _ref8=function(){function e(e){return Util.parseUrl(e).path.replace(/^[^\w]+|[^\w]+$/g,"").replace(/[^\w]+/g,"-").toLocaleLowerCase()}function t(t){return new Promise(function(r,n){jQuery(document.createElement("script")).one("load abort error",function(e){jQuery(e.target).off(),"load"===e.type?r(e.target):n(new Error('importScripts failed to load the script "'+t+'".'))}).appendTo(document.head).attr({id:"script-imported-"+e(t),type:"text/javascript",src:t})})}function r(t){return new Promise(function(r,n){jQuery(document.createElement("link")).one("load abort error",function(e){jQuery(e.target).off(),"load"===e.type?r(e.target):n(new Error('importStyles failed to load the stylesheet "'+t+'".'))}).appendTo(document.head).attr({id:"style-imported-"+e(t),rel:"stylesheet",href:t})})}function n(e){return e.reduce(function(e,t){return e=e.then(t)},Promise.resolve())}function a(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return Promise.all(r.map(function(e){return Array.isArray(e)?n(e.map(function(e){return function(){return t(e)}})):t(e)}))}function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return Promise.all(t.map(function(e){return Array.isArray(e)?n(e.map(function(e){return function(){return r(e)}})):r(e)}))}return{importScripts:a,importStyles:i}}(),importScripts=_ref8.importScripts,importStyles=_ref8.importStyles,parse=function(){function e(e){if(0!==r.lastIndex)throw new RangeError("Scripting.parse last index is non-zero at start");for(var a=e,i=void 0;null!==(i=r.exec(a));)if(i[5]){var o=i[5];if("$"===o||"_"===o)continue;if(n.test(o))o=o[0];else if("is"===o){var s=r.lastIndex,u=a.slice(s);/^\s+not\b/.test(u)&&(a=a.splice(s,u.search(/\S/)),o="isnot")}t.hasOwnProperty(o)&&(a=a.splice(i.index,o.length,t[o]),r.lastIndex+=t[o].length-o.length)}return a}var t=Object.freeze({$:"State.variables.",_:"State.temporary.",to:"=",eq:"==",neq:"!=",is:"===",isnot:"!==",gt:">",gte:">=",lt:"<",lte:"<=",and:"&&",or:"||",not:"!",def:'"undefined" !== typeof',ndef:'"undefined" === typeof'}),r=new RegExp(["(\"\"|'')",'("(?:\\\\.|[^"\\\\])+")',"('(?:\\\\.|[^'\\\\])+')","([=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}]+)","([^\"'=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}\\s]+)"].join("|"),"g"),n=new RegExp("^"+Patterns.variable);return e}();return Object.freeze(Object.defineProperties({},{parse:{value:parse},evalJavaScript:{value:evalJavaScript},evalTwineScript:{value:evalTwineScript}}))}(),_ref9=function(){return{EOF:-1,Lexer:function(){function e(t,r){if(_classCallCheck(this,e),arguments.length<2)throw new Error("Lexer constructor called with too few parameters (source:string , initialState:function)");Object.defineProperties(this,{source:{value:t},initial:{value:r},state:{writable:!0,value:r},start:{writable:!0,value:0},pos:{writable:!0,value:0},depth:{writable:!0,value:0},items:{writable:!0,value:[]},data:{writable:!0,value:{}}})}return _createClass(e,[{key:"reset",value:function(){this.state=this.initial,this.start=0,this.pos=0,this.depth=0,this.items=[],this.data={}}},{key:"run",value:function(){for(;null!==this.state;)this.state=this.state(this);return this.items}},{key:"nextItem",value:function(){for(;0===this.items.length&&null!==this.state;)this.state=this.state(this);return this.items.shift()}},{key:"next",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos++]}},{key:"peek",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos]}},{key:"backup",value:function(e){this.pos-=e||1}},{key:"forward",value:function(e){this.pos+=e||1}},{key:"ignore",value:function(){this.start=this.pos}},{key:"accept",value:function(e){var t=this.next();return-1!==t&&(!!e.includes(t)||(this.backup(),!1))}},{key:"acceptRe",value:function(e){var t=this.next();return-1!==t&&(!!e.test(t)||(this.backup(),!1))}},{key:"acceptRun",value:function(e){for(;;){var t=this.next();if(-1===t)return;if(!e.includes(t))break}this.backup()}},{key:"acceptRunRe",value:function(e){for(;;){var t=this.next();if(-1===t)return;if(!e.test(t))break}this.backup()}},{key:"emit",value:function(e){this.items.push({type:e,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),this.start=this.pos}},{key:"error",value:function(e,t){if(arguments.length<2)throw new Error("Lexer.prototype.error called with too few parameters (type:number , message:string)");return this.items.push({type:e,message:t,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),null}}],[{key:"enumFromNames",value:function(e){var t=e.reduce(function(e,t,r){return e[t]=r,e},{});return Object.freeze(Object.assign(Object.create(null),t))}}]),e}()}}(),EOF=_ref9.EOF,Lexer=_ref9.Lexer,Wikifier=function(){var e=0,t=function(){function t(r,n,a){_classCallCheck(this,t),t.Parser.Profile.isEmpty()&&t.Parser.Profile.compile(),Object.defineProperties(this,{source:{value:String(n)},options:{writable:!0,value:Object.assign({profile:"all"},a)},nextMatch:{writable:!0,value:0},output:{writable:!0,value:null},_rawArgs:{writable:!0,value:""}}),null==r?this.output=document.createDocumentFragment():r.jquery?this.output=r[0]:this.output=r;try{++e,this.subWikify(this.output),1===e&&Config.cleanupWikifierOutput&&convertBreaks(this.output)}finally{--e}}return _createClass(t,[{key:"subWikify",value:function(e,r,n){var a=this.output;this.output=e;var i=void 0,o=void 0;t.Option.length>0&&(i=Object.assign(i||{},t.Option.options)),null!==n&&"object"===(void 0===n?"undefined":_typeof(n))&&(i=Object.assign(i||{},n)),i&&(o=this.options,this.options=Object.assign({},this.options,i));var s=t.Parser.Profile.get(this.options.profile),u=r?new RegExp("(?:"+r+")",this.options.ignoreTerminatorCase?"gim":"gm"):null,l=void 0,c=void 0;do{if(s.parserRegExp.lastIndex=this.nextMatch,u&&(u.lastIndex=this.nextMatch),c=s.parserRegExp.exec(this.source),(l=u?u.exec(this.source):null)&&(!c||l.index<=c.index))return l.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,l.index),this.matchStart=l.index,this.matchLength=l[0].length,this.matchText=l[0],this.nextMatch=u.lastIndex,this.output=a,void(o&&(this.options=o));if(c){c.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,c.index),this.matchStart=c.index,this.matchLength=c[0].length,this.matchText=c[0],this.nextMatch=s.parserRegExp.lastIndex;for(var d=void 0,f=1,p=c.length;f<p;++f)if(c[f]){d=f-1;break}if(s.parsers[d].handler(this),null!=TempState.break)break}}while(l||c);null==TempState.break?this.nextMatch<this.source.length&&(this.outputText(this.output,this.nextMatch,this.source.length),this.nextMatch=this.source.length):this.output.lastChild&&this.output.lastChild.nodeType===Node.ELEMENT_NODE&&"BR"===this.output.lastChild.nodeName.toUpperCase()&&jQuery(this.output.lastChild).remove(),this.output=a,o&&(this.options=o)}},{key:"outputText",value:function(e,t,r){jQuery(e).append(document.createTextNode(this.source.substring(t,r)))}},{key:"rawArgs",value:function(){return this._rawArgs}},{key:"fullArgs",value:function(){return Scripting.parse(this._rawArgs)}}],[{key:"wikifyEval",value:function(e){var r=document.createDocumentFragment();new t(r,e);var n=r.querySelector(".error");if(null!==n)throw new Error(n.textContent.replace(errorPrologRegExp,""));return r}},{key:"createInternalLink",value:function(e,t,r,n){var a=jQuery(document.createElement("a"));return null!=t&&(a.attr("data-passage",t),Story.has(t)?(a.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(t)&&a.addClass("link-visited")):a.addClass("link-broken"),a.ariaClick({one:!0},function(){"function"==typeof n&&n(),Engine.play(t)})),r&&a.append(document.createTextNode(r)),e&&a.appendTo(e),a[0]}},{key:"createExternalLink",value:function(e,t,r){var n=jQuery(document.createElement("a")).attr("target","_blank").addClass("link-external").text(r).appendTo(e);return null!=t&&n.attr({href:t,tabindex:0}),n[0]}},{key:"isExternalLink",value:function(e){return!Story.has(e)&&(new RegExp("^"+Patterns.url,"gim").test(e)||/[\/.?#]/.test(e))}}]),t}();return Object.defineProperty(t,"Option",{value:function(){function e(){return o.length}function t(){return Object.assign.apply(Object,[{}].concat(_toConsumableArray(o)))}function r(){o=[]}function n(e){return o[e]}function a(){return o.pop()}function i(e){if("object"!==(void 0===e?"undefined":_typeof(e))||null===e)throw new TypeError("Wikifier.Option.push options parameter must be an object (received: "+Util.getType(e)+")");return o.push(e)}var o=[];return Object.freeze(Object.defineProperties({},{length:{get:e},options:{get:t},clear:{value:r},get:{value:n},pop:{value:a},push:{value:i}}))}()}),Object.defineProperty(t,"Parser",{value:function(){function e(){return d}function t(e){if("object"!==(void 0===e?"undefined":_typeof(e)))throw new Error("Wikifier.Parser.add parser parameter must be an object");if(!e.hasOwnProperty("name"))throw new Error('parser object missing required "name" property');if("string"!=typeof e.name)throw new Error('parser object "name" property must be a string');if(!e.hasOwnProperty("match"))throw new Error('parser object missing required "match" property');if("string"!=typeof e.match)throw new Error('parser object "match" property must be a string');if(!e.hasOwnProperty("handler"))throw new Error('parser object missing required "handler" property');if("function"!=typeof e.handler)throw new Error('parser object "handler" property must be a function');if(e.hasOwnProperty("profiles")&&!Array.isArray(e.profiles))throw new Error('parser object "profiles" property must be an array');if(a(e.name))throw new Error('cannot clobber existing parser "'+e.name+'"');d.push(e)}function r(e){var t=d.find(function(t){return t.name===e});t&&d.delete(t)}function n(){return 0===d.length}function a(e){return!!d.find(function(t){return t.name===e})}function i(e){return d.find(function(t){return t.name===e})||null}function o(){return f}function s(){var e=d,t=e.filter(function(e){return!Array.isArray(e.profiles)||e.profiles.includes("core")});return f=Object.freeze({all:{parsers:e,parserRegExp:new RegExp(e.map(function(e){return"("+e.match+")"}).join("|"),"gm")},core:{parsers:t,parserRegExp:new RegExp(t.map(function(e){return"("+e.match+")"}).join("|"),"gm")}})}function u(){return"object"!==(void 0===f?"undefined":_typeof(f))||0===Object.keys(f).length}function l(e){if("object"!==(void 0===f?"undefined":_typeof(f))||!f.hasOwnProperty(e))throw new Error('nonexistent parser profile "'+e+'"');return f[e]}function c(e){return"object"===(void 0===f?"undefined":_typeof(f))&&f.hasOwnProperty(e)}var d=[],f=void 0;return Object.freeze(Object.defineProperties({},{parsers:{get:e},add:{value:t},delete:{value:r},isEmpty:{value:n},has:{value:a},get:{value:i},Profile:{value:Object.freeze(Object.defineProperties({},{profiles:{get:o},compile:{value:s},isEmpty:{value:u},has:{value:c},get:{value:l}}))}}))}()}),Object.defineProperties(t,{helpers:{value:{}},getValue:{value:State.getVar},setValue:{value:State.setVar},parse:{value:Scripting.parse},evalExpression:{value:Scripting.evalTwineScript},evalStatements:{value:Scripting.evalTwineScript},textPrimitives:{value:Patterns}}),Object.defineProperties(t.helpers,{inlineCss:{value:function(){function e(e){var n={classes:[],id:"",styles:{}},a=void 0;do{t.lastIndex=e.nextMatch;var i=t.exec(e.source);if(a=i&&i.index===e.nextMatch){if(i[1])n.styles[Util.fromCssProperty(i[1])]=i[2].trim();else if(i[3])n.styles[Util.fromCssProperty(i[3])]=i[4].trim();else if(i[5]){var o=void 0;for(r.lastIndex=0;null!==(o=r.exec(i[5]));)"."===o[1]?n.classes.push(o[2]):n.id=o[2]}e.nextMatch=t.lastIndex}}while(a);return n}var t=new RegExp(Patterns.inlineCss,"gm"),r=new RegExp("("+Patterns.cssIdOrClassSigil+")("+Patterns.anyLetter+"+)","g");return e}()},evalText:{value:function(e){var t=void 0;try{switch(t=Scripting.evalTwineScript(e),void 0===t?"undefined":_typeof(t)){case"string":""===t.trim()&&(t=e);break;case"number":t=String(t);break;default:t=e}}catch(r){t=e}return t}},evalPassageId:{value:function(e){return null==e||Story.has(e)?e:t.helpers.evalText(e)}},hasBlockContext:{value:function(e){for(var t="function"==typeof window.getComputedStyle,r=e.length-1;r>=0;--r){var n=e[r];switch(n.nodeType){case Node.ELEMENT_NODE:var a=n.nodeName.toUpperCase();if("BR"===a)return!0;var i=t?window.getComputedStyle(n,null):n.currentStyle;if(i&&i.display){if("none"===i.display)continue;return"block"===i.display}switch(a){case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":return!0}return!1;case Node.COMMENT_NODE:continue;default:return!1}}return!0}},createShadowSetterCallback:{value:function(){function e(){if(!a&&!(a=t.Parser.get("macro")))throw new Error('cannot find "macro" parser');return a}function r(){for(var t=a||e(),r=new Set,n=t.context;null!==n;n=n.parent)n._shadows&&n._shadows.forEach(function(e){return r.add(e)});return[].concat(_toConsumableArray(r))}function n(e){var t={};return r().forEach(function(e){var r=e.slice(1),n="$"===e[0]?State.variables:State.temporary;t[e]=n[r]}),function(){var r=Object.keys(t),n=r.length>0?{}:null;try{return r.forEach(function(e){var r=e.slice(1),a="$"===e[0]?State.variables:State.temporary;a.hasOwnProperty(r)&&(n[r]=a[r]),a[r]=t[e]}),Scripting.evalJavaScript(e)}finally{r.forEach(function(e){var r=e.slice(1),a="$"===e[0]?State.variables:State.temporary;t[e]=a[r],n.hasOwnProperty(r)?a[r]=n[r]:delete a[r]})}}}var a=null;return n}()},parseSquareBracketedMarkup:{value:function(){function e(e,t){e:for(;;)switch(e.next()){case"\\":var r=e.next();if(r!==EOF&&"\n"!==r)break;case EOF:case"\n":return EOF;case t:break e}return e.pos}function t(e){if(!e.accept("["))return e.error(o.Error,"malformed square-bracketed markup");if(e.accept("["))e.data.isLink=!0,e.emit(o.LinkMeta);else{if(e.accept("<>"),!(e.accept("Ii")&&e.accept("Mm")&&e.accept("Gg")&&e.accept("[")))return e.error(o.Error,"malformed square-bracketed markup");e.data.isLink=!1,e.emit(o.ImageMeta)}return e.depth=2,r}function r(t){for(var r=t.data.isLink?"link":"image",i=s.None;;)switch(t.next()){case EOF:case"\n":return t.error(o.Error,"unterminated "+r+" markup");case'"':if(e(t,'"')===EOF)return t.error(o.Error,"unterminated double quoted string in "+r+" markup");break;case"|":i===s.None&&(i=s.LTR,t.backup(),t.emit(o.Text),t.forward(),t.emit(o.DelimLTR));break;case"-":i===s.None&&">"===t.peek()&&(i=s.LTR,t.backup(),t.emit(o.Text),t.forward(2),t.emit(o.DelimLTR));break;case"<":i===s.None&&"-"===t.peek()&&(i=s.RTL,t.backup(),t.emit(t.data.isLink?o.Link:o.Source),t.forward(2),t.emit(o.DelimRTL));break;case"[":++t.depth;break;case"]":if(1===--t.depth)switch(t.peek()){case"[":return++t.depth,t.backup(),i===s.RTL?t.emit(o.Text):t.emit(t.data.isLink?o.Link:o.Source),t.forward(2),t.emit(o.InnerMeta),t.data.isLink?a:n;case"]":return--t.depth,t.backup(),i===s.RTL?t.emit(o.Text):t.emit(t.data.isLink?o.Link:o.Source),t.forward(2),t.emit(o.RightMeta),null;default:return t.error(o.Error,"malformed "+r+" markup")}}}function n(t){for(var r=t.data.isLink?"link":"image";;)switch(t.next()){case EOF:case"\n":return t.error(o.Error,"unterminated "+r+" markup");case'"':if(e(t,'"')===EOF)return t.error(o.Error,"unterminated double quoted string in "+r+" markup link component");break;case"[":++t.depth;break;case"]":if(1===--t.depth)switch(t.peek()){case"[":return++t.depth,t.backup(),t.emit(o.Link),t.forward(2),t.emit(o.InnerMeta),a;case"]":return--t.depth,t.backup(),t.emit(o.Link),t.forward(2),t.emit(o.RightMeta),null;default:return t.error(o.Error,"malformed "+r+" markup")}}}function a(t){for(var r=t.data.isLink?"link":"image";;)switch(t.next()){case EOF:case"\n":return t.error(o.Error,"unterminated "+r+" markup");case'"':if(e(t,'"')===EOF)return t.error(o.Error,"unterminated double quoted string in "+r+" markup setter component");break;case"'":if(e(t,"'")===EOF)return t.error(o.Error,"unterminated single quoted string in "+r+" markup setter component");break;case"[":++t.depth;break;case"]":if(1===--t.depth)return"]"!==t.peek()?t.error(o.Error,"malformed "+r+" markup"):(--t.depth,t.backup(),t.emit(o.Setter),t.forward(2),t.emit(o.RightMeta),null)}}function i(e){var r=new Lexer(e.source,t);r.start=r.pos=e.matchStart;var n={},a=r.run(),i=a.last();return i&&i.type===o.Error?n.error=i.message:a.forEach(function(e){var t=e.text.trim();switch(e.type){case o.ImageMeta:n.isImage=!0,"<"===t[1]?n.align="left":">"===t[1]&&(n.align="right");break;case o.LinkMeta:n.isLink=!0;break;case o.Link:"~"===t[0]?(n.forceInternal=!0,n.link=t.slice(1)):n.link=t;break;case o.Setter:n.setter=t;break;case o.Source:n.source=t;break;case o.Text:n.text=t}}),n.pos=r.pos,n}var o=Lexer.enumFromNames(["Error","DelimLTR","DelimRTL","InnerMeta","ImageMeta","LinkMeta","Link","RightMeta","Setter","Source","Text"]),s=Lexer.enumFromNames(["None","LTR","RTL"]);return i}()}}),t}();!function(){function e(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);t&&t.index===e.matchStart&&(e.nextMatch=this.lookahead.lastIndex,jQuery(document.createDocumentFragment()).append(t[1]).appendTo(e.output))}Wikifier.Parser.add({name:"quoteByBlock",profiles:["block"],match:"^<<<\\n",terminator:"^<<<\\n",handler:function(e){if(!Wikifier.helpers.hasBlockContext(e.output.childNodes))return void jQuery(e.output).append(document.createTextNode(e.matchText));e.subWikify(jQuery(document.createElement("blockquote")).appendTo(e.output).get(0),this.terminator)}}),Wikifier.Parser.add({name:"quoteByLine",profiles:["block"],match:"^>+",lookahead:/^>+/gm,terminator:"\\n",handler:function(e){if(!Wikifier.helpers.hasBlockContext(e.output.childNodes))return void jQuery(e.output).append(document.createTextNode(e.matchText));var t=[e.output],r=0,n=e.matchLength,a=void 0,i=void 0;do{if(n>r)for(i=r;i<n;++i)t.push(jQuery(document.createElement("blockquote")).appendTo(t[t.length-1]).get(0));else if(n<r)for(i=r;i>n;--i)t.pop();r=n,e.subWikify(t[t.length-1],this.terminator),jQuery(document.createElement("br")).appendTo(t[t.length-1]),this.lookahead.lastIndex=e.nextMatch;var o=this.lookahead.exec(e.source);a=o&&o.index===e.nextMatch,a&&(n=o[0].length,e.nextMatch+=o[0].length)}while(a)}}),Wikifier.Parser.add({name:"macro",profiles:["core"],match:"<<",lookahead:new RegExp("<<(/?"+Patterns.macroName+")(?:\\s*)((?:(?:`(?:\\\\.|[^`\\\\])*`)|(?:\"(?:\\\\.|[^\"\\\\])*\")|(?:'(?:\\\\.|[^'\\\\])*')|(?:\\[(?:[<>]?[Ii][Mm][Gg])?\\[[^\\r\\n]*?\\]\\]+)|[^>]|(?:>(?!>)))*)>>","gm"),working:{source:"",name:"",arguments:"",index:0},context:null,handler:function(e){var t=this.lookahead.lastIndex=e.matchStart;if(this.parseTag(e)){var r=e.nextMatch,n=this.working.name,a=this.working.arguments,i=void 0;try{if(!(i=Macro.get(n))){if(Macro.tags.has(n)){var o=Macro.tags.get(n);return throwError(e.output,"child tag <<"+n+">> was found outside of a call to its parent macro"+(1===o.length?"":"s")+" <<"+o.join(">>, <<")+">>",e.source.slice(t,e.nextMatch))}return throwError(e.output,"macro <<"+n+">> does not exist",e.source.slice(t,e.nextMatch))}var s=null;if(i.hasOwnProperty("tags")&&!(s=this.parseBody(e,i)))return e.nextMatch=r,throwError(e.output,"cannot find a closing tag for macro <<"+n+">>",e.source.slice(t,e.nextMatch)+"…");if("function"!=typeof i.handler)return throwError(e.output,"macro <<"+n+">> handler function "+(i.hasOwnProperty("handler")?"is not a function":"does not exist"),e.source.slice(t,e.nextMatch));var u=s?s[0].args:this.createArgs(a,this.skipArgs(i,i.name));if(i.hasOwnProperty("_MACRO_API")){this.context=new MacroContext({macro:i,name:n,args:u,payload:s,source:e.source.slice(t,e.nextMatch),parent:this.context,parser:e});try{i.handler.call(this.context)}finally{this.context=this.context.parent}}else{var l=e._rawArgs;e._rawArgs=a;try{i.handler(e.output,n,u,e,s)}finally{e._rawArgs=l}}}catch(r){return throwError(e.output,"cannot execute "+(i&&i.isWidget?"widget":"macro")+" <<"+n+">>: "+r.message,e.source.slice(t,e.nextMatch))}finally{this.working.source="",this.working.name="",this.working.arguments="",this.working.index=0}}else e.outputText(e.output,e.matchStart,e.nextMatch)},parseTag:function(e){var t=this.lookahead.exec(e.source);return!(!t||t.index!==e.matchStart||!t[1])&&(e.nextMatch=this.lookahead.lastIndex,this.working.source=e.source.slice(t.index,this.lookahead.lastIndex),this.working.name=t[1],this.working.arguments=t[2],this.working.index=t.index,!0)},parseBody:function(e,t){for(var r=this.working.name,n="/"+r,a="end"+r,i=!!Array.isArray(t.tags)&&t.tags,o=[],s=-1,u=1,l=this.working.source,c=this.working.name,d=this.working.arguments,f=e.nextMatch;-1!==(e.matchStart=e.source.indexOf(this.match,e.nextMatch));)if(this.parseTag(e)){var p=this.working.source,h=this.working.name,g=this.working.arguments,m=this.working.index,v=e.nextMatch;switch(h){case r:++u;break;case a:case n:--u;break;default:if(1===u&&i)for(var y=0,b=i.length;y<b;++y)h===i[y]&&(o.push({source:l,name:c,arguments:d,args:this.createArgs(d,this.skipArgs(t,c)),contents:e.source.slice(f,m)}),l=p,c=h,d=g,f=v)}if(0===u){o.push({source:l,name:c,arguments:d,args:this.createArgs(d,this.skipArgs(t,c)),contents:e.source.slice(f,m)}),s=v;break}}else this.lookahead.lastIndex=e.nextMatch=e.matchStart+this.match.length;return-1!==s?(e.nextMatch=s,o):null},createArgs:function(e,t){var r=t?[]:this.parseArgs(e);return Object.defineProperties(r,{raw:{value:e},full:{value:Scripting.parse(e)}}),r},
skipArgs:function(e,t){if(e.hasOwnProperty("skipArgs")){var r=e.skipArgs;return"boolean"==typeof r&&r||Array.isArray(r)&&r.includes(t)}return!!e.hasOwnProperty("skipArg0")&&(e.skipArg0&&e.name===t)},parseArgs:function(){function e(e,t){e:for(;;)switch(e.next()){case"\\":var r=e.next();if(r!==EOF&&"\n"!==r)break;case EOF:case"\n":return EOF;case t:break e}return e.pos}function t(e){var t=e.source.slice(e.pos).search(c);if(t===EOF)return null;switch(0!==t&&(e.pos+=t,e.ignore()),e.next()){case"`":return r;case'"':return n;case"'":return a;case"[":return i;default:return o}}function r(r){return e(r,"`")===EOF?r.error(u.Error,"unterminated backquote expression"):(r.emit(u.Expression),t)}function n(r){return e(r,'"')===EOF?r.error(u.Error,"unterminated double quoted string"):(r.emit(u.String),t)}function a(r){return e(r,"'")===EOF?r.error(u.Error,"unterminated single quoted string"):(r.emit(u.String),t)}function i(e){var r=void 0;if(e.accept("<>IiMmGg")?(r="image",e.acceptRun("<>IiMmGg")):r="link",!e.accept("["))return e.error(u.Error,"malformed "+r+" markup");e.depth=2;e:for(;;)switch(e.next()){case"\\":var n=e.next();if(n!==EOF&&"\n"!==n)break;case EOF:case"\n":return e.error(u.Error,"unterminated "+r+" markup");case"[":++e.depth;break;case"]":if(--e.depth<0)return e.error(u.Error,"unexpected right square bracket ']'");if(1===e.depth){if("]"===e.next()){--e.depth;break e}e.backup()}}return e.emit(u.SquareBracket),t}function o(e){var r=e.source.slice(e.pos).search(l);return e.pos=r===EOF?e.source.length:e.pos+r,e.emit(u.Bareword),r===EOF?null:t}function s(e){var r=new Lexer(e,t),n=[];return r.run().forEach(function(e){var t=e.text;switch(e.type){case u.Error:throw new Error('unable to parse macro argument "'+t+'": '+e.message);case u.Bareword:if(d.test(t))t=State.getVar(t);else if(/^(?:settings|setup)[.[]/.test(t))try{t=Scripting.evalTwineScript(t)}catch(e){throw new Error('unable to parse macro argument "'+t+'": '+e.message)}else if("null"===t)t=null;else if("undefined"===t)t=undefined;else if("true"===t)t=!0;else if("false"===t)t=!1;else if("NaN"===t)t=NaN;else{var r=Number(t);Number.isNaN(r)||(t=r)}break;case u.Expression:if(""===(t=t.slice(1,-1).trim()))t=undefined;else try{t=Scripting.evalTwineScript("("+t+")")}catch(e){throw new Error('unable to parse macro argument expression "'+t+'": '+e.message)}break;case u.String:try{t=Scripting.evalJavaScript(t)}catch(e){throw new Error('unable to parse macro argument string "'+t+'": '+e.message)}break;case u.SquareBracket:var a=Wikifier.helpers.parseSquareBracketedMarkup({source:t,matchStart:0});if(a.hasOwnProperty("error"))throw new Error('unable to parse macro argument "'+t+'": '+a.error);if(a.pos<t.length)throw new Error('unable to parse macro argument "'+t+'": unexpected character(s) "'+t.slice(a.pos)+'" (pos: '+a.pos+")");a.isLink?(t={isLink:!0},t.count=a.hasOwnProperty("text")?2:1,t.link=Wikifier.helpers.evalPassageId(a.link),t.text=a.hasOwnProperty("text")?Wikifier.helpers.evalText(a.text):t.link,t.external=!a.forceInternal&&Wikifier.isExternalLink(t.link),t.setFn=a.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(a.setter)):null):a.isImage&&(t=function(e){var t={source:e,isImage:!0};if("data:"!==e.slice(0,5)&&Story.has(e)){var r=Story.get(e);r.tags.includes("Twine.image")&&(t.source=r.text,t.passage=r.title)}return t}(Wikifier.helpers.evalPassageId(a.source)),a.hasOwnProperty("align")&&(t.align=a.align),a.hasOwnProperty("text")&&(t.title=Wikifier.helpers.evalText(a.text)),a.hasOwnProperty("link")&&(t.link=Wikifier.helpers.evalPassageId(a.link),t.external=!a.forceInternal&&Wikifier.isExternalLink(t.link)),t.setFn=a.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(a.setter)):null)}n.push(t)}),n}var u=Lexer.enumFromNames(["Error","Bareword","Expression","String","SquareBracket"]),l=new RegExp(Patterns.space),c=new RegExp(Patterns.notSpace),d=new RegExp("^"+Patterns.variable);return s}()}),Wikifier.Parser.add({name:"link",profiles:["core"],match:"\\[\\[[^[]",handler:function(e){var t=Wikifier.helpers.parseSquareBracketedMarkup(e);if(t.hasOwnProperty("error"))return void e.outputText(e.output,e.matchStart,e.nextMatch);e.nextMatch=t.pos;var r=Wikifier.helpers.evalPassageId(t.link),n=t.hasOwnProperty("text")?Wikifier.helpers.evalText(t.text):r,a=t.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(t.setter)):null,i=(Config.debug?new DebugView(e.output,"link-markup","[[link]]",e.source.slice(e.matchStart,e.nextMatch)):e).output;t.forceInternal||!Wikifier.isExternalLink(r)?Wikifier.createInternalLink(i,r,n,a):Wikifier.createExternalLink(i,r,n)}}),Wikifier.Parser.add({name:"urlLink",profiles:["core"],match:Patterns.url,handler:function(e){e.outputText(Wikifier.createExternalLink(e.output,e.matchText),e.matchStart,e.nextMatch)}}),Wikifier.Parser.add({name:"image",profiles:["core"],match:"\\[[<>]?[Ii][Mm][Gg]\\[",handler:function(e){var t=Wikifier.helpers.parseSquareBracketedMarkup(e);if(t.hasOwnProperty("error"))return void e.outputText(e.output,e.matchStart,e.nextMatch);e.nextMatch=t.pos;var r=void 0;Config.debug&&(r=new DebugView(e.output,"image-markup",t.hasOwnProperty("link")?"[img[][link]]":"[img[]]",e.source.slice(e.matchStart,e.nextMatch)),r.modes({block:!0}));var n=t.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(t.setter)):null,a=(Config.debug?r:e).output,i=void 0;if(t.hasOwnProperty("link")){var o=Wikifier.helpers.evalPassageId(t.link);a=t.forceInternal||!Wikifier.isExternalLink(o)?Wikifier.createInternalLink(a,o,null,n):Wikifier.createExternalLink(a,o),a.classList.add("link-image")}if(a=jQuery(document.createElement("img")).appendTo(a).get(0),i=Wikifier.helpers.evalPassageId(t.source),"data:"!==i.slice(0,5)&&Story.has(i)){var s=Story.get(i);s.tags.includes("Twine.image")&&(a.setAttribute("data-passage",s.title),i=s.text.trim())}a.src=i,t.hasOwnProperty("text")&&(a.title=Wikifier.helpers.evalText(t.text)),t.hasOwnProperty("align")&&(a.align=t.align)}}),Wikifier.Parser.add({name:"monospacedByBlock",profiles:["block"],match:"^\\{\\{\\{\\n",lookahead:/^\{\{\{\n((?:^[^\n]*\n)+?)(^\}\}\}$\n?)/gm,handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);if(t&&t.index===e.matchStart){var r=jQuery(document.createElement("pre"));jQuery(document.createElement("code")).text(t[1]).appendTo(r),r.appendTo(e.output),e.nextMatch=this.lookahead.lastIndex}}}),Wikifier.Parser.add({name:"formatByChar",profiles:["core"],match:"''|//|__|\\^\\^|~~|==|\\{\\{\\{",handler:function(e){switch(e.matchText){case"''":e.subWikify(jQuery(document.createElement("strong")).appendTo(e.output).get(0),"''");break;case"//":e.subWikify(jQuery(document.createElement("em")).appendTo(e.output).get(0),"//");break;case"__":e.subWikify(jQuery(document.createElement("u")).appendTo(e.output).get(0),"__");break;case"^^":e.subWikify(jQuery(document.createElement("sup")).appendTo(e.output).get(0),"\\^\\^");break;case"~~":e.subWikify(jQuery(document.createElement("sub")).appendTo(e.output).get(0),"~~");break;case"==":e.subWikify(jQuery(document.createElement("s")).appendTo(e.output).get(0),"==");break;case"{{{":var t=/\{\{\{((?:.|\n)*?)\}\}\}/gm;t.lastIndex=e.matchStart;var r=t.exec(e.source);r&&r.index===e.matchStart&&(jQuery(document.createElement("code")).text(r[1]).appendTo(e.output),e.nextMatch=t.lastIndex)}}}),Wikifier.Parser.add({name:"customStyle",profiles:["core"],match:"@@",terminator:"@@",blockRe:/\s*\n/gm,handler:function(e){var t=Wikifier.helpers.inlineCss(e);this.blockRe.lastIndex=e.nextMatch;var r=this.blockRe.exec(e.source),n=r&&r.index===e.nextMatch,a=jQuery(document.createElement(n?"div":"span")).appendTo(e.output);0===t.classes.length&&""===t.id&&0===Object.keys(t.styles).length?a.addClass("marked"):(t.classes.forEach(function(e){return a.addClass(e)}),""!==t.id&&a.attr("id",t.id),a.css(t.styles)),n?(e.nextMatch+=r[0].length,e.subWikify(a[0],"\\n?"+this.terminator)):e.subWikify(a[0],this.terminator)}}),Wikifier.Parser.add({name:"verbatimText",profiles:["core"],match:'"{3}|<[Nn][Oo][Ww][Ii][Kk][Ii]>',lookahead:/(?:"{3}((?:.|\n)*?)"{3})|(?:<[Nn][Oo][Ww][Ii][Kk][Ii]>((?:.|\n)*?)<\/[Nn][Oo][Ww][Ii][Kk][Ii]>)/gm,handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);t&&t.index===e.matchStart&&(e.nextMatch=this.lookahead.lastIndex,jQuery(document.createElement("span")).addClass("verbatim").text(t[1]||t[2]).appendTo(e.output))}}),Wikifier.Parser.add({name:"horizontalRule",profiles:["core"],match:"^----+$\\n?|<[Hh][Rr]\\s*/?>\\n?",handler:function(e){jQuery(document.createElement("hr")).appendTo(e.output)}}),Wikifier.Parser.add({name:"emdash",profiles:["core"],match:"--",handler:function(e){jQuery(document.createTextNode("—")).appendTo(e.output)}}),Wikifier.Parser.add({name:"doubleDollarSign",profiles:["core"],match:"\\${2}",handler:function(e){jQuery(document.createTextNode("$")).appendTo(e.output)}}),Wikifier.Parser.add({name:"nakedVariable",profiles:["core"],match:Patterns.variable+"(?:(?:\\."+Patterns.identifier+")|(?:\\[\\d+\\])|(?:\\[\"(?:\\\\.|[^\"\\\\])+\"\\])|(?:\\['(?:\\\\.|[^'\\\\])+'\\])|(?:\\["+Patterns.variable+"\\]))*",handler:function(e){var t=toStringOrDefault(State.getVar(e.matchText),null);null===t?jQuery(document.createTextNode(e.matchText)).appendTo(e.output):new Wikifier((Config.debug?new DebugView(e.output,"variable",e.matchText,e.matchText):e).output,t)}}),Wikifier.Parser.add({name:"template",profiles:["core"],match:"\\?"+Patterns.templateName,handler:function(e){var t=e.matchText.slice(1),r=Template.get(t),n=null;switch(r instanceof Array&&(r=r.random()),void 0===r?"undefined":_typeof(r)){case"function":try{n=toStringOrDefault(r.call({name:t}),null)}catch(r){return throwError(e.output,"cannot execute function template ?"+t+": "+r.message,e.source.slice(e.matchStart,e.nextMatch))}break;case"string":n=r}null===n?jQuery(document.createTextNode(e.matchText)).appendTo(e.output):new Wikifier((Config.debug?new DebugView(e.output,"template",e.matchText,e.matchText):e).output,n)}}),Wikifier.Parser.add({name:"heading",profiles:["block"],match:"^!{1,6}",terminator:"\\n",handler:function(e){if(!Wikifier.helpers.hasBlockContext(e.output.childNodes))return void jQuery(e.output).append(document.createTextNode(e.matchText));e.subWikify(jQuery(document.createElement("h"+e.matchLength)).appendTo(e.output).get(0),this.terminator)}}),Wikifier.Parser.add({name:"table",profiles:["block"],match:"^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",lookahead:/^\|([^\n]*)\|([fhck]?)$/gm,rowTerminator:"\\|(?:[cfhk]?)$\\n?",cellPattern:"(?:\\|([^\\n\\|]*)\\|)|(\\|[cfhk]?$\\n?)",cellTerminator:"(?:\\u0020*)\\|",rowTypes:{c:"caption",f:"tfoot",h:"thead","":"tbody"},handler:function(e){if(!Wikifier.helpers.hasBlockContext(e.output.childNodes))return void jQuery(e.output).append(document.createTextNode(e.matchText));var t=jQuery(document.createElement("table")).appendTo(e.output).get(0),r=[],n=null,a=null,i=0,o=void 0;e.nextMatch=e.matchStart;do{this.lookahead.lastIndex=e.nextMatch;var s=this.lookahead.exec(e.source);if(o=s&&s.index===e.nextMatch){var u=s[2];"k"===u?(t.className=s[1],e.nextMatch+=s[0].length+1):(u!==n&&(n=u,a=jQuery(document.createElement(this.rowTypes[u])).appendTo(t)),"c"===n?(a.css("caption-side",0===i?"top":"bottom"),e.nextMatch+=1,e.subWikify(a[0],this.rowTerminator)):this.rowHandler(e,jQuery(document.createElement("tr")).appendTo(a).get(0),r),++i)}}while(o)},rowHandler:function(e,t,r){var n=this,a=new RegExp(this.cellPattern,"gm"),i=0,o=1,s=void 0;do{a.lastIndex=e.nextMatch;var u=a.exec(e.source);if(s=u&&u.index===e.nextMatch){if("~"===u[1]){var l=r[i];l&&(++l.rowCount,l.$element.attr("rowspan",l.rowCount).css("vertical-align","middle")),e.nextMatch=u.index+u[0].length-1}else if(">"===u[1])++o,e.nextMatch=u.index+u[0].length-1;else{if(u[2]){e.nextMatch=u.index+u[0].length;break}!function(){++e.nextMatch;for(var a=Wikifier.helpers.inlineCss(e),s=!1,u=!1,l=void 0;" "===e.source.substr(e.nextMatch,1);)s=!0,++e.nextMatch;"!"===e.source.substr(e.nextMatch,1)?(l=jQuery(document.createElement("th")).appendTo(t),++e.nextMatch):l=jQuery(document.createElement("td")).appendTo(t),r[i]={rowCount:1,$element:l},o>1&&(l.attr("colspan",o),o=1),e.subWikify(l[0],n.cellTerminator)," "===e.matchText.substr(e.matchText.length-2,1)&&(u=!0),a.classes.forEach(function(e){return l.addClass(e)}),""!==a.id&&l.attr("id",a.id),s&&u?a.styles["text-align"]="center":s?a.styles["text-align"]="right":u&&(a.styles["text-align"]="left"),l.css(a.styles),e.nextMatch=e.nextMatch-1}()}++i}}while(s)}}),Wikifier.Parser.add({name:"list",profiles:["block"],match:"^(?:(?:\\*+)|(?:#+))",lookahead:/^(?:(\*+)|(#+))/gm,terminator:"\\n",handler:function(e){if(!Wikifier.helpers.hasBlockContext(e.output.childNodes))return void jQuery(e.output).append(document.createTextNode(e.matchText));e.nextMatch=e.matchStart;var t=[e.output],r=null,n=0,a=void 0,i=void 0;do{this.lookahead.lastIndex=e.nextMatch;var o=this.lookahead.exec(e.source);if(a=o&&o.index===e.nextMatch){var s=o[2]?"ol":"ul",u=o[0].length;if(e.nextMatch+=o[0].length,u>n)for(i=n;i<u;++i)t.push(jQuery(document.createElement(s)).appendTo(t[t.length-1]).get(0));else if(u<n)for(i=n;i>u;--i)t.pop();else u===n&&s!==r&&(t.pop(),t.push(jQuery(document.createElement(s)).appendTo(t[t.length-1]).get(0)));n=u,r=s,e.subWikify(jQuery(document.createElement("li")).appendTo(t[t.length-1]).get(0),this.terminator)}}while(a)}}),Wikifier.Parser.add({name:"commentByBlock",profiles:["core"],match:"(?:/(?:%|\\*))|(?:\x3c!--)",lookahead:/(?:\/(%|\*)(?:(?:.|\n)*?)\1\/)|(?:<!--(?:(?:.|\n)*?)-->)/gm,handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);t&&t.index===e.matchStart&&(e.nextMatch=this.lookahead.lastIndex)}}),Wikifier.Parser.add({name:"lineContinuation",profiles:["core"],match:"\\\\"+Patterns.spaceNoTerminator+"*\\n|\\n"+Patterns.spaceNoTerminator+"*\\\\|\\n?\\\\"+Patterns.spaceNoTerminator+"*$|^"+Patterns.spaceNoTerminator+"*\\\\\\n?",handler:function(e){e.nextMatch=e.matchStart+e.matchLength}}),Wikifier.Parser.add({name:"lineBreak",profiles:["core"],match:"\\n|<[Bb][Rr]\\s*/?>",handler:function(e){e.options.nobr||jQuery(document.createElement("br")).appendTo(e.output)}}),Wikifier.Parser.add({name:"htmlCharacterReference",profiles:["core"],match:"(?:(?:&#?[0-9A-Za-z]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9A-Fa-f]|1D[C-Fc-f][0-9A-Fa-f]|20[D-Fd-f][0-9A-Fa-f]|FE2[0-9A-Fa-f])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[0-9A-Za-z]{2,8};)",handler:function(e){jQuery(document.createDocumentFragment()).append(e.matchText).appendTo(e.output)}}),Wikifier.Parser.add({name:"xmlProlog",profiles:["core"],match:"<\\?[Xx][Mm][Ll][^>]*\\?>",handler:function(e){e.nextMatch=e.matchStart+e.matchLength}}),Wikifier.Parser.add({name:"verbatimHtml",profiles:["core"],match:"<[Hh][Tt][Mm][Ll]>",lookahead:/<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/gm,handler:e}),Wikifier.Parser.add({name:"verbatimScriptTag",profiles:["core"],match:"<[Ss][Cc][Rr][Ii][Pp][Tt][^>]*>",lookahead:/(<[Ss][Cc][Rr][Ii][Pp][Tt]*>(?:.|\n)*?<\/[Ss][Cc][Rr][Ii][Pp][Tt]>)/gm,handler:e}),Wikifier.Parser.add({name:"styleTag",profiles:["core"],match:"<[Ss][Tt][Yy][Ll][Ee][^>]*>",lookahead:/(<[Ss][Tt][Yy][Ll][Ee]*>)((?:.|\n)*?)(<\/[Ss][Tt][Yy][Ll][Ee]>)/gm,imageMarkup:new RegExp(Patterns.cssImage,"g"),hasImageMarkup:new RegExp(Patterns.cssImage),handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);if(t&&t.index===e.matchStart){e.nextMatch=this.lookahead.lastIndex;var r=t[2];this.hasImageMarkup.test(r)&&(this.imageMarkup.lastIndex=0,r=r.replace(this.imageMarkup,function(e){var t=Wikifier.helpers.parseSquareBracketedMarkup({source:e,matchStart:0});if(t.hasOwnProperty("error")||t.pos<e.length)return e;var r=t.source;if("data:"!==r.slice(0,5)&&Story.has(r)){var n=Story.get(r);n.tags.includes("Twine.image")&&(r=n.text)}return'url("'+r.replace(/"/g,"%22")+'")'})),jQuery(document.createDocumentFragment()).append(t[1]+r+t[3]).appendTo(e.output)}}}),Wikifier.Parser.add({name:"svgTag",profiles:["core"],match:"<[Ss][Vv][Gg][^>]*>",lookahead:/(<[Ss][Vv][Gg][^>]*>(?:.|\n)*?<\/[Ss][Vv][Gg]>)/gm,namespace:"http://www.w3.org/2000/svg",handler:function(e){var t=this;this.lookahead.lastIndex=e.matchStart;var r=this.lookahead.exec(e.source);if(r&&r.index===e.matchStart){e.nextMatch=this.lookahead.lastIndex;var n=jQuery(document.createDocumentFragment()).append(r[1]);n.find("a[data-passage],image[data-passage]").each(function(r,n){var a=n.tagName.toLowerCase();try{t.processAttributeDirectives(n)}catch(t){return throwError(e.output,"svg|<"+a+">: "+t.message,e.matchText+"…")}n.hasAttribute("data-passage")&&t.processDataAttributes(n,a)}),n.appendTo(e.output)}},processAttributeDirectives:function(e){[].concat(_toConsumableArray(e.attributes)).forEach(function(t){var r=t.name,n=t.value,a="@"===r[0];if(a||r.startsWith("sc-eval:")){var i=r.slice(a?1:8);if("data-setter"===i)throw new Error('evaluation directive is not allowed on the data-setter attribute: "'+r+'"');var o=void 0;try{o=Scripting.evalTwineScript(n)}catch(e){throw new Error('bad evaluation from attribute directive "'+r+'": '+e.message)}try{e.setAttribute(i,o),e.removeAttribute(r)}catch(e){throw new Error('cannot transform attribute directive "'+r+'" into attribute "'+i+'"')}}})},processDataAttributes:function(e,t){var r=e.getAttribute("data-passage");if(null!=r){var n=Wikifier.helpers.evalPassageId(r);if(n!==r&&(r=n,e.setAttribute("data-passage",n)),""!==r)if("image"===t)"data:"!==r.slice(0,5)&&Story.has(r)&&(r=Story.get(r),r.tags.includes("Twine.image")&&e.setAttribute("href",r.text.trim()));else{var a=e.getAttribute("data-setter"),i=void 0;null!=a&&""!==(a=String(a).trim())&&(i=Wikifier.helpers.createShadowSetterCallback(Scripting.parse(a))),Story.has(r)?(e.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(r)&&e.classList.add("link-visited")):e.classList.add("link-broken"),jQuery(e).ariaClick({one:!0},function(){"function"==typeof i&&i.call(this),Engine.play(r)})}}}}),Wikifier.Parser.add({name:"htmlTag",profiles:["core"],match:"<\\w+(?:\\s+[^\\u0000-\\u001F\\u007F-\\u009F\\s\"'>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*?\"|'[^']*?'|[^\\s\"'=<>`]+))?)*\\s*\\/?>",tagRe:/^<(\w+)/,mediaTags:["audio","img","source","track","video"],nobrTags:["audio","colgroup","datalist","dl","figure","meter","ol","optgroup","picture","progress","ruby","select","table","tbody","tfoot","thead","tr","ul","video"],voidTags:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],handler:function(e){var t=this.tagRe.exec(e.matchText),r=t&&t[1],n=r&&r.toLowerCase();if(n){var a=this.voidTags.includes(n)||e.matchText.endsWith("/>"),i=this.nobrTags.includes(n),o=void 0,s=void 0;if(!a){o="<\\/"+n+"\\s*>";var u=new RegExp(o,"gim");u.lastIndex=e.matchStart,s=u.exec(e.source)}if(!a&&!s)return throwError(e.output,"cannot find a closing tag for HTML <"+r+">",e.matchText+"…");var l=e.output,c=document.createElement(e.output.tagName),d=void 0;for(c.innerHTML=e.matchText;c.firstChild;)c=c.firstChild;try{this.processAttributeDirectives(c)}catch(t){return throwError(e.output,"<"+n+">: "+t.message,e.matchText+"…")}if(c.hasAttribute("data-passage")&&(this.processDataAttributes(c,n),Config.debug&&(d=new DebugView(e.output,"html-"+n,n,e.matchText),d.modes({block:"img"===n,nonvoid:s}),l=d.output)),s){try{Wikifier.Option.push({nobr:i}),e.subWikify(c,o,{ignoreTerminatorCase:!0})}finally{Wikifier.Option.pop()}d&&jQuery(c).find(".debug.block").length>0&&d.modes({block:!0})}l.appendChild("track"===n?c.cloneNode(!0):c)}},processAttributeDirectives:function(e){[].concat(_toConsumableArray(e.attributes)).forEach(function(t){var r=t.name,n=t.value,a="@"===r[0];if(a||r.startsWith("sc-eval:")){var i=r.slice(a?1:8);if("data-setter"===i)throw new Error('evaluation directive is not allowed on the data-setter attribute: "'+r+'"');var o=void 0;try{o=Scripting.evalTwineScript(n)}catch(e){throw new Error('bad evaluation from attribute directive "'+r+'": '+e.message)}try{e.setAttribute(i,o),e.removeAttribute(r)}catch(e){throw new Error('cannot transform attribute directive "'+r+'" into attribute "'+i+'"')}}})},processDataAttributes:function(e,t){var r=e.getAttribute("data-passage");if(null!=r){var n=Wikifier.helpers.evalPassageId(r);if(n!==r&&(r=n,e.setAttribute("data-passage",n)),""!==r)if(this.mediaTags.includes(t)){if("data:"!==r.slice(0,5)&&Story.has(r)){r=Story.get(r);var a=void 0,i=void 0;switch(t){case"audio":case"video":i="Twine."+t;break;case"img":i="Twine.image";break;case"track":i="Twine.vtt";break;case"source":var o=$(e).closest("audio,picture,video");o.length&&(a=o.get(0).tagName.toLowerCase(),i="Twine."+("picture"===a?"image":a))}r.tags.includes(i)&&(e["picture"===a?"srcset":"src"]=r.text.trim())}}else{var s=e.getAttribute("data-setter"),u=void 0;null!=s&&""!==(s=String(s).trim())&&(u=Wikifier.helpers.createShadowSetterCallback(Scripting.parse(s))),Story.has(r)?(e.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(r)&&e.classList.add("link-visited")):e.classList.add("link-broken"),jQuery(e).ariaClick({one:!0},function(){"function"==typeof u&&u.call(this),Engine.play(r)})}}}})}();var Template=function(){function e(e,t){if(!(s(t)||t instanceof Array&&t.length>0&&t.every(s)))throw new TypeError("invalid template type ("+e+"); templates must be: functions, strings, or an array of either");(e instanceof Array?e:[e]).forEach(function(e){if(!o.test(e))throw new Error('invalid template name "'+e+'"');if(i.has(e))throw new Error("cannot clobber existing template ?"+e);i.set(e,t)})}function t(e){(e instanceof Array?e:[e]).forEach(function(e){return i.delete(e)})}function r(e){return i.has(e)?i.get(e):null}function n(e){return i.has(e)}function a(){return i.size}var i=new Map,o=new RegExp("^(?:"+Patterns.templateName+")$"),s=function(e){var t=void 0===e?"undefined":_typeof(e);return"function"===t||"string"===t};return Object.freeze(Object.defineProperties({},{add:{value:e},delete:{value:t},get:{value:r},has:{value:n},size:{get:a}}))}(),Macro=function(){function e(t,r,a){if(Array.isArray(t))return void t.forEach(function(t){return e(t,r,a)});if(!f.test(t))throw new Error('invalid macro name "'+t+'"');if(n(t))throw new Error("cannot clobber existing macro <<"+t+">>");if(u(t))throw new Error("cannot clobber child tag <<"+t+">> of parent macro"+(1===d[t].length?"":"s")+" <<"+d[t].join(">>, <<")+">>");try{if("object"===(void 0===r?"undefined":_typeof(r)))c[t]=a?clone(r):r;else{if(!n(r))throw new Error("cannot create alias of nonexistent macro <<"+r+">>");c[t]=a?clone(c[r]):c[r]}Object.defineProperty(c,t,{writable:!1}),c[t]._MACRO_API=!0}catch(e){throw"TypeError"===e.name?new Error("cannot clobber protected macro <<"+t+">>"):new Error("unknown error when attempting to add macro <<"+t+">>: ["+e.name+"] "+e.message)}if(c[t].hasOwnProperty("tags"))if(null==c[t].tags)o(t);else{if(!Array.isArray(c[t].tags))throw new Error('bad value for "tags" property of macro <<'+t+">>");o(t,c[t].tags)}}function t(e){if(Array.isArray(e))return void e.forEach(function(e){return t(e)});if(n(e)){c[e].hasOwnProperty("tags")&&s(e);try{Object.defineProperty(c,e,{writable:!0}),delete c[e]}catch(t){throw new Error("unknown error removing macro <<"+e+">>: "+t.message)}}else if(u(e))throw new Error("cannot remove child tag <<"+e+">> of parent macro <<"+d[e]+">>")}function r(){return 0===Object.keys(c).length}function n(e){return c.hasOwnProperty(e)}function a(e){var t=null;return n(e)&&"function"==typeof c[e].handler?t=c[e]:macros.hasOwnProperty(e)&&"function"==typeof macros[e].handler&&(t=macros[e]),t}function i(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"init";Object.keys(c).forEach(function(t){"function"==typeof c[t][e]&&c[t][e](t)}),Object.keys(macros).forEach(function(t){"function"==typeof macros[t][e]&&macros[t][e](t)})}function o(e,t){if(!e)throw new Error("no parent specified");for(var r=["/"+e,"end"+e],a=[].concat(r,Array.isArray(t)?t:[]),i=0;i<a.length;++i){var o=a[i];if(n(o))throw new Error("cannot register tag for an existing macro");u(o)?d[o].includes(e)||(d[o].push(e),d[o].sort()):d[o]=[e]}}function s(e){if(!e)throw new Error("no parent specified");Object.keys(d).forEach(function(t){var r=d[t].indexOf(e);-1!==r&&(1===d[t].length?delete d[t]:d[t].splice(r,1))})}function u(e){return d.hasOwnProperty(e)}function l(e){return u(e)?d[e]:null}var c={},d={},f=new RegExp("^(?:"+Patterns.macroName+")$");return Object.freeze(Object.defineProperties({},{add:{value:e},delete:{value:t},isEmpty:{value:r},has:{value:n},get:{value:a},init:{value:i},tags:{value:Object.freeze(Object.defineProperties({},{register:{value:o},unregister:{value:s},has:{value:u},get:{value:l}}))},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),MacroContext=function(){return function(){function e(t){_classCallCheck(this,e);var r=Object.assign({parent:null,macro:null,name:"",args:null,payload:null,parser:null,source:""},t);if(null===r.macro||""===r.name||null===r.parser)throw new TypeError("context object missing required properties");Object.defineProperties(this,{self:{value:r.macro},name:{value:r.name},args:{value:r.args},payload:{value:r.payload},source:{value:r.source},parent:{value:r.parent},parser:{value:r.parser},_output:{value:r.parser.output},_shadows:{writable:!0,value:null},_debugView:{writable:!0,value:null},_debugViewEnabled:{writable:!0,value:Config.debug}})}return _createClass(e,[{key:"contextHas",value:function(e){for(var t=this;null!==(t=t.parent);)if(e(t))return!0;return!1}},{key:"contextSelect",value:function(e){for(var t=this;null!==(t=t.parent);)if(e(t))return t;return null}},{key:"contextSelectAll",value:function(e){for(var t=[],r=this;null!==(r=r.parent);)e(r)&&t.push(r);return t}},{key:"addShadow",value:function(){var e=this;this._shadows||(this._shadows=new Set);for(var t=new RegExp("^"+Patterns.variable+"$"),r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];n.flat(1/0).forEach(function(r){if("string"!=typeof r)throw new TypeError("variable name must be a string; type: "+(void 0===r?"undefined":_typeof(r)));if(!t.test(r))throw new Error('invalid variable name "'+r+'"');e._shadows.add(r)})}},{key:"createShadowWrapper",value:function(e,t,r){var n=this,a=void 0;return"function"==typeof e&&(a={},this.shadowView.forEach(function(e){var t=e.slice(1),r="$"===e[0]?State.variables:State.temporary;a[e]=r[t]})),function(){for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];if("function"==typeof r&&r.apply(this,o),"function"==typeof e){var u=Object.keys(a),l=u.length>0?{}:null,c=Wikifier.Parser.get("macro"),d=void 0;try{u.forEach(function(e){var t=e.slice(1),r="$"===e[0]?State.variables:State.temporary;r.hasOwnProperty(t)&&(l[t]=r[t]),r[t]=a[e]}),d=c.context,c.context=n,e.apply(this,o)}finally{d!==undefined&&(c.context=d),u.forEach(function(e){var t=e.slice(1),r="$"===e[0]?State.variables:State.temporary;a[e]=r[t],l.hasOwnProperty(t)?r[t]=l[t]:delete r[t]})}}"function"==typeof t&&t.apply(this,o)}}},{key:"createDebugView",value:function(e,t){return this._debugView=new DebugView(this._output,"macro",e||this.name,t||this.source),null!==this.payload&&this.payload.length>0&&this._debugView.modes({nonvoid:!0}),this._debugViewEnabled=!0,this._debugView}},{key:"removeDebugView",value:function(){null!==this._debugView&&(this._debugView.remove(),this._debugView=null),this._debugViewEnabled=!1}},{key:"error",value:function(e,t){return throwError(this._output,"<<"+this.name+">>: "+e,t||this.source)}},{key:"output",get:function(){return this._debugViewEnabled?this.debugView.output:this._output}},{key:"shadows",get:function(){return[].concat(_toConsumableArray(this._shadows))}},{key:"shadowView",get:function(){var e=new Set;return this.contextSelectAll(function(e){return e._shadows}).forEach(function(t){return t._shadows.forEach(function(t){return e.add(t)})}),[].concat(_toConsumableArray(e))}},{key:"debugView",get:function(){return this._debugViewEnabled?null!==this._debugView?this._debugView:this.createDebugView():null}}]),e}()}();!function(){if(Macro.add("capture",{skipArgs:!0,tags:null,handler:function(){if(0===this.args.raw.length)return this.error("no story/temporary variable list specified");var e={};try{for(var t=new RegExp("("+Patterns.variable+")","g"),r=void 0;null!==(r=t.exec(this.args.raw));){var n=r[1],a=n.slice(1),i="$"===n[0]?State.variables:State.temporary;i.hasOwnProperty(a)&&(e[a]=i[a]),this.addShadow(n)}new Wikifier(this.output,this.payload[0].contents)}finally{this.shadows.forEach(function(t){var r=t.slice(1),n="$"===t[0]?State.variables:State.temporary;e.hasOwnProperty(r)?n[r]=e[r]:delete n[r]})}}}),Macro.add("set",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(e){return this.error("bad evaluation: "+("object"===(void 0===e?"undefined":_typeof(e))?e.message:e))}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("unset",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no story/temporary variable list specified");for(var e=new RegExp("State\\.(variables|temporary)\\.("+Patterns.identifier+")","g"),t=void 0;null!==(t=e.exec(this.args.full));){var r=State[t[1]],n=t[2];r.hasOwnProperty(n)&&delete r[n]}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("remember",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(e){return this.error("bad evaluation: "+("object"===(void 0===e?"undefined":_typeof(e))?e.message:e))}for(var e=storage.get("remember")||{},t=new RegExp("State\\.variables\\.("+Patterns.identifier+")","g"),r=void 0;null!==(r=t.exec(this.args.full));){var n=r[1];e[n]=State.variables[n]}if(!storage.set("remember",e))return this.error("unknown error, cannot remember: "+this.args.raw);Config.debug&&this.debugView.modes({hidden:!0})},init:function(){var e=storage.get("remember");e&&Object.keys(e).forEach(function(t){return State.variables[t]=e[t]})}}),Macro.add("forget",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no story variable list specified");for(var e=storage.get("remember"),t=new RegExp("State\\.variables\\.("+Patterns.identifier+")","g"),r=void 0,n=!1;null!==(r=t.exec(this.args.full));){var a=r[1];State.variables.hasOwnProperty(a)&&delete State.variables[a],e&&e.hasOwnProperty(a)&&(n=!0,delete e[a])}if(n)if(0===Object.keys(e).length){if(!storage.delete("remember"))return this.error("unknown error, cannot update remember store")}else if(!storage.set("remember",e))return this.error("unknown error, cannot update remember store");Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("run","set"),Macro.add("script",{skipArgs:!0,tags:null,handler:function(){var e=document.createDocumentFragment();try{Scripting.evalJavaScript(this.payload[0].contents,e)}catch(e){return this.error("bad evaluation: "+("object"===(void 0===e?"undefined":_typeof(e))?e.message:e))}Config.debug&&this.createDebugView(),e.hasChildNodes()&&this.output.appendChild(e)}}),Macro.add("include",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var e=void 0;if(e="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],!Story.has(e))return this.error('passage "'+e+'" does not exist');Config.debug&&this.debugView.modes({block:!0}),e=Story.get(e);var t=void 0;t=this.args[1]?jQuery(document.createElement(this.args[1])).addClass(e.domId+" macro-"+this.name).attr("data-passage",e.title).appendTo(this.output):jQuery(this.output),t.wiki(e.processText())}}),Macro.add("nobr",{skipArgs:!0,tags:null,handler:function(){
new Wikifier(this.output,this.payload[0].contents.replace(/^\n+|\n+$/g,"").replace(/\n+/g," "))}}),Macro.add(["print","=","-"],{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{var e=toStringOrDefault(Scripting.evalJavaScript(this.args.full),null);null!==e&&new Wikifier(this.output,"-"===this.name?Util.escape(e):e)}catch(e){return this.error("bad evaluation: "+("object"===(void 0===e?"undefined":_typeof(e))?e.message:e))}}}),Macro.add("silently",{skipArgs:!0,tags:null,handler:function(){var e=document.createDocumentFragment();if(new Wikifier(e,this.payload[0].contents.trim()),Config.debug)this.debugView.modes({block:!0,hidden:!0}),this.output.appendChild(e);else{var t=[].concat(_toConsumableArray(e.querySelectorAll(".error"))).map(function(e){return e.textContent});if(t.length>0)return this.error("error"+(1===t.length?"":"s")+" within contents ("+t.join("; ")+")")}}}),Macro.add("display","include"),Macro.add("if",{skipArgs:!0,tags:["elseif","else"],handler:function(){var e=void 0;try{var t=this.payload.length;for(e=0;e<t;++e)switch(this.payload[e].name){case"else":if(this.payload[e].args.raw.length>0)return/^\s*if\b/i.test(this.payload[e].args.raw)?this.error('whitespace is not allowed between the "else" and "if" in <<elseif>> clause'+(e>0?" (#"+e+")":"")):this.error("<<else>> does not accept a conditional expression (perhaps you meant to use <<elseif>>), invalid: "+this.payload[e].args.raw);if(e+1!==t)return this.error("<<else>> must be the final clause");break;default:if(0===this.payload[e].args.full.length)return this.error("no conditional expression specified for <<"+this.payload[e].name+">> clause"+(e>0?" (#"+e+")":""));if(Config.macros.ifAssignmentError&&/[^!=&^|<>*\/%+-]=[^=>]/.test(this.payload[e].args.full))return this.error("assignment operator found within <<"+this.payload[e].name+">> clause"+(e>0?" (#"+e+")":"")+" (perhaps you meant to use an equality operator: ==, ===, eq, is), invalid: "+this.payload[e].args.raw)}var r=Scripting.evalJavaScript,n=!1;for(e=0;e<t;++e){if(Config.debug&&this.createDebugView(this.payload[e].name,this.payload[e].source).modes({nonvoid:!1}),"else"===this.payload[e].name||r(this.payload[e].args.full)){n=!0,new Wikifier(this.output,this.payload[e].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++e;e<t;++e)this.createDebugView(this.payload[e].name,this.payload[e].source).modes({nonvoid:!1,hidden:!0,invalid:!0});this.createDebugView("/"+this.name,"<</"+this.name+">>").modes({nonvoid:!1,hidden:!n,invalid:!n})}}catch(t){return this.error("bad conditional expression in <<"+(0===e?"if":"elseif")+">> clause"+(e>0?" (#"+e+")":"")+": "+("object"===(void 0===t?"undefined":_typeof(t))?t.message:t))}}}),Macro.add("switch",{skipArgs:["switch"],tags:["case","default"],handler:function(){if(0===this.args.full.length)return this.error("no expression specified");var e=this.payload.length;if(1===e)return this.error("no cases specified");var t=void 0;for(t=1;t<e;++t)switch(this.payload[t].name){case"default":if(this.payload[t].args.length>0)return this.error("<<default>> does not accept values, invalid: "+this.payload[t].args.raw);if(t+1!==e)return this.error("<<default>> must be the final case");break;default:if(0===this.payload[t].args.length)return this.error("no value(s) specified for <<"+this.payload[t].name+">> (#"+t+")")}var r=void 0;try{r=Scripting.evalJavaScript(this.args.full)}catch(e){return this.error("bad evaluation: "+("object"===(void 0===e?"undefined":_typeof(e))?e.message:e))}var n=this.debugView,a=!1;for(Config.debug&&n.modes({nonvoid:!1,hidden:!0}),t=1;t<e;++t){if(Config.debug&&this.createDebugView(this.payload[t].name,this.payload[t].source).modes({nonvoid:!1}),"default"===this.payload[t].name||this.payload[t].args.some(function(e){return e===r})){a=!0,new Wikifier(this.output,this.payload[t].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++t;t<e;++t)this.createDebugView(this.payload[t].name,this.payload[t].source).modes({nonvoid:!1,hidden:!0,invalid:!0});n.modes({nonvoid:!1,hidden:!0,invalid:!a}),this.createDebugView("/"+this.name,"<</"+this.name+">>").modes({nonvoid:!1,hidden:!0,invalid:!a})}}}),Macro.add("for",{skipArgs:!0,tags:null,_hasRangeRe:new RegExp("^\\S"+Patterns.anyChar+"*?\\s+range\\s+\\S"+Patterns.anyChar+"*?$"),_rangeRe:new RegExp("^(?:State\\.(variables|temporary)\\.("+Patterns.identifier+")\\s*,\\s*)?State\\.(variables|temporary)\\.("+Patterns.identifier+")\\s+range\\s+(\\S"+Patterns.anyChar+"*?)$"),_3PartRe:/^([^;]*?)\s*;\s*([^;]*?)\s*;\s*([^;]*?)$/,handler:function(){var e=this.args.full.trim(),t=this.payload[0].contents.replace(/\n$/,"");if(0===e.length)this.self._handleFor.call(this,t,null,!0,null);else if(this.self._hasRangeRe.test(e)){var r=e.match(this.self._rangeRe);if(null===r)return this.error("invalid range form syntax, format: [index ,] value range collection");this.self._handleForRange.call(this,t,{type:r[1],name:r[2]},{type:r[3],name:r[4]},r[5])}else{var n=void 0,a=void 0,i=void 0;if(-1===e.indexOf(";")){if(/^\S+\s+in\s+\S+/i.test(e))return this.error("invalid syntax, for…in is not supported; see: for…range");if(/^\S+\s+of\s+\S+/i.test(e))return this.error("invalid syntax, for…of is not supported; see: for…range");a=e}else{var o=e.match(this.self._3PartRe);if(null===o)return this.error("invalid 3-part conditional form syntax, format: [init] ; [condition] ; [post]");n=o[1],a=o[2].trim(),i=o[3],0===a.length&&(a=!0)}this.self._handleFor.call(this,t,n,a,i)}},_handleFor:function(e,t,r,n){var a=Scripting.evalJavaScript,i=!0,o=Config.macros.maxLoopIterations;Config.debug&&this.debugView.modes({block:!0});try{if(TempState.break=null,t)try{a(t)}catch(e){return this.error("bad init expression: "+("object"===(void 0===e?"undefined":_typeof(e))?e.message:e))}for(;a(r);){if(--o<0)return this.error("exceeded configured maximum loop iterations ("+Config.macros.maxLoopIterations+")");if(new Wikifier(this.output,i?e.replace(/^\n/,""):e),i&&(i=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}if(n)try{a(n)}catch(e){return this.error("bad post expression: "+("object"===(void 0===e?"undefined":_typeof(e))?e.message:e))}}}catch(e){return this.error("bad conditional expression: "+("object"===(void 0===e?"undefined":_typeof(e))?e.message:e))}finally{TempState.break=null}},_handleForRange:function(e,t,r,n){var a=!0,i=void 0;try{i=this.self._toRangeList(n)}catch(e){return this.error(e.message)}Config.debug&&this.debugView.modes({block:!0});try{TempState.break=null;for(var o=0;o<i.length;++o)if(t.name&&(State[t.type][t.name]=i[o][0]),State[r.type][r.name]=i[o][1],new Wikifier(this.output,a?e.replace(/^\n/,""):e),a&&(a=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}}catch(e){return this.error("object"===(void 0===e?"undefined":_typeof(e))?e.message:e)}finally{TempState.break=null}},_toRangeList:function(e){var t=Scripting.evalJavaScript,r=void 0;try{r=t("{"===e[0]?"("+e+")":e)}catch(e){if("object"!==(void 0===e?"undefined":_typeof(e)))throw new Error("bad range expression: "+e);throw e.message="bad range expression: "+e.message,e}var n=void 0;switch(void 0===r?"undefined":_typeof(r)){case"string":n=[];for(var a=0;a<r.length;){var i=Util.charAndPosAt(r,a);n.push([a,i.char]),a=1+i.end}break;case"object":if(Array.isArray(r))n=r.map(function(e,t){return[t,e]});else if(r instanceof Set)n=[].concat(_toConsumableArray(r)).map(function(e,t){return[t,e]});else if(r instanceof Map)n=[].concat(_toConsumableArray(r.entries()));else{if("Object"!==Util.toStringTag(r))throw new Error("unsupported range expression type: "+Util.toStringTag(r));n=Object.keys(r).map(function(e){return[e,r[e]]})}break;default:throw new Error("unsupported range expression type: "+(void 0===r?"undefined":_typeof(r)))}return n}}),Macro.add(["break","continue"],{skipArgs:!0,handler:function(){if(!this.contextHas(function(e){return"for"===e.name}))return this.error("must only be used in conjunction with its parent macro <<for>>");TempState.break="continue"===this.name?1:2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["button","link"],{isAsync:!0,tags:null,handler:function(){var e=this;if(0===this.args.length)return this.error("no "+("button"===this.name?"button":"link")+" text specified");var t=jQuery(document.createElement("button"===this.name?"button":"a")),r=void 0;if("object"===_typeof(this.args[0]))if(this.args[0].isImage){var n=jQuery(document.createElement("img")).attr("src",this.args[0].source).appendTo(t);this.args[0].hasOwnProperty("passage")&&n.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&n.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&n.attr("align",this.args[0].align),r=this.args[0].link}else t.append(document.createTextNode(this.args[0].text)),r=this.args[0].link;else t.wikiWithOptions({profile:"core"},this.args[0]),r=this.args.length>1?this.args[1]:undefined;null!=r?(t.attr("data-passage",r),Story.has(r)?(t.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(r)&&t.addClass("link-visited")):t.addClass("link-broken")):t.addClass("link-internal"),t.addClass("macro-"+this.name).ariaClick({namespace:".macros",one:null!=r},this.createShadowWrapper(""!==this.payload[0].contents?function(){return Wikifier.wikifyEval(e.payload[0].contents.trim())}:null,null!=r?function(){return Engine.play(r)}:null)).appendTo(this.output)}}),Macro.add("checkbox",{isAsync:!0,handler:function(){if(this.args.length<3){var e=[];return this.args.length<1&&e.push("variable name"),this.args.length<2&&e.push("unchecked value"),this.args.length<3&&e.push("checked value"),this.error("no "+e.join(" or ")+" specified")}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'+this.args[0]+'" is missing its sigil ($ or _)');var r=Util.slugify(t),n=this.args[1],a=this.args[2],i=document.createElement("input");jQuery(i).attr({id:this.name+"-"+r,name:this.name+"-"+r,type:"checkbox",tabindex:0}).addClass("macro-"+this.name).on("change.macros",this.createShadowWrapper(function(){State.setVar(t,this.checked?a:n)})).appendTo(this.output),this.args.length>3&&"checked"===this.args[3]?(i.checked=!0,State.setVar(t,a)):State.setVar(t,n)}}),Macro.add(["cycle","listbox"],{isAsync:!0,skipArgs:["optionsfrom"],tags:["option","optionsfrom"],handler:function(){var e=this;if(0===this.args.length)return this.error("no variable name specified");if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'+this.args[0]+'" is missing its sigil ($ or _)');var r=Util.slugify(t),n=this.payload.length;if(1===n)return this.error("no options specified");for(var a=this.args.length>1&&"autoselect"===this.args[1],i=[],o={option:0,optionsfrom:0},s=-1,u=1;u<n;++u){var l=this.payload[u];if("option"===l.name){if(++o.option,0===l.args.length)return this.error("no arguments specified for <<"+l.name+">> (#"+o.option+")");if(i.push({label:String(l.args[0]),value:1===l.args.length?l.args[0]:l.args[1]}),l.args.length>2&&"selected"===l.args[2]){if(a)return this.error("cannot specify both the autoselect and selected keywords");if(-1!==s)return this.error("multiple selected keywords specified for <<"+l.name+">> (#"+(s+1)+" & #"+o.option+")");s=i.length-1}}else{var c=function(){if(++o.optionsfrom,0===l.args.full.length)return{v:e.error("no expression specified for <<"+l.name+">> (#"+o.optionsfrom+")")};var t=void 0;try{var r=l.args.full;t=Scripting.evalJavaScript("{"===r[0]?"("+r+")":r)}catch(t){return{v:e.error("bad evaluation: "+("object"===(void 0===t?"undefined":_typeof(t))?t.message:t))}}if("object"!==(void 0===t?"undefined":_typeof(t))||null===t)return{v:e.error("expression must yield a supported collection or generic object (type: "+(null===t?"null":void 0===t?"undefined":_typeof(t))+")")};if(t instanceof Array||t instanceof Set)t.forEach(function(e){return i.push({label:String(e),value:e})});else if(t instanceof Map)t.forEach(function(e,t){return i.push({label:String(t),value:e})});else{var n=Util.toStringTag(t);if("Object"!==n)return{v:e.error("expression must yield a supported collection or generic object (object type: "+n+")")};Object.keys(t).forEach(function(e){return i.push({label:e,value:t[e]})})}}();if("object"===(void 0===c?"undefined":_typeof(c)))return c.v}}if(-1===s)if(a){var d=Util.sameValueZero,f=State.getVar(t),p=i.findIndex(function(e){return d(e.value,f)});s=-1===p?0:p}else s=0;if("cycle"===this.name){var h=s;jQuery(document.createElement("a")).wikiWithOptions({profile:"core"},i[s].label).attr("id",this.name+"-"+r).addClass("macro-"+this.name).ariaClick({namespace:".macros"},this.createShadowWrapper(function(){h=(h+1)%i.length,$(this).empty().wikiWithOptions({profile:"core"},i[h].label),State.setVar(t,i[h].value)})).appendTo(this.output)}else{var g=jQuery(document.createElement("select"));i.forEach(function(e,t){jQuery(document.createElement("option")).val(t).text(e.label).appendTo(g)}),g.attr({id:this.name+"-"+r,name:this.name+"-"+r,tabindex:0}).addClass("macro-"+this.name).val(s).on("change.macros",this.createShadowWrapper(function(){State.setVar(t,i[Number(this.value)].value)})).appendTo(this.output)}State.setVar(t,i[s].value)}}),Macro.add(["linkappend","linkprepend","linkreplace"],{isAsync:!0,tags:null,handler:function(){var e=this;if(0===this.args.length)return this.error("no link text specified");var t=jQuery(document.createElement("a")),r=jQuery(document.createElement("span")),n=this.args.length>1&&/^(?:transition|t8n)$/.test(this.args[1]);t.wikiWithOptions({profile:"core"},this.args[0]).addClass("link-internal macro-"+this.name).ariaClick({namespace:".macros",one:!0},this.createShadowWrapper(function(){if("linkreplace"===e.name?t.remove():t.wrap('<span class="macro-'+e.name+'"></span>').replaceWith(function(){return t.html()}),""!==e.payload[0].contents){var a=document.createDocumentFragment();new Wikifier(a,e.payload[0].contents),r.append(a)}n&&setTimeout(function(){return r.removeClass("macro-"+e.name+"-in")},Engine.minDomActionDelay)})).appendTo(this.output),r.addClass("macro-"+this.name+"-insert"),n&&r.addClass("macro-"+this.name+"-in"),"linkprepend"===this.name?r.insertBefore(t):r.insertAfter(t)}}),Macro.add("radiobutton",{isAsync:!0,handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("variable name"),this.args.length<2&&e.push("checked value"),this.error("no "+e.join(" or ")+" specified")}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'+this.args[0]+'" is missing its sigil ($ or _)');var r=Util.slugify(t),n=this.args[1],a=document.createElement("input");TempState.hasOwnProperty(this.name)||(TempState[this.name]={}),TempState[this.name].hasOwnProperty(r)||(TempState[this.name][r]=0),jQuery(a).attr({id:this.name+"-"+r+"-"+TempState[this.name][r]++,name:this.name+"-"+r,type:"radio",tabindex:0}).addClass("macro-"+this.name).on("change.macros",this.createShadowWrapper(function(){this.checked&&State.setVar(t,n)})).appendTo(this.output),this.args.length>2&&"checked"===this.args[2]&&(a.checked=!0,State.setVar(t,n))}}),Macro.add("textarea",{isAsync:!0,handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("variable name"),this.args.length<2&&e.push("default value"),this.error("no "+e.join(" or ")+" specified")}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'+this.args[0]+'" is missing its sigil ($ or _)');Config.debug&&this.debugView.modes({block:!0});var r=Util.slugify(t),n=this.args[1],a="autofocus"===this.args[2],i=document.createElement("textarea");jQuery(i).attr({id:this.name+"-"+r,name:this.name+"-"+r,rows:4,tabindex:0}).addClass("macro-"+this.name).on("change.macros",this.createShadowWrapper(function(){State.setVar(t,this.value)})).appendTo(this.output),State.setVar(t,n),i.textContent=n,a&&(i.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:"+i.id]=function(e){delete postdisplay[e],setTimeout(function(){return i.focus()},Engine.minDomActionDelay)})}}),Macro.add("textbox",{isAsync:!0,handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("variable name"),this.args.length<2&&e.push("default value"),this.error("no "+e.join(" or ")+" specified")}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'+this.args[0]+'" is missing its sigil ($ or _)');Config.debug&&this.debugView.modes({block:!0});var r=Util.slugify(t),n=this.args[1],a=document.createElement("input"),i=!1,o=void 0;this.args.length>3?(o=this.args[2],i="autofocus"===this.args[3]):this.args.length>2&&("autofocus"===this.args[2]?i=!0:o=this.args[2]),"object"===(void 0===o?"undefined":_typeof(o))&&(o=o.link),jQuery(a).attr({id:this.name+"-"+r,name:this.name+"-"+r,type:"text",tabindex:0}).addClass("macro-"+this.name).on("change.macros",this.createShadowWrapper(function(){State.setVar(t,this.value)})).on("keypress.macros",this.createShadowWrapper(function(e){13===e.which&&(e.preventDefault(),State.setVar(t,this.value),null!=o&&Engine.play(o))})).appendTo(this.output),State.setVar(t,n),a.value=n,i&&(a.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:"+a.id]=function(e){delete postdisplay[e],setTimeout(function(){return a.focus()},Engine.minDomActionDelay)})}}),Macro.add("click","link"),Macro.add("actions",{handler:function(){for(var e=jQuery(document.createElement("ul")).addClass(this.name).appendTo(this.output),t=0;t<this.args.length;++t){var r=void 0,n=void 0,a=void 0,i=void 0;"object"===_typeof(this.args[t])?this.args[t].isImage?(a=jQuery(document.createElement("img")).attr("src",this.args[t].source),this.args[t].hasOwnProperty("passage")&&a.attr("data-passage",this.args[t].passage),this.args[t].hasOwnProperty("title")&&a.attr("title",this.args[t].title),this.args[t].hasOwnProperty("align")&&a.attr("align",this.args[t].align),r=this.args[t].link,i=this.args[t].setFn):(n=this.args[t].text,r=this.args[t].link,i=this.args[t].setFn):n=r=this.args[t],State.variables.hasOwnProperty("#actions")&&State.variables["#actions"].hasOwnProperty(r)&&State.variables["#actions"][r]||jQuery(Wikifier.createInternalLink(jQuery(document.createElement("li")).appendTo(e),r,null,function(e,t){return function(){State.variables.hasOwnProperty("#actions")||(State.variables["#actions"]={}),State.variables["#actions"][e]=!0,"function"==typeof t&&t()}}(r,i))).addClass("macro-"+this.name).append(a||document.createTextNode(n))}}}),Macro.add(["back","return"],{handler:function(){if(this.args.length>1)return this.error("too many arguments specified, check the documentation for details");var e=-1,t=void 0,r=void 0,n=void 0;if(1===this.args.length&&("object"===_typeof(this.args[0])?this.args[0].isImage?(n=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&n.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&n.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&n.attr("align",this.args[0].align),this.args[0].hasOwnProperty("link")&&(t=this.args[0].link)):1===this.args[0].count?t=this.args[0].link:(r=this.args[0].text,t=this.args[0].link):1===this.args.length&&(r=this.args[0])),null==t){for(var a=State.length-2;a>=0;--a)if(State.history[a].title!==State.passage){e=a,t=State.history[a].title;break}if(null==t&&"return"===this.name)for(var i=State.expired.length-1;i>=0;--i)if(State.expired[i]!==State.passage){t=State.expired[i];break}}else{if(!Story.has(t))return this.error('passage "'+t+'" does not exist');if("back"===this.name){for(var o=State.length-2;o>=0;--o)if(State.history[o].title===t){e=o;break}if(-1===e)return this.error('cannot find passage "'+t+'" in the current story history')}}if(null==t)return this.error("cannot find passage");var s=void 0;s="back"!==this.name||-1!==e?jQuery(document.createElement("a")).addClass("link-internal").ariaClick({one:!0},"return"===this.name?function(){return Engine.play(t)}:function(){return Engine.goTo(e)}):jQuery(document.createElement("span")).addClass("link-disabled"),s.addClass("macro-"+this.name).append(n||document.createTextNode(r||L10n.get("macro"+this.name.toUpperFirst()+"Text"))).appendTo(this.output)}}),Macro.add("choice",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var e=State.passage,t=void 0,r=void 0,n=void 0,a=void 0;if(1===this.args.length?"object"===_typeof(this.args[0])?this.args[0].isImage?(n=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&n.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&n.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&n.attr("align",this.args[0].align),t=this.args[0].link,a=this.args[0].setFn):(r=this.args[0].text,t=this.args[0].link,a=this.args[0].setFn):r=t=this.args[0]:(t=this.args[0],r=this.args[1]),State.variables.hasOwnProperty("#choice")&&State.variables["#choice"].hasOwnProperty(e)&&State.variables["#choice"][e])return void jQuery(document.createElement("span")).addClass("link-disabled macro-"+this.name).attr("tabindex",-1).append(n||document.createTextNode(r)).appendTo(this.output);jQuery(Wikifier.createInternalLink(this.output,t,null,function(){State.variables.hasOwnProperty("#choice")||(State.variables["#choice"]={}),State.variables["#choice"][e]=!0,"function"==typeof a&&a()})).addClass("macro-"+this.name).append(n||document.createTextNode(r))}}),Macro.add(["addclass","toggleclass"],{handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("selector"),this.args.length<2&&e.push("class names"),this.error("no "+e.join(" or ")+" specified")}var t=jQuery(this.args[0]);if(0===t.length)return this.error('no elements matched the selector "'+this.args[0]+'"');switch(this.name){case"addclass":t.addClass(this.args[1].trim());break;case"toggleclass":t.toggleClass(this.args[1].trim())}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeclass",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=jQuery(this.args[0]);if(0===e.length)return this.error('no elements matched the selector "'+this.args[0]+'"');this.args.length>1?e.removeClass(this.args[1].trim()):e.removeClass(),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("copy",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=jQuery(this.args[0]);if(0===e.length)return this.error('no elements matched the selector "'+this.args[0]+'"');jQuery(this.output).append(e.html()),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["append","prepend","replace"],{tags:null,handler:function(){var e=this;if(0===this.args.length)return this.error("no selector specified");var t=jQuery(this.args[0]);if(0===t.length)return this.error('no elements matched the selector "'+this.args[0]+'"');if(""!==this.payload[0].contents){var r=this.args.length>1&&/^(?:transition|t8n)$/.test(this.args[1]),n=void 0;switch(r?(n=jQuery(document.createElement("span")),n.addClass("macro-"+this.name+"-insert macro-"+this.name+"-in"),setTimeout(function(){return n.removeClass("macro-"+e.name+"-in")},Engine.minDomActionDelay)):n=jQuery(document.createDocumentFragment()),n.wiki(this.payload[0].contents),this.name){case"replace":t.empty();case"append":t.append(n);break;case"prepend":t.prepend(n)}}else"replace"===this.name&&t.empty();Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("remove",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=jQuery(this.args[0]);if(0===e.length)return this.error('no elements matched the selector "'+this.args[0]+'"');e.remove(),Config.debug&&this.debugView.modes({hidden:!0})}}),Has.audio){var e=function(e,t){return'only one playback action allowed per invocation, "'+e+'" cannot be combined with "'+t+'"'};Macro.add("audio",{handler:function(){if(this.args.length<2){var t=[];return this.args.length<1&&t.push("track and/or group IDs"),this.args.length<2&&t.push("actions"),this.error("no "+t.join(" or ")+" specified")}var r=void 0;try{r=SimpleAudio.select(this.args[0])}catch(e){return this.error(e.message)}for(var n=this.args.slice(1),a=void 0,i=5,o=void 0,s=void 0,u=void 0,l=void 0,c=void 0,d=void 0;n.length>0;){var f=n.shift(),p=void 0;switch(f){case"load":case"pause":case"play":case"stop":case"unload":if(a)return this.error(e(f,a));a=f;break;case"fadein":if(a)return this.error(e(f,a));a="fade",o=1;break;case"fadeout":if(a)return this.error(e(f,a));a="fade",o=0;break;case"fadeto":if(a)return this.error(e(f,a));if(0===n.length)return this.error("fadeto missing required level value");if(a="fade",p=n.shift(),o=Number.parseFloat(p),Number.isNaN(o)||!Number.isFinite(o))return this.error("cannot parse fadeto: "+p);break;case"fadeoverto":if(a)return this.error(e(f,a));if(n.length<2){var h=[];return n.length<1&&h.push("seconds"),n.length<2&&h.push("level"),this.error("fadeoverto missing required "+h.join(" and ")+" value"+(h.length>1?"s":""))}if(a="fade",p=n.shift(),i=Number.parseFloat(p),Number.isNaN(i)||!Number.isFinite(i))return this.error("cannot parse fadeoverto: "+p);if(p=n.shift(),o=Number.parseFloat(p),Number.isNaN(o)||!Number.isFinite(o))return this.error("cannot parse fadeoverto: "+p);break;case"volume":if(0===n.length)return this.error("volume missing required level value");if(p=n.shift(),d=Number.parseFloat(p),Number.isNaN(d)||!Number.isFinite(d))return this.error("cannot parse volume: "+p);break;case"mute":case"unmute":u="mute"===f;break;case"time":if(0===n.length)return this.error("time missing required seconds value");if(p=n.shift(),c=Number.parseFloat(p),Number.isNaN(c)||!Number.isFinite(c))return this.error("cannot parse time: "+p);break;case"loop":case"unloop":s="loop"===f;break;case"goto":if(0===n.length)return this.error("goto missing required passage title");if(p=n.shift(),l="object"===(void 0===p?"undefined":_typeof(p))?p.link:p,!Story.has(l))return this.error('passage "'+l+'" does not exist');break;default:return this.error("unknown action: "+f)}}try{if(null!=d&&r.volume(d),null!=c&&r.time(c),null!=u&&r.mute(u),null!=s&&r.loop(s),null!=l){var g="ended.macros.macro-"+this.name+"_goto";r.off(g).one(g,function(){r.off(g),Engine.play(l)})}switch(a){case"fade":r.fade(i,o);break;case"load":r.load();break;case"pause":r.pause();break;case"play":r.playWhenAllowed();break;case"stop":r.stop();break;case"unload":r.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(e){return this.error("error executing action: "+e.message)}}}),Macro.add("cacheaudio",{handler:function(){var e=this;if(this.args.length<2){var t=[];return this.args.length<1&&t.push("track ID"),this.args.length<2&&t.push("sources"),this.error("no "+t.join(" or ")+" specified")}var r=String(this.args[0]).trim(),n=/^format:\s*([\w-]+)\s*;\s*/i;try{SimpleAudio.tracks.add(r,this.args.slice(1).map(function(t){if(n.test(t)){if(Config.debug)return e.error('track ID "'+r+'": format specifier migration required, "format:formatId;" → "formatId|"');t=t.replace(n,"$1|")}return t}))}catch(e){return this.error(e.message)}if(Config.debug&&!SimpleAudio.tracks.get(r).hasSource())return this.error('track ID "'+r+'": no supported audio sources found');Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("createaudiogroup",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no group ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var e=String(this.args[0]).trim(),t=[],r=1,n=this.payload.length;r<n;++r){if(this.payload[r].args.length<1)return this.error("no track ID specified");t.push(String(this.payload[r].args[0]).trim()),Config.debug&&this.createDebugView(this.payload[r].name,this.payload[r].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.groups.add(e,t)}catch(e){return this.error(e.message)}Config.debug&&this.createDebugView("/"+this.name,"<</"+this.name+">>").modes({nonvoid:!1,hidden:!0})}}),Macro.add("createplaylist",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no list ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");var e=Macro.get("playlist");if(null!==e.from&&"createplaylist"!==e.from)return this.error("a playlist has already been defined with <<setplaylist>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var t=String(this.args[0]).trim(),r=[],n=1,a=this.payload.length;n<a;++n){if(0===this.payload[n].args.length)return this.error("no track ID specified");for(var i={id:String(this.payload[n].args[0]).trim()},o=this.payload[n].args.slice(1);o.length>0;){var s=o.shift(),u=void 0,l=void 0;switch(s){case"copy":case"own":i.own=!0;break;case"rate":o.length>0&&o.shift();break;case"volume":if(0===o.length)return this.error("volume missing required level value");if(u=o.shift(),l=Number.parseFloat(u),Number.isNaN(l)||!Number.isFinite(l))return this.error("cannot parse volume: "+u);i.volume=l;break;default:return this.error("unknown action: "+s)}}r.push(i),Config.debug&&this.createDebugView(this.payload[n].name,this.payload[n].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.lists.add(t,r)}catch(e){return this.error(e.message)}null===e.from&&(e.from="createplaylist"),Config.debug&&this.createDebugView("/"+this.name,"<</"+this.name+">>").modes({nonvoid:!1,hidden:!0})}}),Macro.add("masteraudio",{handler:function(){if(0===this.args.length)return this.error("no actions specified");for(var t=this.args.slice(0),r=void 0,n=void 0,a=void 0,i=void 0;t.length>0;){var o=t.shift(),s=void 0;switch(o){case"load":case"stop":case"unload":if(r)return this.error(e(o,r));r=o;break;case"mute":case"unmute":n="mute"===o;break;case"muteonhide":case"nomuteonhide":a="muteonhide"===o;break;case"volume":if(0===t.length)return this.error("volume missing required level value");if(s=t.shift(),i=Number.parseFloat(s),Number.isNaN(i)||!Number.isFinite(i))return this.error("cannot parse volume: "+s);break;default:return this.error("unknown action: "+o)}}try{switch(null!=n&&SimpleAudio.mute(n),null!=a&&SimpleAudio.muteOnHidden(a),null!=i&&SimpleAudio.volume(i),r){case"load":SimpleAudio.load();break;case"stop":SimpleAudio.stop();break;case"unload":SimpleAudio.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(e){return this.error("error executing action: "+e.message)}}}),Macro.add("playlist",{from:null,handler:function(){var t=this.self.from;if(null===t)return this.error("no playlists have been created");var r=void 0,n=void 0;if("createplaylist"===t){if(this.args.length<2){var a=[];return this.args.length<1&&a.push("list ID"),this.args.length<2&&a.push("actions"),this.error("no "+a.join(" or ")+" specified")}var i=String(this.args[0]).trim();if(!SimpleAudio.lists.has(i))return this.error('playlist "'+i+'" does not exist');r=SimpleAudio.lists.get(i),n=this.args.slice(1)}else{if(0===this.args.length)return this.error("no actions specified");r=SimpleAudio.lists.get("setplaylist"),n=this.args.slice(0)}for(var o=void 0,s=5,u=void 0,l=void 0,c=void 0,d=void 0,f=void 0;n.length>0;){var p=n.shift(),h=void 0;switch(p){case"load":case"pause":case"play":case"skip":case"stop":case"unload":if(o)return this.error(e(p,o));o=p;break
;case"fadein":if(o)return this.error(e(p,o));o="fade",u=1;break;case"fadeout":if(o)return this.error(e(p,o));o="fade",u=0;break;case"fadeto":if(o)return this.error(e(p,o));if(0===n.length)return this.error("fadeto missing required level value");if(o="fade",h=n.shift(),u=Number.parseFloat(h),Number.isNaN(u)||!Number.isFinite(u))return this.error("cannot parse fadeto: "+h);break;case"fadeoverto":if(o)return this.error(e(p,o));if(n.length<2){var g=[];return n.length<1&&g.push("seconds"),n.length<2&&g.push("level"),this.error("fadeoverto missing required "+g.join(" and ")+" value"+(g.length>1?"s":""))}if(o="fade",h=n.shift(),s=Number.parseFloat(h),Number.isNaN(s)||!Number.isFinite(s))return this.error("cannot parse fadeoverto: "+h);if(h=n.shift(),u=Number.parseFloat(h),Number.isNaN(u)||!Number.isFinite(u))return this.error("cannot parse fadeoverto: "+h);break;case"volume":if(0===n.length)return this.error("volume missing required level value");if(h=n.shift(),f=Number.parseFloat(h),Number.isNaN(f)||!Number.isFinite(f))return this.error("cannot parse volume: "+h);break;case"mute":case"unmute":c="mute"===p;break;case"loop":case"unloop":l="loop"===p;break;case"shuffle":case"unshuffle":d="shuffle"===p;break;default:return this.error("unknown action: "+p)}}try{switch(null!=f&&r.volume(f),null!=c&&r.mute(c),null!=l&&r.loop(l),null!=d&&r.shuffle(d),o){case"fade":r.fade(s,u);break;case"load":r.load();break;case"pause":r.pause();break;case"play":r.playWhenAllowed();break;case"skip":r.skip();break;case"stop":r.stop();break;case"unload":r.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(e){return this.error("error executing action: "+e.message)}}}),Macro.add("removeaudiogroup",{handler:function(){if(0===this.args.length)return this.error("no group ID specified");var e=String(this.args[0]).trim();if(!SimpleAudio.groups.has(e))return this.error('group "'+e+'" does not exist');SimpleAudio.groups.delete(e),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeplaylist",{handler:function(){if(0===this.args.length)return this.error("no list ID specified");var e=String(this.args[0]).trim();if(!SimpleAudio.lists.has(e))return this.error('playlist "'+e+'" does not exist');SimpleAudio.lists.delete(e),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("waitforaudio",{skipArgs:!0,handler:function(){SimpleAudio.loadWithScreen()}}),Macro.add("setplaylist",{handler:function(){if(0===this.args.length)return this.error("no track ID(s) specified");var e=Macro.get("playlist");if(null!==e.from&&"setplaylist"!==e.from)return this.error("playlists have already been defined with <<createplaylist>>");try{SimpleAudio.lists.add("setplaylist",this.args.slice(0))}catch(e){return this.error(e.message)}null===e.from&&(e.from="setplaylist"),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("stopallaudio",{skipArgs:!0,handler:function(){SimpleAudio.select(":all").stop(),Config.debug&&this.debugView.modes({hidden:!0})}})}else Macro.add(["audio","cacheaudio","createaudiogroup","createplaylist","masteraudio","playlist","removeaudiogroup","removeplaylist","waitforaudio","setplaylist","stopallaudio"],{skipArgs:!0,handler:function(){Config.debug&&this.debugView.modes({hidden:!0})}});Macro.add("goto",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var e=void 0;if(e="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],!Story.has(e))return this.error('passage "'+e+'" does not exist');setTimeout(function(){return Engine.play(e)},Engine.minDomActionDelay)}}),Macro.add("repeat",{isAsync:!0,tags:null,timers:new Set,handler:function(){var e=this;if(0===this.args.length)return this.error("no time value specified");var t=void 0;try{t=Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0]))}catch(e){return this.error(e.message)}Config.debug&&this.debugView.modes({block:!0});var r=this.args.length>1&&/^(?:transition|t8n)$/.test(this.args[1]),n=jQuery(document.createElement("span")).addClass("macro-"+this.name).appendTo(this.output);this.self.registerInterval(this.createShadowWrapper(function(){var t=document.createDocumentFragment();new Wikifier(t,e.payload[0].contents);var a=n;r&&(a=jQuery(document.createElement("span")).addClass("macro-repeat-insert macro-repeat-in").appendTo(a)),a.append(t),r&&setTimeout(function(){return a.removeClass("macro-repeat-in")},Engine.minDomActionDelay)}),t)},registerInterval:function(e,t){var r=this;if("function"!=typeof e)throw new TypeError("callback parameter must be a function");var n=State.turns,a=this.timers,i=null;i=setInterval(function(){if(n!==State.turns)return clearInterval(i),void a.delete(i);var t=void 0;try{TempState.break=null,TempState.hasOwnProperty("repeatTimerId")&&(t=TempState.repeatTimerId),TempState.repeatTimerId=i,e.call(r)}finally{void 0!==t?TempState.repeatTimerId=t:delete TempState.repeatTimerId,TempState.break=null}},t),a.add(i),prehistory.hasOwnProperty("#repeat-timers-cleanup")||(prehistory["#repeat-timers-cleanup"]=function(e){delete prehistory[e],a.forEach(function(e){return clearInterval(e)}),a.clear()})}}),Macro.add("stop",{skipArgs:!0,handler:function(){if(!TempState.hasOwnProperty("repeatTimerId"))return this.error("must only be used in conjunction with its parent macro <<repeat>>");var e=Macro.get("repeat").timers,t=TempState.repeatTimerId;clearInterval(t),e.delete(t),TempState.break=2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("timed",{isAsync:!0,tags:["next"],timers:new Set,handler:function(){if(0===this.args.length)return this.error("no time value specified in <<timed>>");var e=[];try{e.push({name:this.name,source:this.source,delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0])),content:this.payload[0].contents})}catch(e){return this.error(e.message+" in <<timed>>")}if(this.payload.length>1){var t=void 0;try{var r=void 0;for(t=1,r=this.payload.length;t<r;++t)e.push({name:this.payload[t].name,source:this.payload[t].source,delay:0===this.payload[t].args.length?e[e.length-1].delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.payload[t].args[0])),content:this.payload[t].contents})}catch(e){return this.error(e.message+" in <<next>> (#"+t+")")}}Config.debug&&this.debugView.modes({block:!0});var n=this.args.length>1&&/^(?:transition|t8n)$/.test(this.args[1]),a=jQuery(document.createElement("span")).addClass("macro-"+this.name).appendTo(this.output);this.self.registerTimeout(this.createShadowWrapper(function(e){var t=document.createDocumentFragment();new Wikifier(t,e.content);var r=a;Config.debug&&"next"===e.name&&(r=jQuery(new DebugView(r[0],"macro",e.name,e.source).output)),n&&(r=jQuery(document.createElement("span")).addClass("macro-timed-insert macro-timed-in").appendTo(r)),r.append(t),n&&setTimeout(function(){return r.removeClass("macro-timed-in")},Engine.minDomActionDelay)}),e)},registerTimeout:function(e,t){if("function"!=typeof e)throw new TypeError("callback parameter must be a function");var r=State.turns,n=this.timers,a=null,i=t.shift(),o=function o(){if(n.delete(a),r===State.turns){var s=i;null!=(i=t.shift())&&(a=setTimeout(o,i.delay),n.add(a)),e.call(this,s)}};a=setTimeout(o,i.delay),n.add(a),prehistory.hasOwnProperty("#timed-timers-cleanup")||(prehistory["#timed-timers-cleanup"]=function(e){delete prehistory[e],n.forEach(function(e){return clearTimeout(e)}),n.clear()})}}),Macro.add("widget",{tags:null,handler:function(){if(0===this.args.length)return this.error("no widget name specified");var e=this.args[0];if(Macro.has(e)){if(!Macro.get(e).isWidget)return this.error('cannot clobber existing macro "'+e+'"');Macro.delete(e)}try{Macro.add(e,{isWidget:!0,handler:function(e){return function(){var t=void 0;try{State.variables.hasOwnProperty("args")&&(t=State.variables.args),State.variables.args=[].concat(_toConsumableArray(this.args)),State.variables.args.raw=this.args.raw,State.variables.args.full=this.args.full,this.addShadow("$args");var r=document.createDocumentFragment(),n=[];if(new Wikifier(r,e),Array.from(r.querySelectorAll(".error")).forEach(function(e){n.push(e.textContent)}),0!==n.length)return this.error("error"+(n.length>1?"s":"")+" within widget contents ("+n.join("; ")+")");this.output.appendChild(r)}catch(e){return this.error("cannot execute widget: "+e.message)}finally{void 0!==t?State.variables.args=t:delete State.variables.args}}}(this.payload[0].contents)}),Config.debug&&this.debugView.modes({hidden:!0})}catch(t){return this.error('cannot create widget macro "'+e+'": '+t.message)}}})}();var Dialog=function(){function e(e,t,r,n,a){return jQuery(e).ariaClick(function(e){e.preventDefault(),"function"==typeof r&&r(e),o(t,a),"function"==typeof n&&n(e)})}function t(){var e;return(e=g).append.apply(e,arguments),Dialog}function r(){return g.get(0)}function n(e){return g.trigger(":dialogclosing"),jQuery(document).off(".dialog-close"),y?(y.disconnect(),y=null):g.off(".dialog-resize"),jQuery(window).off(".dialog-resize"),p.removeClass("open").css({left:"",right:"",top:"",bottom:""}),jQuery("#ui-bar,#story").find("[tabindex=-2]").removeAttr("aria-hidden").attr("tabindex",0),jQuery("body>[tabindex=-3]").removeAttr("aria-hidden").removeAttr("tabindex"),f.removeClass("open"),jQuery(document.documentElement).removeAttr("data-dialog"),h.empty(),g.empty().removeClass(),null!==m&&(jQuery(m).focus(),m=null),e&&e.data&&"function"==typeof e.data.closeFn&&e.data.closeFn(e),g.trigger(":dialogclose"),g.trigger(":dialogclosed"),Dialog}function a(){if(!document.getElementById("ui-dialog")){v=function(){var e=void 0;try{var t=document.createElement("p"),r=document.createElement("div");t.style.width="100%",t.style.height="200px",r.style.position="absolute",r.style.left="0px",r.style.top="0px",r.style.width="100px",r.style.height="100px",r.style.visibility="hidden",r.style.overflow="hidden",r.appendChild(t),document.body.appendChild(r);var n=t.offsetWidth;r.style.overflow="auto";var a=t.offsetWidth;n===a&&(a=r.clientWidth),document.body.removeChild(r),e=n-a}catch(e){}return e||17}();var e=jQuery(document.createDocumentFragment()).append('<div id="ui-overlay" class="ui-close"></div><div id="ui-dialog" tabindex="0" role="dialog" aria-labelledby="ui-dialog-title"><div id="ui-dialog-titlebar"><h1 id="ui-dialog-title"></h1><button id="ui-dialog-close" class="ui-close" tabindex="0" aria-label="'+L10n.get("close")+'"></button></div><div id="ui-dialog-body"></div></div>');f=jQuery(e.find("#ui-overlay").get(0)),p=jQuery(e.find("#ui-dialog").get(0)),h=jQuery(e.find("#ui-dialog-title").get(0)),g=jQuery(e.find("#ui-dialog-body").get(0)),e.insertBefore("body>script#script-sugarcube")}}function i(e){return p.hasClass("open")&&(!e||e.splitOrEmpty(/\s+/).every(function(e){return g.hasClass(e)}))}function o(e,t){g.trigger(":dialogopening");var r=jQuery.extend({top:50},e),a=r.top;return i()||(m=safeActiveElement()),jQuery(document.documentElement).attr("data-dialog","open"),f.addClass("open"),null!==g[0].querySelector("img")&&g.imagesLoaded().always(function(){return d({data:{top:a}})}),jQuery("body>:not(script,#store-area,tw-storydata,#ui-bar,#ui-overlay,#ui-dialog)").attr("tabindex",-3).attr("aria-hidden",!0),jQuery("#ui-bar,#story").find("[tabindex]:not([tabindex^=-])").attr("tabindex",-2).attr("aria-hidden",!0),p.css(c(a)).addClass("open").focus(),jQuery(window).on("resize.dialog-resize",null,{top:a},jQuery.throttle(40,d)),Has.mutationObserver?(y=new MutationObserver(function(e){for(var t=0;t<e.length;++t)if("childList"===e[t].type){d({data:{top:a}});break}}),y.observe(g[0],{childList:!0,subtree:!0})):g.on("DOMNodeInserted.dialog-resize DOMNodeRemoved.dialog-resize",null,{top:a},jQuery.throttle(40,d)),jQuery(document).on("click.dialog-close",".ui-close",{closeFn:t},n).on("keypress.dialog-close",".ui-close",function(e){13!==e.which&&32!==e.which||jQuery(this).trigger("click")}),g.trigger(":dialogopen"),g.trigger(":dialogopened"),Dialog}function s(e){return d("object"===(void 0===e?"undefined":_typeof(e))?{data:e}:undefined)}function u(e,t){return g.empty().removeClass(),null!=t&&g.addClass(t),h.empty().append((null!=e?String(e):"")||" "),g.get(0)}function l(){var e;return(e=g).wiki.apply(e,arguments),Dialog}function c(e){var t=null!=e?e:50,r=jQuery(window),n={left:"",right:"",top:"",bottom:""};p.css(n);var a=r.width()-p.outerWidth(!0)-1,i=r.height()-p.outerHeight(!0)-1;return a<=32+v&&(i-=v),i<=32+v&&(a-=v),n.left=n.right=a<=32?16:a/2>>0,n.top=i<=32?n.bottom=16:i/2>t?t:n.bottom=i/2>>0,Object.keys(n).forEach(function(e){""!==n[e]&&(n[e]+="px")}),n}function d(e){var t=e&&e.data&&void 0!==e.data.top?e.data.top:50;"block"===p.css("display")&&(p.css({display:"none"}),p.css(jQuery.extend({display:""},c(t))))}var f=null,p=null,h=null,g=null,m=null,v=0,y=null;return Object.freeze(Object.defineProperties({},{append:{value:t},body:{value:r},close:{value:n},init:{value:a},isOpen:{value:i},open:{value:o},resize:{value:s},setup:{value:u},wiki:{value:l},addClickHandler:{value:e}}))}(),Engine=function(){function e(){jQuery("#init-no-js,#init-lacking").remove(),function(){var e=jQuery(document.createDocumentFragment()),t=Story.has("StoryInterface")&&Story.get("StoryInterface").text.trim();if(t){if(UIBar.destroy(),jQuery(document.head).find("#style-core-display").remove(),e.append(t),0===e.find("#passages").length)throw new Error('no element with ID "passages" found within "StoryInterface" special passage');var r=[];e.find("[data-passage]").each(function(e,t){if("passages"===t.id)throw new Error('"StoryInterface" element <'+t.nodeName.toLowerCase()+' id="passages"> must not contain a "data-passage" content attribute');var n=t.getAttribute("data-passage").trim();if(null!==t.firstElementChild)throw new Error('"StoryInterface" element <'+t.nodeName.toLowerCase()+' data-passage="'+n+'"> contains child elements');Story.has(n)&&r.push({passage:n,element:t})}),r.length>0&&(E=r),Config.ui.updateStoryElements=!1}else e.append('<div id="story" role="main"><div id="passages"></div></div>');e.insertBefore("body>script#script-sugarcube")}(),S=new StyleWrapper(function(){return jQuery(document.createElement("style")).attr({id:"style-aria-outlines",type:"text/css"}).appendTo(document.head).get(0)}());var e=void 0;jQuery(document).on("mousedown.aria-outlines keydown.aria-outlines",function(t){t.type!==e&&(e=t.type,"keydown"===t.type?m():g())})}function t(){if(Story.has("StoryInit"))try{var e=Wikifier.wikifyEval(Story.get("StoryInit").text);if(Config.debug){var t=new DebugView(document.createDocumentFragment(),"special","StoryInit","StoryInit");t.modes({hidden:!0}),t.append(e),k=t.output}}catch(e){console.error(e),Alert.error("StoryInit",e.message)}if(null==Config.passages.start)throw new Error("starting passage not selected");if(!Story.has(Config.passages.start))throw new Error('starting passage ("'+Config.passages.start+'") not found');if(jQuery(document.documentElement).focus(),State.restore())f();else{var r=!0;switch(_typeof(Config.saves.autoload)){case"boolean":Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(r=!Save.autosave.load());break;case"string":"prompt"===Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(r=!1,UI.buildAutoload(),Dialog.open());break;case"function":Save.autosave.ok()&&Save.autosave.has()&&Config.saves.autoload()&&(r=!Save.autosave.load())}r&&p(Config.passages.start)}}function r(){LoadScreen.show(),window.scroll(0,0),State.reset(),jQuery.event.trigger(":enginerestart"),window.location.reload()}function n(){return b}function a(){return b===v.Idle}function i(){return b!==v.Idle}function o(){return b===v.Rendering}function s(){return w}function u(e){var t=State.goTo(e);return t&&f(),t}function l(e){var t=State.go(e);return t&&f(),t}function c(){return l(-1)}function d(){return l(1)}function f(){return p(State.passage,!0)}function p(e,t){var r=e;b=v.Playing,TempState={},State.clearTemporary();var n=void 0,a=void 0;if("function"==typeof Config.navigation.override)try{var i=Config.navigation.override(r);i&&(r=i)}catch(e){}var o=Story.get(r);if(jQuery.event.trigger({type:":passageinit",passage:o}),Object.keys(prehistory).forEach(function(e){"function"==typeof prehistory[e]&&prehistory[e].call(o,e)}),t||State.create(o.title),document.body.className&&(document.body.className=""),w=Util.now(),Object.keys(predisplay).forEach(function(e){"function"==typeof predisplay[e]&&predisplay[e].call(o,e)}),Story.has("PassageReady"))try{n=Wikifier.wikifyEval(Story.get("PassageReady").text)}catch(e){console.error(e),Alert.error("PassageReady",e.message)}b=v.Rendering;var s=o.tags.length>0?o.tags.join(" "):null,u=document.createElement("div");jQuery(u).attr({id:o.domId,"data-passage":o.title,"data-tags":s}).addClass("passage "+o.className),jQuery(document.body).attr("data-tags",s).addClass(o.className),jQuery(document.documentElement).attr("data-tags",s),jQuery.event.trigger({type:":passagestart",content:u,passage:o}),Object.keys(prerender).forEach(function(e){"function"==typeof prerender[e]&&prerender[e].call(o,u,e)}),Story.has("PassageHeader")&&new Wikifier(u,Story.get("PassageHeader").processText()),u.appendChild(o.render()),Story.has("PassageFooter")&&new Wikifier(u,Story.get("PassageFooter").processText()),jQuery.event.trigger({type:":passagerender",content:u,passage:o}),Object.keys(postrender).forEach(function(e){"function"==typeof postrender[e]&&postrender[e].call(o,u,e)});var l=document.getElementById("passages");if(l.hasChildNodes()&&("number"==typeof Config.passages.transitionOut||"string"==typeof Config.passages.transitionOut&&""!==Config.passages.transitionOut&&Has.transitionEndEvent?[].concat(_toConsumableArray(l.childNodes)).forEach(function(e){var t=jQuery(e);if(e.nodeType===Node.ELEMENT_NODE&&t.hasClass("passage")){if(t.hasClass("passage-out"))return;t.attr("id","out-"+t.attr("id")).addClass("passage-out"),"string"==typeof Config.passages.transitionOut?t.on(Has.transitionEndEvent,function(e){e.originalEvent.propertyName===Config.passages.transitionOut&&t.remove()}):setTimeout(function(){return t.remove()},Math.max(y,Config.passages.transitionOut))}else t.remove()}):jQuery(l).empty()),jQuery(u).addClass("passage-in").appendTo(l),setTimeout(function(){return jQuery(u).removeClass("passage-in")},y),Story.has("StoryDisplayTitle")?null===E&&Config.ui.updateStoryElements||setDisplayTitle(Story.get("StoryDisplayTitle").processText()):Config.passages.displayTitles&&o.title!==Config.passages.start&&(document.title=o.title+" | "+Story.title),window.scroll(0,0),b=v.Playing,Story.has("PassageDone"))try{a=Wikifier.wikifyEval(Story.get("PassageDone").text)}catch(e){console.error(e),Alert.error("PassageDone",e.message)}if(jQuery.event.trigger({type:":passagedisplay",content:u,passage:o}),Object.keys(postdisplay).forEach(function(e){"function"==typeof postdisplay[e]&&postdisplay[e].call(o,e)}),null!==E?E.forEach(function(e){jQuery(e.element).empty(),new Wikifier(e.element,Story.get(e.passage).processText().trim())}):Config.ui.updateStoryElements&&UIBar.update(),Config.debug){var c=void 0;null!=n&&(c=new DebugView(document.createDocumentFragment(),"special","PassageReady","PassageReady"),c.modes({hidden:!0}),c.append(n),jQuery(u).prepend(c.output)),null!=a&&(c=new DebugView(document.createDocumentFragment(),"special","PassageDone","PassageDone"),c.modes({hidden:!0}),c.append(a),jQuery(u).append(c.output)),1===State.turns&&null!=k&&jQuery(u).prepend(k)}switch(g(),jQuery("#story").find("a[href]:not(.link-external)").addClass("link-external").end().find("a,link,button,input,select,textarea").not("[tabindex]").attr("tabindex",0),_typeof(Config.saves.autosave)){case"boolean":Config.saves.autosave&&Save.autosave.save();break;case"object":o.tags.some(function(e){return Config.saves.autosave.includes(e)})&&Save.autosave.save();break;case"function":Config.saves.autosave()&&Save.autosave.save()}return jQuery.event.trigger({type:":passageend",content:u,passage:o}),b=v.Idle,w=Util.now(),u}function h(e,t,r){var n=!1;switch(r){case undefined:break;case"replace":case"back":n=!0;break;default:throw new Error('Engine.display option parameter called with obsolete value "'+r+'"; please notify the developer')}p(e,n)}function g(){S.set("*:focus{outline:none;}")}function m(){S.clear()}var v=Util.toEnum({Idle:"idle",Playing:"playing",Rendering:"rendering"}),y=40,b=v.Idle,w=null,k=null,S=null,E=null;return Object.freeze(Object.defineProperties({},{States:{value:v},minDomActionDelay:{value:y},init:{value:e},start:{value:t},restart:{value:r},state:{get:n},isIdle:{value:a},isPlaying:{value:i},isRendering:{value:o},lastPlay:{get:s},goTo:{value:u},go:{value:l},backward:{value:c},forward:{value:d},show:{value:f},play:{value:p},display:{value:h}}))}(),Passage=function(){var e=void 0;e=/^(?:debug|nobr|passage|widget|twine\..*)$/i;return function(){function t(r,n){var a=this;_classCallCheck(this,t),Object.defineProperties(this,{title:{value:Util.unescape(r)},element:{value:n||null},tags:{value:Object.freeze(n&&n.hasAttribute("tags")?n.getAttribute("tags").trim().splitOrEmpty(/\s+/).sort().filter(function(e,t,r){return 0===t||r[t-1]!==e}):[])},_excerpt:{writable:!0,value:null}}),Object.defineProperties(this,{domId:{value:"passage-"+Util.slugify(this.title)},classes:{value:Object.freeze(0===this.tags.length?[]:function(){return a.tags.filter(function(t){return!e.test(t)}).map(function(e){return Util.slugify(e)})}())}})}return _createClass(t,[{key:"description",value:function(){var e=Config.passages.descriptions;if(null!=e)switch(void 0===e?"undefined":_typeof(e)){case"boolean":if(e)return this.title;break;case"object":if(e instanceof Map&&e.has(this.title))return e.get(this.title);if(e.hasOwnProperty(this.title))return e[this.title];break;case"function":var r=e.call(this);if(r)return r;break;default:throw new TypeError("Config.passages.descriptions must be a boolean, object, or function")}return null===this._excerpt&&(this._excerpt=t.getExcerptFromText(this.text)),this._excerpt}},{key:"processText",value:function(){if(null==this.element)return this.text;if(this.tags.includes("Twine.image"))return"[img["+this.text+"]]";var e=this.text;return Config.passages.onProcess&&(e=Config.passages.onProcess.call(null,{title:this.title,tags:this.tags,text:e})),(Config.passages.nobr||this.tags.includes("nobr"))&&(e=e.replace(/^\n+|\n+$/g,"").replace(/\n+/g," ")),e}},{key:"render",value:function(e){var r=document.createDocumentFragment();return new Wikifier(r,this.processText(),e),this._excerpt=t.getExcerptFromNode(r),r}},{key:"className",get:function(){return this.classes.join(" ")}},{key:"text",get:function(){if(null==this.element){var e=Util.escape(this.title);return'<div class="error-view"><span class="error">'+(L10n.get("errorTitle")+": "+L10n.get("errorNonexistentPassage",{passage:e}))+"</span></div>"}return this.element.textContent.replace(/\r/g,"")}}],[{key:"getExcerptFromNode",value:function(e,t){if(!e.hasChildNodes())return"";var r=e.textContent.trim();if(""!==r){var n=new RegExp("(\\S+(?:\\s+\\S+){0,"+(t>0?t-1:7)+"})");r=r.replace(/\s+/g," ").match(n)}return r?r[1]+"…":"…"}},{key:"getExcerptFromText",value:function(e,t){if(""===e)return"";var r=new RegExp("(\\S+(?:\\s+\\S+){0,"+(t>0?t-1:7)+"})"),n=e.replace(/<<.*?>>/g," ").replace(/<.*?>/g," ").trim().replace(/^\s*\|.*\|.*?$/gm,"").replace(/\[[<>]?img\[[^\]]*\]\]/g,"").replace(/\[\[([^|\]]*?)(?:(?:\||->|<-)[^\]]*)?\]\]/g,"$1").replace(/^\s*!+(.*?)$/gm,"$1").replace(/'{2}|\/{2}|_{2}|@{2}/g,"").trim().replace(/\s+/g," ").match(r);return n?n[1]+"…":"…"}}]),t}()}(),Save=function(){function e(){if("cookie"===storage.name)return n(),Config.saves.autoload=undefined,Config.saves.autosave=undefined,Config.saves.slots=0,!1;var e=r(),t=!1;Array.isArray(e)&&(e={autosave:null,slots:e},t=!0),Config.saves.slots!==e.slots.length&&(Config.saves.slots<e.slots.length?(e.slots.reverse(),e.slots=e.slots.filter(function(e){return!(null===e&&this.count>0)||(--this.count,!1)},{count:e.slots.length-Config.saves.slots}),e.slots.reverse()):Config.saves.slots>e.slots.length&&j(e.slots,Config.saves.slots-e.slots.length),t=!0),T(e.autosave)&&(t=!0);for(var a=0;a<e.slots.length;++a)T(e.slots[a])&&(t=!0);return x(e)&&(storage.delete("saves"),t=!1),t&&O(e),P=e.slots.length-1,!0}function t(){return{autosave:null,slots:j([],Config.saves.slots)}}function r(){var e=storage.get("saves");return null===e?t():e}function n(){return storage.delete("saves"),!0}function a(){return i()||d()}function i(){return"cookie"!==storage.name&&void 0!==Config.saves.autosave}function o(){return null!==r().autosave}function s(){return r().autosave}function u(){var e=r();return null!==e.autosave&&A(e.autosave)}function l(e,t){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return!1;var n=r(),a={title:e||Story.get(State.passage).description(),date:Date.now()};return null!=t&&(a.metadata=t),n.autosave=C(a),O(n)}function c(){var e=r();return e.autosave=null,O(e)}function d(){return"cookie"!==storage.name&&-1!==P}function f(){return P+1}function p(){if(!d())return 0;for(var e=r(),t=0,n=0,a=e.slots.length;n<a;++n)null!==e.slots[n]&&++t;return t}function h(){return 0===p()}function g(e){if(e<0||e>P)return!1;var t=r();return!(e>=t.slots.length||null===t.slots[e])}function m(e){if(e<0||e>P)return null;var t=r();return e>=t.slots.length?null:t.slots[e]}function v(e){if(e<0||e>P)return!1;var t=r();return!(e>=t.slots.length||null===t.slots[e])&&A(t.slots[e])}function y(e,t,n){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return Dialog.isOpen()?$(document).one(":dialogclosed",function(){return UI.alert(L10n.get("savesDisallowed"))}):UI.alert(L10n.get("savesDisallowed")),!1;if(e<0||e>P)return!1;var a=r();if(e>=a.slots.length)return!1;var i={title:t||Story.get(State.passage).description(),date:Date.now()};return null!=n&&(i.metadata=n),a.slots[e]=C(i),O(a)}function b(e){if(e<0||e>P)return!1;var t=r();return!(e>=t.slots.length)&&(t.slots[e]=null,O(t))}function w(e,t){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return void(Dialog.isOpen()?$(document).one(":dialogclosed",function(){return UI.alert(L10n.get("savesDisallowed"))}):UI.alert(L10n.get("savesDisallowed")));var r=null==e?Story.domId:function(e){return String(e).trim().replace(/[\x00-\x1f"#$%&'*+,\/:;<=>?\\^`|\x7f-\x9f]+/g,"").replace(/[_\s\u2013\u2014-]+/g,"-")}(e),n=r+"-"+function(){var e=new Date,t=e.getMonth()+1,r=e.getDate(),n=e.getHours(),a=e.getMinutes(),i=e.getSeconds();return t<10&&(t="0"+t),r<10&&(r="0"+r),n<10&&(n="0"+n),a<10&&(a="0"+a),i<10&&(i="0"+i),""+e.getFullYear()+t+r+"-"+n+a+i}()+".save",a=null==t?{}:{metadata:t},i=LZString.compressToBase64(JSON.stringify(C(a)));saveAs(new Blob([i],{type:"text/plain;charset=UTF-8"}),n)}function k(e){var t=e.target.files[0],r=new FileReader;jQuery(r).on("load",function(e){var r=e.currentTarget;if(r.result){var n=void 0;try{n=JSON.parse(/\.json$/i.test(t.name)||/^\{/.test(r.result)?r.result:LZString.decompressFromBase64(r.result))}catch(e){}A(n)}}),r.readAsText(t)}function S(e){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return Dialog.isOpen()?$(document).one(":dialogclosed",function(){return UI.alert(L10n.get("savesDisallowed"))}):UI.alert(L10n.get("savesDisallowed")),null;var t=null==e?{}:{metadata:e};return LZString.compressToBase64(JSON.stringify(C(t)))}function E(e){var t=void 0;try{t=JSON.parse(LZString.decompressFromBase64(e))}catch(e){}return A(t)?t.metadata:null}function j(e,t){for(var r=0;r<t;++r)e.push(null);return e}function x(e){for(var t=e.slots,r=!0,n=0,a=t.length;n<a;++n)if(null!==t[n]){r=!1;break}return null===e.autosave&&r}function O(e){return x(e)?(storage.delete("saves"),!0):storage.set("saves",e)}function T(e){if(null==e||"object"!==(void 0===e?"undefined":_typeof(e)))return!1;var t=!1;return e.hasOwnProperty("state")&&e.state.hasOwnProperty("delta")&&e.state.hasOwnProperty("index")||(e.hasOwnProperty("data")?(delete e.mode,e.state={delta:State.deltaEncode(e.data)},delete e.data):e.state.hasOwnProperty("delta")?e.state.hasOwnProperty("index")||delete e.state.mode:(delete e.state.mode,e.state.delta=State.deltaEncode(e.state.history),delete e.state.history),e.state.index=e.state.delta.length-1,t=!0),e.state.hasOwnProperty("rseed")&&(e.state.seed=e.state.rseed,delete e.state.rseed,e.state.delta.forEach(function(e,t,r){r[t].hasOwnProperty("rcount")&&(r[t].pull=r[t].rcount,delete r[t].rcount)}),t=!0),(e.state.hasOwnProperty("expired")&&"number"==typeof e.state.expired||e.state.hasOwnProperty("unique")||e.state.hasOwnProperty("last"))&&(e.state.hasOwnProperty("expired")&&"number"==typeof e.state.expired&&delete e.state.expired,(e.state.hasOwnProperty("unique")||e.state.hasOwnProperty("last"))&&(e.state.expired=[],e.state.hasOwnProperty("unique")&&(e.state.expired.push(e.state.unique),delete e.state.unique),e.state.hasOwnProperty("last")&&(e.state.expired.push(e.state.last),delete e.state.last)),t=!0),t}function C(e){if(null!=e&&"object"!==(void 0===e?"undefined":_typeof(e)))throw new Error("supplemental parameter must be an object");var t=Object.assign({},e,{id:Config.saves.id,state:State.marshalForSave()});return Config.saves.version&&(t.version=Config.saves.version),"function"==typeof Config.saves.onSave&&Config.saves.onSave(t),t.state.delta=State.deltaEncode(t.state.history),delete t.state.history,t}function A(e){try{if(T(e),!e||!e.hasOwnProperty("id")||!e.hasOwnProperty("state"))throw new Error(L10n.get("errorSaveMissingData"));if(e.state.history=State.deltaDecode(e.state.delta),delete e.state.delta,"function"==typeof Config.saves.onLoad&&Config.saves.onLoad(e),e.id!==Config.saves.id)throw new Error(L10n.get("errorSaveIdMismatch"));State.unmarshalForSave(e.state),Engine.show()}catch(e){return UI.alert(e.message.toUpperFirst()+".</p><p>"+L10n.get("aborting")+"."),!1}return!0}var P=-1;return Object.freeze(Object.defineProperties({},{init:{value:e},get:{value:r},clear:{value:n},ok:{value:a},autosave:{value:Object.freeze(Object.defineProperties({},{ok:{value:i},has:{value:o},get:{value:s},load:{value:u},save:{value:l},delete:{value:c}}))},slots:{value:Object.freeze(Object.defineProperties({},{ok:{value:d},length:{get:f},isEmpty:{value:h},count:{value:p},has:{value:g},get:{value:m},load:{value:v},save:{value:y},delete:{value:b}}))},export:{value:w},import:{value:k},serialize:{value:S},deserialize:{value:E}}))}(),Setting=function(){function e(){if(storage.has("options")){var e=storage.get("options");null!==e&&(window.SugarCube.settings=settings=Object.assign(t(),e)),r(),storage.delete("options")}n(),v.forEach(function(e){if(e.hasOwnProperty("onInit")){var t={name:e.name,value:settings[e.name],default:e.default};e.hasOwnProperty("list")&&(t.list=e.list),e.onInit.call(t)}})}function t(){return Object.create(null)}function r(){var e=t();return Object.keys(settings).length>0&&v.filter(function(e){return e.type!==m.Header&&settings[e.name]!==e.default}).forEach(function(t){return e[t.name]=settings[t.name]}),0===Object.keys(e).length?(storage.delete("settings"),!0):storage.set("settings",e)}function n(){var e=t(),r=storage.get("settings")||t();v.filter(function(e){return e.type!==m.Header}).forEach(function(t){return e[t.name]=t.default}),window.SugarCube.settings=settings=Object.assign(e,r)}function a(){return window.SugarCube.settings=settings=t(),storage.delete("settings"),!0}function i(e){if(0===arguments.length)a(),n();else{if(null==e||!p(e))throw new Error('nonexistent setting "'+e+'"');var t=h(e);t.type!==m.Header&&(settings[e]=t.default)}return r()}function o(e,t){v.forEach(e,t)}function s(e,t,r){if(arguments.length<3){var n=[];throw arguments.length<1&&n.push("type"),arguments.length<2&&n.push("name"),arguments.length<3&&n.push("definition"),new Error("missing parameters, no "+n.join(" or ")+" specified")}if("object"!==(void 0===r?"undefined":_typeof(r)))throw new TypeError("definition parameter must be an object");if(p(t))throw new Error('cannot clobber existing setting "'+t+'"');var a={type:e,name:t,label:"string"==typeof r.label?r.label.trim():""};if("string"==typeof r.desc){
var i=r.desc.trim();""!==i&&(a.desc=i)}switch(e){case m.Header:break;case m.Toggle:a.default=!!r.default;break;case m.List:if(!r.hasOwnProperty("list"))throw new Error("no list specified");if(!Array.isArray(r.list))throw new TypeError("list must be an array");if(0===r.list.length)throw new Error("list must not be empty");if(a.list=Object.freeze(r.list),null==r.default)a.default=r.list[0];else{var o=r.list.indexOf(r.default);if(-1===o)throw new Error("list does not contain default");a.default=r.list[o]}break;case m.Range:if(!r.hasOwnProperty("min"))throw new Error("no min specified");if("number"!=typeof r.min||Number.isNaN(r.min)||!Number.isFinite(r.min))throw new TypeError("min must be a finite number");if(!r.hasOwnProperty("max"))throw new Error("no max specified");if("number"!=typeof r.max||Number.isNaN(r.max)||!Number.isFinite(r.max))throw new TypeError("max must be a finite number");if(!r.hasOwnProperty("step"))throw new Error("no step specified");if("number"!=typeof r.step||Number.isNaN(r.step)||!Number.isFinite(r.step)||r.step<=0)throw new TypeError("step must be a finite number greater than zero");var s=function(){var e=String(r.step),t=e.lastIndexOf(".");return-1===t?0:e.length-t-1}();if(function(e){if(s>0){var t=Number(r.min+"e"+s),n=Number(r.step+"e"+s),a=Number(e+"e"+s)-t;return Number(a-a%n+t+"e-"+s)}var i=e-r.min;return i-i%r.step+r.min}(r.max)!==r.max)throw new RangeError("max ("+r.max+") is not a multiple of the step ("+r.step+") plus the min ("+r.min+")");if(a.max=r.max,a.min=r.min,a.step=r.step,null==r.default)a.default=r.max;else{if("number"!=typeof r.default||Number.isNaN(r.default)||!Number.isFinite(r.default))throw new TypeError("default must be a finite number");if(r.default<r.min)throw new RangeError("default ("+r.default+") is less than min ("+r.min+")");if(r.default>r.max)throw new RangeError("default ("+r.default+") is greater than max ("+r.max+")");a.default=r.default}break;default:throw new Error("unknown Setting type: "+e)}"function"==typeof r.onInit&&(a.onInit=Object.freeze(r.onInit)),"function"==typeof r.onChange&&(a.onChange=Object.freeze(r.onChange)),v.push(Object.freeze(a))}function u(e,t){s(m.Header,e,{desc:t})}function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];s.apply(undefined,[m.Toggle].concat(t))}function c(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];s.apply(undefined,[m.List].concat(t))}function d(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];s.apply(undefined,[m.Range].concat(t))}function f(){return 0===v.length}function p(e){return v.some(function(t){return t.name===e})}function h(e){return v.find(function(t){return t.name===e})}function g(e){p(e)&&delete settings[e];for(var t=0;t<v.length;++t)if(v[t].name===e){v.splice(t,1),g(e);break}}var m=Util.toEnum({Header:0,Toggle:1,List:2,Range:3}),v=[];return Object.freeze(Object.defineProperties({},{Types:{value:m},init:{value:e},create:{value:t},save:{value:r},load:{value:n},clear:{value:a},reset:{value:i},forEach:{value:o},add:{value:s},addHeader:{value:u},addToggle:{value:l},addList:{value:c},addRange:{value:d},isEmpty:{value:f},has:{value:p},get:{value:h},delete:{value:g}}))}(),Story=function(){function e(){function e(e){if(e.tags.includesAny(n))throw new Error('starting passage "'+e.title+'" contains illegal tags; invalid: "'+e.tags.filter(function(e){return n.includes(e)}).sort().join('", "')+'"')}function t(e){if(a.includes(e.title)&&e.tags.includesAny(n))throw new Error('special passage "'+e.title+'" contains illegal tags; invalid: "'+e.tags.filter(function(e){return n.includes(e)}).sort().join('", "')+'"')}var n=["widget"],a=["PassageDone","PassageFooter","PassageHeader","PassageReady","StoryAuthor","StoryBanner","StoryCaption","StoryInit","StoryMenu","StoryShare","StorySubtitle"],i=jQuery("tw-storydata"),o=i.attr("startnode")||"";Config.passages.start=null,Config.debug=/\bdebug\b/.test(i.attr("options")),i.children("style").each(function(e){v.push(new Passage("tw-user-style-"+e,this))}),i.children("script").each(function(e){m.push(new Passage("tw-user-script-"+e,this))}),i.children('tw-passagedata:not([tags~="Twine.private"],[tags~="annotation"])').each(function(){var r=jQuery(this),n=r.attr("pid")||"",a=new Passage(r.attr("name"),this);n===o&&""!==o?(Config.passages.start=a.title,e(a),g[a.title]=a):a.tags.includes("widget")?y.push(a):(t(a),g[a.title]=a)}),w=i.attr("ifid"),r("Dawn of Corruption"),Config.saves.id=Story.domId}function t(){!function(){var e=document.createElement("style");new StyleWrapper(e).add(v.map(function(e){return e.text.trim()}).join("\n")),jQuery(e).appendTo(document.head).attr({id:"style-story",type:"text/css"})}();for(var e=0;e<m.length;++e)try{Scripting.evalJavaScript(m[e].text)}catch(t){console.error(t),Alert.error(m[e].title,"object"===(void 0===t?"undefined":_typeof(t))?t.message:t)}for(var t=0;t<y.length;++t)try{Wikifier.wikifyEval(y[t].processText())}catch(e){console.error(e),Alert.error(y[t].title,"object"===(void 0===e?"undefined":_typeof(e))?e.message:e)}}function r(e){if(null==e)throw new Error("story title must not be null or undefined");var t=Util.unescape(String(e)).trim();if(""===t)throw new Error("story title must not be empty or consist solely of whitespace");if(document.title=b=t,""===(k=Util.slugify(b)))if(""!==w)k=w;else for(var r=0,n=b.length;r<n;++r){var a=Util.charAndPosAt(b,r),i=a.char,o=a.start,s=a.end;k+=i.codePointAt(0).toString(16),r+=s-o}}function n(){return b}function a(){return k}function i(){return w}function o(e){if(!(e instanceof Passage))throw new TypeError("Story.add passage parameter must be an instance of Passage");var t=e.title;return!g.hasOwnProperty(t)&&(g[t]=e,!0)}function s(e){var t=void 0===e?"undefined":_typeof(e);switch(t){case"number":case"string":return g.hasOwnProperty(String(e));case"undefined":break;case"object":t=null===e?"null":"an object";break;default:t="a "+t}throw new TypeError("Story.has title parameter cannot be "+t)}function u(e){var t=void 0===e?"undefined":_typeof(e);switch(t){case"number":case"string":var r=String(e);return g.hasOwnProperty(r)?g[r]:new Passage(r||"(unknown)");case"undefined":break;case"object":t=null===e?"null":"an object";break;default:t="a "+t}throw new TypeError("Story.get title parameter cannot be "+t)}function l(){return Object.freeze(Object.assign({},g))}function c(){return Object.freeze(Array.from(m))}function d(){return Object.freeze(Array.from(v))}function f(){return Object.freeze(Array.from(y))}function p(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"title",n=[];return Object.keys(g).forEach(function(r){var a=g[r];"object"===_typeof(a[e])&&null!==a[e]?a[e]instanceof Array&&a[e].some(function(e){return Util.sameValueZero(e,t)})&&n.push(a):Util.sameValueZero(a[e],t)&&n.push(a)}),n.sort(function(e,t){return e[r]==t[r]?0:e[r]<t[r]?-1:1}),n}function h(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"title";if("function"!=typeof e)throw new TypeError("Story.lookupWith predicate parameter must be a function");var r=[];return Object.keys(g).forEach(function(t){var n=g[t];e(n)&&r.push(n)}),r.sort(function(e,r){return e[t]==r[t]?0:e[t]<r[t]?-1:1}),r}var g={},m=[],v=[],y=[],b="",w="",k="";return Object.freeze(Object.defineProperties({},{load:{value:e},init:{value:t},title:{get:n},domId:{get:a},ifId:{get:i},add:{value:o},has:{value:s},get:{value:u},getAllRegular:{value:l},getAllScript:{value:c},getAllStylesheet:{value:d},getAllWidget:{value:f},lookup:{value:p},lookupWith:{value:h}}))}(),UI=function(){function e(e,t){var r=t,n=Config.debug,a=Config.cleanupWikifierOutput;Config.debug=!1,Config.cleanupWikifierOutput=!1;try{null==r&&(r=document.createElement("ul"));var i=document.createDocumentFragment();new Wikifier(i,Story.get(e).processText().trim());var o=[].concat(_toConsumableArray(i.querySelectorAll(".error"))).map(function(e){return e.textContent.replace(errorPrologRegExp,"")});if(o.length>0)throw new Error(o.join("; "));for(;i.hasChildNodes();){var s=i.firstChild;if(s.nodeType===Node.ELEMENT_NODE&&"A"===s.nodeName.toUpperCase()){var u=document.createElement("li");r.appendChild(u),u.appendChild(s)}else i.removeChild(s)}}finally{Config.cleanupWikifierOutput=a,Config.debug=n}return r}function t(e){jQuery(Dialog.setup("Alert","alert")).append("<p>"+e+'</p><ul class="buttons"><li><button id="alert-ok" class="ui-close">'+L10n.get(["alertOk","ok"])+"</button></li></ul>");for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];Dialog.open.apply(Dialog,r)}function r(){u(),Dialog.open.apply(Dialog,arguments)}function n(){l(),Dialog.open.apply(Dialog,arguments)}function a(){c(),Dialog.open.apply(Dialog,arguments)}function i(){d(),Dialog.open.apply(Dialog,arguments)}function o(){f(),Dialog.open.apply(Dialog,arguments)}function s(){return jQuery(Dialog.setup(L10n.get("autoloadTitle"),"autoload")).append("<p>"+L10n.get("autoloadPrompt")+'</p><ul class="buttons"><li><button id="autoload-ok" class="ui-close">'+L10n.get(["autoloadOk","ok"])+'</button></li><li><button id="autoload-cancel" class="ui-close">'+L10n.get(["autoloadCancel","cancel"])+"</button></li></ul>"),jQuery(document).one("click.autoload",".ui-close",function(e){var t="autoload-ok"===e.target.id;jQuery(document).one(":dialogclosed",function(){t&&Save.autosave.load()||Engine.play(Config.passages.start)})}),!0}function u(){var e=document.createElement("ul");jQuery(Dialog.setup(L10n.get("jumptoTitle"),"jumpto list")).append(e);for(var t=State.expired.length,r=State.size-1;r>=0;--r)if(r!==State.activeIndex){var n=Story.get(State.history[r].title);n&&n.tags.includes("bookmark")&&jQuery(document.createElement("li")).append(jQuery(document.createElement("a")).ariaClick({one:!0},function(e){return function(){return jQuery(document).one(":dialogclosed",function(){return Engine.goTo(e)})}}(r)).addClass("ui-close").text(L10n.get("jumptoTurn")+" "+(t+r+1)+": "+n.description())).appendTo(e)}e.hasChildNodes()||jQuery(e).append("<li><a><em>"+L10n.get("jumptoUnavailable")+"</em></a></li>")}function l(){return jQuery(Dialog.setup(L10n.get("restartTitle"),"restart")).append("<p>"+L10n.get("restartPrompt")+'</p><ul class="buttons"><li><button id="restart-ok">'+L10n.get(["restartOk","ok"])+'</button></li><li><button id="restart-cancel" class="ui-close">'+L10n.get(["restartCancel","cancel"])+"</button></li></ul>").find("#restart-ok").ariaClick({one:!0},function(){jQuery(document).one(":dialogclosed",function(){return Engine.restart()}),Dialog.close()}),!0}function c(){function e(e,t,r,n){var a=jQuery(document.createElement("button")).attr("id","saves-"+e).html(r);return t&&a.addClass(t),n?a.ariaClick(n):a.ariaDisabled(!0),jQuery(document.createElement("li")).append(a)}var r=jQuery(Dialog.setup(L10n.get("savesTitle"),"saves")),n=Save.ok();if(n&&r.append(function(){function e(e,t,r,n,a){var i=jQuery(document.createElement("button")).attr("id","saves-"+e+"-"+n).addClass(e).html(r);return t&&i.addClass(t),a?"auto"===n?i.ariaClick({label:r+" "+L10n.get("savesLabelAuto")},function(){return a()}):i.ariaClick({label:r+" "+L10n.get("savesLabelSlot")+" "+(n+1)},function(){return a(n)}):i.ariaDisabled(!0),i}var t=Save.get(),r=jQuery(document.createElement("tbody"));if(Save.autosave.ok()){var n=jQuery(document.createElement("td")),a=jQuery(document.createElement("td")),i=jQuery(document.createElement("td")),o=jQuery(document.createElement("td"));jQuery(document.createElement("b")).attr({title:L10n.get("savesLabelAuto"),"aria-label":L10n.get("savesLabelAuto")}).text("A").appendTo(n),t.autosave?(a.append(e("load","ui-close",L10n.get("savesLabelLoad"),"auto",function(){jQuery(document).one(":dialogclosed",function(){return Save.autosave.load()})})),jQuery(document.createElement("div")).text(t.autosave.title).appendTo(i),jQuery(document.createElement("div")).addClass("datestamp").html(t.autosave.date?""+new Date(t.autosave.date).toLocaleString():"<em>"+L10n.get("savesUnknownDate")+"</em>").appendTo(i),o.append(e("delete",null,L10n.get("savesLabelDelete"),"auto",function(){Save.autosave.delete(),c()}))):(a.append(e("load",null,L10n.get("savesLabelLoad"),"auto")),i.addClass("empty").text("•  •  •"),o.append(e("delete",null,L10n.get("savesLabelDelete"),"auto"))),jQuery(document.createElement("tr")).append(n).append(a).append(i).append(o).appendTo(r)}for(var s=0,u=t.slots.length;s<u;++s){var l=jQuery(document.createElement("td")),d=jQuery(document.createElement("td")),f=jQuery(document.createElement("td")),p=jQuery(document.createElement("td"));l.append(document.createTextNode(s+1)),t.slots[s]?(d.append(e("load","ui-close",L10n.get("savesLabelLoad"),s,function(e){jQuery(document).one(":dialogclosed",function(){return Save.slots.load(e)})})),jQuery(document.createElement("div")).text(t.slots[s].title).appendTo(f),jQuery(document.createElement("div")).addClass("datestamp").html(t.slots[s].date?""+new Date(t.slots[s].date).toLocaleString():"<em>"+L10n.get("savesUnknownDate")+"</em>").appendTo(f),p.append(e("delete",null,L10n.get("savesLabelDelete"),s,function(e){Save.slots.delete(e),c()}))):(d.append(e("save","ui-close",L10n.get("savesLabelSave"),s,Save.slots.save)),f.addClass("empty").text("•  •  •"),p.append(e("delete",null,L10n.get("savesLabelDelete"),s))),jQuery(document.createElement("tr")).append(l).append(d).append(f).append(p).appendTo(r)}return jQuery(document.createElement("table")).attr("id","saves-list").append(r)}()),n||Has.fileAPI){var a=jQuery(document.createElement("ul")).addClass("buttons").appendTo(r);return Has.fileAPI&&(a.append(e("export","ui-close",L10n.get("savesLabelExport"),function(){return Save.export()})),a.append(e("import",null,L10n.get("savesLabelImport"),function(){return r.find("#saves-import-file").trigger("click")})),jQuery(document.createElement("input")).css({display:"block",visibility:"hidden",position:"fixed",left:"-9999px",top:"-9999px",width:"1px",height:"1px"}).attr({type:"file",id:"saves-import-file",tabindex:-1,"aria-hidden":!0}).on("change",function(e){jQuery(document).one(":dialogclosed",function(){return Save.import(e)}),Dialog.close()}).appendTo(r)),n&&a.append(e("clear",null,L10n.get("savesLabelClear"),Save.autosave.has()||!Save.slots.isEmpty()?function(){Save.clear(),c()}:null)),!0}return t(L10n.get("savesIncapable")),!1}function d(){var e=jQuery(Dialog.setup(L10n.get("settingsTitle"),"settings"));return Setting.forEach(function(t){if(t.type===Setting.Types.Header){var r=t.name,n=Util.slugify(r),a=jQuery(document.createElement("div")),i=jQuery(document.createElement("h2"));return a.attr("id","header-body-"+n).append(i).appendTo(e),i.attr("id","header-heading-"+n).wiki(r),void(t.desc&&jQuery(document.createElement("p")).attr("id","header-desc-"+n).wiki(t.desc).appendTo(a))}var o=t.name,s=Util.slugify(o),u=jQuery(document.createElement("div")),l=jQuery(document.createElement("label")),c=jQuery(document.createElement("div")),d=void 0;switch(jQuery(document.createElement("div")).append(l).append(c).appendTo(u),t.desc&&jQuery(document.createElement("p")).attr("id","setting-desc-"+s).wiki(t.desc).appendTo(u),l.attr({id:"setting-label-"+s,for:"setting-control-"+s}).wiki(t.label),null==settings[o]&&(settings[o]=t.default),t.type){case Setting.Types.Toggle:d=jQuery(document.createElement("button")),settings[o]?d.addClass("enabled").text(L10n.get("settingsOn")):d.text(L10n.get("settingsOff")),d.ariaClick(function(){settings[o]?(jQuery(this).removeClass("enabled").text(L10n.get("settingsOff")),settings[o]=!1):(jQuery(this).addClass("enabled").text(L10n.get("settingsOn")),settings[o]=!0),Setting.save(),t.hasOwnProperty("onChange")&&t.onChange.call({name:o,value:settings[o],default:t.default})});break;case Setting.Types.List:d=jQuery(document.createElement("select"));for(var f=0,p=t.list.length;f<p;++f)jQuery(document.createElement("option")).val(f).text(t.list[f]).appendTo(d);d.val(t.list.indexOf(settings[o])).attr("tabindex",0).on("change",function(){settings[o]=t.list[Number(this.value)],Setting.save(),t.hasOwnProperty("onChange")&&t.onChange.call({name:o,value:settings[o],default:t.default,list:t.list})});break;case Setting.Types.Range:d=jQuery(document.createElement("input")),d.attr({type:"range",min:t.min,max:t.max,step:t.step,value:settings[o],tabindex:0}).on("change input",function(){settings[o]=Number(this.value),Setting.save(),t.hasOwnProperty("onChange")&&t.onChange.call({name:o,value:settings[o],default:t.default,min:t.min,max:t.max,step:t.step})}).on("keypress",function(e){13===e.which&&(e.preventDefault(),d.trigger("change"))})}d.attr("id","setting-control-"+s).appendTo(c),u.attr("id","setting-body-"+s).appendTo(e)}),e.append('<ul class="buttons"><li><button id="settings-ok" class="ui-close">'+L10n.get(["settingsOk","ok"])+'</button></li><li><button id="settings-reset">'+L10n.get("settingsReset")+"</button></li></ul>").find("#settings-reset").ariaClick({one:!0},function(){jQuery(document).one(":dialogclosed",function(){Setting.reset(),window.location.reload()}),Dialog.close()}),!0}function f(){try{jQuery(Dialog.setup(L10n.get("shareTitle"),"share list")).append(e("StoryShare"))}catch(e){return console.error(e),Alert.error("StoryShare",e.message),!1}return!0}return Object.freeze(Object.defineProperties({},{assembleLinkList:{value:e},alert:{value:t},jumpto:{value:r},restart:{value:n},saves:{value:a},settings:{value:i},share:{value:o},buildAutoload:{value:s},buildJumpto:{value:u},buildRestart:{value:l},buildSaves:{value:c},buildSettings:{value:d},buildShare:{value:f},stow:{value:function(){return UIBar.stow()}},unstow:{value:function(){return UIBar.unstow()}},setStoryElements:{value:function(){return UIBar.update()}},isOpen:{value:function(){return Dialog.isOpen.apply(Dialog,arguments)}},body:{value:function(){return Dialog.body()}},setup:{value:function(){return Dialog.setup.apply(Dialog,arguments)}},addClickHandler:{value:function(){return Dialog.addClickHandler.apply(Dialog,arguments)}},open:{value:function(){return Dialog.open.apply(Dialog,arguments)}},close:{value:function(){return Dialog.close.apply(Dialog,arguments)}},resize:{value:function(){return Dialog.resize()}},buildDialogAutoload:{value:s},buildDialogJumpto:{value:u},buildDialogRestart:{value:l},buildDialogSaves:{value:c},buildDialogSettings:{value:d},buildDialogShare:{value:f},buildLinkListFromPassage:{value:e}}))}(),UIBar=function(){function e(){c&&(c.hide(),jQuery(document).off(".ui-bar"),jQuery(document.head).find("#style-ui-bar").remove(),c.remove(),c=null)}function t(){return c&&c.hide(),this}function r(){if(!document.getElementById("ui-bar")){var e=function(){var e=L10n.get("uiBarToggle"),t=L10n.get("uiBarBackward"),r=L10n.get("uiBarJumpto"),n=L10n.get("uiBarForward");return jQuery(document.createDocumentFragment()).append('<div id="ui-bar"><div id="ui-bar-tray"><button id="ui-bar-toggle" tabindex="0" title="'+e+'" aria-label="'+e+'"></button><div id="ui-bar-history"><button id="history-backward" tabindex="0" title="'+t+'" aria-label="'+t+'"></button><button id="history-jumpto" tabindex="0" title="'+r+'" aria-label="'+r+'"></button><button id="history-forward" tabindex="0" title="'+n+'" aria-label="'+n+'"></button></div></div><div id="ui-bar-body"><header id="title" role="banner"><div id="story-banner"></div><h1 id="story-title"></h1><div id="story-subtitle"></div><div id="story-title-separator"></div><p id="story-author"></p></header><div id="story-caption"></div><nav id="menu" role="navigation"><ul id="menu-story"></ul><ul id="menu-core"><li id="menu-item-saves"><a tabindex="0">'+L10n.get("savesTitle")+'</a></li><li id="menu-item-settings"><a tabindex="0">'+L10n.get("settingsTitle")+'</a></li><li id="menu-item-restart"><a tabindex="0">'+L10n.get("restartTitle")+'</a></li><li id="menu-item-share"><a tabindex="0">'+L10n.get("shareTitle")+"</a></li></ul></nav></div></div>")}();c=jQuery(e.find("#ui-bar").get(0)),e.insertBefore("body>script#script-sugarcube"),jQuery(document).on(":historyupdate.ui-bar",function(e,t){return function(){e.ariaDisabled(State.length<2),t.ariaDisabled(State.length===State.size)}}(jQuery("#history-backward"),jQuery("#history-forward")))}}function n(){return c&&"none"===c.css("display")}function a(){return c&&c.hasClass("stowed")}function i(){return c&&c.show(),this}function o(){c&&(("boolean"==typeof Config.ui.stowBarInitially?Config.ui.stowBarInitially:jQuery(window).width()<=Config.ui.stowBarInitially)&&s(!0),jQuery("#ui-bar-toggle").ariaClick({label:L10n.get("uiBarToggle")},function(){return c.toggleClass("stowed")}),Config.history.controls?(jQuery("#history-backward").ariaDisabled(State.length<2).ariaClick({label:L10n.get("uiBarBackward")},function(){return Engine.backward()}),Story.lookup("tags","bookmark").length>0?jQuery("#history-jumpto").ariaClick({label:L10n.get("uiBarJumpto")},function(){return UI.jumpto()}):jQuery("#history-jumpto").remove(),jQuery("#history-forward").ariaDisabled(State.length===State.size).ariaClick({label:L10n.get("uiBarForward")},function(){return Engine.forward()})):jQuery("#ui-bar-history").remove(),Story.has("StoryDisplayTitle")?setDisplayTitle(Story.get("StoryDisplayTitle").processText()):jQuery("#story-title").text(Story.title),Story.has("StoryCaption")||jQuery("#story-caption").remove(),Story.has("StoryMenu")||jQuery("#menu-story").remove(),Config.ui.updateStoryElements||l(),jQuery("#menu-item-saves a").ariaClick(function(e){e.preventDefault(),UI.buildSaves(),Dialog.open()}).text(L10n.get("savesTitle")),Setting.isEmpty()?jQuery("#menu-item-settings").remove():jQuery("#menu-item-settings a").ariaClick(function(e){e.preventDefault(),UI.buildSettings(),Dialog.open()}).text(L10n.get("settingsTitle")),jQuery("#menu-item-restart a").ariaClick(function(e){e.preventDefault(),UI.buildRestart(),Dialog.open()}).text(L10n.get("restartTitle")),Story.has("StoryShare")?jQuery("#menu-item-share a").ariaClick(function(e){e.preventDefault(),UI.buildShare(),Dialog.open()}).text(L10n.get("shareTitle")):jQuery("#menu-item-share").remove())}function s(e){if(c&&!c.hasClass("stowed")){var t=void 0;e&&(t=jQuery("#story"),t.addClass("no-transition"),c.addClass("no-transition")),c.addClass("stowed"),e&&setTimeout(function(){t.removeClass("no-transition"),c.removeClass("no-transition")},Engine.minDomActionDelay)}return this}function u(e){if(c&&c.hasClass("stowed")){var t=void 0;e&&(t=jQuery("#story"),t.addClass("no-transition"),c.addClass("no-transition")),c.removeClass("stowed"),e&&setTimeout(function(){t.removeClass("no-transition"),c.removeClass("no-transition")},Engine.minDomActionDelay)}return this}function l(){if(c){setPageElement("story-banner","StoryBanner"),Story.has("StoryDisplayTitle")&&setDisplayTitle(Story.get("StoryDisplayTitle").processText()),setPageElement("story-subtitle","StorySubtitle"),setPageElement("story-author","StoryAuthor"),setPageElement("story-caption","StoryCaption");var e=document.getElementById("menu-story");if(null!==e&&(jQuery(e).empty(),Story.has("StoryMenu")))try{UI.assembleLinkList("StoryMenu",e)}catch(e){console.error(e),Alert.error("StoryMenu",e.message)}}}var c=null;return Object.freeze(Object.defineProperties({},{destroy:{value:e},hide:{value:t},init:{value:r},isHidden:{value:n},isStowed:{value:a},show:{value:i},start:{value:o},stow:{value:s},unstow:{value:u},update:{value:l},setStoryElements:{value:l}}))}(),DebugBar=function(){function e(){var e=L10n.get("debugBarToggle"),t=L10n.get("debugBarAddWatch"),r=L10n.get("debugBarWatchAll"),n=L10n.get("debugBarWatchNone"),a=L10n.get("debugBarWatchToggle"),l=L10n.get("debugBarViewsToggle");jQuery(document.createDocumentFragment()).append('<div id="debug-bar"><div id="debug-bar-watch"><div>'+L10n.get("debugBarNoWatches")+'</div>></div><div><button id="debug-bar-watch-toggle" tabindex="0" title="'+a+'" aria-label="'+a+'">'+L10n.get("debugBarLabelWatch")+'</button><label id="debug-bar-watch-label" for="debug-bar-watch-input">'+L10n.get("debugBarLabelAdd")+'</label><input id="debug-bar-watch-input" name="debug-bar-watch-input" type="text" list="debug-bar-watch-list" tabindex="0"><datalist id="debug-bar-watch-list" aria-hidden="true" hidden="hidden"></datalist><button id="debug-bar-watch-add" tabindex="0" title="'+t+'" aria-label="'+t+'"></button><button id="debug-bar-watch-all" tabindex="0" title="'+r+'" aria-label="'+r+'"></button><button id="debug-bar-watch-none" tabindex="0" title="'+n+'" aria-label="'+n+'"></button></div><div><button id="debug-bar-views-toggle" tabindex="0" title="'+l+'" aria-label="'+l+'">'+L10n.get("debugBarLabelViews")+'</button><label id="debug-bar-turn-label" for="debug-bar-turn-select">'+L10n.get("debugBarLabelTurn")+'</label><select id="debug-bar-turn-select" tabindex="0"></select></div><button id="debug-bar-toggle" tabindex="0" title="'+e+'" aria-label="'+e+'"></button></div><div id="debug-bar-hint"></div>').appendTo("body"),P=jQuery("#debug-bar"),_=jQuery(P.find("#debug-bar-watch").get(0)),N=jQuery(P.find("#debug-bar-watch-list").get(0)),I=jQuery(P.find("#debug-bar-turn-select").get(0));var c=jQuery(P.find("#debug-bar-toggle").get(0)),d=jQuery(P.find("#debug-bar-watch-toggle").get(0)),f=jQuery(P.find("#debug-bar-watch-input").get(0)),h=jQuery(P.find("#debug-bar-watch-add").get(0)),g=jQuery(P.find("#debug-bar-watch-all").get(0)),m=jQuery(P.find("#debug-bar-watch-none").get(0)),v=jQuery(P.find("#debug-bar-views-toggle").get(0));c.ariaClick(i),d.ariaClick(p),f.on(":addwatch",function(){o(this.value.trim()),this.value=""}).on("keypress",function(e){13===e.which&&(e.preventDefault(),f.trigger(":addwatch"))}),h.ariaClick(function(){return f.trigger(":addwatch")}),g.ariaClick(s),m.ariaClick(u),I.on("change",function(){Engine.goTo(Number(this.value))}),v.ariaClick(function(){DebugView.toggle(),k()}),jQuery(document).on(":historyupdate.debug-bar",x).on(":passageend.debug-bar",function(){E(),j()}).on(":enginerestart.debug-bar",y),b()||DebugView.enable()}function t(){w(),S(),x(),E(),j()}function r(){return D}function n(){h(),D=!0,k()}function a(){g(),D=!1,k()}function i(){D?a():n()}function o(e){T.test(e)&&(A.pushUnique(e),A.sort(),E(),j(),k())}function s(){Object.keys(State.variables).map(function(e){return A.pushUnique("$"+e)}),Object.keys(State.temporary).map(function(e){return A.pushUnique("_"+e)}),A.sort(),E(),j(),k()}function u(){for(var e=A.length-1;e>=0;--e)A.pop();E(),j(),k()}function l(e){A.delete(e),E(),j(),k()}function c(){m(),k()}function d(){v(),k()}function f(){return!_.attr("hidden")}function p(){_.attr("hidden")?d():c()}function h(){P.css("right","-"+P.outerWidth()+"px")}function g(){P.css("right",0)}function m(){_.attr({"aria-hidden":!0,hidden:"hidden"})}function v(){_.removeAttr("aria-hidden hidden")}function y(){session.delete("debugState")}function b(){return session.has("debugState")}function w(){if(!b())return!1;var e=session.get("debugState");return D=e.stowed,A.push.apply(A,_toConsumableArray(e.watchList)),e.watchEnabled?v():m(),e.viewsEnabled?DebugView.enable():DebugView.disable(),!0}function k(){session.set("debugState",{stowed:D,watchList:A,watchEnabled:f(),viewsEnabled:DebugView.isEnabled()})}function S(){D?n():a()}function E(){if(0===A.length)return void _.empty().append("<div>"+L10n.get("debugBarNoWatches")+"</div>");for(var e=L10n.get("debugBarDeleteWatch"),t=jQuery(document.createElement("table")),r=jQuery(document.createElement("tbody")),n=0,a=A.length;n<a;++n)!function(t,n){var a=A[t],i=a.slice(1),o="$"===a[0]?State.variables:State.temporary,s=jQuery(document.createElement("tr")),u=jQuery(document.createElement("button")),c=jQuery(document.createElement("code"));u.addClass("watch-delete").attr("data-name",a).ariaClick({one:!0,label:e},function(){return l(a)}),c.text(O(o[i])),jQuery(document.createElement("td")).append(u).appendTo(s),jQuery(document.createElement("td")).text(a).appendTo(s),jQuery(document.createElement("td")).append(c).appendTo(s),s.appendTo(r)}(n);t.append(r),_.empty().append(t)}function j(){var e=Object.keys(State.variables),t=Object.keys(State.temporary);if(0===e.length&&0===t.length)return void N.empty();var r=[].concat(_toConsumableArray(e.map(function(e){return"$"+e})),_toConsumableArray(t.map(function(e){return"_"+e}))).sort(),n=document.createDocumentFragment();r.delete(A);for(var a=0,i=r.length;a<i;++a)jQuery(document.createElement("option")).val(r[a]).appendTo(n);N.empty().append(n)}function x(){for(var e=State.size,t=State.expired.length,r=document.createDocumentFragment(),n=0;n<e;++n)jQuery(document.createElement("option")).val(n).text(t+n+1+". "+Util.escape(State.history[n].title)).appendTo(r);I.empty().ariaDisabled(e<2).append(r).val(State.activeIndex)}function O(e){if(null===e)return"null";switch(void 0===e?"undefined":_typeof(e)){case"number":if(Number.isNaN(e))return"NaN";if(!Number.isFinite(e))return"Infinity";case"boolean":case"symbol":case"undefined":return String(e);case"string":return JSON.stringify(e);case"function":return"Function"}var t=Util.toStringTag(e);if("Date"===t)return"Date {"+e.toLocaleString()+"}";if("RegExp"===t)return"RegExp "+e.toString();var r=[];if(e instanceof Array||e instanceof Set){for(var n=e instanceof Array?e:Array.from(e),a=0,i=n.length;a<i;++a)r.push(n.hasOwnProperty(a)?O(n[a]):"<empty>");return Object.keys(n).filter(function(e){return!C.test(e)}).forEach(function(e){return r.push(O(e)+": "+O(n[e]))}),t+"("+n.length+") ["+r.join(", ")+"]"}return e instanceof Map?(e.forEach(function(e,t){return r.push(O(t)+" → "+O(e))}),t+"("+e.size+") {"+r.join(", ")+"}"):(Object.keys(e).forEach(function(t){return r.push(O(t)+": "+O(e[t]))}),t+" {"+r.join(", ")+"}")}var T=new RegExp("^"+Patterns.variable+"$"),C=/^\d+$/,A=[],P=null,_=null,N=null,I=null,D=!0;return Object.freeze(Object.defineProperties({},{init:{value:e},isStowed:{value:r},start:{value:t},stow:{value:n},toggle:{value:i},unstow:{value:a},watch:{value:Object.freeze(Object.defineProperties({},{add:{value:o},all:{value:s},clear:{value:u},delete:{value:l},disable:{value:c},enable:{value:d},isEnabled:{value:f},toggle:{value:p}}))}}))}(),LoadScreen=function(){function e(){jQuery(document).on("readystatechange.SugarCube",function(){o.size>0||("complete"===document.readyState?"loading"===jQuery(document.documentElement).attr("data-init")&&(Config.loadDelay>0?setTimeout(function(){0===o.size&&r()},Math.max(Engine.minDomActionDelay,Config.loadDelay)):r()):n())})}function t(){jQuery(document).off("readystatechange.SugarCube"),o.clear(),r()}function r(){jQuery(document.documentElement).removeAttr("data-init")}function n(){jQuery(document.documentElement).attr("data-init","loading")}function a(){return++s,o.add(s),n(),s}function i(e){if(null==e)throw new Error("LoadScreen.unlock called with a null or undefined ID");o.has(e)&&o.delete(e),0===o.size&&jQuery(document).trigger("readystatechange")}var o=new Set,s=0;return Object.freeze(Object.defineProperties({},{init:{value:e},clear:{value:t},hide:{value:r},show:{value:n},lock:{value:a},unlock:{value:i}}))}(),version=Object.freeze({title:"SugarCube",major:2,minor:31,patch:1,prerelease:null,build:9281,date:new Date("2020-04-06T21:22:52.785Z"),extensions:{},toString:function(){var e=this.prerelease?"-"+this.prerelease:"";return this.major+"."+this.minor+"."+this.patch+e+"+"+this.build},short:function(){var e=this.prerelease?"-"+this.prerelease:"";return this.title+" (v"+this.major+"."+this.minor+"."+this.patch+e+")"},long:function(){return this.title+" v"+this.toString()+" ("+this.date.toUTCString()+")"}}),TempState={},macros={},postdisplay={},postrender={},predisplay={},prehistory={},prerender={},session=null,settings={},setup={},storage=null,browser=Browser,config=Config,has=Has,History=State,state=State,tale=Story,TempVariables=State.temporary;window.SugarCube={},jQuery(function(){try{var e=LoadScreen.lock();LoadScreen.init(),document.normalize&&document.normalize(),Story.load(),storage=SimpleStore.create(Story.domId,!0),session=SimpleStore.create(Story.domId,!1),Dialog.init(),UIBar.init(),
Engine.init(),Story.init(),L10n.init(),session.has("rcWarn")||"cookie"!==storage.name||(session.set("rcWarn",1),window.alert(L10n.get("warningNoWebStorage"))),Save.init(),Setting.init(),Macro.init(),Engine.start(),Config.debug&&DebugBar.init();var t=$(window),r=setInterval(function(){t.width()&&(clearInterval(r),UIBar.start(),Config.debug&&DebugBar.start(),jQuery.event.trigger({type:":storyready"}),setTimeout(function(){return LoadScreen.unlock(e)},2*Engine.minDomActionDelay))},Engine.minDomActionDelay);Object.defineProperty(window,"SugarCube",{value:Object.seal(Object.assign(Object.create(null),{Browser:Browser,Config:Config,Dialog:Dialog,Engine:Engine,Fullscreen:Fullscreen,Has:Has,L10n:L10n,Macro:Macro,Passage:Passage,Save:Save,Scripting:Scripting,Setting:Setting,SimpleAudio:SimpleAudio,State:State,Story:Story,UI:UI,UIBar:UIBar,DebugBar:DebugBar,Util:Util,Visibility:Visibility,Wikifier:Wikifier,session:session,settings:settings,setup:setup,storage:storage,version:version}))})}catch(e){return console.error(e),LoadScreen.clear(),Alert.fatal(null,e.message,e)}})}(window,window.document,jQuery);}
	</script>
</body>
</html>
